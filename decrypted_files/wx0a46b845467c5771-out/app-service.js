	var __wxAppData = __wxAppData || {}; 	var __wxRoute = __wxRoute || ""; 	var __wxRouteBegin = __wxRouteBegin || ""; 	var __wxAppCode__ = __wxAppCode__ || {};	var global = global || {};	var __WXML_GLOBAL__=__WXML_GLOBAL__ || {};	var __wxAppCurrentFile__=__wxAppCurrentFile__||""; 	var Component = Component || function(){};	var definePlugin = definePlugin || function(){};	var requirePlugin = requirePlugin || function(){};	var Behavior = Behavior || function(){};
	/*v0.5vv_20180905_syb_scopedata*/global.__wcc_version__='v0.5vv_20180905_syb_scopedata';global.__wcc_version_info__={"customComponents":true,"fixZeroRpx":true,"propValueDeepCopy":false};
var $gwxc
var $gaic={}
$gwx=function(path,global){
if(typeof global === 'undefined') global={};if(typeof __WXML_GLOBAL__ === 'undefined') {__WXML_GLOBAL__={};
}function _(a,b){if(typeof(b)!='undefined')a.children.push(b);}
function _v(k){if(typeof(k)!='undefined')return {tag:'virtual','wxKey':k,children:[]};return {tag:'virtual',children:[]};}
function _n(tag){$gwxc++;if($gwxc>=16000){throw 'Dom limit exceeded, please check if there\'s any mistake you\'ve made.'};return {tag:'wx-'+tag,attr:{},children:[],n:[],raw:{},generics:{}}}
function _p(a,b){b&&a.properities.push(b);}
function _s(scope,env,key){return typeof(scope[key])!='undefined'?scope[key]:env[key]}
function _wp(m){console.warn("WXMLRT_$gwx:"+m)}
function _wl(tname,prefix){_wp(prefix+':-1:-1:-1: Template `' + tname + '` is being called recursively, will be stop.')}
$gwn=console.warn;
$gwl=console.log;
function $gwh()
{
function x()
{
}
x.prototype = 
{
hn: function( obj, all )
{
if( typeof(obj) == 'object' )
{
var cnt=0;
var any1=false,any2=false;
for(var x in obj)
{
any1=any1|x==='__value__';
any2=any2|x==='__wxspec__';
cnt++;
if(cnt>2)break;
}
return cnt == 2 && any1 && any2 && ( all || obj.__wxspec__ !== 'm' || this.hn(obj.__value__) === 'h' ) ? "h" : "n";
}
return "n";
},
nh: function( obj, special )
{
return { __value__: obj, __wxspec__: special ? special : true }
},
rv: function( obj )
{
return this.hn(obj,true)==='n'?obj:this.rv(obj.__value__);
},
hm: function( obj )
{
if( typeof(obj) == 'object' )
{
var cnt=0;
var any1=false,any2=false;
for(var x in obj)
{
any1=any1|x==='__value__';
any2=any2|x==='__wxspec__';
cnt++;
if(cnt>2)break;
}
return cnt == 2 && any1 && any2 && (obj.__wxspec__ === 'm' || this.hm(obj.__value__) );
}
return false;
}
}
return new x;
}
wh=$gwh();
function $gstack(s){
var tmp=s.split('\n '+' '+' '+' ');
for(var i=0;i<tmp.length;++i){
if(0==i) continue;
if(")"===tmp[i][tmp[i].length-1])
tmp[i]=tmp[i].replace(/\s\(.*\)$/,"");
else
tmp[i]="at anonymous function";
}
return tmp.join('\n '+' '+' '+' ');
}
function $gwrt( should_pass_type_info )
{
function ArithmeticEv( ops, e, s, g, o )
{
var _f = false;
var rop = ops[0][1];
var _a,_b,_c,_d, _aa, _bb;
switch( rop )
{
case '?:':
_a = rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && ( wh.hn(_a) === 'h' );
_d = wh.rv( _a ) ? rev( ops[2], e, s, g, o, _f ) : rev( ops[3], e, s, g, o, _f );
_d = _c && wh.hn( _d ) === 'n' ? wh.nh( _d, 'c' ) : _d;
return _d;
break;
case '&&':
_a = rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && ( wh.hn(_a) === 'h' );
_d = wh.rv( _a ) ? rev( ops[2], e, s, g, o, _f ) : wh.rv( _a );
_d = _c && wh.hn( _d ) === 'n' ? wh.nh( _d, 'c' ) : _d;
return _d;
break;
case '||':
_a = rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && ( wh.hn(_a) === 'h' );
_d = wh.rv( _a ) ? wh.rv(_a) : rev( ops[2], e, s, g, o, _f );
_d = _c && wh.hn( _d ) === 'n' ? wh.nh( _d, 'c' ) : _d;
return _d;
break;
case '+':
case '*':
case '/':
case '%':
case '|':
case '^':
case '&':
case '===':
case '==':
case '!=':
case '!==':
case '>=':
case '<=':
case '>':
case '<':
case '<<':
case '>>':
_a = rev( ops[1], e, s, g, o, _f );
_b = rev( ops[2], e, s, g, o, _f );
_c = should_pass_type_info && (wh.hn( _a ) === 'h' || wh.hn( _b ) === 'h');
switch( rop )
{
case '+':
_d = wh.rv( _a ) + wh.rv( _b );
break;
case '*':
_d = wh.rv( _a ) * wh.rv( _b );
break;
case '/':
_d = wh.rv( _a ) / wh.rv( _b );
break;
case '%':
_d = wh.rv( _a ) % wh.rv( _b );
break;
case '|':
_d = wh.rv( _a ) | wh.rv( _b );
break;
case '^':
_d = wh.rv( _a ) ^ wh.rv( _b );
break;
case '&':
_d = wh.rv( _a ) & wh.rv( _b );
break;
case '===':
_d = wh.rv( _a ) === wh.rv( _b );
break;
case '==':
_d = wh.rv( _a ) == wh.rv( _b );
break;
case '!=':
_d = wh.rv( _a ) != wh.rv( _b );
break;
case '!==':
_d = wh.rv( _a ) !== wh.rv( _b );
break;
case '>=':
_d = wh.rv( _a ) >= wh.rv( _b );
break;
case '<=':
_d = wh.rv( _a ) <= wh.rv( _b );
break;
case '>':
_d = wh.rv( _a ) > wh.rv( _b );
break;
case '<':
_d = wh.rv( _a ) < wh.rv( _b );
break;
case '<<':
_d = wh.rv( _a ) << wh.rv( _b );
break;
case '>>':
_d = wh.rv( _a ) >> wh.rv( _b );
break;
default:
break;
}
return _c ? wh.nh( _d, "c" ) : _d;
break;
case '-':
_a = ops.length === 3 ? rev( ops[1], e, s, g, o, _f ) : 0;
_b = ops.length === 3 ? rev( ops[2], e, s, g, o, _f ) : rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && (wh.hn( _a ) === 'h' || wh.hn( _b ) === 'h');
_d = _c ? wh.rv( _a ) - wh.rv( _b ) : _a - _b;
return _c ? wh.nh( _d, "c" ) : _d;
break;
case '!':
_a = rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && (wh.hn( _a ) == 'h');
_d = !wh.rv(_a);
return _c ? wh.nh( _d, "c" ) : _d;
case '~':
_a = rev( ops[1], e, s, g, o, _f );
_c = should_pass_type_info && (wh.hn( _a ) == 'h');
_d = ~wh.rv(_a);
return _c ? wh.nh( _d, "c" ) : _d;
default:
$gwn('unrecognized op' + rop );
}
}
function rev( ops, e, s, g, o, newap )
{
var op = ops[0];
var _f = false;
if ( typeof newap !== "undefined" ) o.ap = newap;
if( typeof(op)==='object' )
{
var vop=op[0];
var _a, _aa, _b, _bb, _c, _d, _s, _e, _ta, _tb, _td;
switch(vop)
{
case 2:
return ArithmeticEv(ops,e,s,g,o);
break;
case 4: 
return rev( ops[1], e, s, g, o, _f );
break;
case 5: 
switch( ops.length )
{
case 2: 
_a = rev( ops[1],e,s,g,o,_f );
return should_pass_type_info?[_a]:[wh.rv(_a)];
return [_a];
break;
case 1: 
return [];
break;
default:
_a = rev( ops[1],e,s,g,o,_f );
_b = rev( ops[2],e,s,g,o,_f );
_a.push( 
should_pass_type_info ?
_b :
wh.rv( _b )
);
return _a;
break;
}
break;
case 6:
_a = rev(ops[1],e,s,g,o);
var ap = o.ap;
_ta = wh.hn(_a)==='h';
_aa = _ta ? wh.rv(_a) : _a;
o.is_affected |= _ta;
if( should_pass_type_info )
{
if( _aa===null || typeof(_aa) === 'undefined' )
{
return _ta ? wh.nh(undefined, 'e') : undefined;
}
_b = rev(ops[2],e,s,g,o,_f);
_tb = wh.hn(_b) === 'h';
_bb = _tb ? wh.rv(_b) : _b;
o.ap = ap;
o.is_affected |= _tb;
if( _bb===null || typeof(_bb) === 'undefined' || 
_bb === "__proto__" || _bb === "prototype" || _bb === "caller" ) 
{
return (_ta || _tb) ? wh.nh(undefined, 'e') : undefined;
}
_d = _aa[_bb];
if ( typeof _d === 'function' && !ap ) _d = undefined;
_td = wh.hn(_d)==='h';
o.is_affected |= _td;
return (_ta || _tb) ? (_td ? _d : wh.nh(_d, 'e')) : _d;
}
else
{
if( _aa===null || typeof(_aa) === 'undefined' )
{
return undefined;
}
_b = rev(ops[2],e,s,g,o,_f);
_tb = wh.hn(_b) === 'h';
_bb = _tb ? wh.rv(_b) : _b;
o.ap = ap;
o.is_affected |= _tb;
if( _bb===null || typeof(_bb) === 'undefined' || 
_bb === "__proto__" || _bb === "prototype" || _bb === "caller" ) 
{
return undefined;
}
_d = _aa[_bb];
if ( typeof _d === 'function' && !ap ) _d = undefined;
_td = wh.hn(_d)==='h';
o.is_affected |= _td;
return _td ? wh.rv(_d) : _d;
}
case 7: 
switch(ops[1][0])
{
case 11:
o.is_affected |= wh.hn(g)==='h';
return g;
case 3:
_s = wh.rv( s );
_e = wh.rv( e );
_b = ops[1][1];
if (g && g.f && g.f.hasOwnProperty(_b) )
{
_a = g.f;
o.ap = true;
}
else
{
_a = _s && _s.hasOwnProperty(_b) ? 
s : (_e && _e.hasOwnProperty(_b) ? e : undefined );
}
if( should_pass_type_info )
{
if( _a )
{
_ta = wh.hn(_a) === 'h';
_aa = _ta ? wh.rv( _a ) : _a;
_d = _aa[_b];
_td = wh.hn(_d) === 'h';
o.is_affected |= _ta || _td;
_d = _ta && !_td ? wh.nh(_d,'e') : _d;
return _d;
}
}
else
{
if( _a )
{
_ta = wh.hn(_a) === 'h';
_aa = _ta ? wh.rv( _a ) : _a;
_d = _aa[_b];
_td = wh.hn(_d) === 'h';
o.is_affected |= _ta || _td;
return wh.rv(_d);
}
}
return undefined;
}
break;
case 8: 
_a = {};
_a[ops[1]] = rev(ops[2],e,s,g,o,_f);
return _a;
break;
case 9: 
_a = rev(ops[1],e,s,g,o,_f);
_b = rev(ops[2],e,s,g,o,_f);
function merge( _a, _b, _ow )
{
var ka, _bbk;
_ta = wh.hn(_a)==='h';
_tb = wh.hn(_b)==='h';
_aa = wh.rv(_a);
_bb = wh.rv(_b);
for(var k in _bb)
{
if ( _ow || !_aa.hasOwnProperty(k) )
{
_aa[k] = should_pass_type_info ? (_tb ? wh.nh(_bb[k],'e') : _bb[k]) : wh.rv(_bb[k]);
}
}
return _a;
}
var _c = _a
var _ow = true
if ( typeof(ops[1][0]) === "object" && ops[1][0][0] === 10 ) {
_a = _b
_b = _c
_ow = false
}
if ( typeof(ops[1][0]) === "object" && ops[1][0][0] === 10 ) {
var _r = {}
return merge( merge( _r, _a, _ow ), _b, _ow );
}
else
return merge( _a, _b, _ow );
break;
case 10:
_a = rev(ops[1],e,s,g,o,_f);
_a = should_pass_type_info ? _a : wh.rv( _a );
return _a ;
break;
case 12:
var _r;
_a = rev(ops[1],e,s,g,o);
if ( !o.ap )
{
return should_pass_type_info && wh.hn(_a)==='h' ? wh.nh( _r, 'f' ) : _r;
}
var ap = o.ap;
_b = rev(ops[2],e,s,g,o,_f);
o.ap = ap;
_ta = wh.hn(_a)==='h';
_tb = _ca(_b);
_aa = wh.rv(_a);	
_bb = wh.rv(_b); snap_bb=$gdc(_bb,"nv_");
try{
_r = typeof _aa === "function" ? $gdc(_aa.apply(null, snap_bb)) : undefined;
} catch (e){
e.message = e.message.replace(/nv_/g,"");
e.stack = e.stack.substring(0,e.stack.indexOf("\n", e.stack.lastIndexOf("at nv_")));
e.stack = e.stack.replace(/\snv_/g," "); 
e.stack = $gstack(e.stack);	
if(g.debugInfo)
e.stack += "\n "+" "+" "+" at "+g.debugInfo[0]+":"+g.debugInfo[1]+":"+g.debugInfo[2];
throw e;
}
return should_pass_type_info && (_tb || _ta) ? wh.nh( _r, 'f' ) : _r;
}
}
else
{
if( op === 3 || op === 1) return ops[1];
else if( op === 11 ) 
{
var _a='';
for( var i = 1 ; i < ops.length ; i++ )
{
var xp = wh.rv(rev(ops[i],e,s,g,o,_f));
_a += typeof(xp) === 'undefined' ? '' : xp;
}
return _a;
}
}
}
function wrapper( ops, e, s, g, o, newap )
{
if( ops[0] == '11182016' )
{
g.debugInfo = ops[2];
return rev( ops[1], e, s, g, o, newap );
}
else
{
g.debugInfo = null;
return rev( ops, e, s, g, o, newap );
}
}
return wrapper;
}
gra=$gwrt(true); 
grb=$gwrt(false); 
function TestTest( expr, ops, e,s,g, expect_a, expect_b, expect_affected )
{
{
var o = {is_affected:false};
var a = gra( ops, e,s,g, o );
if( JSON.stringify(a) != JSON.stringify( expect_a )
|| o.is_affected != expect_affected )
{
console.warn( "A. " + expr + " get result " + JSON.stringify(a) + ", " + o.is_affected + ", but " + JSON.stringify( expect_a ) + ", " + expect_affected + " is expected" );
}
}
{
var o = {is_affected:false};
var a = grb( ops, e,s,g, o );
if( JSON.stringify(a) != JSON.stringify( expect_b )
|| o.is_affected != expect_affected )
{
console.warn( "B. " + expr + " get result " + JSON.stringify(a) + ", " + o.is_affected + ", but " + JSON.stringify( expect_b ) + ", " + expect_affected + " is expected" );
}
}
}

function wfor( to_iter, func, env, _s, global, father, itemname, indexname, keyname )
{
var _n = wh.hn( to_iter ) === 'n'; 
var scope = wh.rv( _s ); 
var has_old_item = scope.hasOwnProperty(itemname);
var has_old_index = scope.hasOwnProperty(indexname);
var old_item = scope[itemname];
var old_index = scope[indexname];
var full = Object.prototype.toString.call(wh.rv(to_iter));
var type = full[8]; 
if( type === 'N' && full[10] === 'l' ) type = 'X'; 
var _y;
if( _n )
{
if( type === 'A' ) 
{
var r_iter_item;
for( var i = 0 ; i < to_iter.length ; i++ )
{
scope[itemname] = to_iter[i];
scope[indexname] = _n ? i : wh.nh(i, 'h');
r_iter_item = wh.rv(to_iter[i]);
var key = keyname && r_iter_item ? (keyname==="*this" ? r_iter_item : wh.rv(r_iter_item[keyname])) : undefined;
_y = _v(key);
_(father,_y);
func( env, scope, _y, global );
}
}
else if( type === 'O' ) 
{
var i = 0;
var r_iter_item;
for( var k in to_iter )
{
scope[itemname] = to_iter[k];
scope[indexname] = _n ? k : wh.nh(k, 'h');
r_iter_item = wh.rv(to_iter[k]);
var key = keyname && r_iter_item ? (keyname==="*this" ? r_iter_item : wh.rv(r_iter_item[keyname])) : undefined;
_y = _v(key);
_(father,_y);
func( env,scope,_y,global );
i++;
}
}
else if( type === 'S' ) 
{
for( var i = 0 ; i < to_iter.length ; i++ )
{
scope[itemname] = to_iter[i];
scope[indexname] = _n ? i : wh.nh(i, 'h');
_y = _v( to_iter[i] + i );
_(father,_y);
func( env,scope,_y,global );
}
}
else if( type === 'N' ) 
{
for( var i = 0 ; i < to_iter ; i++ )
{
scope[itemname] = i;
scope[indexname] = _n ? i : wh.nh(i, 'h');
_y = _v( i );
_(father,_y);
func(env,scope,_y,global);
}
}
else
{
}
}
else
{
var r_to_iter = wh.rv(to_iter);
var r_iter_item, iter_item;
if( type === 'A' ) 
{
for( var i = 0 ; i < r_to_iter.length ; i++ )
{
iter_item = r_to_iter[i];
iter_item = wh.hn(iter_item)==='n' ? wh.nh(iter_item,'h') : iter_item;
r_iter_item = wh.rv( iter_item );
scope[itemname] = iter_item
scope[indexname] = _n ? i : wh.nh(i, 'h');
var key = keyname && r_iter_item ? (keyname==="*this" ? r_iter_item : wh.rv(r_iter_item[keyname])) : undefined;
_y = _v(key);
_(father,_y);
func( env, scope, _y, global );
}
}
else if( type === 'O' ) 
{
var i=0;
for( var k in r_to_iter )
{
iter_item = r_to_iter[k];
iter_item = wh.hn(iter_item)==='n'? wh.nh(iter_item,'h') : iter_item;
r_iter_item = wh.rv( iter_item );
scope[itemname] = iter_item;
scope[indexname] = _n ? k : wh.nh(k, 'h');
var key = keyname && r_iter_item ? (keyname==="*this" ? r_iter_item : wh.rv(r_iter_item[keyname])) : undefined;
_y=_v(key);
_(father,_y);
func( env, scope, _y, global );
i++
}
}
else if( type === 'S' ) 
{
for( var i = 0 ; i < r_to_iter.length ; i++ )
{
iter_item = wh.nh(r_to_iter[i],'h');
scope[itemname] = iter_item;
scope[indexname] = _n ? i : wh.nh(i, 'h');
_y = _v( to_iter[i] + i );
_(father,_y);
func( env, scope, _y, global );
}
}
else if( type === 'N' ) 
{
for( var i = 0 ; i < r_to_iter ; i++ )
{
iter_item = wh.nh(i,'h');
scope[itemname] = iter_item;
scope[indexname]= _n ? i : wh.nh(i,'h');
_y = _v( i );
_(father,_y);
func(env,scope,_y,global);
}
}
else
{
}
}
if(has_old_item)
{
scope[itemname]=old_item;
}
else
{
delete scope[itemname];
}
if(has_old_index)
{
scope[indexname]=old_index;
}
else
{
delete scope[indexname];
}
}

function _ca(o)
{ 
if ( wh.hn(o) == 'h' ) return true;
if ( typeof o !== "object" ) return false;
for(var i in o){ 
if ( o.hasOwnProperty(i) ){
if (_ca(o[i])) return true;
}
}
return false;
}
function _da( node, attrname, opindex, raw, o )
{
var isaffected = false;
if ( o.is_affected || _ca(raw) ) 
{
node.n.push( attrname );
node.raw[attrname] = raw;
var value = $gdc( raw, "", 2 );
return value;
}
else
{
var value = $gdc( raw, "", 2 );
return value;
}
}
function _r( node, attrname, opindex, env, scope, global ) 
{
global.opindex=opindex;
var o = {}, _env;
var a = grb( z[opindex], env, scope, global, o );
a = _da( node, attrname, opindex, a, o );
node.attr[attrname] = a;
}
function _rz( z, node, attrname, opindex, env, scope, global ) 
{
global.opindex=opindex;
var o = {}, _env;
var a = grb( z[opindex], env, scope, global, o );
a = _da( node, attrname, opindex, a, o );
node.attr[attrname] = a;
}
function _o( opindex, env, scope, global )
{
global.opindex=opindex;
var nothing = {};
var r = grb( z[opindex], env, scope, global, nothing );
return (r&&r.constructor===Function) ? undefined : r;
}
function _oz( z, opindex, env, scope, global )
{
global.opindex=opindex;
var nothing = {};
var r = grb( z[opindex], env, scope, global, nothing );
return (r&&r.constructor===Function) ? undefined : r;
}
function _1( opindex, env, scope, global, o )
{
var o = o || {};
global.opindex=opindex;
return gra( z[opindex], env, scope, global, o );
}
function _1z( z, opindex, env, scope, global, o )
{
var o = o || {};
global.opindex=opindex;
return gra( z[opindex], env, scope, global, o );
}
function _2( opindex, func, env, scope, global, father, itemname, indexname, keyname )
{
var o = {};
var to_iter = _1( opindex, env, scope, global );
wfor( to_iter, func, env, scope, global, father, itemname, indexname, keyname );
}
function _2z( z, opindex, func, env, scope, global, father, itemname, indexname, keyname )
{
var o = {};
var to_iter = _1z( z, opindex, env, scope, global );
wfor( to_iter, func, env, scope, global, father, itemname, indexname, keyname );
}


function _m(tag,attrs,generics,env,scope,global)
{
var tmp=_n(tag);
var base=0;
for(var i = 0 ; i < attrs.length ; i+=2 )
{
if(base+attrs[i+1]<0)
{
tmp.attr[attrs[i]]=true;
}
else
{
_r(tmp,attrs[i],base+attrs[i+1],env,scope,global);
if(base===0)base=attrs[i+1];
}
}
for(var i=0;i<generics.length;i+=2)
{
if(base+generics[i+1]<0)
{
tmp.generics[generics[i]]="";
}
else
{
var $t=grb(z[base+generics[i+1]],env,scope,global);
if ($t!="") $t="wx-"+$t;
tmp.generics[generics[i]]=$t;
if(base===0)base=generics[i+1];
}
}
return tmp;
}
function _mz(z,tag,attrs,generics,env,scope,global)
{
var tmp=_n(tag);
var base=0;
for(var i = 0 ; i < attrs.length ; i+=2 )
{
if(base+attrs[i+1]<0)
{
tmp.attr[attrs[i]]=true;
}
else
{
_rz(z, tmp,attrs[i],base+attrs[i+1],env,scope,global);
if(base===0)base=attrs[i+1];
}
}
for(var i=0;i<generics.length;i+=2)
{
if(base+generics[i+1]<0)
{
tmp.generics[generics[i]]="";
}
else
{
var $t=grb(z[base+generics[i+1]],env,scope,global);
if ($t!="") $t="wx-"+$t;
tmp.generics[generics[i]]=$t;
if(base===0)base=generics[i+1];
}
}
return tmp;
}

var nf_init=function(){
if(typeof __WXML_GLOBAL__==="undefined"||undefined===__WXML_GLOBAL__.wxs_nf_init){
nf_init_Object();nf_init_Function();nf_init_Array();nf_init_String();nf_init_Boolean();nf_init_Number();nf_init_Math();nf_init_Date();nf_init_RegExp();
}
if(typeof __WXML_GLOBAL__!=="undefined") __WXML_GLOBAL__.wxs_nf_init=true;
};
var nf_init_Object=function(){
Object.defineProperty(Object.prototype,"nv_constructor",{writable:true,value:"Object"})
Object.defineProperty(Object.prototype,"nv_toString",{writable:true,value:function(){return "[object Object]"}})
}
var nf_init_Function=function(){
Object.defineProperty(Function.prototype,"nv_constructor",{writable:true,value:"Function"})
Object.defineProperty(Function.prototype,"nv_length",{get:function(){return this.length;},set:function(){}});
Object.defineProperty(Function.prototype,"nv_toString",{writable:true,value:function(){return "[function Function]"}})
}
var nf_init_Array=function(){
Object.defineProperty(Array.prototype,"nv_toString",{writable:true,value:function(){return this.nv_join();}})
Object.defineProperty(Array.prototype,"nv_join",{writable:true,value:function(s){
s=undefined==s?',':s;
var r="";
for(var i=0;i<this.length;++i){
if(0!=i) r+=s;
if(null==this[i]||undefined==this[i]) r+='';	
else if(typeof this[i]=='function') r+=this[i].nv_toString();
else if(typeof this[i]=='object'&&this[i].nv_constructor==="Array") r+=this[i].nv_join();
else r+=this[i].toString();
}
return r;
}})
Object.defineProperty(Array.prototype,"nv_constructor",{writable:true,value:"Array"})
Object.defineProperty(Array.prototype,"nv_concat",{writable:true,value:Array.prototype.concat})
Object.defineProperty(Array.prototype,"nv_pop",{writable:true,value:Array.prototype.pop})
Object.defineProperty(Array.prototype,"nv_push",{writable:true,value:Array.prototype.push})
Object.defineProperty(Array.prototype,"nv_reverse",{writable:true,value:Array.prototype.reverse})
Object.defineProperty(Array.prototype,"nv_shift",{writable:true,value:Array.prototype.shift})
Object.defineProperty(Array.prototype,"nv_slice",{writable:true,value:Array.prototype.slice})
Object.defineProperty(Array.prototype,"nv_sort",{writable:true,value:Array.prototype.sort})
Object.defineProperty(Array.prototype,"nv_splice",{writable:true,value:Array.prototype.splice})
Object.defineProperty(Array.prototype,"nv_unshift",{writable:true,value:Array.prototype.unshift})
Object.defineProperty(Array.prototype,"nv_indexOf",{writable:true,value:Array.prototype.indexOf})
Object.defineProperty(Array.prototype,"nv_lastIndexOf",{writable:true,value:Array.prototype.lastIndexOf})
Object.defineProperty(Array.prototype,"nv_every",{writable:true,value:Array.prototype.every})
Object.defineProperty(Array.prototype,"nv_some",{writable:true,value:Array.prototype.some})
Object.defineProperty(Array.prototype,"nv_forEach",{writable:true,value:Array.prototype.forEach})
Object.defineProperty(Array.prototype,"nv_map",{writable:true,value:Array.prototype.map})
Object.defineProperty(Array.prototype,"nv_filter",{writable:true,value:Array.prototype.filter})
Object.defineProperty(Array.prototype,"nv_reduce",{writable:true,value:Array.prototype.reduce})
Object.defineProperty(Array.prototype,"nv_reduceRight",{writable:true,value:Array.prototype.reduceRight})
Object.defineProperty(Array.prototype,"nv_length",{get:function(){return this.length;},set:function(value){this.length=value;}});
}
var nf_init_String=function(){
Object.defineProperty(String.prototype,"nv_constructor",{writable:true,value:"String"})
Object.defineProperty(String.prototype,"nv_toString",{writable:true,value:String.prototype.toString})
Object.defineProperty(String.prototype,"nv_valueOf",{writable:true,value:String.prototype.valueOf})
Object.defineProperty(String.prototype,"nv_charAt",{writable:true,value:String.prototype.charAt})
Object.defineProperty(String.prototype,"nv_charCodeAt",{writable:true,value:String.prototype.charCodeAt})
Object.defineProperty(String.prototype,"nv_concat",{writable:true,value:String.prototype.concat})
Object.defineProperty(String.prototype,"nv_indexOf",{writable:true,value:String.prototype.indexOf})
Object.defineProperty(String.prototype,"nv_lastIndexOf",{writable:true,value:String.prototype.lastIndexOf})
Object.defineProperty(String.prototype,"nv_localeCompare",{writable:true,value:String.prototype.localeCompare})
Object.defineProperty(String.prototype,"nv_match",{writable:true,value:String.prototype.match})
Object.defineProperty(String.prototype,"nv_replace",{writable:true,value:String.prototype.replace})
Object.defineProperty(String.prototype,"nv_search",{writable:true,value:String.prototype.search})
Object.defineProperty(String.prototype,"nv_slice",{writable:true,value:String.prototype.slice})
Object.defineProperty(String.prototype,"nv_split",{writable:true,value:String.prototype.split})
Object.defineProperty(String.prototype,"nv_substring",{writable:true,value:String.prototype.substring})
Object.defineProperty(String.prototype,"nv_toLowerCase",{writable:true,value:String.prototype.toLowerCase})
Object.defineProperty(String.prototype,"nv_toLocaleLowerCase",{writable:true,value:String.prototype.toLocaleLowerCase})
Object.defineProperty(String.prototype,"nv_toUpperCase",{writable:true,value:String.prototype.toUpperCase})
Object.defineProperty(String.prototype,"nv_toLocaleUpperCase",{writable:true,value:String.prototype.toLocaleUpperCase})
Object.defineProperty(String.prototype,"nv_trim",{writable:true,value:String.prototype.trim})
Object.defineProperty(String.prototype,"nv_length",{get:function(){return this.length;},set:function(value){this.length=value;}});
}
var nf_init_Boolean=function(){
Object.defineProperty(Boolean.prototype,"nv_constructor",{writable:true,value:"Boolean"})
Object.defineProperty(Boolean.prototype,"nv_toString",{writable:true,value:Boolean.prototype.toString})
Object.defineProperty(Boolean.prototype,"nv_valueOf",{writable:true,value:Boolean.prototype.valueOf})
}
var nf_init_Number=function(){
Object.defineProperty(Number,"nv_MAX_VALUE",{writable:false,value:Number.MAX_VALUE})
Object.defineProperty(Number,"nv_MIN_VALUE",{writable:false,value:Number.MIN_VALUE})
Object.defineProperty(Number,"nv_NEGATIVE_INFINITY",{writable:false,value:Number.NEGATIVE_INFINITY})
Object.defineProperty(Number,"nv_POSITIVE_INFINITY",{writable:false,value:Number.POSITIVE_INFINITY})
Object.defineProperty(Number.prototype,"nv_constructor",{writable:true,value:"Number"})
Object.defineProperty(Number.prototype,"nv_toString",{writable:true,value:Number.prototype.toString})
Object.defineProperty(Number.prototype,"nv_toLocaleString",{writable:true,value:Number.prototype.toLocaleString})
Object.defineProperty(Number.prototype,"nv_valueOf",{writable:true,value:Number.prototype.valueOf})
Object.defineProperty(Number.prototype,"nv_toFixed",{writable:true,value:Number.prototype.toFixed})
Object.defineProperty(Number.prototype,"nv_toExponential",{writable:true,value:Number.prototype.toExponential})
Object.defineProperty(Number.prototype,"nv_toPrecision",{writable:true,value:Number.prototype.toPrecision})
}
var nf_init_Math=function(){
Object.defineProperty(Math,"nv_E",{writable:false,value:Math.E})
Object.defineProperty(Math,"nv_LN10",{writable:false,value:Math.LN10})
Object.defineProperty(Math,"nv_LN2",{writable:false,value:Math.LN2})
Object.defineProperty(Math,"nv_LOG2E",{writable:false,value:Math.LOG2E})
Object.defineProperty(Math,"nv_LOG10E",{writable:false,value:Math.LOG10E})
Object.defineProperty(Math,"nv_PI",{writable:false,value:Math.PI})
Object.defineProperty(Math,"nv_SQRT1_2",{writable:false,value:Math.SQRT1_2})
Object.defineProperty(Math,"nv_SQRT2",{writable:false,value:Math.SQRT2})
Object.defineProperty(Math,"nv_abs",{writable:false,value:Math.abs})
Object.defineProperty(Math,"nv_acos",{writable:false,value:Math.acos})
Object.defineProperty(Math,"nv_asin",{writable:false,value:Math.asin})
Object.defineProperty(Math,"nv_atan",{writable:false,value:Math.atan})
Object.defineProperty(Math,"nv_atan2",{writable:false,value:Math.atan2})
Object.defineProperty(Math,"nv_ceil",{writable:false,value:Math.ceil})
Object.defineProperty(Math,"nv_cos",{writable:false,value:Math.cos})
Object.defineProperty(Math,"nv_exp",{writable:false,value:Math.exp})
Object.defineProperty(Math,"nv_floor",{writable:false,value:Math.floor})
Object.defineProperty(Math,"nv_log",{writable:false,value:Math.log})
Object.defineProperty(Math,"nv_max",{writable:false,value:Math.max})
Object.defineProperty(Math,"nv_min",{writable:false,value:Math.min})
Object.defineProperty(Math,"nv_pow",{writable:false,value:Math.pow})
Object.defineProperty(Math,"nv_random",{writable:false,value:Math.random})
Object.defineProperty(Math,"nv_round",{writable:false,value:Math.round})
Object.defineProperty(Math,"nv_sin",{writable:false,value:Math.sin})
Object.defineProperty(Math,"nv_sqrt",{writable:false,value:Math.sqrt})
Object.defineProperty(Math,"nv_tan",{writable:false,value:Math.tan})
}
var nf_init_Date=function(){
Object.defineProperty(Date.prototype,"nv_constructor",{writable:true,value:"Date"})
Object.defineProperty(Date,"nv_parse",{writable:true,value:Date.parse})
Object.defineProperty(Date,"nv_UTC",{writable:true,value:Date.UTC})
Object.defineProperty(Date,"nv_now",{writable:true,value:Date.now})
Object.defineProperty(Date.prototype,"nv_toString",{writable:true,value:Date.prototype.toString})
Object.defineProperty(Date.prototype,"nv_toDateString",{writable:true,value:Date.prototype.toDateString})
Object.defineProperty(Date.prototype,"nv_toTimeString",{writable:true,value:Date.prototype.toTimeString})
Object.defineProperty(Date.prototype,"nv_toLocaleString",{writable:true,value:Date.prototype.toLocaleString})
Object.defineProperty(Date.prototype,"nv_toLocaleDateString",{writable:true,value:Date.prototype.toLocaleDateString})
Object.defineProperty(Date.prototype,"nv_toLocaleTimeString",{writable:true,value:Date.prototype.toLocaleTimeString})
Object.defineProperty(Date.prototype,"nv_valueOf",{writable:true,value:Date.prototype.valueOf})
Object.defineProperty(Date.prototype,"nv_getTime",{writable:true,value:Date.prototype.getTime})
Object.defineProperty(Date.prototype,"nv_getFullYear",{writable:true,value:Date.prototype.getFullYear})
Object.defineProperty(Date.prototype,"nv_getUTCFullYear",{writable:true,value:Date.prototype.getUTCFullYear})
Object.defineProperty(Date.prototype,"nv_getMonth",{writable:true,value:Date.prototype.getMonth})
Object.defineProperty(Date.prototype,"nv_getUTCMonth",{writable:true,value:Date.prototype.getUTCMonth})
Object.defineProperty(Date.prototype,"nv_getDate",{writable:true,value:Date.prototype.getDate})
Object.defineProperty(Date.prototype,"nv_getUTCDate",{writable:true,value:Date.prototype.getUTCDate})
Object.defineProperty(Date.prototype,"nv_getDay",{writable:true,value:Date.prototype.getDay})
Object.defineProperty(Date.prototype,"nv_getUTCDay",{writable:true,value:Date.prototype.getUTCDay})
Object.defineProperty(Date.prototype,"nv_getHours",{writable:true,value:Date.prototype.getHours})
Object.defineProperty(Date.prototype,"nv_getUTCHours",{writable:true,value:Date.prototype.getUTCHours})
Object.defineProperty(Date.prototype,"nv_getMinutes",{writable:true,value:Date.prototype.getMinutes})
Object.defineProperty(Date.prototype,"nv_getUTCMinutes",{writable:true,value:Date.prototype.getUTCMinutes})
Object.defineProperty(Date.prototype,"nv_getSeconds",{writable:true,value:Date.prototype.getSeconds})
Object.defineProperty(Date.prototype,"nv_getUTCSeconds",{writable:true,value:Date.prototype.getUTCSeconds})
Object.defineProperty(Date.prototype,"nv_getMilliseconds",{writable:true,value:Date.prototype.getMilliseconds})
Object.defineProperty(Date.prototype,"nv_getUTCMilliseconds",{writable:true,value:Date.prototype.getUTCMilliseconds})
Object.defineProperty(Date.prototype,"nv_getTimezoneOffset",{writable:true,value:Date.prototype.getTimezoneOffset})
Object.defineProperty(Date.prototype,"nv_setTime",{writable:true,value:Date.prototype.setTime})
Object.defineProperty(Date.prototype,"nv_setMilliseconds",{writable:true,value:Date.prototype.setMilliseconds})
Object.defineProperty(Date.prototype,"nv_setUTCMilliseconds",{writable:true,value:Date.prototype.setUTCMilliseconds})
Object.defineProperty(Date.prototype,"nv_setSeconds",{writable:true,value:Date.prototype.setSeconds})
Object.defineProperty(Date.prototype,"nv_setUTCSeconds",{writable:true,value:Date.prototype.setUTCSeconds})
Object.defineProperty(Date.prototype,"nv_setMinutes",{writable:true,value:Date.prototype.setMinutes})
Object.defineProperty(Date.prototype,"nv_setUTCMinutes",{writable:true,value:Date.prototype.setUTCMinutes})
Object.defineProperty(Date.prototype,"nv_setHours",{writable:true,value:Date.prototype.setHours})
Object.defineProperty(Date.prototype,"nv_setUTCHours",{writable:true,value:Date.prototype.setUTCHours})
Object.defineProperty(Date.prototype,"nv_setDate",{writable:true,value:Date.prototype.setDate})
Object.defineProperty(Date.prototype,"nv_setUTCDate",{writable:true,value:Date.prototype.setUTCDate})
Object.defineProperty(Date.prototype,"nv_setMonth",{writable:true,value:Date.prototype.setMonth})
Object.defineProperty(Date.prototype,"nv_setUTCMonth",{writable:true,value:Date.prototype.setUTCMonth})
Object.defineProperty(Date.prototype,"nv_setFullYear",{writable:true,value:Date.prototype.setFullYear})
Object.defineProperty(Date.prototype,"nv_setUTCFullYear",{writable:true,value:Date.prototype.setUTCFullYear})
Object.defineProperty(Date.prototype,"nv_toUTCString",{writable:true,value:Date.prototype.toUTCString})
Object.defineProperty(Date.prototype,"nv_toISOString",{writable:true,value:Date.prototype.toISOString})
Object.defineProperty(Date.prototype,"nv_toJSON",{writable:true,value:Date.prototype.toJSON})
}
var nf_init_RegExp=function(){
Object.defineProperty(RegExp.prototype,"nv_constructor",{writable:true,value:"RegExp"})
Object.defineProperty(RegExp.prototype,"nv_exec",{writable:true,value:RegExp.prototype.exec})
Object.defineProperty(RegExp.prototype,"nv_test",{writable:true,value:RegExp.prototype.test})
Object.defineProperty(RegExp.prototype,"nv_toString",{writable:true,value:RegExp.prototype.toString})
Object.defineProperty(RegExp.prototype,"nv_source",{get:function(){return this.source;},set:function(){}});
Object.defineProperty(RegExp.prototype,"nv_global",{get:function(){return this.global;},set:function(){}});
Object.defineProperty(RegExp.prototype,"nv_ignoreCase",{get:function(){return this.ignoreCase;},set:function(){}});
Object.defineProperty(RegExp.prototype,"nv_multiline",{get:function(){return this.multiline;},set:function(){}});
Object.defineProperty(RegExp.prototype,"nv_lastIndex",{get:function(){return this.lastIndex;},set:function(v){this.lastIndex=v;}});
}
nf_init();
var nv_getDate=function(){var args=Array.prototype.slice.call(arguments);args.unshift(Date);return new(Function.prototype.bind.apply(Date, args));}
var nv_getRegExp=function(){var args=Array.prototype.slice.call(arguments);args.unshift(RegExp);return new(Function.prototype.bind.apply(RegExp, args));}
var nv_console={}
nv_console.nv_log=function(){var res="WXSRT:";for(var i=0;i<arguments.length;++i)res+=arguments[i]+" ";console.log(res);}
var nv_parseInt = parseInt, nv_parseFloat = parseFloat, nv_isNaN = isNaN, nv_isFinite = isFinite, nv_decodeURI = decodeURI, nv_decodeURIComponent = decodeURIComponent, nv_encodeURI = encodeURI, nv_encodeURIComponent = encodeURIComponent;
function $gdc(o,p,r) {
o=wh.rv(o);
if(o===null||o===undefined) return o;
if(o.constructor===String||o.constructor===Boolean||o.constructor===Number) return o;
if(o.constructor===Object){
var copy={};
for(var k in o)
if(o.hasOwnProperty(k))
if(undefined===p) copy[k.substring(3)]=$gdc(o[k],p,r);
else copy[p+k]=$gdc(o[k],p,r);
return copy;
}
if(o.constructor===Array){
var copy=[];
for(var i=0;i<o.length;i++) copy.push($gdc(o[i],p,r));
return copy;
}
if(o.constructor===Date){
var copy=new Date();
copy.setTime(o.getTime());
return copy;
}
if(o.constructor===RegExp){
var f="";
if(o.global) f+="g";
if(o.ignoreCase) f+="i";
if(o.multiline) f+="m";
return (new RegExp(o.source,f));
}
if(r&&o.constructor===Function){
if ( r == 1 ) return $gdc(o(),undefined, 2);
if ( r == 2 ) return o;
}
return null;
}
var nv_JSON={}
nv_JSON.nv_stringify=function(o){
JSON.stringify(o);
return JSON.stringify($gdc(o));
}
nv_JSON.nv_parse=function(o){
if(o===undefined) return undefined;
var t=JSON.parse(o);
return $gdc(t,'nv_');
}

function _af(p, a, c){
p.extraAttr = {"t_action": a, "t_cid": c};
}

function _ai(i,p,e,me,r,c){var x=_grp(p,e,me);if(x)i.push(x);else{i.push('');_wp(me+':import:'+r+':'+c+': Path `'+p+'` not found from `'+me+'`.')}}
function _grp(p,e,me){if(p[0]!='/'){var mepart=me.split('/');mepart.pop();var ppart=p.split('/');for(var i=0;i<ppart.length;i++){if( ppart[i]=='..')mepart.pop();else if(!ppart[i]||ppart[i]=='.')continue;else mepart.push(ppart[i]);}p=mepart.join('/');}if(me[0]=='.'&&p[0]=='/')p='.'+p;if(e[p])return p;if(e[p+'.wxml'])return p+'.wxml';}
function _gd(p,c,e,d){if(!c)return;if(d[p][c])return d[p][c];for(var x=e[p].i.length-1;x>=0;x--){if(e[p].i[x]&&d[e[p].i[x]][c])return d[e[p].i[x]][c]};for(var x=e[p].ti.length-1;x>=0;x--){var q=_grp(e[p].ti[x],e,p);if(q&&d[q][c])return d[q][c]}var ii=_gapi(e,p);for(var x=0;x<ii.length;x++){if(ii[x]&&d[ii[x]][c])return d[ii[x]][c]}for(var k=e[p].j.length-1;k>=0;k--)if(e[p].j[k]){for(var q=e[e[p].j[k]].ti.length-1;q>=0;q--){var pp=_grp(e[e[p].j[k]].ti[q],e,p);if(pp&&d[pp][c]){return d[pp][c]}}}}
function _gapi(e,p){if(!p)return [];if($gaic[p]){return $gaic[p]};var ret=[],q=[],h=0,t=0,put={},visited={};q.push(p);visited[p]=true;t++;while(h<t){var a=q[h++];for(var i=0;i<e[a].ic.length;i++){var nd=e[a].ic[i];var np=_grp(nd,e,a);if(np&&!visited[np]){visited[np]=true;q.push(np);t++;}}for(var i=0;a!=p&&i<e[a].ti.length;i++){var ni=e[a].ti[i];var nm=_grp(ni,e,a);if(nm&&!put[nm]){put[nm]=true;ret.push(nm);}}}$gaic[p]=ret;return ret;}
var $ixc={};function _ic(p,ent,me,e,s,r,gg){var x=_grp(p,ent,me);ent[me].j.push(x);if(x){if($ixc[x]){_wp('-1:include:-1:-1: `'+p+'` is being included in a loop, will be stop.');return;}$ixc[x]=true;try{ent[x].f(e,s,r,gg)}catch(e){}$ixc[x]=false;}else{_wp(me+':include:-1:-1: Included path `'+p+'` not found from `'+me+'`.')}}
function _w(tn,f,line,c){_wp(f+':template:'+line+':'+c+': Template `'+tn+'` not found.');}function _ev(dom){var changed=false;delete dom.properities;delete dom.n;if(dom.children){do{changed=false;var newch = [];for(var i=0;i<dom.children.length;i++){var ch=dom.children[i];if( ch.tag=='virtual'){changed=true;for(var j=0;ch.children&&j<ch.children.length;j++){newch.push(ch.children[j]);}}else { newch.push(ch); } } dom.children = newch; }while(changed);for(var i=0;i<dom.children.length;i++){_ev(dom.children[i]);}} return dom; }
function _tsd( root )
{
if( root.tag == "wx-wx-scope" ) 
{
root.tag = "virtual";
root.wxCkey = "11";
root['wxScopeData'] = root.attr['wx:scope-data'];
delete root.n;
delete root.raw;
delete root.generics;
delete root.attr;
}
for( var i = 0 ; root.children && i < root.children.length ; i++ )
{
_tsd( root.children[i] );
}
return root;
}

var e_={}
if(typeof(global.entrys)==='undefined')global.entrys={};e_=global.entrys;
var d_={}
if(typeof(global.defines)==='undefined')global.defines={};d_=global.defines;
var f_={}
if(typeof(global.modules)==='undefined')global.modules={};f_=global.modules;
var p_={}
__WXML_GLOBAL__.ops_cached = __WXML_GLOBAL__.ops_cached || {}
__WXML_GLOBAL__.ops_set = __WXML_GLOBAL__.ops_set || {};
__WXML_GLOBAL__.ops_init = __WXML_GLOBAL__.ops_init || {};
var z=__WXML_GLOBAL__.ops_set.$gwx || [];
function gz$gwx_1(){
if( __WXML_GLOBAL__.ops_cached.$gwx_1)return __WXML_GLOBAL__.ops_cached.$gwx_1
__WXML_GLOBAL__.ops_cached.$gwx_1=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_1);return __WXML_GLOBAL__.ops_cached.$gwx_1
}
function gz$gwx_2(){
if( __WXML_GLOBAL__.ops_cached.$gwx_2)return __WXML_GLOBAL__.ops_cached.$gwx_2
__WXML_GLOBAL__.ops_cached.$gwx_2=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'background:#eee'])
Z([3,'scrollTop'])
Z([3,'message-box'])
Z([[7],[3,'toView']])
Z([3,'height:100vh;'])
Z([3,'item'])
Z([[7],[3,'localMessages']])
Z([3,'index'])
Z([[2,'?:'],[[2,'||'],[[2,'&&'],[[6],[[7],[3,'item']],[3,'content']],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,104]]],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,502]]],[1,'text-content1'],[1,'text-content']])
Z([[6],[[7],[3,'item']],[3,'failed']])
Z([[2,'!'],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']]])
Z([[2,'||'],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,515]],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,516]]])
Z([[2,'&&'],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,509]]])
Z([[2,'||'],[[2,'&&'],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,506]]],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,508]]])
Z([[2,'&&'],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,502]]])
Z([[2,'&&'],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,507]]])
Z([[2,'&&'],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,204]]])
Z([[2,'&&'],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[[2,'=='],[[6],[[6],[[7],[3,'item']],[3,'content']],[3,'type']],[1,104]]])
Z([[7],[3,'loading']])
Z([[2,'=='],[[7],[3,'dialog']],[1,1]])
})(__WXML_GLOBAL__.ops_cached.$gwx_2);return __WXML_GLOBAL__.ops_cached.$gwx_2
}
function gz$gwx_3(){
if( __WXML_GLOBAL__.ops_cached.$gwx_3)return __WXML_GLOBAL__.ops_cached.$gwx_3
__WXML_GLOBAL__.ops_cached.$gwx_3=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'=='],[[7],[3,'template']],[1,'vertical1v3']])
Z([[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[8],'debug',[[7],[3,'debug']]],[[8],'menuItems',[[7],[3,'menuItems']]]],[[8],'isCaster',[[7],[3,'isCaster']]]],[[8],'mainPusherInfo',[[7],[3,'mainPusherInfo']]]],[[8],'beauty',[[7],[3,'beauty']]]],[[8],'muted',[[7],[3,'muted']]]],[[8],'pureaudio',[[7],[3,'pureaudio']]]],[[8],'userName',[[7],[3,'userName']]]],[[8],'visualPlayers',[[7],[3,'visualPlayers']]]],[[8],'linkPusherInfo',[[7],[3,'linkPusherInfo']]]],[[8],'members',[[7],[3,'members']]]],[[8],'mode',[[7],[3,'mode']]]])
Z([[7],[3,'template']])
Z([3,'liveroom-container'])
Z([[2,'=='],[[7],[3,'template']],[1,'1v3']])
Z([a,[3,'inner-container '],[[2,'?:'],[[6],[[7],[3,'linkPusherInfo']],[3,'url']],[1,'view-size-small'],[1,'view-size-big']]])
Z([[2,'&&'],[[7],[3,'isCaster']],[[6],[[7],[3,'mainPusherInfo']],[3,'url']]])
Z([3,'3:4'])
Z([1,true])
Z([[7],[3,'beauty']])
Z([3,'onMainError'])
Z([3,'onMainPush'])
Z([[7],[3,'debug']])
Z([[2,'!'],[[7],[3,'pureaudio']]])
Z([3,'pusher'])
Z([3,'RTC'])
Z([[7],[3,'muted']])
Z([[6],[[7],[3,'mainPusherInfo']],[3,'url']])
Z([3,'https://mc.qcloudimg.com/static/img/daeed8616ac5df256c0591c22a65c4d3/pause_publish.jpg'])
Z([[7],[3,'visualPlayers']])
Z([[7],[3,'index']])
Z([[6],[[7],[3,'item']],[3,'url']])
Z([[6],[[7],[3,'item']],[3,'mute']])
Z([3,'onMainPlayError'])
Z([3,'onMainPlayState'])
Z(z[12])
Z([3,'player'])
Z([[6],[[7],[3,'item']],[3,'maxCache']])
Z([[6],[[7],[3,'item']],[3,'minCache']])
Z([[6],[[7],[3,'item']],[3,'mode']])
Z(z[16])
Z([[6],[[7],[3,'item']],[3,'objectFit']])
Z(z[21])
Z([[6],[[7],[3,'item']],[3,'loading']])
Z([3,'operate'])
Z([[6],[[7],[3,'linkPusherInfo']],[3,'url']])
Z(z[35])
Z([[2,'!'],[[6],[[7],[3,'linkPusherInfo']],[3,'url']]])
Z([[2,'&&'],[[2,'!'],[[7],[3,'isCaster']]],[[6],[[7],[3,'linkPusherInfo']],[3,'url']]])
Z([3,'list-container'])
Z(z[38])
Z(z[38])
Z([[7],[3,'members']])
Z([[6],[[7],[3,'item']],[3,'userID']])
Z([[6],[[7],[3,'item']],[3,'accelerateURL']])
Z(z[8])
Z(z[12])
Z(z[43])
Z([3,'0.3'])
Z([3,'0.1'])
Z(z[15])
Z([3,'fillCrop'])
Z(z[44])
Z([[2,'||'],[[2,'=='],[[6],[[7],[3,'item']],[3,'userID']],[[7],[3,'userID']]],[[7],[3,'isCaster']]])
Z([1,false])
Z([[2,'||'],[[2,'=='],[[7],[3,'template']],[1,'2v2']],[[2,'=='],[[7],[3,'template']],[1,'1v1']]])
Z([3,'width:93vw; margin-left:3.5vw; padding-top:3.5vw;'])
Z([3,'display: inline-block; width: 46vw; height: 61.33vw;'])
Z(z[6])
Z(z[19])
Z(z[20])
Z(z[21])
Z(z[22])
Z(z[23])
Z(z[24])
Z(z[12])
Z(z[26])
Z(z[29])
Z(z[21])
Z(z[33])
Z(z[38])
Z(z[38])
Z(z[42])
Z(z[20])
Z(z[44])
Z(z[33])
})(__WXML_GLOBAL__.ops_cached.$gwx_3);return __WXML_GLOBAL__.ops_cached.$gwx_3
}
function gz$gwx_4(){
if( __WXML_GLOBAL__.ops_cached.$gwx_4)return __WXML_GLOBAL__.ops_cached.$gwx_4
__WXML_GLOBAL__.ops_cached.$gwx_4=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'vertical1v3'])
Z([[2,'?:'],[[2,'||'],[[6],[[7],[3,'linkPusherInfo']],[3,'url']],[[7],[3,'isCaster']]],[1,'v-full2'],[1,'v-full']])
Z([[7],[3,'isCaster']])
Z([[2,'&&'],[[7],[3,'isCaster']],[[6],[[7],[3,'mainPusherInfo']],[3,'url']]])
Z([[7],[3,'visualPlayers']])
Z([[7],[3,'index']])
Z([[6],[[7],[3,'item']],[3,'url']])
Z([[6],[[7],[3,'item']],[3,'mute']])
Z([3,'onMainPlayError'])
Z([3,'onMainPlayState'])
Z([[7],[3,'debug']])
Z([3,'player'])
Z([[6],[[7],[3,'item']],[3,'maxCache']])
Z([[6],[[7],[3,'item']],[3,'minCache']])
Z([[6],[[7],[3,'item']],[3,'mode']])
Z([[7],[3,'muted']])
Z([[6],[[7],[3,'item']],[3,'objectFit']])
Z(z[6])
Z([3,'operate'])
Z([[6],[[7],[3,'linkPusherInfo']],[3,'url']])
Z(z[19])
Z([[2,'!'],[[6],[[7],[3,'linkPusherInfo']],[3,'url']]])
Z([[2,'||'],[[6],[[7],[3,'linkPusherInfo']],[3,'url']],[[7],[3,'isCaster']]])
Z([3,'v-sub-video-list'])
Z([[2,'&&'],[[2,'!'],[[7],[3,'isCaster']]],[[6],[[7],[3,'linkPusherInfo']],[3,'url']]])
Z(z[24])
Z([[7],[3,'members']])
Z([[6],[[7],[3,'item']],[3,'userID']])
Z([[6],[[7],[3,'item']],[3,'accelerateURL']])
Z([1,true])
Z(z[10])
Z(z[27])
Z([3,'0.3'])
Z([3,'0.1'])
Z([3,'RTC'])
Z([3,'fillCrop'])
Z(z[28])
Z([[2,'||'],[[2,'=='],[[6],[[7],[3,'item']],[3,'userID']],[[7],[3,'userID']]],[[7],[3,'isCaster']]])
Z([1,false])
})(__WXML_GLOBAL__.ops_cached.$gwx_4);return __WXML_GLOBAL__.ops_cached.$gwx_4
}
function gz$gwx_5(){
if( __WXML_GLOBAL__.ops_cached.$gwx_5)return __WXML_GLOBAL__.ops_cached.$gwx_5
__WXML_GLOBAL__.ops_cached.$gwx_5=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'gridtemplate'])
Z([3,'videoview'])
Z([[7],[3,'pushURL']])
Z([[7],[3,'members']])
Z([3,'userID'])
Z([[6],[[7],[3,'item']],[3,'accelerateURL']])
})(__WXML_GLOBAL__.ops_cached.$gwx_5);return __WXML_GLOBAL__.ops_cached.$gwx_5
}
function gz$gwx_6(){
if( __WXML_GLOBAL__.ops_cached.$gwx_6)return __WXML_GLOBAL__.ops_cached.$gwx_6
__WXML_GLOBAL__.ops_cached.$gwx_6=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'||'],[[2,'=='],[[7],[3,'template']],[1,'1v3']],[[2,'=='],[[7],[3,'template']],[1,'1v1']]])
Z([[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[9],[[8],'pushURL',[[7],[3,'pushURL']]],[[8],'aspect',[[7],[3,'aspect']]]],[[8],'minBitrate',[[7],[3,'minBitrate']]]],[[8],'maxBitrate',[[7],[3,'maxBitrate']]]],[[8],'beauty',[[7],[3,'beauty']]]],[[8],'muted',[[7],[3,'muted']]]],[[8],'debug',[[7],[3,'debug']]]],[[8],'members',[[7],[3,'members']]]],[[8],'assistant',[[7],[3,'assistant']]]],[[8],'hideBg',[[7],[3,'hideBg']]]],[[8],'flag',[[7],[3,'flag']]]],[[8],'startTime',[[7],[3,'startTime']]]],[[8],'flagStatus',[[7],[3,'flagStatus']]]])
Z([3,'gridtemplate'])
})(__WXML_GLOBAL__.ops_cached.$gwx_6);return __WXML_GLOBAL__.ops_cached.$gwx_6
}
function gz$gwx_7(){
if( __WXML_GLOBAL__.ops_cached.$gwx_7)return __WXML_GLOBAL__.ops_cached.$gwx_7
__WXML_GLOBAL__.ops_cached.$gwx_7=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'showInfoModel']])
Z([[7],[3,'showPhoneModel']])
Z([[2,'||'],[[7],[3,'showPhoneModel']],[[7],[3,'showInfoModel']]])
Z([[7],[3,'showTel']])
Z([[7],[3,'isShowVideoButton']])
})(__WXML_GLOBAL__.ops_cached.$gwx_7);return __WXML_GLOBAL__.ops_cached.$gwx_7
}
function gz$gwx_8(){
if( __WXML_GLOBAL__.ops_cached.$gwx_8)return __WXML_GLOBAL__.ops_cached.$gwx_8
__WXML_GLOBAL__.ops_cached.$gwx_8=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_8);return __WXML_GLOBAL__.ops_cached.$gwx_8
}
function gz$gwx_9(){
if( __WXML_GLOBAL__.ops_cached.$gwx_9)return __WXML_GLOBAL__.ops_cached.$gwx_9
__WXML_GLOBAL__.ops_cached.$gwx_9=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_9);return __WXML_GLOBAL__.ops_cached.$gwx_9
}
function gz$gwx_10(){
if( __WXML_GLOBAL__.ops_cached.$gwx_10)return __WXML_GLOBAL__.ops_cached.$gwx_10
__WXML_GLOBAL__.ops_cached.$gwx_10=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_10);return __WXML_GLOBAL__.ops_cached.$gwx_10
}
function gz$gwx_11(){
if( __WXML_GLOBAL__.ops_cached.$gwx_11)return __WXML_GLOBAL__.ops_cached.$gwx_11
__WXML_GLOBAL__.ops_cached.$gwx_11=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_11);return __WXML_GLOBAL__.ops_cached.$gwx_11
}
function gz$gwx_12(){
if( __WXML_GLOBAL__.ops_cached.$gwx_12)return __WXML_GLOBAL__.ops_cached.$gwx_12
__WXML_GLOBAL__.ops_cached.$gwx_12=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'text'])
Z([[2,'!='],[[7],[3,'current']],[1,0]])
Z([[2,'!='],[[7],[3,'current']],[[2,'-'],[[6],[[7],[3,'picList']],[3,'length']],[1,1]]])
})(__WXML_GLOBAL__.ops_cached.$gwx_12);return __WXML_GLOBAL__.ops_cached.$gwx_12
}
function gz$gwx_13(){
if( __WXML_GLOBAL__.ops_cached.$gwx_13)return __WXML_GLOBAL__.ops_cached.$gwx_13
__WXML_GLOBAL__.ops_cached.$gwx_13=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'=='],[[7],[3,'InitFlag']],[1,'0']])
Z([[7],[3,'showPhoneModel']])
Z([[7],[3,'showInfoModel']])
Z([[2,'||'],[[7],[3,'showPhoneModel']],[[7],[3,'showInfoModel']]])
Z([[2,'=='],[[7],[3,'InitFlag']],[1,'1']])
Z([3,'scrollExp'])
Z([3,'container'])
Z([[7],[3,'toView']])
Z([[2,'&&'],[[2,'!'],[[7],[3,'showPhoneModel']]],[[2,'!'],[[7],[3,'showInfoModel']]]])
Z([a,[3,'height:100vh;background-color:'],[[7],[3,'color2']],[3,';']])
Z([3,'banner-container'])
Z([3,'false'])
Z([3,'swiperChange'])
Z([3,'true'])
Z([3,'titleswiper'])
Z([3,'500'])
Z([3,'7000'])
Z([3,'index'])
Z([[2,'||'],[[7],[3,'homeBanner']],[[7],[3,'defaultBanner']]])
Z([3,'item.id'])
Z([[6],[[7],[3,'item']],[3,'coverUrl']])
Z([[2,'>'],[[6],[[7],[3,'homeBanner']],[3,'length']],[1,1]])
Z([[2,'>'],[[6],[[7],[3,'newsModule']],[3,'length']],[1,0]])
Z([[6],[[7],[3,'viewModule']],[3,'jumpUrl']])
Z(z[23])
Z([[6],[[7],[3,'watchModule']],[3,'jumpUrl']])
Z([[6],[[7],[3,'matchModule']],[3,'coverUrl']])
Z([[2,'!'],[[7],[3,'showAuth']]])
})(__WXML_GLOBAL__.ops_cached.$gwx_13);return __WXML_GLOBAL__.ops_cached.$gwx_13
}
function gz$gwx_14(){
if( __WXML_GLOBAL__.ops_cached.$gwx_14)return __WXML_GLOBAL__.ops_cached.$gwx_14
__WXML_GLOBAL__.ops_cached.$gwx_14=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'showInfoModel']])
Z([[7],[3,'showPhoneModel']])
Z([[2,'||'],[[7],[3,'showPhoneModel']],[[7],[3,'showInfoModel']]])
Z([3,'item'])
Z([[7],[3,'isSentAdviserList']])
Z([3,'index'])
Z([3,'goChat'])
Z([3,'message-box'])
Z([[7],[3,'item']])
Z([[2,'>'],[[6],[[7],[3,'item']],[3,'hasNewMsg']],[1,0]])
Z([[7],[3,'loading']])
Z([[7],[3,'isShowVideoButton']])
})(__WXML_GLOBAL__.ops_cached.$gwx_14);return __WXML_GLOBAL__.ops_cached.$gwx_14
}
function gz$gwx_15(){
if( __WXML_GLOBAL__.ops_cached.$gwx_15)return __WXML_GLOBAL__.ops_cached.$gwx_15
__WXML_GLOBAL__.ops_cached.$gwx_15=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_15);return __WXML_GLOBAL__.ops_cached.$gwx_15
}
function gz$gwx_16(){
if( __WXML_GLOBAL__.ops_cached.$gwx_16)return __WXML_GLOBAL__.ops_cached.$gwx_16
__WXML_GLOBAL__.ops_cached.$gwx_16=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_16);return __WXML_GLOBAL__.ops_cached.$gwx_16
}
function gz$gwx_17(){
if( __WXML_GLOBAL__.ops_cached.$gwx_17)return __WXML_GLOBAL__.ops_cached.$gwx_17
__WXML_GLOBAL__.ops_cached.$gwx_17=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'container-box'])
Z([[7],[3,'assistant']])
Z([[7],[3,'beauty']])
Z([3,'decline'])
Z([3,'onliveplay'])
Z([3,'trigVideo'])
Z([3,'onRoomEvent'])
Z([3,'onPush'])
Z([[7],[3,'debug']])
Z([[7],[3,'flag']])
Z([[7],[3,'flagStatus']])
Z([[7],[3,'hideBg']])
Z([3,'rtcroom'])
Z([[7],[3,'muted']])
Z([[7],[3,'roomID']])
Z([[7],[3,'roomname']])
Z([[7],[3,'startTime']])
Z([3,'1v1'])
Z([[2,'=='],[[7],[3,'evaluateFlag']],[1,'0']])
Z([[2,'=='],[[7],[3,'evaluateFlag']],[1,'1']])
})(__WXML_GLOBAL__.ops_cached.$gwx_17);return __WXML_GLOBAL__.ops_cached.$gwx_17
}
function gz$gwx_18(){
if( __WXML_GLOBAL__.ops_cached.$gwx_18)return __WXML_GLOBAL__.ops_cached.$gwx_18
__WXML_GLOBAL__.ops_cached.$gwx_18=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'container-box'])
Z([[6],[[7],[3,'roomList']],[3,'length']])
Z([[2,'!'],[[6],[[7],[3,'roomList']],[3,'length']]])
})(__WXML_GLOBAL__.ops_cached.$gwx_18);return __WXML_GLOBAL__.ops_cached.$gwx_18
}
function gz$gwx_19(){
if( __WXML_GLOBAL__.ops_cached.$gwx_19)return __WXML_GLOBAL__.ops_cached.$gwx_19
__WXML_GLOBAL__.ops_cached.$gwx_19=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_19);return __WXML_GLOBAL__.ops_cached.$gwx_19
}
function gz$gwx_20(){
if( __WXML_GLOBAL__.ops_cached.$gwx_20)return __WXML_GLOBAL__.ops_cached.$gwx_20
__WXML_GLOBAL__.ops_cached.$gwx_20=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'||'],[[7],[3,'showInfoModel']],[[7],[3,'showPhoneModel']]])
Z([[7],[3,'showInfoModel']])
Z([[7],[3,'showPhoneModel']])
Z([[2,'!'],[[7],[3,'hasNotice']]])
})(__WXML_GLOBAL__.ops_cached.$gwx_20);return __WXML_GLOBAL__.ops_cached.$gwx_20
}
function gz$gwx_21(){
if( __WXML_GLOBAL__.ops_cached.$gwx_21)return __WXML_GLOBAL__.ops_cached.$gwx_21
__WXML_GLOBAL__.ops_cached.$gwx_21=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[7],[3,'dialog']])
})(__WXML_GLOBAL__.ops_cached.$gwx_21);return __WXML_GLOBAL__.ops_cached.$gwx_21
}
function gz$gwx_22(){
if( __WXML_GLOBAL__.ops_cached.$gwx_22)return __WXML_GLOBAL__.ops_cached.$gwx_22
__WXML_GLOBAL__.ops_cached.$gwx_22=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_22);return __WXML_GLOBAL__.ops_cached.$gwx_22
}
function gz$gwx_23(){
if( __WXML_GLOBAL__.ops_cached.$gwx_23)return __WXML_GLOBAL__.ops_cached.$gwx_23
__WXML_GLOBAL__.ops_cached.$gwx_23=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'||'],[[7],[3,'showInfoModel']],[[7],[3,'showPhoneModel']]])
Z([[7],[3,'showInfoModel']])
Z([[7],[3,'showPhoneModel']])
Z([[7],[3,'list']])
Z([3,'key'])
Z([[6],[[7],[3,'item']],[3,'shared']])
})(__WXML_GLOBAL__.ops_cached.$gwx_23);return __WXML_GLOBAL__.ops_cached.$gwx_23
}
function gz$gwx_24(){
if( __WXML_GLOBAL__.ops_cached.$gwx_24)return __WXML_GLOBAL__.ops_cached.$gwx_24
__WXML_GLOBAL__.ops_cached.$gwx_24=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([[2,'||'],[[7],[3,'showInfoModel']],[[7],[3,'showPhoneModel']]])
Z([3,'mask'])
Z([[7],[3,'showInfoModel']])
Z([[7],[3,'showPhoneModel']])
})(__WXML_GLOBAL__.ops_cached.$gwx_24);return __WXML_GLOBAL__.ops_cached.$gwx_24
}
function gz$gwx_25(){
if( __WXML_GLOBAL__.ops_cached.$gwx_25)return __WXML_GLOBAL__.ops_cached.$gwx_25
__WXML_GLOBAL__.ops_cached.$gwx_25=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_25);return __WXML_GLOBAL__.ops_cached.$gwx_25
}
function gz$gwx_26(){
if( __WXML_GLOBAL__.ops_cached.$gwx_26)return __WXML_GLOBAL__.ops_cached.$gwx_26
__WXML_GLOBAL__.ops_cached.$gwx_26=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
Z([3,'true'])
Z([3,'queitFull'])
Z([3,'play'])
Z([3,'video'])
Z([1,false])
Z(z[4])
Z([3,'90'])
Z(z[4])
Z([3,'myVideo'])
Z(z[0])
Z([[7],[3,'source']])
Z([[7],[3,'videoFlag']])
Z(z[11])
Z([[2,'!'],[[7],[3,'videoFlag']]])
Z(z[13])
Z([3,'moreVide'])
Z([[7],[3,'videoLength']])
Z(z[16])
})(__WXML_GLOBAL__.ops_cached.$gwx_26);return __WXML_GLOBAL__.ops_cached.$gwx_26
}
function gz$gwx_27(){
if( __WXML_GLOBAL__.ops_cached.$gwx_27)return __WXML_GLOBAL__.ops_cached.$gwx_27
__WXML_GLOBAL__.ops_cached.$gwx_27=[];
(function(z){var a=11;function Z(ops){z.push(ops)}
})(__WXML_GLOBAL__.ops_cached.$gwx_27);return __WXML_GLOBAL__.ops_cached.$gwx_27
}
__WXML_GLOBAL__.ops_set.$gwx=z;
__WXML_GLOBAL__.ops_init.$gwx=true;
var nv_require=function(){var nnm={};var nom={};return function(n){return function(){if(!nnm[n]) return undefined;try{if(!nom[n])nom[n]=nnm[n]();return nom[n];}catch(e){e.message=e.message.replace(/nv_/g,'');var tmp = e.stack.substring(0,e.stack.lastIndexOf(n));e.stack = tmp.substring(0,tmp.lastIndexOf('\n'));e.stack = e.stack.replace(/\snv_/g,' ');e.stack = $gstack(e.stack);e.stack += '\n    at ' + n.substring(2);throw e;}
}}}()
var x=['./pages/bearVideo/bearVideo.wxml','./pages/chat/chat.wxml','./pages/components/live-room/liveroom.wxml','/pages/components/live-room/vertical1v3template/vertical1v3.wxml','./pages/components/live-room/vertical1v3template/vertical1v3.wxml','./pages/components/rtc-room/gridtemplate/gridtemplate.wxml','./pages/components/rtc-room/rtc-room.wxml','./gridtemplate/gridtemplate.wxml','./pages/counselorList/counselorList.wxml','./pages/dreamHabitat/dreamHabitat.wxml','./pages/h5page/h5page.wxml','./pages/healthCenter/healthCenter.wxml','./pages/houseType/houseType.wxml','./pages/houseTypeDetail/houseTypeDetail.wxml','./pages/index/index.wxml','./pages/messagesList/messagesList.wxml','./pages/multiroom/aide/aide.wxml','./pages/multiroom/chatlist/chatList.wxml','./pages/multiroom/room/room.wxml','./pages/multiroom/roomlist/roomlist.wxml','./pages/multiroom/roomname/roomname.wxml','./pages/noticeList/noticeList.wxml','./pages/savephone/savephone.wxml','./pages/scaleImg/scaleImage.wxml','./pages/share/share.wxml','./pages/shareFriend/shareFriend.wxml','./pages/shareProgram/shareProgram.wxml','./pages/video/video.wxml','./pages/webView/webView.wxml'];d_[x[0]]={}
var m0=function(e,s,r,gg){
var z=gz$gwx_1()
return r
}
e_[x[0]]={f:m0,j:[],i:[],ti:[],ic:[]}
d_[x[1]]={}
var m1=function(e,s,r,gg){
var z=gz$gwx_2()
var xC=_n('view')
_rz(z,xC,'style',0,e,s,gg)
var cF=_mz(z,'scroll-view',['scrollY',-1,'bindscrolltoupper',1,'class',1,'scrollIntoView',2,'style',3],[],e,s,gg)
var hG=_v()
_(cF,hG)
var oH=function(oJ,cI,lK,gg){
var tM=_n('view')
_rz(z,tM,'class',8,oJ,cI,gg)
var eN=_v()
_(tM,eN)
if(_oz(z,9,oJ,cI,gg)){eN.wxVkey=1
}
var bO=_v()
_(tM,bO)
if(_oz(z,10,oJ,cI,gg)){bO.wxVkey=1
}
var oP=_v()
_(tM,oP)
if(_oz(z,11,oJ,cI,gg)){oP.wxVkey=1
}
var xQ=_v()
_(tM,xQ)
if(_oz(z,12,oJ,cI,gg)){xQ.wxVkey=1
}
var oR=_v()
_(tM,oR)
if(_oz(z,13,oJ,cI,gg)){oR.wxVkey=1
}
var fS=_v()
_(tM,fS)
if(_oz(z,14,oJ,cI,gg)){fS.wxVkey=1
}
var cT=_v()
_(tM,cT)
if(_oz(z,15,oJ,cI,gg)){cT.wxVkey=1
}
var hU=_v()
_(tM,hU)
if(_oz(z,16,oJ,cI,gg)){hU.wxVkey=1
}
var oV=_v()
_(tM,oV)
if(_oz(z,17,oJ,cI,gg)){oV.wxVkey=1
}
eN.wxXCkey=1
bO.wxXCkey=1
oP.wxXCkey=1
xQ.wxXCkey=1
oR.wxXCkey=1
fS.wxXCkey=1
cT.wxXCkey=1
hU.wxXCkey=1
oV.wxXCkey=1
_(lK,tM)
return lK
}
hG.wxXCkey=2
_2z(z,6,oH,e,s,gg,hG,'item','index','index')
_(xC,cF)
var oD=_v()
_(xC,oD)
if(_oz(z,18,e,s,gg)){oD.wxVkey=1
}
var fE=_v()
_(xC,fE)
if(_oz(z,19,e,s,gg)){fE.wxVkey=1
}
oD.wxXCkey=1
fE.wxXCkey=1
_(r,xC)
return r
}
e_[x[1]]={f:m1,j:[],i:[],ti:[],ic:[]}
d_[x[2]]={}
var m2=function(e,s,r,gg){
var z=gz$gwx_3()
var oX=_v()
_(r,oX)
if(_oz(z,0,e,s,gg)){oX.wxVkey=1
var lY=e_[x[2]].i
_ai(lY,x[3],e_,x[2],2,6)
var aZ=_v()
_(oX,aZ)
var t1=_oz(z,2,e,s,gg)
var e2=_gd(x[2],t1,e_,d_)
if(e2){
var b3=_1z(z,1,e,s,gg) || {}
var cur_globalf=gg.f
aZ.wxXCkey=3
e2(b3,b3,aZ,gg)
gg.f=cur_globalf
}
else _w(t1,x[2],3,18)
lY.pop()
}
else{oX.wxVkey=2
var o4=_n('view')
_rz(z,o4,'class',3,e,s,gg)
var x5=_v()
_(o4,x5)
if(_oz(z,4,e,s,gg)){x5.wxVkey=1
var c8=_n('view')
_rz(z,c8,'class',5,e,s,gg)
var h9=_v()
_(c8,h9)
if(_oz(z,6,e,s,gg)){h9.wxVkey=1
var o0=_mz(z,'live-pusher',['aspect',7,'backgroundMute',1,'beauty',2,'binderror',3,'bindstatechange',4,'debug',5,'enableCamera',6,'id',7,'mode',8,'muted',9,'url',10,'waitingImage',11],[],e,s,gg)
var cAB=_n('slot')
_(o0,cAB)
_(h9,o0)
}
var oBB=_v()
_(c8,oBB)
var lCB=function(tEB,aDB,eFB,gg){
var oHB=_v()
_(eFB,oHB)
if(_oz(z,21,tEB,aDB,gg)){oHB.wxVkey=1
var xIB=_mz(z,'live-player',['autoplay',-1,'backgroundMute',22,'binderror',1,'bindstatechange',2,'debug',3,'id',4,'maxCache',5,'minCache',6,'mode',7,'muted',8,'objectFit',9,'src',10],[],tEB,aDB,gg)
var oJB=_v()
_(xIB,oJB)
if(_oz(z,33,tEB,aDB,gg)){oJB.wxVkey=1
}
var fKB=_n('cover-view')
_rz(z,fKB,'class',34,tEB,aDB,gg)
var cLB=_v()
_(fKB,cLB)
if(_oz(z,35,tEB,aDB,gg)){cLB.wxVkey=1
}
var hMB=_v()
_(fKB,hMB)
if(_oz(z,36,tEB,aDB,gg)){hMB.wxVkey=1
}
var oNB=_v()
_(fKB,oNB)
if(_oz(z,37,tEB,aDB,gg)){oNB.wxVkey=1
}
cLB.wxXCkey=1
hMB.wxXCkey=1
oNB.wxXCkey=1
_(xIB,fKB)
oJB.wxXCkey=1
_(oHB,xIB)
}
oHB.wxXCkey=1
return eFB
}
oBB.wxXCkey=2
_2z(z,19,lCB,e,s,gg,oBB,'item','index','{{index}}')
h9.wxXCkey=1
_(x5,c8)
var f7=_v()
_(x5,f7)
if(_oz(z,38,e,s,gg)){f7.wxVkey=1
var cOB=_n('view')
_rz(z,cOB,'class',39,e,s,gg)
var oPB=_v()
_(cOB,oPB)
if(_oz(z,40,e,s,gg)){oPB.wxVkey=1
var lQB=_v()
_(oPB,lQB)
if(_oz(z,41,e,s,gg)){lQB.wxVkey=1
}
lQB.wxXCkey=1
}
var aRB=_v()
_(cOB,aRB)
var tSB=function(bUB,eTB,oVB,gg){
var oXB=_v()
_(oVB,oXB)
if(_oz(z,44,bUB,eTB,gg)){oXB.wxVkey=1
var fYB=_mz(z,'live-player',['autoplay',-1,'backgroundMute',45,'debug',1,'id',2,'maxCache',3,'minCache',4,'mode',5,'objectFit',6,'src',7],[],bUB,eTB,gg)
var cZB=_v()
_(fYB,cZB)
if(_oz(z,53,bUB,eTB,gg)){cZB.wxVkey=1
}
var h1B=_v()
_(fYB,h1B)
if(_oz(z,54,bUB,eTB,gg)){h1B.wxVkey=1
}
cZB.wxXCkey=1
h1B.wxXCkey=1
_(oXB,fYB)
}
oXB.wxXCkey=1
return oVB
}
aRB.wxXCkey=2
_2z(z,42,tSB,e,s,gg,aRB,'item','index','{{item.userID}}')
oPB.wxXCkey=1
_(f7,cOB)
}
f7.wxXCkey=1
}
var o6=_v()
_(o4,o6)
if(_oz(z,55,e,s,gg)){o6.wxVkey=1
var o2B=_n('view')
_rz(z,o2B,'style',56,e,s,gg)
var o4B=_n('view')
_rz(z,o4B,'style',57,e,s,gg)
var l5B=_v()
_(o4B,l5B)
if(_oz(z,58,e,s,gg)){l5B.wxVkey=1
}
var a6B=_v()
_(o4B,a6B)
var t7B=function(b9B,e8B,o0B,gg){
var oBC=_v()
_(o0B,oBC)
if(_oz(z,61,b9B,e8B,gg)){oBC.wxVkey=1
var fCC=_mz(z,'live-player',['autoplay',-1,'backgroundMute',62,'binderror',1,'bindstatechange',2,'debug',3,'id',4,'mode',5,'src',6],[],b9B,e8B,gg)
var cDC=_v()
_(fCC,cDC)
if(_oz(z,69,b9B,e8B,gg)){cDC.wxVkey=1
}
cDC.wxXCkey=1
_(oBC,fCC)
}
oBC.wxXCkey=1
return o0B
}
a6B.wxXCkey=2
_2z(z,59,t7B,e,s,gg,a6B,'item','index','{{index}}')
l5B.wxXCkey=1
_(o2B,o4B)
var c3B=_v()
_(o2B,c3B)
if(_oz(z,70,e,s,gg)){c3B.wxVkey=1
var hEC=_v()
_(c3B,hEC)
if(_oz(z,71,e,s,gg)){hEC.wxVkey=1
}
hEC.wxXCkey=1
}
var oFC=_v()
_(o2B,oFC)
var cGC=function(lIC,oHC,aJC,gg){
var eLC=_v()
_(aJC,eLC)
if(_oz(z,74,lIC,oHC,gg)){eLC.wxVkey=1
var bMC=_v()
_(eLC,bMC)
if(_oz(z,75,lIC,oHC,gg)){bMC.wxVkey=1
}
bMC.wxXCkey=1
}
eLC.wxXCkey=1
return aJC
}
oFC.wxXCkey=2
_2z(z,72,cGC,e,s,gg,oFC,'item','index','{{index}}')
c3B.wxXCkey=1
_(o6,o2B)
}
x5.wxXCkey=1
o6.wxXCkey=1
_(oX,o4)
}
oX.wxXCkey=1
return r
}
e_[x[2]]={f:m2,j:[],i:[],ti:[],ic:[]}
d_[x[4]]={}
d_[x[4]]["vertical1v3"]=function(e,s,r,gg){
var z=gz$gwx_4()
var b=x[4]+':vertical1v3'
r.wxVkey=b
gg.f=$gdc(f_["./pages/components/live-room/vertical1v3template/vertical1v3.wxml"],"",1)
if(p_[b]){_wl(b,x[4]);return}
p_[b]=true
try{
var xC=_n('view')
_rz(z,xC,'class',1,e,s,gg)
var oD=_v()
_(xC,oD)
if(_oz(z,2,e,s,gg)){oD.wxVkey=1
var fE=_v()
_(oD,fE)
if(_oz(z,3,e,s,gg)){fE.wxVkey=1
}
fE.wxXCkey=1
}
var cF=_v()
_(xC,cF)
var hG=function(cI,oH,oJ,gg){
var aL=_v()
_(oJ,aL)
if(_oz(z,6,cI,oH,gg)){aL.wxVkey=1
var tM=_mz(z,'live-player',['autoplay',-1,'backgroundMute',7,'binderror',1,'bindstatechange',2,'debug',3,'id',4,'maxCache',5,'minCache',6,'mode',7,'muted',8,'objectFit',9,'src',10],[],cI,oH,gg)
var eN=_n('cover-view')
_rz(z,eN,'class',18,cI,oH,gg)
var bO=_v()
_(eN,bO)
if(_oz(z,19,cI,oH,gg)){bO.wxVkey=1
}
var oP=_v()
_(eN,oP)
if(_oz(z,20,cI,oH,gg)){oP.wxVkey=1
}
var xQ=_v()
_(eN,xQ)
if(_oz(z,21,cI,oH,gg)){xQ.wxVkey=1
}
bO.wxXCkey=1
oP.wxXCkey=1
xQ.wxXCkey=1
_(tM,eN)
_(aL,tM)
}
aL.wxXCkey=1
return oJ
}
cF.wxXCkey=2
_2z(z,4,hG,e,s,gg,cF,'item','index','{{index}}')
oD.wxXCkey=1
_(r,xC)
var oB=_v()
_(r,oB)
if(_oz(z,22,e,s,gg)){oB.wxVkey=1
var oR=_n('view')
_rz(z,oR,'class',23,e,s,gg)
var fS=_v()
_(oR,fS)
if(_oz(z,24,e,s,gg)){fS.wxVkey=1
var cT=_v()
_(fS,cT)
if(_oz(z,25,e,s,gg)){cT.wxVkey=1
}
cT.wxXCkey=1
}
var hU=_v()
_(oR,hU)
var oV=function(oX,cW,lY,gg){
var t1=_v()
_(lY,t1)
if(_oz(z,28,oX,cW,gg)){t1.wxVkey=1
var e2=_mz(z,'live-player',['autoplay',-1,'backgroundMute',29,'debug',1,'id',2,'maxCache',3,'minCache',4,'mode',5,'objectFit',6,'src',7],[],oX,cW,gg)
var b3=_v()
_(e2,b3)
if(_oz(z,37,oX,cW,gg)){b3.wxVkey=1
}
var o4=_v()
_(e2,o4)
if(_oz(z,38,oX,cW,gg)){o4.wxVkey=1
}
b3.wxXCkey=1
o4.wxXCkey=1
_(t1,e2)
}
t1.wxXCkey=1
return lY
}
hU.wxXCkey=2
_2z(z,26,oV,e,s,gg,hU,'item','index','{{item.userID}}')
fS.wxXCkey=1
_(oB,oR)
}
oB.wxXCkey=1
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
var m3=function(e,s,r,gg){
var z=gz$gwx_4()
return r
}
e_[x[4]]={f:m3,j:[],i:[],ti:[],ic:[]}
d_[x[5]]={}
d_[x[5]]["gridtemplate"]=function(e,s,r,gg){
var z=gz$gwx_5()
var b=x[5]+':gridtemplate'
r.wxVkey=b
gg.f=$gdc(f_["./pages/components/rtc-room/gridtemplate/gridtemplate.wxml"],"",1)
if(p_[b]){_wl(b,x[5]);return}
p_[b]=true
try{
var oB=_n('view')
_rz(z,oB,'class',1,e,s,gg)
var xC=_v()
_(oB,xC)
if(_oz(z,2,e,s,gg)){xC.wxVkey=1
}
var oD=_v()
_(oB,oD)
var fE=function(hG,cF,oH,gg){
var oJ=_v()
_(oH,oJ)
if(_oz(z,5,hG,cF,gg)){oJ.wxVkey=1
}
oJ.wxXCkey=1
return oH
}
oD.wxXCkey=2
_2z(z,3,fE,e,s,gg,oD,'item','index','userID')
xC.wxXCkey=1
_(r,oB)
}catch(err){
p_[b]=false
throw err
}
p_[b]=false
return r
}
var m4=function(e,s,r,gg){
var z=gz$gwx_5()
return r
}
e_[x[5]]={f:m4,j:[],i:[],ti:[],ic:[]}
d_[x[6]]={}
var m5=function(e,s,r,gg){
var z=gz$gwx_6()
var fQC=e_[x[6]].i
_ai(fQC,x[7],e_,x[6],1,1)
var cRC=_v()
_(r,cRC)
if(_oz(z,0,e,s,gg)){cRC.wxVkey=1
var hSC=_v()
_(cRC,hSC)
var oTC=_oz(z,2,e,s,gg)
var cUC=_gd(x[6],oTC,e_,d_)
if(cUC){
var oVC=_1z(z,1,e,s,gg) || {}
var cur_globalf=gg.f
hSC.wxXCkey=3
cUC(oVC,oVC,hSC,gg)
gg.f=cur_globalf
}
else _w(oTC,x[6],4,22)
}
cRC.wxXCkey=1
fQC.pop()
return r
}
e_[x[6]]={f:m5,j:[],i:[],ti:[x[7]],ic:[]}
d_[x[8]]={}
var m6=function(e,s,r,gg){
var z=gz$gwx_7()
var aXC=_v()
_(r,aXC)
if(_oz(z,0,e,s,gg)){aXC.wxVkey=1
}
var tYC=_v()
_(r,tYC)
if(_oz(z,1,e,s,gg)){tYC.wxVkey=1
}
var eZC=_v()
_(r,eZC)
if(_oz(z,2,e,s,gg)){eZC.wxVkey=1
}
var b1C=_v()
_(r,b1C)
if(_oz(z,3,e,s,gg)){b1C.wxVkey=1
}
var o2C=_v()
_(r,o2C)
if(_oz(z,4,e,s,gg)){o2C.wxVkey=1
}
aXC.wxXCkey=1
tYC.wxXCkey=1
eZC.wxXCkey=1
b1C.wxXCkey=1
o2C.wxXCkey=1
return r
}
e_[x[8]]={f:m6,j:[],i:[],ti:[],ic:[]}
d_[x[9]]={}
var m7=function(e,s,r,gg){
var z=gz$gwx_8()
return r
}
e_[x[9]]={f:m7,j:[],i:[],ti:[],ic:[]}
d_[x[10]]={}
var m8=function(e,s,r,gg){
var z=gz$gwx_9()
return r
}
e_[x[10]]={f:m8,j:[],i:[],ti:[],ic:[]}
d_[x[11]]={}
var m9=function(e,s,r,gg){
var z=gz$gwx_10()
return r
}
e_[x[11]]={f:m9,j:[],i:[],ti:[],ic:[]}
d_[x[12]]={}
var m10=function(e,s,r,gg){
var z=gz$gwx_11()
return r
}
e_[x[12]]={f:m10,j:[],i:[],ti:[],ic:[]}
d_[x[13]]={}
var m11=function(e,s,r,gg){
var z=gz$gwx_12()
var o8C=_n('view')
_rz(z,o8C,'class',0,e,s,gg)
var c9C=_v()
_(o8C,c9C)
if(_oz(z,1,e,s,gg)){c9C.wxVkey=1
}
var o0C=_v()
_(o8C,o0C)
if(_oz(z,2,e,s,gg)){o0C.wxVkey=1
}
c9C.wxXCkey=1
o0C.wxXCkey=1
_(r,o8C)
return r
}
e_[x[13]]={f:m11,j:[],i:[],ti:[],ic:[]}
d_[x[14]]={}
var m12=function(e,s,r,gg){
var z=gz$gwx_13()
var aBD=_v()
_(r,aBD)
if(_oz(z,0,e,s,gg)){aBD.wxVkey=1
}
var tCD=_v()
_(r,tCD)
if(_oz(z,1,e,s,gg)){tCD.wxVkey=1
}
var eDD=_v()
_(r,eDD)
if(_oz(z,2,e,s,gg)){eDD.wxVkey=1
}
var bED=_v()
_(r,bED)
if(_oz(z,3,e,s,gg)){bED.wxVkey=1
}
var oFD=_v()
_(r,oFD)
if(_oz(z,4,e,s,gg)){oFD.wxVkey=1
var xGD=_mz(z,'scroll-view',['bindscroll',5,'class',1,'scrollIntoView',2,'scrollY',3,'style',4],[],e,s,gg)
var oND=_n('view')
_rz(z,oND,'class',10,e,s,gg)
var aPD=_mz(z,'swiper',['autoplay',11,'bindchange',1,'circular',2,'class',3,'duration',4,'interval',5],[],e,s,gg)
var tQD=_v()
_(aPD,tQD)
var eRD=function(oTD,bSD,xUD,gg){
var fWD=_v()
_(xUD,fWD)
if(_oz(z,20,oTD,bSD,gg)){fWD.wxVkey=1
}
fWD.wxXCkey=1
return xUD
}
tQD.wxXCkey=2
_2z(z,18,eRD,e,s,gg,tQD,'item','index','item.id')
_(oND,aPD)
var lOD=_v()
_(oND,lOD)
if(_oz(z,21,e,s,gg)){lOD.wxVkey=1
}
lOD.wxXCkey=1
_(xGD,oND)
var oHD=_v()
_(xGD,oHD)
if(_oz(z,22,e,s,gg)){oHD.wxVkey=1
}
var fID=_v()
_(xGD,fID)
if(_oz(z,23,e,s,gg)){fID.wxVkey=1
}
var cJD=_v()
_(xGD,cJD)
if(_oz(z,24,e,s,gg)){cJD.wxVkey=1
}
var hKD=_v()
_(xGD,hKD)
if(_oz(z,25,e,s,gg)){hKD.wxVkey=1
}
var oLD=_v()
_(xGD,oLD)
if(_oz(z,26,e,s,gg)){oLD.wxVkey=1
}
var cMD=_v()
_(xGD,cMD)
if(_oz(z,27,e,s,gg)){cMD.wxVkey=1
}
oHD.wxXCkey=1
fID.wxXCkey=1
cJD.wxXCkey=1
hKD.wxXCkey=1
oLD.wxXCkey=1
cMD.wxXCkey=1
_(oFD,xGD)
}
aBD.wxXCkey=1
tCD.wxXCkey=1
eDD.wxXCkey=1
bED.wxXCkey=1
oFD.wxXCkey=1
return r
}
e_[x[14]]={f:m12,j:[],i:[],ti:[],ic:[]}
d_[x[15]]={}
var m13=function(e,s,r,gg){
var z=gz$gwx_14()
var hYD=_v()
_(r,hYD)
if(_oz(z,0,e,s,gg)){hYD.wxVkey=1
}
var oZD=_v()
_(r,oZD)
if(_oz(z,1,e,s,gg)){oZD.wxVkey=1
}
var c1D=_v()
_(r,c1D)
if(_oz(z,2,e,s,gg)){c1D.wxVkey=1
}
var a4D=_v()
_(r,a4D)
var t5D=function(b7D,e6D,o8D,gg){
var o0D=_mz(z,'view',['bindtap',6,'class',1,'data-item',2],[],b7D,e6D,gg)
var fAE=_v()
_(o0D,fAE)
if(_oz(z,9,b7D,e6D,gg)){fAE.wxVkey=1
}
fAE.wxXCkey=1
_(o8D,o0D)
return o8D
}
a4D.wxXCkey=2
_2z(z,4,t5D,e,s,gg,a4D,'item','index','index')
var o2D=_v()
_(r,o2D)
if(_oz(z,10,e,s,gg)){o2D.wxVkey=1
}
var l3D=_v()
_(r,l3D)
if(_oz(z,11,e,s,gg)){l3D.wxVkey=1
}
hYD.wxXCkey=1
oZD.wxXCkey=1
c1D.wxXCkey=1
o2D.wxXCkey=1
l3D.wxXCkey=1
return r
}
e_[x[15]]={f:m13,j:[],i:[],ti:[],ic:[]}
d_[x[16]]={}
var m14=function(e,s,r,gg){
var z=gz$gwx_15()
return r
}
e_[x[16]]={f:m14,j:[],i:[],ti:[],ic:[]}
d_[x[17]]={}
var m15=function(e,s,r,gg){
var z=gz$gwx_16()
return r
}
e_[x[17]]={f:m15,j:[],i:[],ti:[],ic:[]}
d_[x[18]]={}
var m16=function(e,s,r,gg){
var z=gz$gwx_17()
var cEE=_n('view')
_rz(z,cEE,'class',0,e,s,gg)
var aHE=_mz(z,'rtc-room',['assistant',1,'beauty',1,'bind:decline',2,'bind:onliveplay',3,'bind:trigVideo',4,'bindonRoomEvent',5,'bindstatechange',6,'debug',7,'flag',8,'flagStatus',9,'hideBg',10,'id',11,'muted',12,'roomID',13,'roomInfo',14,'startTime',15,'template',16],[],e,s,gg)
_(cEE,aHE)
var oFE=_v()
_(cEE,oFE)
if(_oz(z,18,e,s,gg)){oFE.wxVkey=1
}
var lGE=_v()
_(cEE,lGE)
if(_oz(z,19,e,s,gg)){lGE.wxVkey=1
}
oFE.wxXCkey=1
lGE.wxXCkey=1
_(r,cEE)
return r
}
e_[x[18]]={f:m16,j:[],i:[],ti:[],ic:[]}
d_[x[19]]={}
var m17=function(e,s,r,gg){
var z=gz$gwx_18()
var eJE=_n('view')
_rz(z,eJE,'class',0,e,s,gg)
var bKE=_v()
_(eJE,bKE)
if(_oz(z,1,e,s,gg)){bKE.wxVkey=1
}
var oLE=_v()
_(eJE,oLE)
if(_oz(z,2,e,s,gg)){oLE.wxVkey=1
}
bKE.wxXCkey=1
oLE.wxXCkey=1
_(r,eJE)
return r
}
e_[x[19]]={f:m17,j:[],i:[],ti:[],ic:[]}
d_[x[20]]={}
var m18=function(e,s,r,gg){
var z=gz$gwx_19()
return r
}
e_[x[20]]={f:m18,j:[],i:[],ti:[],ic:[]}
d_[x[21]]={}
var m19=function(e,s,r,gg){
var z=gz$gwx_20()
var fOE=_v()
_(r,fOE)
if(_oz(z,0,e,s,gg)){fOE.wxVkey=1
}
var cPE=_v()
_(r,cPE)
if(_oz(z,1,e,s,gg)){cPE.wxVkey=1
}
var hQE=_v()
_(r,hQE)
if(_oz(z,2,e,s,gg)){hQE.wxVkey=1
}
var oRE=_v()
_(r,oRE)
if(_oz(z,3,e,s,gg)){oRE.wxVkey=1
}
fOE.wxXCkey=1
cPE.wxXCkey=1
hQE.wxXCkey=1
oRE.wxXCkey=1
return r
}
e_[x[21]]={f:m19,j:[],i:[],ti:[],ic:[]}
d_[x[22]]={}
var m20=function(e,s,r,gg){
var z=gz$gwx_21()
var oTE=_v()
_(r,oTE)
if(_oz(z,0,e,s,gg)){oTE.wxVkey=1
}
oTE.wxXCkey=1
return r
}
e_[x[22]]={f:m20,j:[],i:[],ti:[],ic:[]}
d_[x[23]]={}
var m21=function(e,s,r,gg){
var z=gz$gwx_22()
return r
}
e_[x[23]]={f:m21,j:[],i:[],ti:[],ic:[]}
d_[x[24]]={}
var m22=function(e,s,r,gg){
var z=gz$gwx_23()
var tWE=_v()
_(r,tWE)
if(_oz(z,0,e,s,gg)){tWE.wxVkey=1
}
var eXE=_v()
_(r,eXE)
if(_oz(z,1,e,s,gg)){eXE.wxVkey=1
}
var bYE=_v()
_(r,bYE)
if(_oz(z,2,e,s,gg)){bYE.wxVkey=1
}
var oZE=_v()
_(r,oZE)
var x1E=function(f3E,o2E,c4E,gg){
var o6E=_v()
_(c4E,o6E)
if(_oz(z,5,f3E,o2E,gg)){o6E.wxVkey=1
}
o6E.wxXCkey=1
return c4E
}
oZE.wxXCkey=2
_2z(z,3,x1E,e,s,gg,oZE,'item','index','key')
tWE.wxXCkey=1
eXE.wxXCkey=1
bYE.wxXCkey=1
return r
}
e_[x[24]]={f:m22,j:[],i:[],ti:[],ic:[]}
d_[x[25]]={}
var m23=function(e,s,r,gg){
var z=gz$gwx_24()
var o8E=_v()
_(r,o8E)
if(_oz(z,0,e,s,gg)){o8E.wxVkey=1
var l9E=_n('view')
_rz(z,l9E,'class',1,e,s,gg)
var a0E=_v()
_(l9E,a0E)
if(_oz(z,2,e,s,gg)){a0E.wxVkey=1
}
var tAF=_v()
_(l9E,tAF)
if(_oz(z,3,e,s,gg)){tAF.wxVkey=1
}
a0E.wxXCkey=1
tAF.wxXCkey=1
_(o8E,l9E)
}
o8E.wxXCkey=1
return r
}
e_[x[25]]={f:m23,j:[],i:[],ti:[],ic:[]}
d_[x[26]]={}
var m24=function(e,s,r,gg){
var z=gz$gwx_25()
return r
}
e_[x[26]]={f:m24,j:[],i:[],ti:[],ic:[]}
d_[x[27]]={}
var m25=function(e,s,r,gg){
var z=gz$gwx_26()
var oDF=_mz(z,'video',['autoplay',0,'bindfullscreenchange',1,'bindplay',1,'class',2,'controls',3,'customCache',4,'direction',5,'enableProgressGesture',6,'id',7,'loop',8,'src',9],[],e,s,gg)
var xEF=_v()
_(oDF,xEF)
if(_oz(z,11,e,s,gg)){xEF.wxVkey=1
}
var oFF=_v()
_(oDF,oFF)
if(_oz(z,12,e,s,gg)){oFF.wxVkey=1
}
var fGF=_v()
_(oDF,fGF)
if(_oz(z,13,e,s,gg)){fGF.wxVkey=1
}
var cHF=_v()
_(oDF,cHF)
if(_oz(z,14,e,s,gg)){cHF.wxVkey=1
var hIF=_n('cover-view')
_rz(z,hIF,'class',15,e,s,gg)
var oJF=_v()
_(hIF,oJF)
if(_oz(z,16,e,s,gg)){oJF.wxVkey=1
}
var cKF=_v()
_(hIF,cKF)
if(_oz(z,17,e,s,gg)){cKF.wxVkey=1
}
oJF.wxXCkey=1
cKF.wxXCkey=1
_(cHF,hIF)
}
xEF.wxXCkey=1
oFF.wxXCkey=1
fGF.wxXCkey=1
cHF.wxXCkey=1
_(r,oDF)
return r
}
e_[x[27]]={f:m25,j:[],i:[],ti:[],ic:[]}
d_[x[28]]={}
var m26=function(e,s,r,gg){
var z=gz$gwx_27()
return r
}
e_[x[28]]={f:m26,j:[],i:[],ti:[],ic:[]}
if(path&&e_[path]){
return function(env,dd,global){$gwxc=0;var root={"tag":"wx-page"};root.children=[]
var main=e_[path].f
if (typeof global==="undefined")global={};global.f=$gdc(f_[path],"",1);
try{
main(env,{},root,global);
_tsd(root)
}catch(err){
console.log(err)
}
return root;
}
}
}
	__wxAppCode__['pages/components/live-room/liveroom.json'] = {"component":true,"usingComponents":{}};
		__wxAppCode__['pages/components/live-room/liveroom.wxml'] = $gwx( './pages/components/live-room/liveroom.wxml' );
		__wxAppCode__['pages/components/rtc-room/rtc-room.json'] = {"component":true,"usingComponents":{}};
		__wxAppCode__['pages/components/rtc-room/rtc-room.wxml'] = $gwx( './pages/components/rtc-room/rtc-room.wxml' );
		__wxAppCode__['pages/multiroom/room/room.json'] = {"navigationBarTitleText":"视频看房","usingComponents":{"rtc-room":"/pages/components/rtc-room/rtc-room"}};
		__wxAppCode__['pages/multiroom/room/room.wxml'] = $gwx( './pages/multiroom/room/room.wxml' );
	
	define("config.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports={sdkAppID:"1400107457",accType:"30285",houseId:10011,color1:"#4E8789",color2:"#272A34",color3:"#3F7071",color4:"#C8E2E2",backColor:"#474952",projectName:"泰宁养生现代村落",url:"https://dm-api.elab-plus.cn/",newUrl:"https://dm-api.elab-plus.cn/",ImgUrl:"http://skyforest.static.elab-plus.com/",parameterUrl:"https://m.elab-plus.com/sell/#/houseParameter?houseId=",tdviewUrl:"https://m.elab-plus.com/sell/#/tdview?houseId=",serverUrl:"https://dm-api.elab-plus.cn/elab-marketing-rtc",roomServiceUrl:"https://dm-api.elab-plus.cn/elab-marketing-rtc",webrtcServerUrl:"https://dm-api.elab-plus.cn/elab-marketing-rtc",templateUrl:"https://m.elab-plus.com/launch/#/pages/preview?projectId=",newTemplateUrl:"https://dm-mng.elab-plus.cn/touFangBao/#/pages/preview?houseId="}; 
 			}); 
		define("getlogininfo.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){console.log("获取IM登录信息成功");var n={};switch(n.userSig=l.globalData.userSig,n.userID=l.globalData.identifier,n.loginid=l.globalData.loginid,n.userSplitID=l.globalData.single.id,n.sdkAppID=t.sdkAppID,n.accType=t.accType,n.serverDomain=t.roomServiceUrl+"/weapp/"+e.type+"/",n.userName=e.name,n.userAvatar=e.head,n.gender=e.sex,n.selToID=e.opt.id+"_"+t.houseId,n.opt=e.opt,e.type){case"multi_room":case"double_room":a.login({data:n,success:e.success,fail:e.fail});break;case"live_room":o.login({data:ret.data,success:e.success,fail:e.fail})}}var a=require("./utils/rtcroom.js"),o=require("./utils/liveroom.js"),t=require("./config.js"),n=require("./utils/util.js"),l=getApp();module.exports={getLoginInfo:function(a){l.globalData.userInfo||(l.globalData.userInfo=wx.getStorageSync("userInfo")),a.userName=l.globalData.userInfo.nickName,a.gender=l.globalData.userInfo.gender,a.userAvatar=l.globalData.userInfo.avatarUrl,a.code=l.globalData.code,a.openId=l.globalData.openid,e(a)},getUserInfo:function(e){var a=this;wx.setStorageSync("ISauthorizeInfo",!0),console.log(e.detail,"***getUserInfo***"),this.setData({showInfoModel:!1}),e.detail.errMsg.includes("fail")?(l.globalData.globalUserInfoFlag=!0,"function"==typeof a.data.infoFailFun&&a.data.infoFailFun()):(wx.request({url:n.newUrl()+"elab-marketing-authentication/customer/modify",method:"POST",header:{token:l.globalData.tonken},data:{houseId:t.houseId,id:l.globalData.single.id,headPortrait:e.detail.userInfo.avatarUrl,nickname:e.detail.userInfo.nickName},success:function(e){console.log(e,"提交用户信息成功")}}),l.globalData.userInfo=e.detail.userInfo,l.globalData.globalUserInfoFlag=!0,wx.setStorageSync("userInfo",e.detail.userInfo),"function"==typeof a.data.infoFun&&a.data.infoFun())},authorizeInfo:function(e,a){var o=this;l.globalData.userInfo=wx.getStorageSync("userInfo"),wx.getSetting({success:function(t){console.log("getSetting",t),console.log(t.authSetting["scope.userInfo"],0x126221562774bd00),console.log(l.globalData.userInfo,0x126221562774bd00),t.authSetting["scope.userInfo"]||l.globalData.isUserInfo?(o.setData({showInfoModel:!1}),"function"==typeof e&&e()):(l.globalData.isUserInfo=!0,o.setData({showInfoModel:!0,infoFun:e,infoFailFun:a||null}))},fail:function(){wx.showToast({title:"系统提示:网络错误",icon:"warn",duration:1500})}})}}; 
 			}); 
		define("utils/base64.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(t){var o="object"==("undefined"==typeof exports?"undefined":e(exports))&&exports,r="object"==("undefined"==typeof module?"undefined":e(module))&&module&&module.exports==o&&module,n="object"==("undefined"==typeof global?"undefined":e(global))&&global;n.global!==n&&n.window!==n||(t=n);var a=function(e){this.message=e};(a.prototype=new Error).name="InvalidCharacterError";var c=function(e){throw new a(e)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=/[\t\n\f\r ]/g,f={encode:function(e){e=String(e),/[^\0-\xFF]/.test(e)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var t,o=e.length%3,r="",n=-1,a=e.length-o;++n<a;)t=(e.charCodeAt(n)<<16)+(e.charCodeAt(++n)<<8)+e.charCodeAt(++n),r+=d.charAt(t>>18&63)+d.charAt(t>>12&63)+d.charAt(t>>6&63)+d.charAt(63&t);return 2==o?(t=(e.charCodeAt(n)<<8)+e.charCodeAt(++n),r+=d.charAt(t>>10)+d.charAt(t>>4&63)+d.charAt(t<<2&63)+"="):1==o&&(t=e.charCodeAt(n),r+=d.charAt(t>>2)+d.charAt(t<<4&63)+"=="),r},decode:function(e){var t=(e=String(e).replace(i,"")).length;t%4==0&&(t=(e=e.replace(/==?$/,"")).length),(t%4==1||/[^+a-zA-Z0-9/]/.test(e))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var o,r,n=0,a="",f=-1;++f<t;)r=d.indexOf(e.charAt(f)),o=n%4?64*o+r:r,n++%4&&(a+=String.fromCharCode(255&o>>(-2*n&6)));return a},version:"0.1.0"};if("function"==typeof define&&"object"==e(define.amd)&&define.amd)define(function(){return f});else if(o&&!o.nodeType)if(r)r.exports=f;else for(var l in f)f.hasOwnProperty(l)&&(o[l]=f[l]);else t.base64=f}(void 0); 
 			}); 
		define("utils/encrypt.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=function(){function e(e){return a(e)}function a(e){return i(c(o(e),e.length*p))}function c(e,a){e[a>>5]|=128<<a%32,e[14+(a+64>>>9<<4)]=a;for(var c=1732584193,r=-271733879,u=-1732584194,o=271733878,i=0;i<e.length;i+=16){var g=c,s=r,h=u,l=o;r=d(r=d(r=d(r=d(r=t(r=t(r=t(r=t(r=n(r=n(r=n(r=n(r=f(r=f(r=f(r=f(r,u=f(u,o=f(o,c=f(c,r,u,o,e[i+0],7,-680876936),r,u,e[i+1],12,-389564586),c,r,e[i+2],17,606105819),o,c,e[i+3],22,-1044525330),u=f(u,o=f(o,c=f(c,r,u,o,e[i+4],7,-176418897),r,u,e[i+5],12,1200080426),c,r,e[i+6],17,-1473231341),o,c,e[i+7],22,-45705983),u=f(u,o=f(o,c=f(c,r,u,o,e[i+8],7,1770035416),r,u,e[i+9],12,-1958414417),c,r,e[i+10],17,-42063),o,c,e[i+11],22,-1990404162),u=f(u,o=f(o,c=f(c,r,u,o,e[i+12],7,1804603682),r,u,e[i+13],12,-40341101),c,r,e[i+14],17,-1502002290),o,c,e[i+15],22,1236535329),u=n(u,o=n(o,c=n(c,r,u,o,e[i+1],5,-165796510),r,u,e[i+6],9,-1069501632),c,r,e[i+11],14,643717713),o,c,e[i+0],20,-373897302),u=n(u,o=n(o,c=n(c,r,u,o,e[i+5],5,-701558691),r,u,e[i+10],9,38016083),c,r,e[i+15],14,-660478335),o,c,e[i+4],20,-405537848),u=n(u,o=n(o,c=n(c,r,u,o,e[i+9],5,568446438),r,u,e[i+14],9,-1019803690),c,r,e[i+3],14,-187363961),o,c,e[i+8],20,1163531501),u=n(u,o=n(o,c=n(c,r,u,o,e[i+13],5,-1444681467),r,u,e[i+2],9,-51403784),c,r,e[i+7],14,1735328473),o,c,e[i+12],20,-1926607734),u=t(u,o=t(o,c=t(c,r,u,o,e[i+5],4,-378558),r,u,e[i+8],11,-2022574463),c,r,e[i+11],16,1839030562),o,c,e[i+14],23,-35309556),u=t(u,o=t(o,c=t(c,r,u,o,e[i+1],4,-1530992060),r,u,e[i+4],11,1272893353),c,r,e[i+7],16,-155497632),o,c,e[i+10],23,-1094730640),u=t(u,o=t(o,c=t(c,r,u,o,e[i+13],4,681279174),r,u,e[i+0],11,-358537222),c,r,e[i+3],16,-722521979),o,c,e[i+6],23,76029189),u=t(u,o=t(o,c=t(c,r,u,o,e[i+9],4,-640364487),r,u,e[i+12],11,-421815835),c,r,e[i+15],16,530742520),o,c,e[i+2],23,-995338651),u=d(u,o=d(o,c=d(c,r,u,o,e[i+0],6,-198630844),r,u,e[i+7],10,1126891415),c,r,e[i+14],15,-1416354905),o,c,e[i+5],21,-57434055),u=d(u,o=d(o,c=d(c,r,u,o,e[i+12],6,1700485571),r,u,e[i+3],10,-1894986606),c,r,e[i+10],15,-1051523),o,c,e[i+1],21,-2054922799),u=d(u,o=d(o,c=d(c,r,u,o,e[i+8],6,1873313359),r,u,e[i+15],10,-30611744),c,r,e[i+6],15,-1560198380),o,c,e[i+13],21,1309151649),u=d(u,o=d(o,c=d(c,r,u,o,e[i+4],6,-145523070),r,u,e[i+11],10,-1120210379),c,r,e[i+2],15,718787259),o,c,e[i+9],21,-343485551),c=b(c,g),r=b(r,s),u=b(u,h),o=b(o,l)}return 16==v?Array(r,u):Array(c,r,u,o)}function r(e,a,c,r,f,n){return b(u(b(b(a,e),b(r,n)),f),c)}function f(e,a,c,f,n,t,d){return r(a&c|~a&f,e,a,n,t,d)}function n(e,a,c,f,n,t,d){return r(a&f|c&~f,e,a,n,t,d)}function t(e,a,c,f,n,t,d){return r(a^c^f,e,a,n,t,d)}function d(e,a,c,f,n,t,d){return r(c^(a|~f),e,a,n,t,d)}function b(e,a){var c=(65535&e)+(65535&a);return(e>>16)+(a>>16)+(c>>16)<<16|65535&c}function u(e,a){return e<<a|e>>>32-a}function o(e){for(var a=Array(),c=(1<<p)-1,r=0;r<e.length*p;r+=p)a[r>>5]|=(e.charCodeAt(r/p)&c)<<r%32;return a}function i(e){for(var a=l?"0123456789ABCDEF":"0123456789abcdef",c="",r=0;r<4*e.length;r++)c+=a.charAt(e[r>>2]>>r%4*8+4&15)+a.charAt(e[r>>2]>>r%4*8&15);return c}function g(e){for(var a=[],c=0;c<e.length;c+=2)a.push(String.fromCharCode(parseInt(e.substr(c,2),16)));return a.join("")}function s(e){return(e=m.encode(g(e))).replace(/[\/\+=]/g,function(e){return{"/":"-","+":"*","=":"_"}[e]})}function h(){for(var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a="",c=0;c<16;c++)a+=e[Math.round(1e3*Math.random())%e.length];return a}var l=1,p=8,v=32,y=require("tea.js"),A=require("rsa.js"),m=require("base64.js");return{getEncPwd:function(a){console.log(a);for(var c=a.vcode||"",r=e(a.pwd||""),f=e(g(r)+a.salt),n=y.strToBytes(c.toUpperCase(),!0),t=Number(n.length/2).toString(16),d=y.strToBytes(a.id),b=Number(d.length/2).toString(16),u=Number(a.sdkAppid).toString(16),o=Number(0).toString(16);t.length<4;)t="0"+t;for(;b.length<4;)b="0"+b;for(;u.length<8;)u="0"+u;for(;o.length<8;)o="0"+o;y.initkey(f);var i=y.encrypt(r+b+d+u+o+t+n);y.initkey("");return s(A.encrypt(g(i),"00988f6fe99e3d7c72b8b8a1cc9563e9750f5815316de064b531a0bfaa4dd5c2a5ea1f0e9b6e87bbcd19f445a13afada991a8ef60b812c628019741e4337933fb68438d93b62a538da25884627d3d46e6c62a5a41d30a7167a3a1ce5f6ecc3353db98b14a04ce2f777f335223134a900caa74fa79d9ab2c20ce19aaac9c24a82c847fa2eed0704553f75e030d93aa721186576cf5c344015ddc384b6b37add7139531af060548be8060a4bb075cc842bb190343c7f5e0e0b03fe1ca46c29b0df0bec7345888028df47f71fe44a0bd9cb8aed6282c095a75c57b6a604600886744b2965138730b27cf7d173381f0e53523aa1ced6864c09f7cc4135d45c5d4cfcbd","10001"))},getRSAH1:function(a){var c=e(a=a||h());return s(A.encrypt(g(c),"00ccaa91239f0a10fae03522fe6fdc6194007809732b07cb89e04dee9b4fdb9186787659fdf308be6efbc8aa147ffd8b5e4d61aba8a7e40e08af759751e1acc207a3988ce381cca6dfac4c75af1acda8bb3c09dce7a3d43fc23c95eecf56ca0c0c7a7eaeb019c912877757fe23ab28ac7060ee5409da3f0b5f079901475b11ac7d6c5cea1e7bd26a324674878cc31094b62eb407247f3e7f2070bb76a919883eaa114b0a40ea1341bf99dfd131d77343fd113f3a294fc0e19d9cc06989b98a0c14677e589ac41dd414283a3cf7685089d92770e7fde43c6aa443f2822c52fdbba309ea819bea8e4c2f1fac03930081ffd5189de9f025e15c4a1c466b761ba8e7f3","10001"))},md5:e}}(); 
 			}); 
		define("utils/liveroom.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function o(o){if(!P)return console.log("请求服务器域名为空，请将wxlite/config里面的url配置成你的服务器域名"),void(o.fail&&o.fail({errCode:-9,errMsg:"请求服务器域名为空，请将wxlite/config里面的url配置成你的服务器域名"}));U++,console.log("requestNum: ",U),O[A++]=wx.request({url:P+o.url+(o.params?"?"+e(o.params)+"&":"?")+"userID="+x.userID+(x.token?"&token="+x.token:""),data:o.data||{},method:"POST",header:{"content-type":"application/json"},success:o.success||function(){},fail:o.fail||function(){},complete:o.complete||function(){U--}})}function e(o){var e=[];for(var r in o)e.push(encodeURIComponent(r)+"="+encodeURIComponent(o[r]));return e.join("&")}function r(o){J.init({accountMode:x.accountMode,accountType:x.accountType,sdkAppID:x.sdkAppID,avChatRoomId:o.roomID||0,selType:S.SESSION_TYPE.GROUP,selToID:o.roomID||0,selSess:null});var e={sdkAppID:x.sdkAppID,appIDAt3rd:x.sdkAppID,accountType:x.accountType,identifier:x.userID,identifierNick:x.userID,userSig:x.userSig},r={5:function(o){T.isDestory=!0,L.onRoomClose()},11:J.onRevokeGroupNotify,255:function(o){var e=JSON.parse(o.UserDefinedField);e&&"notifyPusherChange"==e.cmd&&(L.onPushersChange&&L.onPushersChange(),u())}},a={onConnNotify:J.onConnNotify,onBigGroupMsgNotify:function(o){J.onBigGroupMsgNotify(o,function(o){n(o)},function(o){console.log("LiveRoom callback --\x3e 收到白板数据"),t(o)})},onMsgNotify:function(o){J.onMsgNotify(o,function(o){i(o)})},onGroupSystemNotifys:r,onGroupInfoChangeNotify:J.onGroupInfoChangeNotify},c={isAccessFormalEnv:!0,isLogOn:!1};x.accountMode,J.sdkLogin(e,a,c,0,s,o)}function s(o){if(o.errCode)return console.log("webim登录失败:",o),void(o.callback.fail&&o.callback.fail({errCode:-2,errMsg:"IM登录失败，如果你是在配置线上环境，请将IM域名[https://webim.tim.qq.com]配置到小程序request合法域名"}));console.log("webim登录成功"),T.isLoginIM=!0,o.callback.success&&o.callback.success({userName:x.userName})}function a(o){if(o.errCode)return console.log("webim进群失败: ",o),void(o.callback.fail&&o.callback.fail({errCode:-2,errMsg:"IM进群失败"}));T.isJoinGroup=!0,console.log("进入IM房间成功: ",T.roomID),o.callback.success&&o.callback.success({})}function t(o){L.onSketchpadData(o)}function n(o){if(o.content){console.log("IM消息: ",JSON.stringify(o));var e=new Date,r=e.getHours()+"",s=e.getMinutes()+"",a=e.getSeconds()+"";if(1==r.length&&(r="0"+r),1==s.length&&(s="0"+s),1==a.length&&(a="0"+a),e=r+":"+s+":"+a,o.time=e,"@TIM#SYSTEM"==o.fromAccountNick)o.fromAccountNick="",o.content=o.content.split(";"),o.content=o.content[0],L.onRecvRoomTextMsg&&L.onRecvRoomTextMsg({roomID:T.roomID,userID:o.fromAccountNick,userName:o.userName,userAvatar:o.userAvatar,message:o.content,time:o.time});else{var t,n;if(n=o.content.split("}}"),"CustomTextMsg"==(t=JSON.parse(n[0]+"}}")).cmd){o.userName=t.data.nickName,o.userAvatar=t.data.headPic;for(var i="",u=1;u<n.length;u++)u==n.length-1?i+=n[u]:i+=n[u]+"}}";o.content=i,L.onRecvRoomTextMsg&&L.onRecvRoomTextMsg({roomID:T.roomID,userID:o.fromAccountNick,userName:o.userName,userAvatar:o.userAvatar,message:o.content,time:o.time})}else if("CustomCmdMsg"==t.cmd){o.userName=t.data.nickName,o.userAvatar=t.data.headPic,o.cmd=t.data.cmd;for(var i="",u=1;u<n.length;u++)u==n.length-1?i+=n[u]:i+=n[u]+"}}";o.content=i,L.onRecvRoomCustomMsg&&L.onRecvRoomCustomMsg({roomID:T.roomID,userID:o.fromAccountNick,userName:o.userName,userAvatar:o.userAvatar,cmd:o.cmd,message:o.content,time:o.time})}}}}function i(o){console.log("收到C2C消息:",JSON.stringify(o));var e=JSON.parse(o.content);e&&"linkmic"==e.cmd&&(e.data.type&&"request"==e.data.type?L.onRecvJoinPusherRequest({userID:o.fromAccountNick,userName:e.data.userName,userAvatar:e.data.userAvatar}):e.data.type&&"response"==e.data.type?"accept"==e.data.result?G&&G({errCode:0,errMsg:""}):"reject"==e.data.result&&G&&G({errCode:-999,errMsg:"主播拒绝了你的请求"}):e.data.type&&"kickout"==e.data.type&&L.onKickOut&&L.onKickOut({roomID:e.data.roomID}))}function u(){T.hasJoinPusher&&c({data:{roomID:T.roomID},success:function(o){o=o.data;var e=[],r=[],s=0;console.log("去重操作"),console.log("旧",JSON.stringify(T.pushers)),console.log("新",JSON.stringify(o.pushers)),console.log("用户信息:",JSON.stringify(x)),o.pushers&&o.pushers.forEach(function(o){s=0,T.pushers&&T.pushers.forEach(function(e){o.userID==e.userID&&(s=1)}),s||o.userID==x.userID||e.push(o),s=0}),T.pushers&&T.pushers.forEach(function(e){s=0,o.pushers&&o.pushers.forEach(function(o){e.userID==o.userID&&(s=1)}),s||r.push(e),s=0}),T.pushers=o.pushers,e.length&&(console.log("进房:",JSON.stringify(e)),L.onPusherJoin&&L.onPusherJoin({pushers:e}),v(1)),r.length&&(console.log("退房:",JSON.stringify(r)),L.onPusherQuit&&L.onPusherQuit({pushers:r}),v(1))},fail:function(o){}})}function c(e){var r={};if(e.data&&e.data.roomID)r.roomID=e.data.roomID;else{if(!T.roomID)return void(e.fail&&e.fail({errCode:-999,errMsg:"无roomID"}));r.roomID=T.roomID}o({url:"get_pushers",data:r,success:function(o){if(o.data.code)return console.log("请求CGI:get_pushers失败",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:"请求CGI:get_pushers失败:"+o.data.message+NaN+o.data.code+"]"}));console.log("房间信息：",JSON.stringify(o)),e.success&&e.success(o)},fail:e.fail})}function l(o){o&&setTimeout(function(){d()},3e3),_&&setTimeout(function(){d(),l()},7e3)}function d(){console.log("心跳请求"),o({url:"pusher_heartbeat",data:{roomID:T.roomID,userID:x.userID},success:function(o){o.data.code?console.log("心跳失败：",o):console.log("心跳成功",o)},fail:function(o){console.log("心跳失败：",o)}})}function f(){_=!1}function m(e){o({url:"create_room",data:{userID:x.userID,roomInfo:T.roomInfo},success:function(o){return o.data.code?(console.log("创建房间失败:",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}))):(console.log("---\x3e创建房间成功:",o),T.roomID=o.data.roomID,T.roomCreator=x.userID,T.isDestory?(T.isDestory=!1,void h({})):(e.data.roomID=o.data.roomID,void J.applyJoinBigGroup(T.roomID,a,{success:function(){g(e)},fail:e.fail})))},fail:function(o){if(console.log("创建后台房间失败:",o),"request:fail timeout"==o.errMsg)var r=-1,s="网络请求超时，请检查网络状态";e.fail&&e.fail({errCode:r||-3,errMsg:s||"创建房间失败"})}})}function g(o){if(!o||!o.data.roomID||!o.data.pushURL)return console.log("joinPusher参数错误",o),void(o.fail&&o.fail({errCode:-9,errMsg:"joinPusher参数错误"}));T.roomID=o.data.roomID,T.isDestory=!1,I(o)}function I(e){o({url:"add_pusher",data:{roomID:T.roomID,userID:x.userID,userName:x.userName,userAvatar:x.userAvatar,pushURL:e.data.pushURL},success:function(o){if(o.data.code)return console.log("进入房间失败:",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));T.hasJoinPusher=!0,u(),console.log("加入推流成功"),_=!0,l(1),e.success&&e.success({roomID:T.roomID})},fail:function(o){if(console.log("进入房间失败:",o),"request:fail timeout"==o.errMsg)var r=-1,s="网络请求超时，请检查网络状态";e.fail&&e.fail({errCode:r||-4,errMsg:s||"进入房间失败"})}})}function D(o){console.log("开始IM: ",T.roomID),J.applyJoinBigGroup(T.roomID,a,{success:function(e){c({data:{roomID:T.roomID},success:function(e){T.roomID=e.data.roomID,T.roomInfo=e.data.roomInfo,T.roomCreator=e.data.roomCreator,T.mixedPlayURL=e.data.mixedPlayURL,o.success&&o.success({roomID:T.roomID,roomCreator:T.roomCreator,mixedPlayURL:T.mixedPlayURL,pushers:e.data.pushers})},fail:function(e){o.fail&&o.fail({errCode:e.errCode,errMsg:e.errMsg||"拉取主播信息失败"})}})},fail:o.fail})}function p(e){f(),T.isJoinGroup&&J.quitBigGroup(),o({url:"delete_pusher",data:{roomID:T.roomID,userID:x.userID},success:function(o){if(o.data.code)return console.log("退出推流失败:",o),console.error("退房信息: roomID:"+T.roomID+", userID:"+x.userID),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));console.log("退出推流成功"),T.roomID="",e.success&&e.success({})},fail:function(o){console.log("退出推流失败:",o);var r=o.errCode||-1,s=o.errMsg||"退出房间失败";"request:fail timeout"==o.errMsg&&(r=-1,s="网络请求超时，请检查网络状态"),e.fail&&e.fail({errCode:r,errMsg:s})}}),k({data:{userID:x.userID,roomID:T.roomID}})}function h(e){f(),T.isJoinGroup&&J.quitBigGroup(),T.isDestory||o({url:"destroy_room",data:{roomID:T.roomID,userID:x.userID},success:function(o){if(o.data.code)return console.log("关闭房间失败:",o),console.error("关闭房间失败: roomID:"+T.roomID+", userID:"+x.userID),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));console.log("关闭房间成功"),T.roomID="",e.success&&e.success({})},fail:function(o){console.log("关闭房间失败:",o);var r=o.errCode||-1,s=o.errMsg||"关闭房间失败";"request:fail timeout"==o.errMsg&&(r=-1,s="网络请求超时，请检查网络状态"),e.fail&&e.fail({errCode:r,errMsg:s})}})}function v(o){if(x.userID==T.roomCreator){var e=[];T.pushers&&T.pushers.length>0&&T.pushers.forEach(function(o){if(o.userID!=T.roomCreator){var r=C(o.accelerateURL);r&&e.push({userID:o.userID,streamID:r,width:o.width,height:o.height})}else b=C(o.accelerateURL)}),console.log("混流信息:",JSON.stringify(e)),M(o,e)}}function C(o){if(!o)return null;var e=o,r=e.indexOf("?");return r>=0&&(e=e.substring(0,r)),e?((r=e.lastIndexOf("/"))>=0&&(e=e.substring(r+1)),e?((r=e.indexOf("."))>=0&&(e=e.substring(0,r)),e||null):null):null}function M(o,e){if(!(o<0)){var r=N(e);console.log("混流信息:",JSON.stringify(r)),y(r,function(r){r?console.log("混流成功"):(console.log("混流失败"),setTimeout(function(){M(--o,e)},2e3))})}}function y(e,r){o({url:"merge_stream",data:{userID:x.userID,roomID:T.roomID,mergeParams:JSON.stringify(e)},success:function(o){if(o.data.code||o.data.result.code)return console.error("混流失败:",JSON.stringify(o)),void r(!1);r(!0)},fail:function(o){r(!1)}})}function N(o){console.log("混流原始信息:",JSON.stringify(o));var e=160,r=240,s=90;(w<540||j<960)&&(e=120,r=180,s=60);var a=[];if(o&&o.length>0){u={input_stream_id:b||"",layout_params:{image_layer:1}};a.push(u);var t=w-e,n=j-r-s;if(o&&o.length>0){var i=0;o.forEach(function(o){var s={input_stream_id:o.streamID,layout_params:{image_layer:i+2,image_width:e,image_height:r,location_x:t,location_y:n-i*r}};a.push(s),i++})}}else{var u={input_stream_id:b||"",layout_params:{image_layer:1}};a.push(u)}var c={interfaceName:"Mix_StreamV2",para:{app_id:x.sdkAppID.toString(),interface:"mix_streamv2.start_mix_stream_advanced",mix_stream_session_id:b,output_stream_id:b,input_stream_list:a}};return{timestamp:Math.round(Date.now()/1e3),eventId:Math.round(Date.now()/1e3),interface:c}}function R(e){o({url:"add_audience",data:{userID:x.userID,roomID:e.data.roomID,userInfo:e.data.userInfo},success:function(o){if(o.data.code)return console.log("增加观众请求失败",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:"增加观众请求失败:"+o.data.message+NaN+o.data.code+"]"}));e.success&&e.success(o)},fail:e.fail})}function k(e){o({url:"delete_audience",data:{userID:e.data.userID,roomID:e.data.roomID},success:function(o){if(o.data.code)return console.log("减少观众请求失败",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:"减少观众请求失败:"+o.data.message+NaN+o.data.code+"]"}));e.success&&e.success(o)},fail:e.fail})}var S=require("webim_wx.js"),J=require("webim_handler.js"),P=(require("tls.js"),require("encrypt.js"),""),_="",A=0,O=[],x={userID:"",userName:"",userAvatar:"",userSig:"",sdkAppID:"",accountType:"",accountMode:0,token:""},T={roomID:"",roomInfo:"",mixedPlayURL:"",isCreator:!1,pushers:[],isLoginIM:!1,isJoinGroup:!1,isDestory:!1,hasJoinPusher:!1},L={onGetPusherList:function(){},onPusherJoin:function(){},onPusherQuit:function(){},onRoomClose:function(){},onRecvRoomTextMsg:function(){},onRecvJoinPusherRequest:function(){},onKickOut:function(){},onRecvRoomCustomMsg:function(){},onSketchpadData:function(){},onPushersChange:function(){}},q=["林静晓","陆杨","江辰","付小司","陈小希","吴柏松","肖奈","芦苇微微","一笑奈何","立夏"],U=0,G=null,b="",w=360,j=640,E=null;module.exports={login:function(e){if(!e||!e.data.serverDomain)return console.log("init参数错误",e),void(e.fail&&e.fail({errCode:-9,errMsg:"init参数错误"}));P=e.data.serverDomain,x.userID=e.data.userID,x.userSig=e.data.userSig,x.sdkAppID=e.data.sdkAppID,x.accountType=e.data.accType,x.userName=e.data.userName||q[Math.floor(10*Math.random())]||x.userID,x.userAvatar=e.data.userAvatar||"123",o({url:"login",params:{accountType:x.accountType,sdkAppID:x.sdkAppID,userSig:x.userSig},data:{},success:function(o){if(o.data.code)return console.error("登录到RoomService后台失败:",JSON.stringify(o)),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message}));x.token=o.data.token,x.userID=o.data.userID,r({success:function(o){e.success&&e.success({userID:x.userID,userName:x.userName})},fail:function(o){console.error("IM登录失败:",JSON.stringify(o)),e.fail&&e.fail({errCode:-999,errMsg:"IM登录失败"})}})},fail:function(o){console.error("登录到RoomService后台失败:",JSON.stringify(o)),e.fail&&e.fail(o)}})},logout:function(){o({url:"logout",success:function(o){},fail:function(o){}}),P="",x.userID="",x.userSig="",x.sdkAppID="",x.accountType="",x.userName="",x.userAvatar="",x.token="",J.logout()},getRoomList:function(e){if(!e)return console.log("getRoomList参数错误",e),void(e.fail&&e.fail({errCode:-9,errMsg:"getRoomList参数错误"}));o({url:"get_room_list",data:{index:e.data.index||0,cnt:e.data.cnt||20},success:function(o){if(o.data.code)return console.error("获取房间列表失败: ",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));console.log("房间列表信息:",o),e.success&&e.success({rooms:o.data.rooms})},fail:function(o){if(console.log("获取房间列表失败: ",o),"request:fail timeout"==o.errMsg)var r=-1,s="网络请求超时，请检查网络状态";e.fail&&e.fail({errCode:r||-1,errMsg:s||"获取房间列表失败"})}})},getPushURL:function(e){if(!e)return console.log("getPushURL参数错误",e),void(e.fail&&e.fail({errCode:-9,errMsg:"getPushURL参数错误"}));o({url:"get_push_url",data:{userID:x.userID},success:function(o){if(o.data.code)return console.log("获取推流地址失败: ",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));console.log("获取推流地址成功：",o.data.pushURL),e.success&&e.success({pushURL:o.data.pushURL})},fail:function(o){if("request:fail timeout"==o.errMsg)var r=-1,s="网络请求超时，请检查网络状态";e.fail&&e.fail({errCode:r||-1,errMsg:s||"获取推流地址失败"})}})},createRoom:function(o){if(T.isCreator=!0,T.isDestory=!1,T.isJoinGroup=!1,!o||!o.data.roomInfo||!o.data.pushURL)return console.log("createRoom参数错误",o),void(o.fail&&o.fail({errCode:-9,errMsg:"createRoom参数错误"}));T.roomInfo=o.data.roomInfo,m(o)},enterRoom:function(o){if(T.isCreator=!1,T.isJoinGroup=!1,!o||!o.data.roomID)return console.log("enterRoom参数错误",o),void(o.fail&&o.fail({errCode:-9,errMsg:"enterRoom参数错误"}));T.roomID=o.data.roomID,D({success:function(e){o.success&&o.success(e);var r={userName:x.userName,userAvatar:x.userAvatar};R({data:{roomID:o.data.roomID,userID:x.userID,userInfo:JSON.stringify(r)}})},fail:o.fail})},exitRoom:function(o){T.isCreator?h(o):p(o),T.isDestory=!0,T.roomID="",T.pushers=[],T.mixedPlayURL="",T.roomInfo="",x.pushURL="",x.isCreator=!1},sendRoomTextMsg:function(o){if(!o||!o.data.msg||!o.data.msg.replace(/^\s*|\s*$/g,""))return console.log("sendRoomTextMsg参数错误",o),void(o.fail&&o.fail({errCode:-9,errMsg:"sendRoomTextMsg参数错误"}));J.sendCustomMsg({data:'{"cmd":"CustomTextMsg","data":{"nickName":"'+x.userName+'","headPic":"'+x.userAvatar+'"}}',text:o.data.msg},function(){o.success&&o.success()})},setListener:function(o){o?(L.onGetPusherList=o.onGetPusherList||function(){},L.onPusherJoin=o.onPusherJoin||function(){},L.onPusherQuit=o.onPusherQuit||function(){},L.onRoomClose=o.onRoomClose||function(){},L.onRecvRoomTextMsg=o.onRecvRoomTextMsg||function(){},L.onRecvJoinPusherRequest=o.onRecvJoinPusherRequest||function(){},L.onKickOut=o.onKickOut||function(){},L.onRecvRoomCustomMsg=o.onRecvRoomCustomMsg||function(){},L.onSketchpadData=o.onSketchpadData||function(){},L.onPushersChange=o.onPushersChange||function(){}):console.log("setListener参数错误",o)},joinPusher:g,quitPusher:function(e){f(),o({url:"delete_pusher",data:{roomID:T.roomID,userID:x.userID},success:function(o){if(o.data.code)return console.log("退出推流失败:",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));console.log("退出推流成功"),T.roomID="",T.pushers=[],e.success&&e.success({})},fail:function(o){if(console.log("退出推流失败:",o),"request:fail timeout"==o.errMsg)var r=-1,s="网络请求超时，请检查网络状态";e.fail&&e.fail({errCode:r||-1,errMsg:s||"退出房间失败"})}}),T.hasJoinPusher=!1},requestJoinPusher:function(o){var e={cmd:"linkmic",data:{type:"request",roomID:T.roomID,userID:x.userID,userName:x.userName,userAvatar:x.userAvatar}};G=function(e){E&&(clearTimeout(E),E=null),e.errCode?o.fail&&o.fail(e):o.success&&o.success(e)};var r=!1;E=setTimeout(function(){E=null,console.error("申请连麦超时:",JSON.stringify(o.data)),r=!0,G&&G({errCode:-999,errMsg:"申请加入连麦超时"})},o.data&&o.data.timeout?o.data.timeout:3e4);var s={data:JSON.stringify(e)};J.sendC2CCustomMsg(T.roomCreator,s,function(o){if(!r)return o&&o.errCode?(console.log("请求连麦失败:",JSON.stringify(o)),void(G&&G(o))):void 0})},acceptJoinPusher:function(o){var e={cmd:"linkmic",data:{type:"response",result:"accept",message:"",roomID:T.roomID}},r={data:JSON.stringify(e)};J.sendC2CCustomMsg(o.data.userID,r,function(o){})},rejectJoinPusher:function(o){var e={cmd:"linkmic",data:{type:"response",result:"reject",message:o.data.reason||"",roomID:T.roomID}},r={data:JSON.stringify(e)};J.sendC2CCustomMsg(o.data.userID,r,function(o){})},kickoutSubPusher:function(o){var e={cmd:"linkmic",data:{type:"kickout",roomID:T.roomID}},r={data:JSON.stringify(e)};J.sendC2CCustomMsg(o.data.userID,r,function(e){e&&0==e.errCode?o.success&&o.success(e):o.fail&&o.fail(e)})},getAccountInfo:function(){return x},setVideoRatio:function(o){1==o?(w=360,j=640):(w=480,j=640)},sendC2CCustomMsg:function(o){var e={cmd:o.cmd,data:{userID:x.userID,userName:x.userName,userAvatar:x.userAvatar,msg:o.msg||""}},r={data:JSON.stringify(e)};J.sendC2CCustomMsg(o.toUserID?o.toUserID:T.roomCreator,r,function(e){if(e&&e.errCode)return console.log("请求连麦失败:",JSON.stringify(e)),void(o.fail&&o.fail(e));o.success&&o.success({})})},getPushers:c}; 
 			}); 
		define("utils/loadingBase64.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports={loadingBase:"data:image/gif;base64,R0lGODlhIANYAoABAP///wAAACH/C05FVFNDQVBFMi4wAwEAAAAh/wtYTVAgRGF0YVhNUDw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo3NGY2NjAyZi1kNzM4LTQ0NGEtODYxNC0yMmZlYTc0ODU2MDkiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6RjkzN0E2QUM2NUJCMTFFN0FDOTJCMkQwOUI2NzlDODciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6RjkzN0E2QUI2NUJCMTFFN0FDOTJCMkQwOUI2NzlDODciIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChNYWNpbnRvc2gpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Y2U5ZDRjMTEtNmI5Mi00NGU0LTg5MmMtNDkwMzQ0MDI4YzZmIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjc0ZjY2MDJmLWQ3MzgtNDQ0YS04NjE0LTIyZmVhNzQ4NTYwOSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAkKAAEALAAAAAAgA1gCAAL/jI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aN/xw7evwIMqTIkSRLmjyJMqXKlSxbunwJM6bMmTRr2ryJM6fOnTx7+vwJNKjQoUSLGj2KNKnSpUybOn0KNarUqVSrWr2KNavWrVy7ev0KNqzYsWTLmj2LNq3atWzbun0LN67cuXTr2r2LN6/evXz7+v0LOLDgwYQLGz6MOLHixYwbO34MObLkyZQrW76MObPmzZw7e/4MOrTo0aRLmz6NOrXq1axbu34NO7bs2bRr276NO7fu3bx7+/4NPLjw4cSLGz+OPLny5cybO38OPbr06dSrW7+OPbv27dy7e/8OPrz48eTLmz+PPr369ezbu38PP778+fTr27+PP7/+/fz7+///D2CAAg5IYIEGHohgggouyGCDDj4IYYQSTkhhhRZeiGGGGm7IYYcefghiiCKOSGKJJp6IYooqrkgUAC6+6CKL8sBI44syulNjjgDcuI6OOvKYjo85AnmOkD8SSY6RQyI5jpI1MtmkkzRCCY6UT1LpjZVTYtmNljBy2aWXMYK5jZhjkpmNmTuimaaZbLYp5pvYqCnnNXTWWc2deE6j557R9OnnM4AG2syghC5j6KHJJKroMYw2WsyjkA4j6aTBVDrDlpYmgikMQm56SKcuKAlqIaKuYGWpg5yagpeqBsLqCXG++kesJdhK6xq4iqDmmrnusSsIvZ75Kx7BejAsscX/2nEsB8kquywdzWrwLLTRyjEtBtVaey0c2Vqwra/dSuvmqOGOy2y5LIQrLrrYqqsCu+6mO2u8585bx7cQyItvvvCawG+//rqKQsACk6tlq/cePHCqsi7MMMIO3wpxxBKTCnDFFs+RMMXbbpyHlBl/DHLIRo5cbcl8HOlxyiqXYvDLocQs8yc01+yJxjh3ovPOm/TssyYkB22zy0QXnezRMyetNChMN430v1DzLPXUnFRt9c8EZ720yFyP4vXXYJ8stik+lp3Kl2ivzXbbbr8Nd9xyz0133XbfjXfeeu/Nd99+/w144IIPTnjhqbFbr+FfIP604low/qzjj0MeueRW/1A+tOVSYG605lFwXrnnUIDeuehMkB666aejPqzqTrDeuuurw4617ETQrq/tnuLese5K8N6770gAP7HwwxNPtvG/I8+y8sszr7bzryMvffXWX4999tpvz3333n8Pfvjij09++eafj3766q/Pfvvuvw9//PLPT3/99t+Pf/76789///7/D8AACnCABCygAQ+IwAQqcIEMbKADHwjBCEpwghSsoAUviMEManCDHOygBz8IwhCKcIQkLKEJT4jCFKpwhSxsoQtfCMMYynCGNKyhDW+IwxzqcIc87KEPfwjEIApxiEQsohGPiMQkKnGJTGyiE58IxShKcYpUrKIVr4jFLNJqcYtc7KIXvwjGMIpxjGQsoxnPiMY0qnGNbGyjG98IxzjKcY50rKMd74jHPOpxj3zsox//CMhACnKQhCykIQ+JyEQqcpGMbKQjHwnJSEpykpSspCUviclManKTnOykJz8JylCKcpSkLKUpT4nKVKpylaxspStfCctYynKWtKylLW+Jy1zqcpe87KUvfwnMYApzmMQspjGPicxkKnOZzGymM58JzWhKc5rUrKY1r4nNbGpzm9zspje/Cc5winOc5CynOc+JznSqc53sbKc73zmIAgAAIfkECQoAAQAsAAAAACADWAIAAv+Mj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym8wmNSqfUqvWKzWq33K73Cw6Lx+Sy+YxOq9fstvsNj8vn9Lr9js/r9/y+/w8YKDhIWGh4iJiouMjY6PgIGSk5SVlpeYmZqbnJ2en5CRoqOkpaanqKmqq6ytrq+gobKztLW2t7i5uru8vb6/sLHCw8TFxsfIycrLzM3Oz8DB0tPU1dbX2Nna29zd3t/Q0eLj5OXm5+jp6uvs7e7v4OHy8/T19vf4+fr7/P3+//DzCgwIEECxo8iDChwoUMGzp8CDGixIkUK1q8iDGjxo3/HDt6/AgypMiRJEuaPIkypcqVLFu6fAkzpsyZNGvavIkzp86dPHv6/Ak0qNChRIsaPYo0qdKlTJs6fQo1qtSpVKtavYo1q9atXLt6/Qo2rNixZMuaPYs2rdq1bNu6fQs3rty5dOvavYs3r969fPv6/Qs4sODBhAsbPow4seLFjBs7fgw5suTJlCtbvow5s+bNnDt7/gw6tOjRpEubPo06terVrFu7fg07tuzZtGvbvo07t+7dvHv7/g08uPDhxIsbP448ufLlzJs7fw49uvTp1Ktbv449u/bt3Lt7/w4+vPjx5MubP48+vfr17Nu7fw8/vvz59Ovbv48/v/79/Pv7//8PYIACDkhggQYeiGCCCi7IYIMOPghhhBJOSGGFFl6IYYYabshhhx5+CGKIIo5IYokmnohiiiquyGKLLr4IY4wyzkhjjTbeiGOOOu7IY48+/ghkkEIOSWSRRh6JZJJKLslkk04+CWWUUk5J5SQAVPkMAFpuqSWWyHAJZpdeEhNmmWMKU2aaZ/6SZptr8tJmnG/mEqecc9pSp513zpKnnnvC0qeff7YSqKCDqlKooYeekqiii5LSqJuPphKppJOaUqmal2KaaZibctopl5+WEiqYo0Ja6panjpKqqquG0qqYr34S65Wz0hrrrbi2qqsntfbaya/AbiLssJkUa+wlyP8mW8myzFqZ67OWOCttJNFWS8m12EJb6rbTdutts6GG+22m5JYb6bnoJqruuoG2qyy78Mbb57zH5mmvJnXmy4mZ/P4LcMACD0xwwQYfjHDCCi/McMMOPwxxxBJPTHHFFl+MccYa31NrpRtf0fG4H0cRMq8jN1GyticjkbLJK7PcsssvFxGzzDMLUbPKN/+Qs807+9Bzqj/jHLTIQ/NcdKdHA5G00ksj3bS8TwMdtdRT91D1u1dDnbWjW+PQtddf5xC2qWMTUfbZaq/Ndttuvw133HLPTXfddt+Nd9567813337/DXjgggPi6eAkW2r4EvUmnkShjB/R6ONopyt5EOb/Vk715ZjvAO7mZHfuuQ0+hx6DzqS/QO3pLaSuugodt14667CbEPLsLtRuOwu45+7667z3LvvvIOwuPO2+F2988MhzQPzyIjTv/PDHRx8C9NR3YP31G2SvfQbcd3/B9+BXIP74E0xvvgbop4+B8uxH4P77D5guP/lC17896Pi3b/T+3jvtP/V5LIDMoxwB8+e4A2JPawpc4L4aKD1NQbB6opqgBS+IwQxqcIMc7KAHPwjCEIpwhCQsoQlPiMIUqnCFLGyhC18IwxjKcIY0rKENb4jDHOpwhzzsoQ9/CMQgCnGIRCyiEY+IxCQqcYlMbKITnwjFKEpxilSsohWviMUsvGpxi1zsohe/CMYwinGMZCyjGc+IxjSqcY1sbKMb3wjHOMpxjnSsox3viMc86nGPfOyjH/8IyEAKcpCELKQhD4nIRCpykYxspCMfCclISnKSlKykJS+JyUxqcpOc7KQnPwnKUIpylKQspSlPicpUqnKVrGylK18Jy1jKcpa0rKUtb4nLXOpyl7zspS9/CcxgCnOYxCymMY+JzGQqc5nMbKYznwnNaEpzmtSspjWvic1sanOb3OymN79JlQIAACH5BAkKAAEALAAAAAAgA1gCAAL/jI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aN/xw7evwIMqTIkSRLmjyJMqXKlSxbunwJM6bMmTRr2ryJM6fOnTx7+vwJNKjQoUSLGj2KNKnSpUybOn0KNarUqVSrWr2KNavWrVy7ev0KNqzYsWTLmj2LNq3atWzbun0LN67cuXTr2r2LN6/evXz7+v0LOLDgwYQLGz6MOLHixYwbO34MObLkyZQrW76MObPmzZw7e/4MOrTo0aRLmz6NOrXq1axbu34NO7bs2bRr276NO7fu3bx7+/4NPLjw4cSLGz+OPLny5cybO38OPbr06dSrW7+OPbv27dy7e/8OPrz48eTLmz+PPr369ezbu38PP778+fTr27+PP7/+/fz7+///D2CAAg5IYIEGHohgggouyGCDDj4IYYQSTkhhhRZeiGGGGm7IYYcefghiiCKOSGKJJp6IYooqrshiiy6+CGOMMs5IY4023ohjjjruyGOPPv4IZJBCDklkkUYeiWSSSi7JZJNOPglllFJOSWWVVl6JZZZabslll15+CWaYYo5JZplmnolmmmquyWabbr4JZ5xyzklnnXbeiWeeeu7JZ59+/glooIIOSmihhh6KaKKKLspoo44+Cmmkkk5KaaWWXopppppuymmnnn4Kaqiijkpqqaaeimqqqq7KaqvzAABrrLLOSmuttsrqqhO37sprr7TmeoSvwg67K7BDEItssrH/GguEss4iy6wPz07ra7Q8UIstr9bqkG23tW6bg7fiLgvuDeOeW64N546bbg3retuuu+9mGy8N89Jb7wz3Tpuvvfs626+//xIbsLwDV1uwugffmvC1CzcMccQST0xxxRZfjHHGGm/McccefwxyyCKPTHLJJp+M4KwoG1HsykH06vIPwsbs8Mw0h0vwzQpDq7PAPPcMA79Av0Dt0C5gazQL+CaNQrdMp+D00ybAK3UJVFc9wtVYh6B1zL9OHfXKMJPQNck2Zx222cNanXbIybK9tNs/ox33x2+DXTfHAOONtN3KNt22xnufUDbGgxMe+MWHI563xYsz3nfGj0NetOR//7dQuMSTA954xJtzHjnFn4MudMWjk356wKlTvnq9rfP9eruxwz17ubWT/azjlxs898S307627nebm7PwvfM+tvHF43C28sFzq63lw0P/7ca/K02u3rtvDfvz3APv/fd0Hy8+CNeXD8H56Dug/voMtO++AvDHj8D89Btg//35079//P27/7/1BRB9AyxfAcV3wO8lkHsL3FoDHUi++2lgehLkAAUruIHlYbADzdugB5LnQRF8LYQkLKEJT4jCFKpwhSxsoQtfCMMYynCGNKyhDW+IwxzqcIc87KEPfwjEIApxiEQsohGPiMQkKnGJTGyiE58IxShKcYpUrKIVr4jFLK5qcYtc7KIXvwjGMIpxjGQsoxnPiMY0qnGNbGyjG98IxzjKcY50rKMd74jHPOpxj3zsox//CMhACnKQhCykIQ+JyEQqcpGMbKQjHwnJSEpykpSspCUviclManKTnOykJz8JylCKcpSkLKUpT4nKVKpylaxspStfCctYynKWtKylLW+Jy1zqcpe87KUvfwnMYApzmMQspjGPicxkKnOZzGymM58JzWhKc5rUrOaXCgAAIfkECQoAAQAsAAAAACADWAIAAv+Mj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym8wmNSqfUqvWKzWq33K73Cw6Lx+Sy+YxOq9fstvsNj8vn9Lr9js/r9/y+/w8YKDhIWGh4iJiouMjY6PgIGSk5SVlpeYmZqbnJ2en5CRoqOkpaanqKmqq6ytrq+gobKztLW2t7i5uru8vb6/sLHCw8TFxsfIycrLzM3Oz8DB0tPU1dbX2Nna29zd3t/Q0eLj5OXm5+jp6uvs7e7v4OHy8/T19vf4+fr7/P3+//DzCgwIEECxo8iDChwoUMGzp8CDGixIkUK1q8iDGjxo3/HDt6/AgypMiRJEuaPIkypcqVLFu6fAkzpsyZNGvavIkzp86dPHv6/Ak0qNChRIsaPYo0qdKlTJs6fQo1qtSpVKtavYo1q9atXLt6/Qo2rNixZMuaPYs2rdq1bNu6fQs3rty5dOvavYs3r969fPv6/Qs4sODBhAsbPow4seLFjBs7fgw5suTJlCtbvow5s+bNnDt7/gw6tOjRpEubPo06terVrFu7fg07tuzZtGvbvo07t+7dvHv7/g08uPDhxIsbP448ufLlzJs7fw49uvTp1Ktbv449u/bt3Lt7/w4+vPjx5MubP48+vfr17Nu7fw8/vvz59Ovbv48/v/79/Pv7//8PYIACDkhggQYeiGCCCi7IYIMOPghhhBJOSGGFFl6IYYYabshhhx5+CGKIIo5IYokmnohiiiquyGKLLr4IY4wyzkhjjTbeiGOOOu7IY48+/ghkkEIOSWSRRh6JZJJKLslkk04+CWWUUk5JZZVWXollllpuyWWXXn4JZphijklmmWaeiWaaaq7JZptuvglnnHLOSWeddt6JZ5567slnn37+CWiggg5KaKGGHopoooouymijjj4KaaSSTkpppZZeimmmmm7KaaeefgpqqKKOSmqppp6Kaqqqrspqq66+Cmusss5Ka6223oprrrruymuvvv4KbLDCDktsscYei2yyyv8uy2yzzj4LbbTSTktttdZei2222m7LbbehAgBuuFOESy4AxZZbLhTopgvsuug64S67vcb77hL0yqvrvfUioS++t/a7bxEA+0vrwAQLYTC5/yYs7hEMNzzrwwobITG4EVdsscAYmwvrxhlrjPGrHn9MxMitjkzyECivijLHDpuMassuU7yyqTLbW/OoMs/Mb86g7lxCwCO0/O3NQ8drAtGeAi0CwEH7nCnTIRj8NMxRG930wElDTanUUye8tdVdY5011WF7XKnXXzN8gtKRqr022G1zvSjccZs9t9h1k02CxCq4rajdZcudAuCHCj443oXTLSjiiWvNguGN85034Sv/SP6n40ez7QLmfVKOgt8vML4n6KE/HAPpeXp+Oucw6M0n661bPvrGgao+u+Kvhwwo7C2IPgPvmdsePOo1VHy78DIATwPznyN/vPE2SD+8681THz3kydNevPXTO00o992Lf/29h4OPg/M3mI9ovzuon77Q57vbA/zJHhy/996mjv3+u+vvv871L4C/GyABL2fAAy4OgApcIPkaWDndQdCBEpxgBLVnQQpiMIMXRB8HO+i+D+ZugyLc3ANL6AH7oTCFCVwhB1Towg3AMIYZmCENL2DDG1qAgTrUAA97WEMSAvGFQhyiDENoxMdNLIlVgxgTnwjFKEpxilSsohWviMUs6Wpxi1zsohe/CMYwinGMZCyjGc+IxjSqcY1sbKMb3wjHOMpxjnSsox3viMc86nGPfOyjH/8IyEAKcpCELKQhD4nIRCpykYxspCMfCclISnKSlKykJS+JyUxqcpOc7KQnPwnKUIpylKQspSlPicpUqnKVrGylK18Jy1jKcpa0rKUtb4nLXOpyl7zspS9/CcxgCnOYxCymMY+JzGQqc5nMbKYznwnNaEpzmtSspjWvic1sanOb3OymN78JznCKc5zkLKc5z4nOdKpznexspzvfCc94ynOe9KynPe+Jz3zqc5/87Kc//wnQMhYAACH5BAkKAAEALAAAAAAgA1gCAAL/jI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8YhMKpfMpvMJjUqn1Kr1is1qt9yu9wsOi8fksvmMTqvX7Lb7DY/L5/S6/Y7P6/f8vv8PGCg4SFhoeIiYqLjI2Oj4CBkpOUlZaXmJmam5ydnp+QkaKjpKWmp6ipqqusra6voKGys7S1tre4ubq7vL2+v7CxwsPExcbHyMnKy8zNzs/AwdLT1NXW19jZ2tvc3d7f0NHi4+Tl5ufo6err7O3u7+Dh8vP09fb3+Pn6+/z9/v/w8woMCBBAsaPIgwocKFDBs6fAgxosSJFCtavIgxo8aN/xw7evwIMqTIkSRLmjyJMqXKlSxbunwJM6bMmTRr2ryJM6fOnTx7+vwJNKjQoUSLGj2KNKnSpUybOn0KNarUqVSrWr2KNavWrVy7ev0KNqzYsWTLmj2LNq3atWzbun0LN67cuXTr2r2LN6/evXz7+v0LOLDgwYQLGz6MOLHixYwbO34MObLkyZQrW76MObPmzZw7e/4MOrTo0aRLmz6NOrXq1axbu34NO7bs2bRr276NO7fu3bx7+/4NPLjw4cSLGz+OPLny5cybO38OPbr06dSrW7+OPbv27dy7e/8OPrz48eTLmz+PPr369ezbu38PP778+fTr27+PP7/+/fz7+///D2CAAg5IYIEGHohgggouyGCDDj4IYYQSTkhhhRZeiGGGGm7IYYcefghiiCKOSGKJJp6IYooqrshiiy6+CGOMMs5IY4023ohjjjruyGOPPv4IZJBCDklkkUYeiWSSSi7JZJNOPglllFJOSWWVVl6JZZZabslll15+CWaYYo5JZplmnolmmmquyWabbr4JZ5xyzklnnXbeiWeeeu7JZ59+/glooIIOSmihhh6KaKKKLspoo44+Cmmkkk5KaaWWXopppppuymmnnn4Kaqiijkpqqaaeimqqqq7KaqtQAABrrLLOSmuttt4KgKtJ4Mprr77SqisRvw5L7K3BBlFsssr/wnqsD8s+W2yzPEBLra/S7lBttsZei4O23tbK7Q3fjhtruDaQS665NaA7rro0sPutuzPA662889JLrb334vusvjLwC62//wKcrMD7EmytwQcjvK3C6zI8q8MST0xxxRZfjHHGGm/McccefwxyyCKPTHLJJp+McsoqYxrxykXg6jKyvMbcw7A06xDtzefmrPPCNvccQ79Av5Dv0CxUa/QK2SadgrZMn+D00yXUK/UI8VYdwtVYf6D11h107fUGYGcNrstjcz1zymd78CvKa3/9M8lvw9223FSTULDIc9Md98d7812333eboKzgUUNdeMd/s534xosznrfGj0POM8aT/1NOrOOHK934xYNzHrnFn4NeecWbt7BsxksH3TnFq7MeuutFDxz7xLPTXrrtQr/buuy1w5677sEDn7nqxYvbu+8Jd5u88jDj3LzzZUP/u+e21hy99cz+kHrYhGfvPQfdh281+ORnMP75IKSvPuZ9tw/4+/CLbf78E7BvP/r15w8B/vxb4L//USCAApQAAQvYv/0hUAEHXGADGujABUAwggysHgUfOLwLYvB4GoyABTsoQfmB0AEcHGECe2XCCqAwhQCcHgtfCMMYynCGNKyhDW+IwxzqcIc87KEPfwjEIApxiEQsohGPiMQkKnGJTGyiE58IxShKcYpUrKIVr4jFLLxqcYtc7KIXvwjGMIpxjGQsoxnPiMY0qnGNbGyjG98IxzjKcY50rKMd74jHPOpxj3zsox//CMhACnKQhCykIQ+JyEQqcpGMbKQjHwnJSEpykpSspCUviclManKTnOykJz8JylCKcpSkLKUpT4nKVKpylaxspStfCctYynKWtKylLW+Jy1zqcpe87KUvfwnMYApzmMQspjGPicxkKnOZzGymM58JzWhKc5rUrKY1r4nNbGpzm9zspje/yYECAAAh+QQJCgABACwAAAAAIANYAgAC/4yPqcvtD6OctNqLs968+w+G4kiW5omm6sq27gvH8kzX9o3n+s73/g8MCofEovGITCqXzKbzCY1Kp9Sq9YrNarfcrvcLDovH5LL5jE6r1+y2+w2Py+f0uv2Oz+v3/L7/DxgoOEhYaHiImKi4yNjo+AgZKTlJWWl5iZmpucnZ6fkJGio6SlpqeoqaqrrK2ur6ChsrO0tba3uLm6u7y9vr+wscLDxMXGx8jJysvMzc7PwMHS09TV1tfY2drb3N3e39DR4uPk5ebn6Onq6+zt7u/g4fLz9PX29/j5+vv8/f7/8PMKDAgQQLGjyIMKHChQwbOnwIMaLEiRQrWryIMaPGjf8cO3r8CDKkyJEkS5o8iTKlypUsW7p8CTOmzJk0a9q8iTOnzp08e/r8CTSo0KFEixo9ijSp0qVMmzp9CjWq1KlUq1q9ijWr1q1cu3r9Cjas2LFky5o9izat2rVs27p9Czeu3Ll069q9izev3r18+/r9Cziw4MGECxs+jDix4sWMGzt+DDmy5MmUK1u+jDmz5s2cO3v+DDq06NGkS5s+jTq16tWsW7t+DTu27Nm0a9u+jTu37t28e/v+DTy48OHEixs/jjy58uXMmzt/Dj269OnUq1u/jj279u3cu3v/Dj68+PHky5s/jz69+vXs27t/Dz++/Pn069u/jz+//v38+/v//w9ggAIOSGCBBh6IYIIKLshggw4+CGGEEk5IYYUWXohhhhpuyGGHHn4IYogijkhiiSaeiGKKKq7IYosuvghjjDLOSGONNt6IY4467shjjz7+CGSQQg5JZJFGHolkkkouyWSTTj4JZZRSBgZAlVZO2YyVWl6JJTJbfllll8WASaaYwpCJppm/oMmmmr2w2aabucAJp5y40FmnnbXgmaeesvDZp5+vABqooKwQWqihqiAap6KrMNqoo6lAmqakk1JapqWoYJqppqZwCqanp4D6paifkqqlqaWgmqqqo7DKpauhwBqmrLPSauutsOYKCq0A8PqJr8B6IuywnBRrrCbI/yaLybLMWuLss5TgKm2zu1Z7ybXYQsvqttmi6u23oIYrLqbklgvpuegiqu66fLZrLbvwuhvpvJUAaq+ydOZ7bKX89hvrvwIPTHDBBh+McMIKL8xwww4/DHHEEk9MccUWX4xxxhpvzHHHyfgqr8dWgEypyFOQPK7JTqBMqspNsJyyy0nA3LLMSNAcs81E4FyzzkPwnLPPQADNqdA/E12y0UEgnbTSPzCdrtNDQ42v1FNTjafVS2OdqNY7cN211zqA3anYV5NtthFgp812226/DXfccs9Nd91234133nrvzXfffv8NeOCCD0544T39angVZSe+RNiM77zv4ze/K3kRIf9XfjblmD8d9eY8mOv516CHjkPQpM/Q8+mop646DN22HsPrsL+g7ews1G67CrjnjsLuvJvg++8kBC+8CMQXD8LxyHug/PIcNO+8BtBHj8H01Ftg/fUUZK+9BNx3D8H34Dsg/vgMlG++Auinn4Ds7EsP7vvPsy5/9abXf8H9+GM/+v7wd+6//10ugBkAIAEFmLUDMk9zCuxAAhv4AcdBEIG1mqAFL4jBDGpwgxzsoAc/CMIQinCEJCyhCU+IwhSqcIUsbKELXwjDGMpwhjSsoQ1viMMc6nCHPOyhD38IxCAKcYhELKIRj4jEJCpxiUxsohOfCMUoSnGKVKyiFa+IxSy8anGLXOyiF78IxjCKcYxkLKMZz4jGNKpxjWxsoxvfCMc4ynGOdKyjHe+IxzzqcY987KMf/wjIQApykIQspCEPichEKnKRjGykIx8JyUhKcpKUrKQlL4nJTGpyk5zspCc/CcpQinKUpCylKU+JylSqcpWsbKUrXwnLWMpylrSspS1victc6nKXvOylL38JzGAKc5jELKYxj4nMZCpzmcxspjOfCc1oSnOa1KymNa+JzWxqc5vc7KY3v+m0AgAAIfkECQoAAQAsAAAAACADWAIAAv+Mj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym8wmNSqfUqvWKzWq33K73Cw6Lx+Sy+YxOq9fstvsNj8vn9Lr9js/r9/y+/w8YKDhIWGh4iJiouMjY6PgIGSk5SVlpeYmZqbnJ2en5CRoqOkpaanqKmqq6ytrq+gobKztLW2t7i5uru8vb6/sLHCw8TFxsfIycrLzM3Oz8DB0tPU1dbX2Nna29zd3t/Q0eLj5OXm5+jp6uvs7e7v4OHy8/T19vf4+fr7/P3+//DzCgwIEECxo8iDChwoUMGzp8CDGixIkUK1q8iDGjxo3/HDt6/AgypMiRJEuaPIkypcqVLFu6fAkzpsyZNGvavIkzp86dPHv6/Ak0qNChRIsaPYo0qdKlTJs6fQo1qtSpVKtavYo1q9atXLt6/Qo2rNixZMuaPYs2rdq1bNu6fQs3rty5dOvavYs3r969fPv6/Qs4sODBhAsbPow4seLFjBs7fgw5suTJlCtbvow5s+bNnDt7/gw6tOjRpEubPo06terVrFu7fg07tuzZtGvbvo07t+7dvHv7/g08uPDhxIsbP448ufLlzJs7fw49uvTp1Ktbv449u/bt3Lt7/w4+vPjx5MubP48+vfr17Nu7fw8/vvz59Ovbv48/v/79/Pv7//8PYIACDkhggQYeiGCCCi7IYIMOPghhhBJOSGGFFl6IYYYabshhhx5+CGKIIo5IYokmnohiiioyAUCLLq5Ij4syzgjjOzPe+GKN6+DIIwA6ptNjjz+eEySPQ5pTJI5HkpOkkUuG06SST4IT5Y1TUlmljFd+k6WWW3bTZY5fbhNmi2NyU6aPZ2qT5ppslulmNm3Gec2cdFZj553T5KlnNHz2+cyfgDYj6KDLFGpoMogmesyijBbj6KPDRCqpIDT2QGmlfQTJQ6aa6pHkDp5+ekeUOoxKKh1Z5oBqqnJ0iUOrrr4Bpw2yztrGrSLoimsaaZpJA6+9nvErsDIIO2wZxf8aCwOyyY6xLLMuOPtsGNFKywK11YJxrZrT1rptqd2+oG24XnTr7QrlmtsFui2syy4X7qoLbrx2zJsCvPZuge8J+u6rRb8l/AtwFgKPQHDBWBwcQsIKX8HwBw4/bEXEHoRJMajjkoBxxnlYvEHHHuMBsgarjqzxtRw3iTIfJWcQassub7yylzL78fLNm+SscyY893zJz0BXQvPQoahs9ChIJ330skwrXezTUE8s9R9UV221yFg3XeXWpZzs9dRFhm1KzGR/7eTZqdisdttuvw133HLPTXfddt+Nd9567813337/DXjggg9OeOGGH474guiynLgZi1/d+KmPRx05v5P/O135wpdHmznEm2Pe+RSfLx06FKNzXnoUp4OeuhOrs976Eq9THjuLs9dbuxK34547Ertr3XsSv3cdvO3Dm1287sdzmnwTy6fdvPPPYxv9E7tXj3322m/Pfffefw9++OKPT3755p+Pfvrqr89+++6/D3/88s9Pf/32349//vrvz3///v8PwAAKcIAELKABD4jABCpwgQxsoAMfCMEISnCCFKygBS+IwQxqcIMc7KAHPwjCEIpwhCQsoQlPiMIUqnCFLGyhC18IwxjKcIY0rKENb4jDHOpwhzzsoQ9/CMQgCnGIRCyiEY+IxCQqcYlMbKITnwjFKEpxilSsohWviMUs1mpxi1zsohe/CMYwinGMZCyjGc+IxjSqcY1sbKMb3wjHOMpxjnSsox3viMc86nGPfOyjH/8IyEAKcpCELKQhD4nIRCpykYxspCMfCclISnKSlKykJS+JyUxqcpOc7KQnPwnKUIpylKQspSlPicpUqnKVrGylK18Jy1jKcpa0rKUtb4nLXOpyl7zspS9/CcxgCnOYxCymMY+JzGQqc5nMbKYznwnNaEpzmtSspjWvic1sanOb3OymN78JznCKc5zkLKc5z4nOdKpznexspzvfCc94ytMkBQAAIfkEBQoAAQAsAAAAACADWAIAAv+Mj6nL7Q+jnLTai7PevPsPhuJIluaJpurKtu4Lx/JM1/aN5/rO9/4PDAqHxKLxiEwql8ym8wmNSqfUqvWKzWq33K73Cw6Lx+Sy+YxOq9fstvsNj8vn9Lr9js/r9/y+/w8YKDhIWGh4iJiouMjY6PgIGSk5SVlpeYmZqbnJ2en5CRoqOkpaanqKmqq6ytrq+gobKztLW2t7i5uru8vb6/sLHCw8TFxsfIycrLzM3Oz8DB0tPU1dbX2Nna29zd3t/Q0eLj5OXm5+jp6uvs7e7v4OHy8/T19vf4+fr7/P3+//DzCgwIEECxo8iDChwoUMGzp8CDGixIkUK1q8iDGjxo3/HDt6/AgypMiRJEuaPIkypcqVLFu6fAkzpsyZNGvavIkzp86dPHv6/Ak0qNChRIsaPYo0qdKlTJs6fQo1qtSpVKtavYo1q9atXLt6/Qo2rNixZMuaPYs2rdq1bNu6fQs3rty5dOvavYs3r969fPv6/Qs4sODBhAsbPow4seLFjBs7fgw5suTJlCtbvow5s+bNnDt7/gw6tOjRpEubPo06terVrFu7fg07tuzZtGvbvo07t+7dvHv7/g08uPDhxIsbP448ufLlzJs7fw49uvTp1Ktbv449u/bt3Lt7/w4+vPjx5MubP48+vfr17Nu7fw8/vvz59Ovbv48/v/79/Pv7//8PYIACDkhggQYeiGCCCi7IYIMOPghhhBJOSGGFFl6IYYYabshhhx5+CGKIIo5IYokmnohiiioyAUCLLq5Yj4syvgjjOzPeSGON6uDIIwA67tjjjT+iEySPQ5pTJI5HkpOkkUuG06SST4ITpZBTflPljFdimWWOW27TpZdfZhNmi2NyU6aPZ2qT5ppslukmmXDGeU2bdFpj553U5KmnNHz2Cc2fgDoj6KDMFGqoMogmisyijBrj6KPERCqpMJRW+oeTO1wqg5WYGlHkpnOKqumnQTSpA6ctoGoqEFXmoOoKr7baQ5c4xJqCrbSmGuYNuJ4w6q42/EoCscUGKywNaf+qOYOxIizLbLLNLqsssjBAG62012I7ba/dUqvtt852MC652GYbrgvnoiurtSysy2667Z67rbcvwBuvvCrAe6+7ufKrbwz4qusvsAMHLDDA8+r67sEIJ7xuw/bui2++D1McMcYM/+vwxRDTy/HGBnfs8cfcolDuBBVbXLLEIJuQcgQrt+yrwsdOfLPNNFebcc5Zjqzzzjy/PALOz1YsNK89H/1zCTMnrTTRITTts9RQ17w0CFQzHfTVWFvtQZROI+11rV2H3SPMZJdtdtZTa6k2yWyTCjaoa8/tg9xFPI23q2efenffP/ztN+GCRw3tEYEfXnjidrvNeOMxr2p45Dz/nExE5ZZfDm7mdW8OeMFtdw664qJzTnrpposc+umqt87q46y/vnqSSbhOuxCxIzF77rwH2cSsvj8hpRO7Dx8K8MijAvfyzj8PffTST0999dZfj3322m/Pfffefw9++OKPT3755p+Pfvrqr89+++6/D3/88s9Pf/32349//vrvz3///v8PwAAKcIAELKABD4jABCpwgQxsoAMfCMEISnCCFKygBS+IwQxqcIMc7KAHPwjCEIpwhCQsoQlPiMIUqnCFLGyhC18IwxjKcIY0rKENb4jDHOpwhzzsoQ9/CMQgCnGIRCyiEY+IxCQqcYlMbKITnwjFKEpxilSsohWviMUs/2pxi1zsohe/CMYwinGMZCyjGc+IxjSqcY1sbKMb3wjHOMpxjnSsox3viMc86nGPfOyjH/8IyEAKcpCELKQhD4nIRCpykYxspCMfCclISnKSlKykJS+JyUxqcpOc7KQnPwnKUIpylKQspSlPicpUqnKVrGylK18Jy1jKcpa0rKUtb4nLXOpyl7zspS9/CcxgCnOYxCymMY+JzGQqc5nMbKYznwnNaEpzmtSspjWvic1sanOb3OymN78JznCKc5zkLKc5z4nOdKpznexspzvfCc94ynOe9KynPe+Jz3zqc5/87Kc//wnQgAp0oAQtqEEPitCEKnShDG2oQx8K0YhKdA6iFK2oRS+K0YxqdCAFAAA7"}; 
 			}); 
		define("utils/report.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(){if(p.str_roomid&&p.str_userid)if(p.str_room_creator!=p.str_userid){var t=p;t.str_appid=_,t.str_platform=e,t.str_appversion=s,t.str_sdkversion=o,t.str_common_version=n,t.str_nickname=i,t.str_device=a,t.str_device_type=c,console.log("真正上报数据: ",t),wx.request({url:"https://roomtest.qcloud.com/weapp/utils/report",data:{reportID:1,data:t},method:"POST",header:{"content-type":"application/json"},success:function(t){t.data.code?console.log("上报失败："+t.data.code+t.data.message):console.log("上报成功")},fail:function(){console.log("report error")},complete:function(){}}),r()}else r();else r()}function r(){p={str_roomid:"",str_room_creator:"",str_userid:"",str_play_info:"",str_push_info:"",int64_ts_enter_room:-99999,int64_tc_join_group:-99999,int64_tc_get_pushers:-99999,int64_tc_play_stream:-99999,int64_tc_get_pushurl:-99999,int64_tc_push_stream:-99999,int64_tc_add_pusher:-99999,int64_tc_enter_room:-99999},m={int64_ts_add_pusher:0,int64_ts_play_stream:0}}var _=1252463788,e="weixin",s="1.2.477",o="",n="",i="",a="",c="",p={str_roomid:"",str_room_creator:"",str_userid:"",str_play_info:"",str_push_info:"",int64_ts_enter_room:-99999,int64_tc_join_group:-99999,int64_tc_get_pushers:-99999,int64_tc_play_stream:-99999,int64_tc_get_pushurl:-99999,int64_tc_push_stream:-99999,int64_tc_add_pusher:-99999,int64_tc_enter_room:-99999},m={int64_ts_add_pusher:0,int64_ts_play_stream:0},u=wx.getSystemInfoSync();o=u.version,n=u.SDKVersion,a=u.model,c=u.system,module.exports={setReportData:function(_){_.int64_ts_enter_room&&(console.log("第一次进来重置数据"),r());for(var e in p)_[e]&&(p[e]=_[e]);for(var e in m)_[e]&&(m[e]=_[e]);for(var e in p)if(!isNaN(p[e])&&"int64_tc_enter_room"!=e&&p[e]<0)return;m.int64_ts_add_pusher&&m.int64_ts_play_stream&&(p.int64_tc_enter_room=Math.max(m.int64_ts_add_pusher,m.int64_ts_play_stream)-p.int64_ts_enter_room,p.str_room_creator&&p.str_userid&&p.str_room_creator!=p.str_userid&&t())},report:t,clearData:r}; 
 			}); 
		define("utils/rsa.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=function(){function t(t,i){return new s(t,i)}function i(t,i){if(i<t.length+11)return uv_alert("Message too long for RSA"),null;for(var r=new Array,o=t.length-1;o>=0&&i>0;){var h=t.charCodeAt(o--);r[--i]=h}r[--i]=0;for(var n=new m,e=new Array;i>2;){for(e[0]=0;0==e[0];)n.nextBytes(e);r[--i]=e[0]}return r[--i]=2,r[--i]=0,new s(r)}function r(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function s(t,i,r){null!=t&&("number"==typeof t?this.fromNumber(t,i,r):null==i&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,i))}function o(){return new s(null)}function h(t){return B.charAt(t)}function n(t,i){var r=d[t.charCodeAt(i)];return null==r?-1:r}function e(t){var i=o();return i.fromInt(t),i}function u(t){var i,r=1;return 0!=(i=t>>>16)&&(t=i,r+=16),0!=(i=t>>8)&&(t=i,r+=8),0!=(i=t>>4)&&(t=i,r+=4),0!=(i=t>>2)&&(t=i,r+=2),0!=(i=t>>1)&&(t=i,r+=1),r}function f(t){this.m=t}function p(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function a(t){S[b++]^=255&t,S[b++]^=t>>8&255,S[b++]^=t>>16&255,S[b++]^=t>>24&255,b>=g&&(b-=g)}function l(){a((new Date).getTime())}function c(){if(null==A){for(l(),(A=y()).init(S),b=0;b<S.length;++b)S[b]=0;b=0}return A.next()}function m(){}function v(){this.i=0,this.j=0,this.S=new Array}function y(){return new v}r.prototype.doPublic=function(t){return t.modPowInt(this.e,this.n)},r.prototype.setPublic=function(i,r){null!=i&&null!=r&&i.length>0&&r.length>0?(this.n=t(i,16),this.e=parseInt(r,16)):uv_alert("Invalid RSA public key")},r.prototype.encrypt=function(t){var r=i(t,this.n.bitLength()+7>>3);if(null==r)return null;var s=this.doPublic(r);if(null==s)return null;var o=s.toString(16);return 0==(1&o.length)?o:"0"+o};s.prototype.am=function(t,i,r,s,o,h){for(var n=16383&i,e=i>>14;--h>=0;){var u=16383&this[t],f=this[t++]>>14,p=e*u+f*n;o=((u=n*u+((16383&p)<<14)+r[s]+o)>>28)+(p>>14)+e*f,r[s++]=268435455&u}return o},s.prototype.DB=28,s.prototype.DM=268435455,s.prototype.DV=1<<28;s.prototype.FV=Math.pow(2,52),s.prototype.F1=24,s.prototype.F2=4;var D,T,B="0123456789abcdefghijklmnopqrstuvwxyz",d=new Array;for(D="0".charCodeAt(0),T=0;T<=9;++T)d[D++]=T;for(D="a".charCodeAt(0),T=10;T<36;++T)d[D++]=T;for(D="A".charCodeAt(0),T=10;T<36;++T)d[D++]=T;f.prototype.convert=function(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t},f.prototype.revert=function(t){return t},f.prototype.reduce=function(t){t.divRemTo(this.m,null,t)},f.prototype.mulTo=function(t,i,r){t.multiplyTo(i,r),this.reduce(r)},f.prototype.sqrTo=function(t,i){t.squareTo(i),this.reduce(i)},p.prototype.convert=function(t){var i=o();return t.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),t.s<0&&i.compareTo(s.ZERO)>0&&this.m.subTo(i,i),i},p.prototype.revert=function(t){var i=o();return t.copyTo(i),this.reduce(i),i},p.prototype.reduce=function(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var i=0;i<this.m.t;++i){var r=32767&t[i],s=r*this.mpl+((r*this.mph+(t[i]>>15)*this.mpl&this.um)<<15)&t.DM;for(t[r=i+this.m.t]+=this.m.am(0,s,t,i,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)},p.prototype.mulTo=function(t,i,r){t.multiplyTo(i,r),this.reduce(r)},p.prototype.sqrTo=function(t,i){t.squareTo(i),this.reduce(i)},s.prototype.copyTo=function(t){for(var i=this.t-1;i>=0;--i)t[i]=this[i];t.t=this.t,t.s=this.s},s.prototype.fromInt=function(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+DV:this.t=0},s.prototype.fromString=function(t,i){var r;if(16==i)r=4;else if(8==i)r=3;else if(256==i)r=8;else if(2==i)r=1;else if(32==i)r=5;else{if(4!=i)return void this.fromRadix(t,i);r=2}this.t=0,this.s=0;for(var o=t.length,h=!1,e=0;--o>=0;){var u=8==r?255&t[o]:n(t,o);u<0?"-"==t.charAt(o)&&(h=!0):(h=!1,0==e?this[this.t++]=u:e+r>this.DB?(this[this.t-1]|=(u&(1<<this.DB-e)-1)<<e,this[this.t++]=u>>this.DB-e):this[this.t-1]|=u<<e,(e+=r)>=this.DB&&(e-=this.DB))}8==r&&0!=(128&t[0])&&(this.s=-1,e>0&&(this[this.t-1]|=(1<<this.DB-e)-1<<e)),this.clamp(),h&&s.ZERO.subTo(this,this)},s.prototype.clamp=function(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t},s.prototype.dlShiftTo=function(t,i){var r;for(r=this.t-1;r>=0;--r)i[r+t]=this[r];for(r=t-1;r>=0;--r)i[r]=0;i.t=this.t+t,i.s=this.s},s.prototype.drShiftTo=function(t,i){for(var r=t;r<this.t;++r)i[r-t]=this[r];i.t=Math.max(this.t-t,0),i.s=this.s},s.prototype.lShiftTo=function(t,i){var r,s=t%this.DB,o=this.DB-s,h=(1<<o)-1,n=Math.floor(t/this.DB),e=this.s<<s&this.DM;for(r=this.t-1;r>=0;--r)i[r+n+1]=this[r]>>o|e,e=(this[r]&h)<<s;for(r=n-1;r>=0;--r)i[r]=0;i[n]=e,i.t=this.t+n+1,i.s=this.s,i.clamp()},s.prototype.rShiftTo=function(t,i){i.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t)i.t=0;else{var s=t%this.DB,o=this.DB-s,h=(1<<s)-1;i[0]=this[r]>>s;for(var n=r+1;n<this.t;++n)i[n-r-1]|=(this[n]&h)<<o,i[n-r]=this[n]>>s;s>0&&(i[this.t-r-1]|=(this.s&h)<<o),i.t=this.t-r,i.clamp()}},s.prototype.subTo=function(t,i){for(var r=0,s=0,o=Math.min(t.t,this.t);r<o;)s+=this[r]-t[r],i[r++]=s&this.DM,s>>=this.DB;if(t.t<this.t){for(s-=t.s;r<this.t;)s+=this[r],i[r++]=s&this.DM,s>>=this.DB;s+=this.s}else{for(s+=this.s;r<t.t;)s-=t[r],i[r++]=s&this.DM,s>>=this.DB;s-=t.s}i.s=s<0?-1:0,s<-1?i[r++]=this.DV+s:s>0&&(i[r++]=s),i.t=r,i.clamp()},s.prototype.multiplyTo=function(t,i){var r=this.abs(),o=t.abs(),h=r.t;for(i.t=h+o.t;--h>=0;)i[h]=0;for(h=0;h<o.t;++h)i[h+r.t]=r.am(0,o[h],i,h,0,r.t);i.s=0,i.clamp(),this.s!=t.s&&s.ZERO.subTo(i,i)},s.prototype.squareTo=function(t){for(var i=this.abs(),r=t.t=2*i.t;--r>=0;)t[r]=0;for(r=0;r<i.t-1;++r){var s=i.am(r,i[r],t,2*r,0,1);(t[r+i.t]+=i.am(r+1,2*i[r],t,2*r+1,s,i.t-r-1))>=i.DV&&(t[r+i.t]-=i.DV,t[r+i.t+1]=1)}t.t>0&&(t[t.t-1]+=i.am(r,i[r],t,2*r,0,1)),t.s=0,t.clamp()},s.prototype.divRemTo=function(t,i,r){var h=t.abs();if(!(h.t<=0)){var n=this.abs();if(n.t<h.t)return null!=i&&i.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=o());var e=o(),f=this.s,p=t.s,a=this.DB-u(h[h.t-1]);a>0?(h.lShiftTo(a,e),n.lShiftTo(a,r)):(h.copyTo(e),n.copyTo(r));var l=e.t,c=e[l-1];if(0!=c){var m=c*(1<<this.F1)+(l>1?e[l-2]>>this.F2:0),v=this.FV/m,y=(1<<this.F1)/m,D=1<<this.F2,T=r.t,B=T-l,d=null==i?o():i;for(e.dlShiftTo(B,d),r.compareTo(d)>=0&&(r[r.t++]=1,r.subTo(d,r)),s.ONE.dlShiftTo(l,d),d.subTo(e,e);e.t<l;)e[e.t++]=0;for(;--B>=0;){var A=r[--T]==c?this.DM:Math.floor(r[T]*v+(r[T-1]+D)*y);if((r[T]+=e.am(0,A,r,B,0,l))<A)for(e.dlShiftTo(B,d),r.subTo(d,r);r[T]<--A;)r.subTo(d,r)}null!=i&&(r.drShiftTo(l,i),f!=p&&s.ZERO.subTo(i,i)),r.t=l,r.clamp(),a>0&&r.rShiftTo(a,r),f<0&&s.ZERO.subTo(r,r)}}},s.prototype.invDigit=function(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var i=3&t;return i=i*(2-(15&t)*i)&15,i=i*(2-(255&t)*i)&255,i=i*(2-((65535&t)*i&65535))&65535,(i=i*(2-t*i%this.DV)%this.DV)>0?this.DV-i:-i},s.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},s.prototype.exp=function(t,i){if(t>4294967295||t<1)return s.ONE;var r=o(),h=o(),n=i.convert(this),e=u(t)-1;for(n.copyTo(r);--e>=0;)if(i.sqrTo(r,h),(t&1<<e)>0)i.mulTo(h,n,r);else{var f=r;r=h,h=f}return i.revert(r)},s.prototype.toString=function(t){if(this.s<0)return"-"+this.negate().toString(t);var i;if(16==t)i=4;else if(8==t)i=3;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return this.toRadix(t);i=2}var r,s=(1<<i)-1,o=!1,n="",e=this.t,u=this.DB-e*this.DB%i;if(e-- >0)for(u<this.DB&&(r=this[e]>>u)>0&&(o=!0,n=h(r));e>=0;)u<i?(r=(this[e]&(1<<u)-1)<<i-u,r|=this[--e]>>(u+=this.DB-i)):(r=this[e]>>(u-=i)&s,u<=0&&(u+=this.DB,--e)),r>0&&(o=!0),o&&(n+=h(r));return o?n:"0"},s.prototype.negate=function(){var t=o();return s.ZERO.subTo(this,t),t},s.prototype.abs=function(){return this.s<0?this.negate():this},s.prototype.compareTo=function(t){var i=this.s-t.s;if(0!=i)return i;var r=this.t;if(0!=(i=r-t.t))return i;for(;--r>=0;)if(0!=(i=this[r]-t[r]))return i;return 0},s.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+u(this[this.t-1]^this.s&this.DM)},s.prototype.mod=function(t){var i=o();return this.abs().divRemTo(t,null,i),this.s<0&&i.compareTo(s.ZERO)>0&&t.subTo(i,i),i},s.prototype.modPowInt=function(t,i){var r;return r=t<256||i.isEven()?new f(i):new p(i),this.exp(t,r)},s.ZERO=e(0),s.ONE=e(1);var A,S,b;if(null==S){S=new Array,b=0;for(var F;b<g;)F=Math.floor(65536*Math.random()),S[b++]=F>>>8,S[b++]=255&F;b=0,l()}m.prototype.nextBytes=function(t){var i;for(i=0;i<t.length;++i)t[i]=c()},v.prototype.init=function(t){var i,r,s;for(i=0;i<256;++i)this.S[i]=i;for(r=0,i=0;i<256;++i)r=r+this.S[i]+t[i%t.length]&255,s=this.S[i],this.S[i]=this.S[r],this.S[r]=s;this.i=0,this.j=0},v.prototype.next=function(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]};var g=256;return{encrypt:function(t,i,s){i=i||"F20CE00BAE5361F8FA3AE9CEFA495362FF7DA1BA628F64A347F0A8C012BF0B254A30CD92ABFFE7A6EE0DC424CB6166F8819EFA5BCCB20EDFB4AD02E412CCF579B1CA711D55B8B0B3AEB60153D5E0693A2A86F3167D7847A0CB8B00004716A9095D9BADC977CBB804DBDCBA6029A9710869A453F27DFDDF83C016D928B3CBF4C7",s=s||"3";var o=new r;return o.setPublic(i,s),o.encrypt(t)}}}(); 
 			}); 
		define("utils/rtcroom.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function o(o){if(!v)return console.log("请求服务器域名为空，请将wxlite/config里面的url配置成你的服务器域名"),void(o.fail&&o.fail({errCode:-9,errMsg:"请求服务器域名为空，请将wxlite/config里面的url配置成你的服务器域名"}));b++;var r=v+o.url+(o.params?"?"+e(o.params)+"&":"?")+"userID="+S.userID+(S.token?"&token="+S.token:"");console.log("请求url：",r),N[R++]=wx.request({url:v+o.url+(o.params?"?"+e(o.params)+"&":"?")+"userID="+S.userID+(S.token?"&token="+S.token:""),data:o.data||{},method:"POST",header:{"content-type":"application/json"},success:function(e){if(o.success&&o.success(e),e.data.code){var s=-Math.abs(e.data.code);switch(o.url){case"get_push_url":y.globalData.dataJson+=JSON.stringify({get_pushers:s,url:r}),M.setReportData({int64_tc_get_pushers:s});break;case"add_pusher":y.globalData.dataJson+=JSON.stringify({add_pusher:s,url:r}),M.setReportData({int64_tc_add_pusher:s})}-1==T.indexOf(o.url)&&(console.error("逻辑失败上报：",o.url),M.report())}},fail:function(e){o.fail&&o.fail(e),-1==T.indexOf(o.url)&&(y.globalData.dataJson+=JSON.stringify({"请求失败上报：url":r}),console.error("请求失败上报：",o.url),M.report())},complete:o.complete||function(){b--}})}function e(o){var e=[];for(var r in o)e.push(encodeURIComponent(r)+"="+encodeURIComponent(o[r]));return e.join("&")}function r(o){_.init({accountMode:S.accountMode,accountType:S.accountType,sdkAppID:S.sdkAppID,avChatRoomId:o.roomID||0,selType:h.SESSION_TYPE.GROUP,selToID:S.selToID,selSess:null});var e={sdkAppID:S.sdkAppID,appIDAt3rd:S.sdkAppID,accountType:S.accountType,identifier:S.userID,identifierNick:y.globalData.single.nickname||"小程序用户",userSig:S.userSig},r={5:function(o){k.isDestory=!0,P.onRoomClose({})},11:_.onRevokeGroupNotify,255:function(o){console.error("收到系统通知：",o.UserDefinedField);var e=JSON.parse(o.UserDefinedField);!k.isDestory&&e&&"notifyPusherChange"==e.cmd&&i()}},t={onConnNotify:_.onConnNotify,onBigGroupMsgNotify:function(o){_.onBigGroupMsgNotify(o,function(o){a(o)})},onMsgNotify:_.onMsgNotify,onGroupSystemNotifys:r,onGroupInfoChangeNotify:_.onGroupInfoChangeNotify},n={isAccessFormalEnv:!0,isLogOn:!1};console.log("###loginIM rtcroom.js 321行### websdkappid=537048168 is web im sdk 版本 APPID",S),S.accountMode,_.sdkLogin(e,t,n,s,o)}function s(o){if(o.errCode)return console.log("IM登录失败:",o),o.callback.fail&&o.callback.fail({errCode:-2,errMsg:"IM登录失败，如果你是在配置线上环境，请将IM域名[https://webim.tim.qq.com]配置到小程序request合法域名"}),M.setReportData({int64_tc_join_group:-2}),void M.report();console.log("IM登录成功",o),o.callback.success&&o.callback.success({userName:S.userName})}function t(o){if(o.errCode){console.log("IM进群失败: ",o),o.callback.fail&&o.callback.fail({errCode:-2,errMsg:"IM进群失败"});var e=-Math.abs(o.errCode);return M.setReportData({int64_tc_join_group:e}),void M.report()}console.log("进入IM房间成功: ",k.roomID),o.callback.success&&o.callback.success({}),M.setReportData({int64_tc_join_group:+new Date-w.join_group_srart})}function a(o){if(o.content){if(console.log("IM消息: ",o),"@TIM#SYSTEM"==o.fromAccountNick)o.fromAccountNick="",o.content=o.content.split(";"),o.content=o.content[0],o.time="";else{var e=new Date,r=e.getHours()+"",s=e.getMinutes()+"",t=e.getSeconds()+"";1==r.length&&(r="0"+r),1==s.length&&(s="0"+s),1==t.length&&(t="0"+t),e=r+":"+s+":"+t,o.time=e;var a,n;if(n=o.content.split("}}"),"CustomTextMsg"==(a=JSON.parse(n[0]+"}}")).cmd){o.nickName=a.data.nickName,o.headPic=a.data.headPic;for(var i="",u=1;u<n.length;u++)u==n.length-1?i+=n[u]:i+=n[u]+"}}";o.content=i}}P.onRecvRoomTextMsg({roomID:k.roomID,userID:o.fromAccountNick,nickName:o.nickName,headPic:o.headPic,textMsg:o.content,time:o.time})}}function n(o){if(!o)return console.log("sendRoomTextMsg参数错误",o),void(o.fail&&o.fail({errCode:-9,errMsg:"sendRoomTextMsg参数错误"}));"1"==o.typedata.flag?_.sendCustomMsg(o.data,o.typedata,"",function(){o.success&&o.success()}):"3"==o.typedata.flag?_.onSendMsg(o.data.msg,o.typedata,function(){o.success&&o.success()}):_.sendCustomMsg({data:'{"cmd":"CustomTextMsg","data":{"nickName":"'+S.userName+'","headPic":"'+S.userAvatar+'"}}',text:o.data.msg},function(){o.success&&o.success()})}function i(){w.get_pushers_start=+new Date,d({data:{roomID:k.roomID},success:function(o){var e=[],r=[],s=0;console.log("去重操作"),console.log("旧",k.pushers),console.log("新",o.pushers),o.pushers.forEach(function(o){s=0,k.pushers.forEach(function(e){o.userID==e.userID&&(s=1)}),s||e.push(o),s=0}),k.pushers.forEach(function(e){s=0,o.pushers.forEach(function(o){e.userID==o.userID&&(s=1)}),s||r.push(e),s=0}),k.roomID=o.roomID,k.roomInfo=o.roomInfo,k.roomCreator=o.roomCreator,k.pushers=o.pushers,e.length&&(console.log("进房:",JSON.stringify(e)),P.onPusherJoin({pushers:e})),r.length&&(console.log("退房:",JSON.stringify(r),"房间解散"),P.onPusherQuit({pushers:r}),P.onRoomClose({})),w.get_pushers_end=+new Date,M.setReportData({str_room_creator:k.roomCreator,int64_tc_get_pushers:+new Date-w.get_pushers_start})},fail:function(o){M.setReportData({int64_tc_get_pushers:-Math.abs(o.errCode)}),M.report()}})}function u(o){o&&setTimeout(function(){c()},3e3),C&&setTimeout(function(){c(),u()},7e3)}function c(){console.log("心跳请求"),o({url:"pusher_heartbeat",data:{roomID:k.roomID,userID:S.userID},success:function(o){o.data.code?console.log("心跳失败：",o):console.log("心跳成功",o)},fail:function(o){console.log("心跳失败：",o)}})}function l(){C=!1}function d(e){if(!e)return console.log("getPushers参数错误",e),void(e.fail&&e.fail({errCode:-9,errMsg:"getPushers参数错误"}));console.log("******",e),o({url:"get_pushers",data:{roomID:e.data.roomID},success:function(o){if(o.data.code)return console.log("拉取所有主播信息失败: ",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));var r=[],s=0;console.log("拉取所有主播信息成功",o.data,I(o.data.pushersMap));for(var t in o.data.pushersMap){var a=o.data.pushersMap[t];a.userID!=S.userID?r.push(a):s=1}console.log("拉取所有主播信息成功",r),!e.type||s?e.success&&e.success({roomID:o.data.roomID,roomInfo:o.data.roomInfo,roomCreator:o.data.roomCreator,mixedPlayURL:o.data.mixedPlayURL,pushers:r}):e.fail&&e.fail({errCode:-1,errMsg:"你已退出"})},fail:function(o){if("request:fail timeout"==o.errMsg)var r=-1,s="网络请求超时，请检查网络状态";e.fail&&e.fail({errCode:r||-1,errMsg:s||"获取主播信息失败"})}})}function f(e){console.log(e),o({url:"create_room",data:{userID:S.userID,roomID:k.roomID,roomInfo:k.roomInfo},success:function(o){return e.data.roomID=k.roomID,o.data.code?(console.log("创建房间失败:",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}))):(k.roomID=o.data.roomID,k.roomCreator=S.userID,console.log("&&&&&&&proto_createRoom创建房间成功&&&&&",k.roomID,o),k.isDestory?(console.log("***======roomInfo.isDestory by proto_createRoom rtcroom.js***"),void D({})):void(e.success&&e.success({roomID:k.roomID})))},fail:function(o){if(console.log("创建后台房间失败:",o),"request:fail timeout"==o.errMsg)var r=-1,s="网络请求超时，请检查网络状态";e.fail&&e.fail({errCode:r||-3,errMsg:s||"创建房间失败"})}})}function g(o){if(!o||!o.data.roomID||!o.data.pushURL)return console.log("joinPusher参数错误",o),void(o.fail&&o.fail({errCode:-9,errMsg:"joinPusher参数错误"}));k.roomID=o.data.roomID,k.roomInfo=o.data.roomInfo,m(o)}function m(e){w.join_group_srart=+new Date,w.add_pusher_start=+new Date,o({url:"add_pusher",data:{roomID:k.roomID,roomInfo:k.roomInfo,userID:S.userID,userName:S.userName,userAvatar:S.userAvatar,pushURL:e.data.pushURL},success:function(o){if(o.data.code)return console.log("进入房间失败:",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));console.log("加入推流成功"),M.setReportData({int64_tc_add_pusher:+new Date-w.add_pusher_start,int64_ts_add_pusher:+new Date}),C=!0,u(1),console.log("*****proto_joinPusher 928 rtcroom.js ****",k),p(),_.applyJoinBigGroup(k.roomID,t,{success:function(){k.isPush=!0,e.success&&e.success({})},fail:function(){e.fail}}),i()},fail:function(o){if(console.log("进入房间失败:",o),"request:fail timeout"==o.errMsg)var r=-1,s="网络请求超时，请检查网络状态";e.fail&&e.fail({errCode:r||-4,errMsg:s||"进入房间失败"})}})}function p(){var o="";"string"==typeof y.globalData.phone?o=y.globalData.phone:"object"===I(y.globalData.phone)&&y.globalData.phone&&y.globalData.phone.phone&&(o=y.globalData.phone.phone);var e={csyzwfelab20180425hhhdfq:"secretkey",param:{consultantName:S.opt.username,currentTime:Date.now(),roomNum:k.roomID,customerId:S.userSplitID,customerGender:S.gender,customerLoginId:S.loginid,customerMobile:o,customerNickname:S.userName,customerAvatar:S.userAvatar},type:512,typedesc:"发起视频看房请求"};console.log("*****callVideo-sendComment*****",JSON.stringify(e),S.selToID);var r={flag:"1",myselToID:S.selToID};n({data:{text:"客户"+S.userName+"发起视频看房请求",ext:JSON.stringify(e),msg:JSON.stringify(e),data:""},typedata:{TYPE:h.SESSION_TYPE.C2C,myselToID:r.myselToID||"",flag:r.flag}})}function D(e){if(l(),!k.isDestory){k.isDestory=!0;k.roomCreator;console.log(k),k.roomID&&o({url:"delete_pusher",data:{roomID:k.roomID,userID:S.userID},success:function(o){if(o.data.code)return console.error("退出房间失败:",o),console.error("退房信息: roomID:"+k.roomID+", userID:"+S.userID),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));console.log("退出推流成功"),e.success&&e.success({})},fail:function(o){console.log("退出房间失败:",o);var r=o.errCode||-1,s=o.errMsg||"退出房间失败";"request:fail timeout"==o.errMsg&&(r=-1,s="网络请求超时，请检查网络状态"),e.fail&&e.fail({errCode:r,errMsg:s})}}),console.log("***webimhandler.quitBigGroup***",e),_.quitBigGroup(e.roomID),k.roomID="",k.pushers=[],k.mixedPlayURL="",k.roomInfo="",S.pushURL="",S.isCreator=!1}}var I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},h=require("webim_wx.js"),_=require("webim_handler.js"),M=(require("tls.js"),require("encrypt.js"),require("report.js")),y=getApp(),v=(require("./util.js"),require("../config.js"),""),C="",R=0,N=[],S={userID:"",userName:"",userAvatar:"",userSig:"",sdkAppID:"",accountType:"",accountMode:0,token:""},k={roomID:"",roomCreator:"",roomInfo:"",mixedPlayURL:"",pushers:[],isDestory:!1,isPush:!1},P={onGetPusherList:function(){},onPusherJoin:function(){},onPusherQuit:function(){},onRoomClose:function(){},onRecvRoomTextMsg:function(){}},b=0,T=["pusher_heartbeat","get_room_list","create_room","delete_pusher","get_pushers",""],w={join_group_srart:0,get_pushers_start:0,get_pushers_end:0,get_pushurl_start:0,add_pusher_start:0};module.exports={login:function(e){if(k.isPush=!1,!e||!e.data.serverDomain)return console.log("init参数错误",e),void(e.fail&&e.fail({errCode:-9,errMsg:"init参数错误"}));v=e.data.serverDomain,S.userID=e.data.userID,S.loginid=e.data.loginid,S.userSplitID=e.data.userSplitID,S.userSig=e.data.userSig,S.sdkAppID=e.data.sdkAppID,S.accountType=e.data.accType,S.userName=e.data.userName||e.data.loginid||S.userID,S.userAvatar=e.data.userAvatar||"123",S.gender=e.data.gender||"1",S.selToID=e.data.selToID,S.opt=e.data.opt,e.data.userSig||(console.log("***userSig***",e.data.userSig),wx.navigateTo({url:"../pages/index/index"})),o({url:"login",params:{accountType:S.accountType,sdkAppID:S.sdkAppID,userSig:S.userSig},method:"POST",data:{},success:function(o){if(console.log("####login###",o),o.data.code)return wx.showModal({title:"登录到RoomService后台失败",content:o.errMsg,showCancel:!1}),console.error("登录到RoomService后台失败:",JSON.stringify(o)),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message}));S.token=o.data.token,S.userID=o.data.userID,r({success:function(o){console.log("####IM###",o),e.success&&e.success({userID:S.userID,userAvatar:S.userAvatar,userName:S.userName})},fail:function(o){wx.showModal({title:"IM登录失败",content:o.errMsg,showCancel:!1}),console.error("IM登录失败:",JSON.stringify(o)),e.fail&&e.fail({errCode:-999,errMsg:"IM登录失败"})}})},fail:function(o){wx.showModal({title:"1登录到RoomService后台失败1",content:o.errMsg,showCancel:!1}),console.error("登录到RoomService后台失败:",JSON.stringify(o)),e.fail&&e.fail(o)}})},loginIM:r,logout:function(){o({url:"logout",success:function(o){},fail:function(o){}}),v="",S.userID="",S.userSig="",S.sdkAppID="",S.accountType="",S.userName="",S.userAvatar="",S.token="",_.logout()},getRoomList:function(e){if(!e)return console.log("getRoomList参数错误",e),void(e.fail&&e.fail({errCode:-9,errMsg:"getRoomList参数错误"}));o({url:"get_room_list",data:{index:e.data.index||0,cnt:e.data.cnt||20},success:function(o){if(o.data.code)return console.error("获取房间列表失败: ",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));console.log("房间列表信息:",o),e.success&&e.success({rooms:o.data.rooms})},fail:function(o){if(console.log("获取房间列表失败: ",o),"request:fail timeout"==o.errMsg)var r=-1,s="网络请求超时，请检查网络状态";e.fail&&e.fail({errCode:r||-1,errMsg:s||"获取房间列表失败"})}})},getPushURL:function(e){if(!e)return console.log("getPushURL参数错误",e),void(e.fail&&e.fail({errCode:-9,errMsg:"getPushURL参数错误"}));M.setReportData({int64_ts_enter_room:+new Date}),w.get_pushurl_start=+new Date;var r={};e.data.roomID?(r.roomID=e.data.roomID,r.userID=S.userID):r.userID=S.userID,o({url:"get_push_url",data:r,success:function(o){if(o.data.code)return console.log("获取推流地址失败: ",o),void(e.fail&&e.fail({errCode:o.data.code,errMsg:o.data.message+"["+o.data.code+"]"}));M.setReportData({int64_tc_get_pushurl:+new Date-w.get_pushurl_start}),console.log("获取推流地址成功：",o.data.pushURL),e.success&&e.success({pushURL:o.data.pushURL})},fail:function(o){if("request:fail timeout"==o.errMsg)var r=-1,s="网络请求超时，请检查网络状态";e.fail&&e.fail({errCode:r||-3,errMsg:s||"获取推流地址失败"})}})},createRoom:function(o){if(k.isDestory=!1,!o)return console.log("createRoom参数错误",o),void(o.fail&&o.fail({errCode:-9,errMsg:"createRoom参数错误"}));k.roomInfo=o.data.roomInfo.roomName||"",k.roomID=o.data.roomInfo.roomID||"",k.pushers=[],f(o)},getPushers:d,enterRoom:function(o){console.log("***enterRoom***",k.isPush),k.isDestory=!1,M.setReportData({str_roomid:o.data.roomID,str_userid:S.userID}),g(o)},exitRoom:D,sendRoomTextMsg:n,setListener:function(o){o?(P.onGetPusherList=o.onGetPusherList||function(){},P.onPusherJoin=o.onPusherJoin||function(){},P.onPusherQuit=o.onPusherQuit||function(){},P.onRoomClose=o.onRoomClose||function(){},P.onRecvRoomTextMsg=o.onRecvRoomTextMsg||function(){}):console.log("setListener参数错误",o)},getAccountInfo:function(){return S},getRoomInfo:function(){return k}}; 
 			}); 
		define("utils/tea.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function r(){return Math.round(4294967295*Math.random())}function n(r,n,t){(!t||t>4)&&(t=4);for(var e=0,o=n;o<n+t;o++)e<<=8,e|=r[o];return(4294967295&e)>>>0}function t(r,n,t){r[n+3]=t>>0&255,r[n+2]=t>>8&255,r[n+1]=t>>16&255,r[n+0]=t>>24&255}function e(r){if(!r)return"";for(var n="",t=0;t<r.length;t++){var e=Number(r[t]).toString(16);1==e.length&&(e="0"+e),n+=e}return n}function o(r){var n,t,e=[],o=r.length;for(n=0;n<o;n++)(t=r.charCodeAt(n))>0&&t<=127?e.push(r.charAt(n)):t>=128&&t<=2047?e.push(String.fromCharCode(192|t>>6&31),String.fromCharCode(128|63&t)):t>=2048&&t<=65535&&e.push(String.fromCharCode(224|t>>12&15),String.fromCharCode(128|t>>6&63),String.fromCharCode(128|63&t));return e.join("")}function u(n){v=new Array(8),C=new Array(8),d=y=0,S=!0,g=0;var t=n.length,e=0;0!=(g=(t+10)%8)&&(g=8-g),p=new Array(t+g+10),v[0]=255&(248&r()|g);for(o=1;o<=g;o++)v[o]=255&r();g++;for(o=0;o<8;o++)C[o]=0;for(e=1;e<=2;)g<8&&(v[g++]=255&r(),e++),8==g&&f();for(var o=0;t>0;)g<8&&(v[g++]=n[o++],t--),8==g&&f();for(e=1;e<=7;)g<8&&(v[g++]=0,e++),8==g&&f();return p}function a(r){var n=0,t=new Array(8),e=r.length;if(m=r,e%8!=0||e<16)return null;if(C=i(r),g=7&C[0],(n=e-g-10)<0)return null;for(u=0;u<t.length;u++)t[u]=0;p=new Array(n),y=0,d=8,g++;for(var o=1;o<=2;)if(g<8&&(g++,o++),8==g&&(t=r,!c()))return null;for(var u=0;0!=n;)if(g<8&&(p[u]=255&(t[y+g]^C[g]),u++,n--,g++),8==g&&(t=r,y=d-8,!c()))return null;for(o=1;o<8;o++){if(g<8){if(0!=(t[y+g]^C[g]))return null;g++}if(8==g&&(t=r,y=d,!c()))return null}return p}function f(){for(n=0;n<8;n++)v[n]^=S?C[n]:p[y+n];for(var r=h(v),n=0;n<8;n++)p[d+n]=r[n]^C[n],C[n]=v[n];y=d,d+=8,g=0,S=!1}function h(r){for(var e=16,o=n(r,0,4),u=n(r,4,4),a=n(s,0,4),f=n(s,4,4),h=n(s,8,4),i=n(s,12,4),c=0;e-- >0;)u=(4294967295&(u+=((o=(4294967295&(o+=(u<<4)+a^u+(c=(4294967295&(c+=2654435769))>>>0)^(u>>>5)+f))>>>0)<<4)+h^o+c^(o>>>5)+i))>>>0;var A=new Array(8);return t(A,0,o),t(A,4,u),A}function i(r){for(var e=16,o=n(r,0,4),u=n(r,4,4),a=n(s,0,4),f=n(s,4,4),h=n(s,8,4),i=n(s,12,4),c=3816266640;e-- >0;)o=(4294967295&(o-=((u=(4294967295&(u-=(o<<4)+h^o+c^(o>>>5)+i))>>>0)<<4)+a^u+c^(u>>>5)+f))>>>0,c=(4294967295&(c-=2654435769))>>>0;var A=new Array(8);return t(A,0,o),t(A,4,u),A}function c(){m.length;for(var r=0;r<8;r++)C[r]^=m[d+r];return C=i(C),d+=8,g=0,!0}function A(r,n){var t=[];if(n)for(o=0;o<r.length;o++)t[o]=255&r.charCodeAt(o);else for(var e=0,o=0;o<r.length;o+=2)t[e++]=parseInt(r.substr(o,2),16);return t}var l=require("base64.js"),s="",g=0,v=[],C=[],d=0,y=0,p=[],m=[],S=!0,w={encrypt:function(r,n){return e(u(A(r,n)))},enAsBase64:function(r,n){for(var t=u(A(r,n)),e="",o=0;o<t.length;o++)e+=String.fromCharCode(t[o]);return l.encode(e)},decrypt:function(r){return e(a(A(r,!1)))},initkey:function(r,n){s=A(r,n)},bytesToStr:function(r){for(var n="",t=0;t<r.length;t+=2)n+=String.fromCharCode(parseInt(r.substr(t,2),16));return n},strToBytes:function(r,n){if(!r)return"";n&&(r=o(r));for(var t=[],u=0;u<r.length;u++)t[u]=r.charCodeAt(u);return e(t)},bytesInStr:e,dataFromStr:A};(l={}).PADCHAR="=",l.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l.getbyte=function(r,n){var t=r.charCodeAt(n);if(t>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return t},l.encode=function(r){if(1!=arguments.length)throw"SyntaxError: Not enough arguments";var n,t,e=l.PADCHAR,o=l.ALPHA,u=l.getbyte,a=[],f=(r=""+r).length-r.length%3;if(0==r.length)return r;for(n=0;n<f;n+=3)t=u(r,n)<<16|u(r,n+1)<<8|u(r,n+2),a.push(o.charAt(t>>18)),a.push(o.charAt(t>>12&63)),a.push(o.charAt(t>>6&63)),a.push(o.charAt(63&t));switch(r.length-f){case 1:t=u(r,n)<<16,a.push(o.charAt(t>>18)+o.charAt(t>>12&63)+e+e);break;case 2:t=u(r,n)<<16|u(r,n+1)<<8,a.push(o.charAt(t>>18)+o.charAt(t>>12&63)+o.charAt(t>>6&63)+e)}return a.join("")},module.exports=w; 
 			}); 
		define("utils/tls.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){wx.request({url:"https://tls.qcloud.com/getusersig",data:{tmpsig:e.TmpSig,identifier:e.Identifier,sdkappid:s},method:"GET",header:{},success:function(t){var s=t.data.match(/tlsGetUserSig\((.*?)\)/),i=JSON.parse(s[1]).UserSig;e.success&&e.success({Identifier:e.Identifier,UserSig:i})},fail:function(t){e.error&&e.error(t)}})}var t=require("encrypt.js"),s=1400079977;module.exports={init:function(e){s=e.sdkappid},anologin:function(i){wx.request({url:"https://tls.qcloud.com/anologin",data:{passwd:t.getRSAH1(),url:"https://tls.qcloud.com/demo.html",sdkappid:s},method:"GET",header:{},success:function(t){var s=t.data.match(/tlsAnoLogin\((.*?)\)/),r=JSON.parse(s[1]);e({TmpSig:r.TmpSig,Identifier:r.Identifier,success:i})}})},login:e}; 
 			}); 
		define("utils/util.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return(e=e.toString())[1]?e:"0"+e}function t(e,t){var o={uid:t.globalData.openid||"",time:Date.now(),phone:t.globalData.phone||"",type:"20",product:t.globalData.houseid||"",sessionId:t.globalData.sessionKey||"",project:t.systemInfo.model||"_"+t.systemInfo.SDKVersion||"",version:t.systemInfo.version||"",system:e.system||"4",module:"4",pageid:e.pageid||"",keyvalue:e.keyvalue||"",name:e.name||"",category:e.category||"",value:e.value||""};e.usetime&&(o.usetime=e.usetime);var n={};n.merchantid="3",n.version="1",n.sign_type="RSA",n.sign="123",n.charset="UTF-8",n.method="skyforest.analysis.add";var r="";for(var s in o)r+="&"+s+"="+o[s];return n.context=r,n}function o(e){return a.url}function n(e){return a.newUrl}var r,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=require("../config.js");module.exports={formatTime:function(t){var o=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),s=t.getHours(),a=t.getMinutes(),i=t.getSeconds();return[o,n,r].map(e).join("-")+" "+[s,a,i].map(e).join(":")},normalTime:function(e){return isNaN(e)?"00":parseInt(e)<10?"0"+e:e},formatTodayTime:function(e){var t=e.getFullYear(),o=e.getMonth()+1,n=e.getDate(),r=e.getHours(),s=e.getMinutes();return o==(new Date).getMonth()+1&&n+1==(new Date).getDate()?"昨天"+r+":"+(s>9?s:"0"+s):o==(new Date).getMonth()+1&&n==(new Date).getDate()?r+":"+(s>9?s:"0"+s):t+"-"+(o>9?o:"0"+o)+"-"+n+" "+r+":"+(s>9?s:"0"+s)},reformParam:function(e,t){var o={};o.merchantid="3",o.version="1",o.sign_type="RSA",o.sign="123",o.charset="UTF-8",o.method=e;var n="";for(var r in t)n+="&"+r+"="+t[r];return o.context=n,o},url:o,newUrl:n,timesData:function(e){var t=new Date(e);return t.getFullYear()+"/"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"/"+(t.getDate()<10?"0"+t.getDate():t.getDate())+" "},formatCNTime:function(e){var t=e.getFullYear(),o=e.getMonth()+1,n=e.getDate(),r=e.getHours(),s=e.getMinutes(),a=e.getSeconds();return t+"年"+(o>9?o:"0"+o)+"月"+n+"日"+r+"时"+(s>9?s:"0"+s)+"分"+a+"秒"},timestampToTime:function(e){var t=new Date(e);return(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())},trackRequest:function(e,t){'"{}"'===JSON.stringify(e.clkParams)&&(e.clkParams=""),'"{}"'===JSON.stringify(e.expand)&&(e.expand=""),'"{}"'===JSON.stringify(e.pvCurPageParams)&&(e.pvCurPageParams="");var o={session:i,userAgent:"",browserName:"",browserVersion:t.systemInfo.SDKVersion,platform:"miniapp",fromPlatform:"",deviceType:t.systemInfo.model||"",ip:t.globalData.ip||"",cookieId:"",openId:t.globalData.openid||"",customerId:t.globalData.single&&t.globalData.single.id?t.globalData.single.id:"",userId:t.globalData.single&&t.globalData.single.id?t.globalData.single.id:"",createTime:this.formatTime(new Date),uploadTime:this.formatTime(new Date),product:a.projectName,project:a.houseId,eventId:e.eventId||"",eventName:e.eventName||"",expand:"object"===s(e.expand)?JSON.stringify(e.expand):e.expand,imTalkId:e.imTalkId||"",imTalkType:e.imTalkType||"",eventModuleDes:e.eventModuleDes||"",eventInnerModuleId:e.eventInnerModuleId||"",adviserId:e.adviserId||"",clkDesPage:e.clkDesPage||"",clkId:e.clkId||"",clkName:e.clkName||"",pvId:e.pvId||"",clkParams:"object"===s(e.clkParams)?JSON.stringify(e.clkParams):e.clkParams,pvPageStayTime:e.pvPageStayTime||"",pvCurPageName:e.pvCurPageName||"",pvCurPageParams:"object"===s(e.pvCurPageParams)?JSON.stringify(e.pvCurPageParams):e.pvCurPageParams,pvLastPageName:e.pvLastPageName||"",pvLastPageParams:e.pvLastPageParams||"",pvPageLoadTime:e.pvPageLoadTime||"",type:e.type||""},r=(new Date).getTime(),i=wx.getStorageSync("sessionNumber")||1,l=wx.getStorageSync("sessionTime")||r;console.log(r,l,r-l),r-l>18e4?(i++,wx.setStorageSync("sessionNumber",i)):wx.setStorageSync("sessionNumber",i),wx.setStorageSync("sessionTime",r),o.session=o.userId+"_"+i,wx.request({url:n()+"elab-marketing-system/behavior/miniOrWeb/upload",method:"POST",data:o,success:function(e){console.log(e,"iii")},fail:function(e){console.log(e,"op")}}),t.globalData.sessionTime=r,console.log(o.session)},getImgUrl:function(){return a.ImgUrl},reqTrackEventObj:function(e,n){wx.request({url:o(),method:"POST",data:t(e,n),success:function(e){console.log("***reqTrackEventObj***",e)},fail:function(e){}})},reqTrackEventTimeObj:function(e,t){r&&clearInterval(r)},stopTrackEventTimeObj:function(e,t){r&&clearInterval(r)},addPoint:"skyforest.analysis.add",getModuleList:"skyforest.homehouse.HomeHouseController.getModuleList.v0.93",getModuleDetailList:"skyforest.homehouse.HomeHouseController.getModuleDetailList.v0.93",getTopPicList:"skyforest.homehouse.HomeHouseController.getTopPicList.v0.93",podcastDetails:"skyforest.live.LiveController.podcastDetails.v093",accoutUrl:"skyforest.tencent.TencentController.signature",podcast:"skyforest.live.LiveController.podcast.v093",sendVerifyCode:"skyforest.mine.MineController.sendVerifyCode.v093",login:"skyforest.mine.MineController.login.v093",insertAppointment:"skyforest.appointment.AppointmentController.insertAppointment.v0.93",mineInfo2:"skyforest.mine.MineController.mineInfo.v093",mineInfo:"skyforest.appointment.AppointmentController.appointmentDetail.v0.93",customerService:"023-62381788",podcastList:"skyforest.live.LiveController.podcastList.v093",version:"2017033101",tokenUrl:"skyforest.mine.MineController.login.v093",addCustomerInfo:"MVP_USER_MODIFY",adviserList:"skyforest.dynatown.dynatownController.getDynatownList",tencentSignature:"skyforest.tencent.TencentController.signature",mineLogin:"skyforest.mine.MineController.login.v093",aideUrl:"skyforest.live.advisterController.getAdvisterByOnline.v143",counselorList:"skyforest.dynatown.dynatownController.getDynatownList",chatUrl:"skyforest.dynatown.dynatownController.connect",InitUrl:"skyforest-factory.miniprogram.PositionHomeController.getPositionHome",historyUrl:"skyforest.dynatown.dynatownController.getAllDynatownList",getCustomerNick:"skyforest.dynatown.dynatownController.detail",likeUrl:"skyforest-factory.miniprogram.RelativeNumberController.insertOrUpdateRelativeNum",singleAdviser:"skyforest.dd.DdController.details.v093",bindAdviser:"skyforest.dynatown.dynatownController.bindAdviser",savephone:"skyforest.autoservice.AutoServiceController.save.v0932",verifyCode:"skyforest-factory.controller.message.MessageController.sendSms",getPhoneNumber:"skyforest-factory.miniprogram.PositionHomeController.getPhoneNumber",checkVerifyCodeEffective:"skyforest-factory.controller.message.MessageController.checkVerifyCodeEffective",videoInfo:"skyforest.fixed.FixedController.list.v093",connectAdviser:"connectAdviser",updateDynatown:"skyforest.advister.updateAdviserStatus.v140",videoList:"skyforest.advister.getAllVideoAdviserList",getWeather:"skyforest-factory.controller.weather.WeatherController.getWeather",getMessageList:"skyforest.message.MessageController.getMessageList",markRead:"skyforest.message.MessageController.markRead",getPullNewUserList:"skyforest.mine.MineController.getPullNewUserList",getRecommendInfoList:"skyforest.apprecommend.AppRecommendController.getRecommendInfoList"}; 
 			}); 
		define("utils/webim.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e={},t={login:function(e,t,n){},syncMsgs:function(e,t){},getC2CHistoryMsgs:function(e,t,n){},syncGroupMsgs:function(e,t,n){},sendMsg:function(e,t,n){},logout:function(e,t){},setAutoRead:function(e,t,n){},getProfilePortrait:function(e,t,n){},setProfilePortrait:function(e,t,n){},applyAddFriend:function(e,t,n){},getPendency:function(e,t,n){},deletePendency:function(e,t,n){},responseFriend:function(e,t,n){},getAllFriend:function(e,t,n){},deleteFriend:function(e,t,n){},addBlackList:function(e,t,n){},getBlackList:function(e,t,n){},deleteBlackList:function(e,t,n){},uploadPic:function(e,t,n){},createGroup:function(e,t,n){},applyJoinGroup:function(e,t,n){},handleApplyJoinGroup:function(e,t,n){},deleteApplyJoinGroupPendency:function(e,t,n){},quitGroup:function(e,t,n){},getGroupPublicInfo:function(e,t,n){},getGroupInfo:function(e,t,n){},modifyGroupBaseInfo:function(e,t,n){},destroyGroup:function(e,t,n){},getJoinedGroupListHigh:function(e,t,n){},getGroupMemberInfo:function(e,t,n){},addGroupMember:function(e,t,n){},modifyGroupMember:function(e,t,n){},forbidSendMsg:function(e,t,n){},deleteGroupMember:function(e,t,n){},sendCustomGroupNotify:function(e,t,n){},Msg:function(e,t,n,o,i,r,s,u){},MsgStore:{sessMap:function(){return{}},sessCount:function(){return 0},sessByTypeId:function(e,t){return{}},delSessByTypeId:function(e,t){return!0},resetCookieAndSyncFlag:function(){},downloadMap:{}}};!function(t){var n={VERSION:"1.7.0",APPID:"537048168"},o=!0,i={FORMAL:{COMMON:"https://webim.tim.qq.com",PIC:"https://pic.tim.qq.com"},TEST:{COMMON:"https://test.tim.qq.com",PIC:"https://pic.tim.qq.com"}},r={},s=!1,u={OPEN_IM:"openim",GROUP:"group_open_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat"},a={openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v1",group_open_long_polling_http_noauth_svc:"v1",imopenstat:"v4"},c={login:1,pic_up:3,apply_join_group:9,create_group:10,longpolling:18,send_group_msg:19,sendmsg:20},l={C2C:"C2C",GROUP:"GROUP"},p={C2C:1,GROUP:2},f={C2C:12e3,GROUP:8898},d={OK:"OK",FAIL:"FAIL"},g={TEXT:"TIMTextElem",FACE:"TIMFaceElem",IMAGE:"TIMImageElem",CUSTOM:"TIMCustomElem",SOUND:"TIMSoundElem",FILE:"TIMFileElem",LOCATION:"TIMLocationElem",GROUP_TIP:"TIMGroupTipElem"},m={ORIGIN:1,LARGE:2,SMALL:3},I={RAW_DATA:0,BASE64_DATA:1},M={BUSSINESS_ID:"10001",AUTH_KEY:"617574686b6579",SERVER_IP:"182.140.186.147"},E={SOUND:2106,FILE:2107},_={IMAGE:1,FILE:2,SHORT_VIDEO:3,SOUND:4},y={APP_VERSION:"2.1",SERVER_VERSION:1},h={C2C:1,GROUP_COMMON:3,GROUP_TIP:4,GROUP_SYSTEM:5,GROUP_TIP2:6,FRIEND_NOTICE:7,PROFILE_NOTICE:8,C2C_COMMON:9,C2C_EVENT:10},C={COMMON:0},T={READED:92},A={COMMON:0,LOVEMSG:1,TIP:2,REDPACKET:3},S={REDPACKET:1,COMMON:2,LOVEMSG:3},G={JOIN:1,QUIT:2,KICK:3,SET_ADMIN:4,CANCEL_ADMIN:5,MODIFY_GROUP_INFO:6,MODIFY_MEMBER_INFO:7},O={FACE_URL:1,NAME:2,OWNER:3,NOTIFICATION:4,INTRODUCTION:5},F={JOIN_GROUP_REQUEST:1,JOIN_GROUP_ACCEPT:2,JOIN_GROUP_REFUSE:3,KICK:4,DESTORY:5,CREATE:6,INVITED_JOIN_GROUP_REQUEST:7,QUIT:8,SET_ADMIN:9,CANCEL_ADMIN:10,REVOKE:11,READED:15,CUSTOM:255},R={FRIEND_ADD:1,FRIEND_DELETE:2,PENDENCY_ADD:3,PENDENCY_DELETE:4,BLACK_LIST_ADD:5,BLACK_LIST_DELETE:6,PENDENCY_REPORT:7,FRIEND_UPDATE:8},v={PROFILE_MODIFY:1},N={OK:0,SIGNATURE_EXPIRATION:11},P={INIT:-1,ON:0,RECONNECT:1,OFF:9999},b={GROUP_MSG:1,C2C_MSG:2,USER_HEAD:3,GROUP_HEAD:4},L={ING:14,STOP:15},U=P.INIT,D=!1,k=0,w=6e4,q=null,x=0,B=0,K=0,z=null,V=null,J=0,H=[],Y=null,X=null,j={sdkAppID:null,appIDAt3rd:null,accountType:null,identifier:null,tinyid:null,identifierNick:null,userSig:null,a2:null,contentType:"json",apn:1},W={},Q=0,$=[],Z=[],ee=[],te={downloadMap:{}},ne={"[惊讶]":0,"[撇嘴]":1,"[色]":2,"[发呆]":3,"[得意]":4,"[流泪]":5,"[害羞]":6,"[闭嘴]":7,"[睡]":8,"[大哭]":9,"[尴尬]":10,"[发怒]":11,"[调皮]":12,"[龇牙]":13,"[微笑]":14,"[难过]":15,"[酷]":16,"[冷汗]":17,"[抓狂]":18,"[吐]":19,"[偷笑]":20,"[可爱]":21,"[白眼]":22,"[傲慢]":23,"[饿]":24,"[困]":25,"[惊恐]":26,"[流汗]":27,"[憨笑]":28,"[大兵]":29,"[奋斗]":30,"[咒骂]":31,"[疑问]":32,"[嘘]":33,"[晕]":34},oe={},ie=new function(){this.formatTimeStamp=function(e,t){if(!e)return 0;var n;t=t||"yyyy-MM-dd hh:mm:ss";var o=new Date(1e3*e),i={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds()};n=/(y+)/.test(t)?t.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length)):t;for(var r in i)new RegExp("("+r+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?i[r]:("00"+i[r]).substr((""+i[r]).length)));return n},this.groupTypeEn2Ch=function(e){var t=null;switch(e){case"Public":t="公开群";break;case"ChatRoom":t="聊天室";break;case"Private":t="讨论组";break;case"AVChatRoom":t="直播聊天室";break;default:t=e}return t},this.groupTypeCh2En=function(e){var t=null;switch(e){case"公开群":t="Public";break;case"聊天室":t="ChatRoom";break;case"讨论组":t="Private";break;case"直播聊天室":t="AVChatRoom";break;default:t=e}return t},this.groupRoleEn2Ch=function(e){var t=null;switch(e){case"Member":t="成员";break;case"Admin":t="管理员";break;case"Owner":t="群主";break;default:t=e}return t},this.groupRoleCh2En=function(e){var t=null;switch(e){case"成员":t="Member";break;case"管理员":t="Admin";break;case"群主":t="Owner";break;default:t=e}return t},this.groupMsgFlagEn2Ch=function(e){var t=null;switch(e){case"AcceptAndNotify":t="接收并提示";break;case"AcceptNotNotify":t="接收不提示";break;case"Discard":t="屏蔽";break;default:t=e}return t},this.groupMsgFlagCh2En=function(e){var t=null;switch(e){case"接收并提示":t="AcceptAndNotify";break;case"接收不提示":t="AcceptNotNotify";break;case"屏蔽":t="Discard";break;default:t=e}return t},this.formatText2Html=function(e){var t=e;return t&&(t=(t=(t=this.xssFilter(t)).replace(/ /g,"&nbsp;")).replace(/\n/g,"<br/>")),t},this.formatHtml2Text=function(e){var t=e;return t&&(t=(t=t.replace(/&nbsp;/g," ")).replace(/<br\/>/g,"\n")),t},this.getStrBytes=function(e){if(null==e||void 0===e)return 0;if("string"!=typeof e)return 0;var t,n,o,i=0;for(n=0,o=e.length;n<o;n++)i+=(t=e.charCodeAt(n))<=127?1:t<=2047?2:t<=65535?3:4;return i},this.xssFilter=function(e){return e=e.toString(),e=e.replace(/[<]/g,"&lt;"),e=e.replace(/[>]/g,"&gt;"),e=e.replace(/'/g,"&#039;")},this.trimStr=function(e){return e?(e=e.toString()).replace(/(^\s*)|(\s*$)/g,""):""},this.validNumber=function(e){return(e=e.toString()).match(/(^\d{1,8}$)/g)},this.getReturnError=function(e,t){return t||(t=-100),{ActionStatus:d.FAIL,ErrorCode:t,ErrorInfo:e+"["+t+"]"}},this.setCookie=function(e,t,n,o,i){var r=new Date;r.setTime(r.getTime()+1e3*n),document.cookie=e+"="+escape(t)+";expires="+r.toGMTString()},this.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},this.delCookie=function(e){var t=new Date;t.setTime(t.getTime()-1);var n=this.getCookie(e);null!=n&&(document.cookie=e+"="+escape(n)+";expires="+t.toGMTString())},this.getBrowserInfo=function(){return{type:"wechat app",ver:-1}}},re=new function(){var e=!0;this.setOn=function(t){e=t},this.getOn=function(){return e},this.error=function(t){try{e&&console.error(t)}catch(e){}},this.warn=function(t){try{e&&console.warn(t)}catch(e){}},this.info=function(t){try{e&&console.info(t)}catch(e){}},this.debug=function(t){try{e&&console.debug(t)}catch(e){}}},se=function(e){return e||(e=new Date),Math.round(e.getTime()/1e3)},ue=function(){return Q?Q+=1:Q=Math.round(1e7*Math.random()),Q},ae=function(){return Math.round(4294967296*Math.random())},ce=function(e,t,n,o,i,r,s){console.debug(t,n),wx.request({url:t,data:n,dataType:"json",method:e,header:{"Content-Type":"application/json"},success:function(e){k=x=0,r&&r(e.data)},fail:function(e){setTimeout(function(){var e=ie.getReturnError("请求服务器失败,请检查你的网络是否正常",-2);s&&s(e)},16)}})},le=function(e,t,n,o,i,r,s){ce(e,t,JSON.stringify(n),0,0,function(e){var t=null;e&&(t=e),r&&r(t)},s)},pe=function(){return j.sdkAppID&&j.identifier},fe=function(e,t){if(!pe()){if(t){var n=ie.getReturnError("请登录",-4);e&&e(n)}return!1}return!0},de=function(){return o},ge=function(e,t,o,r){var s=i;s=de()?i.FORMAL.COMMON:i.TEST.COMMON,e==u.PIC&&(s=de()?i.FORMAL.PIC:i.TEST.PIC);var c=s+"/"+a[e]+"/"+e+"/"+t+"?websdkappid="+n.APPID+"&v="+n.VERSION;if(pe()){if("login"==t)c+="&identifier="+encodeURIComponent(j.identifier)+"&usersig="+j.userSig;else if(j.tinyid&&j.a2)c+="&tinyid="+j.tinyid+"&a2="+j.a2;else if(r)return re.error("tinyid或a2为空["+e+"]["+t+"]"),r(ie.getReturnError("tinyid或a2为空["+e+"]["+t+"]",-5)),!1;c+="&contenttype="+j.contentType}return c+="&sdkappid="+j.sdkAppID+"&accounttype="+j.accountType+"&apn="+j.apn+"&reqtime="+se()},me=function(e,t){var n=null;return Y&&H[0]?n="http://"+H[0]+"/asn.com/stddownload_common_file?authkey="+Y+"&bid="+M.BUSSINESS_ID+"&subbid="+j.sdkAppID+"&fileid="+e+"&filetype="+E.SOUND+"&openid="+t+"&ver=0":re.error("拼接语音下载url不报错：ip或者authkey为空"),n},Ie=function(e,t,n){var o=null;return Y&&H[0]?o="http://"+H[0]+"/asn.com/stddownload_common_file?authkey="+Y+"&bid="+M.BUSSINESS_ID+"&subbid="+j.sdkAppID+"&fileid="+e+"&filetype="+E.FILE+"&openid="+t+"&ver=0&filename="+encodeURIComponent(n):re.error("拼接文件下载url不报错：ip或者authkey为空"),te.downloadMap["uuid_"+e]=o,o},Me=function(e,t,n,o,i,r,s){var u={From_Account:t,To_Account:i,os_platform:10,Timestamp:se().toString(),Random:ae().toString(),request_info:[{busi_id:r,download_flag:o,type:s,uuid:e,version:y.SERVER_VERSION,auth_key:Y,ip:H[0]}]};It(u,function(e){0==e.error_code&&e.response_info&&(te.downloadMap["uuid_"+u.uuid]=e.response_info.url),onAppliedDownloadUrl&&onAppliedDownloadUrl({uuid:u.uuid,url:e.response_info.url,maps:te.downloadMap})},function(e){re.error("获取下载地址失败",u.uuid)})},Ee=function(){j={sdkAppID:null,appIDAt3rd:null,accountType:null,identifier:null,identifierNick:null,userSig:null,contentType:"json",apn:1},W={},Q=0,K=0,z=null,ee=[],Ct.clear()},_e=function(e,t,n,i,r){Ee(),n&&(W=n),0==W.isAccessFormalEnv&&(o=W.isAccessFormalEnv),0==W.isLogOn&&re.setOn(W.isLogOn),e||!r?e.sdkAppID||!r?e.accountType||!r?(e.identifier&&(j.identifier=e.identifier.toString()),e.identifier&&!e.userSig&&r?r(ie.getReturnError("loginInfo.userSig is empty",-9)):(e.userSig&&(j.userSig=e.userSig.toString()),j.sdkAppID=e.sdkAppID,j.accountType=e.accountType,j.identifier&&j.userSig?he(function(e){Ct.init(t,function(t){i&&(t.identifierNick=e,i(t))},r)},r):Ct.init(t,i,r))):r(ie.getReturnError("loginInfo.accountType is empty",-8)):r(ie.getReturnError("loginInfo.sdkAppID is empty",-7)):r(ie.getReturnError("loginInfo is empty",-6))},ye=function(e,t,o){if("longpolling"!=e||60008!=t&&91101!=t){var i=c[e];if(i){var r=se(),s=null,u={Code:t,ErrMsg:o};if(j.a2?s=j.a2.substring(0,10)+"_"+r+"_"+ae():j.userSig&&(s=j.userSig.substring(0,10)+"_"+r+"_"+ae()),s){var a={UniqKey:s,EventId:i,ReportTime:r,MsgCmdErrorCode:u};if("login"==e){var l=[];l.push(a),gt({EvtItems:l,MainVersion:n.VERSION,Version:"0"},function(e){l=null},function(e){l=null})}else ee.push(a),ee.length>=20&&gt({EvtItems:ee,MainVersion:n.VERSION,Version:"0"},function(e){ee=[]},function(e){ee=[]})}}}},he=function(e,t){Mt.apiCall(u.OPEN_IM,"login",{State:"Online"},function(n){if(n.TinyId)j.tinyid=n.TinyId;else if(t)return void t(ie.getReturnError("TinyId is empty",-10));if(n.A2Key)j.a2=n.A2Key;else if(t)return void t(ie.getReturnError("A2Key is empty",-11));var o=["Tag_Profile_IM_Nick"],i={From_Account:j.identifier,To_Account:[j.identifier],LastStandardSequence:0,TagList:o};st(i,function(t){var n;if(t.UserProfileItem&&t.UserProfileItem.length>0)for(var o in t.UserProfileItem)for(var i in t.UserProfileItem[o].ProfileItem)switch(t.UserProfileItem[o].ProfileItem[i].Tag){case"Tag_Profile_IM_Nick":(n=t.UserProfileItem[o].ProfileItem[i].Value)&&(j.identifierNick=n)}e&&e(j.identifierNick)},t)},t)},Ce=function(e,t,n){if(!fe(n,!1))return Ee(),void(t&&t({ActionStatus:d.OK,ErrorCode:0,ErrorInfo:"logout success"}));"all"==e?Mt.apiCall(u.OPEN_IM,"logout",{},function(e){Ee(),t&&t(e)},n):Mt.apiCall(u.OPEN_IM,"longpollinglogout",{LongPollingId:q},function(e){Ee(),t&&t(e)},n)},Te=function(e,t,n){if(fe(n,!0)){var o=null;switch(e.sess.type()){case l.C2C:o={From_Account:j.identifier,To_Account:e.sess.id().toString(),MsgTimeStamp:e.time,MsgSeq:e.seq,MsgRandom:e.random,MsgBody:[]};break;case l.GROUP:var i=e.getSubType();switch(o={GroupId:e.sess.id().toString(),From_Account:j.identifier,Random:e.random,MsgBody:[]},i){case A.COMMON:o.MsgPriority="COMMON";break;case A.REDPACKET:o.MsgPriority="REDPACKET";break;case A.LOVEMSG:o.MsgPriority="LOVEMSG";break;case A.TIP:re.error("不能主动发送群提示消息,subType="+i);break;default:return void re.error("发送群消息时，出现未知子消息类型：subType="+i)}}for(var r in e.elems){var s=e.elems[r],a=null,c=s.type;switch(c){case g.TEXT:a={Text:s.content.text};break;case g.FACE:a={Index:s.content.index,Data:s.content.data};break;case g.IMAGE:var p=[];for(var f in s.content.ImageInfoArray)p.push({Type:s.content.ImageInfoArray[f].type,Size:s.content.ImageInfoArray[f].size,Width:s.content.ImageInfoArray[f].width,Height:s.content.ImageInfoArray[f].height,URL:s.content.ImageInfoArray[f].url});a={UUID:s.content.UUID,ImageInfoArray:p};break;case g.SOUND:re.warn("web端暂不支持发送语音消息");continue;case g.LOCATION:re.warn("web端暂不支持发送地理位置消息");continue;case g.FILE:a={UUID:s.content.uuid,FileName:s.content.name,FileSize:s.content.size,DownloadFlag:s.content.downFlag};break;case g.CUSTOM:a={Data:s.content.data,Desc:s.content.desc,Ext:s.content.ext},c=g.CUSTOM;break;default:re.warn("web端暂不支持发送"+s.type+"消息");continue}o.MsgBody.push({MsgType:c,MsgContent:a})}e.sess.type()==l.C2C?Mt.apiCall(u.OPEN_IM,"sendmsg",o,t,n):e.sess.type()==l.GROUP&&Mt.apiCall(u.GROUP,"send_group_msg",o,t,n)}},Ae=function(e,t,n){(o||"undefined"==typeof stopPolling||1!=stopPolling)&&fe(n,!0)&&Mt.apiCall(u.OPEN_IM,"longpolling",e,t,n,w,!0)},Se=function(e,t,n,o){Mt.apiCall(u.BIG_GROUP_LONG_POLLING,"get_msg",e,t,n,o)},Ge=function e(t,n,o,i){fe(i,!0)&&Mt.apiCall(u.OPEN_IM,"getmsg",{Cookie:t,SyncFlag:n},function(t){if(t.MsgList&&t.MsgList.length)for(var n in t.MsgList)$.push(t.MsgList[n]);1==t.SyncFlag?e(t.Cookie,t.SyncFlag,o,i):(t.MsgList=$,$=[],o&&o(t))},i)},Oe=function(e,t,n,o){if(fe(o,!0)){var i=[];for(var r in t){var s={To_Account:t[r].toAccount,LastedMsgTime:t[r].lastedMsgTime};i.push(s)}Mt.apiCall(u.OPEN_IM,"msgreaded",{C2CMsgReaded:{Cookie:e,C2CMsgReadedItem:i}},n,o)}},Fe=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.OPEN_IM,"deletemsg",e,t,n)},Re=function e(t,n,o){fe(o,!0)&&Mt.apiCall(u.OPEN_IM,"getroammsg",t,function(i){var r=t.MaxCnt,s=i.Complete,u=i.MaxCnt,a=i.MsgKey,c=i.LastMsgTime;if(i.MsgList&&i.MsgList.length)for(var l in i.MsgList)Z.push(i.MsgList[l]);var p=null;0==s&&u<r&&(p={Peer_Account:t.Peer_Account,MaxCnt:r-u,LastMsgTime:c,MsgKey:a}),p?e(p,n,o):(i.MsgList=Z,Z=[],n&&n(i))},o)},ve=function(e,t,n){if(fe(n,!0)){for(var o={Type:e.Type,Name:e.Name},i=[],r=0;r<e.MemberList.length;r++)i.push({Member_Account:e.MemberList[r]});o.MemberList=i,e.GroupId&&(o.GroupId=e.GroupId),e.Owner_Account&&(o.Owner_Account=e.Owner_Account),e.Introduction&&(o.Introduction=e.Introduction),e.Notification&&(o.Notification=e.Notification),e.MaxMemberCount&&(o.MaxMemberCount=e.MaxMemberCount),e.ApplyJoinOption&&(o.ApplyJoinOption=e.ApplyJoinOption),e.AppDefinedData&&(o.AppDefinedData=e.AppDefinedData),e.FaceUrl&&(o.FaceUrl=e.FaceUrl),Mt.apiCall(u.GROUP,"create_group",o,t,n)}},Ne=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"create_group",e,t,n)},Pe=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"modify_group_base_info",e,t,n)},be=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"apply_join_group",{GroupId:e.GroupId,ApplyMsg:e.ApplyMsg,UserDefinedField:e.UserDefinedField},t,n)},Le=function(e,t,n){var o;o=fe(n,!1)?u.GROUP:u.BIG_GROUP,Mt.apiCall(o,"apply_join_group",{GroupId:e.GroupId,ApplyMsg:e.ApplyMsg,UserDefinedField:e.UserDefinedField},function(o){if(o.JoinedStatus&&"JoinedSuccess"==o.JoinedStatus){if(!o.LongPollingKey)return void(n&&n(ie.getReturnError("The type of group is not AVChatRoom: groupid="+e.GroupId,-12)));Ct.setBigGroupLongPollingOn(!0),Ct.setBigGroupLongPollingKey(o.LongPollingKey),Ct.setBigGroupLongPollingMsgMap(e.GroupId,0),Ct.bigGroupLongPolling()}t&&t(o)},function(e){n&&n(e)})},Ue=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"handle_apply_join_group",{GroupId:e.GroupId,Applicant_Account:e.Applicant_Account,HandleMsg:e.HandleMsg,Authentication:e.Authentication,MsgKey:e.MsgKey,ApprovalMsg:e.ApprovalMsg,UserDefinedField:e.UserDefinedField},t,function(e){if(10024==e.ErrorCode){if(t){var o={ActionStatus:d.OK,ErrorCode:0,ErrorInfo:"该申请已经被处理过"};t(o)}}else n&&n(e)})},De=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"quit_group",{GroupId:e.GroupId},t,n)},ke=function(e,t,n){var o;o=fe(n,!1)?u.GROUP:u.BIG_GROUP,Mt.apiCall(o,"quit_group",{GroupId:e.GroupId},function(e){Ct.resetBigGroupLongPollingInfo(),t&&t(e)},n)},we=function(e,t,n){Mt.apiCall(u.GROUP,"search_group",e,t,n)},qe=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"get_group_public_info",{GroupIdList:e.GroupIdList,ResponseFilter:{GroupBasePublicInfoFilter:e.GroupBasePublicInfoFilter}},function(e){if(e.ErrorInfo="",e.GroupInfo)for(var o in e.GroupInfo){var i=e.GroupInfo[o].ErrorCode;i>0&&(e.ActionStatus=d.FAIL,e.GroupInfo[o].ErrorInfo="["+i+"]"+e.GroupInfo[o].ErrorInfo,e.ErrorInfo+=e.GroupInfo[o].ErrorInfo+"\n")}e.ActionStatus==d.FAIL?n&&n(e):t&&t(e)},n)},xe=function(e,t,n){if(fe(n,!0)){var o={GroupIdList:e.GroupIdList,ResponseFilter:{GroupBaseInfoFilter:e.GroupBaseInfoFilter,MemberInfoFilter:e.MemberInfoFilter}};e.AppDefinedDataFilter_Group&&(o.ResponseFilter.AppDefinedDataFilter_Group=e.AppDefinedDataFilter_Group),e.AppDefinedDataFilter_GroupMember&&(o.ResponseFilter.AppDefinedDataFilter_GroupMember=e.AppDefinedDataFilter_GroupMember),Mt.apiCall(u.GROUP,"get_group_info",o,t,n)}},Be=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"get_group_member_info",{GroupId:e.GroupId,Offset:e.Offset,Limit:e.Limit,MemberInfoFilter:e.MemberInfoFilter,MemberRoleFilter:e.MemberRoleFilter,AppDefinedDataFilter_GroupMember:e.AppDefinedDataFilter_GroupMember},t,n)},Ke=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"add_group_member",{GroupId:e.GroupId,Silence:e.Silence,MemberList:e.MemberList},t,n)},ze=function(e,t,n){if(fe(n,!0)){var o={};e.GroupId&&(o.GroupId=e.GroupId),e.Member_Account&&(o.Member_Account=e.Member_Account),e.Role&&(o.Role=e.Role),e.MsgFlag&&(o.MsgFlag=e.MsgFlag),e.ShutUpTime&&(o.ShutUpTime=e.ShutUpTime),e.NameCard&&(o.NameCard=e.NameCard),e.AppMemberDefinedData&&(o.AppMemberDefinedData=e.AppMemberDefinedData),Mt.apiCall(u.GROUP,"modify_group_member_info",o,t,n)}},Ve=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"delete_group_member",{GroupId:e.GroupId,Silence:e.Silence,MemberToDel_Account:e.MemberToDel_Account,Reason:e.Reason},t,n)},Je=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"destroy_group",{GroupId:e.GroupId},t,n)},He=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"change_group_owner",e,t,n)},Ye=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"get_joined_group_list",{Member_Account:e.Member_Account,Limit:e.Limit,Offset:e.Offset,GroupType:e.GroupType,ResponseFilter:{GroupBaseInfoFilter:e.GroupBaseInfoFilter,SelfInfoFilter:e.SelfInfoFilter}},t,n)},Xe=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"get_role_in_group",{GroupId:e.GroupId,User_Account:e.User_Account},t,n)},je=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"forbid_send_msg",{GroupId:e.GroupId,Members_Account:e.Members_Account,ShutUpTime:e.ShutUpTime},t,n)},We=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"send_group_system_notification",e,t,n)},Qe=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"group_msg_get",{GroupId:e.GroupId,ReqMsgSeq:e.ReqMsgSeq,ReqMsgNumber:e.ReqMsgNumber},t,n)},$e=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.GROUP,"msg_read_report",{GroupId:e.GroupId,MsgReadedSeq:e.MsgReadedSeq},t,n)},Ze=function(e){var t=[];if(e.Fail_Account&&e.Fail_Account.length&&(t=e.Fail_Account),e.Invalid_Account&&e.Invalid_Account.length)for(var n in e.Invalid_Account)t.push(e.Invalid_Account[n]);if(t.length){e.ActionStatus=d.FAIL,e.ErrorCode=99999,e.ErrorInfo="";for(var o in t){var i=t[o];for(var r in e.ResultItem)if(e.ResultItem[r].To_Account==i){var s=e.ResultItem[r].ResultCode;e.ResultItem[r].ResultInfo="["+s+"]"+e.ResultItem[r].ResultInfo,e.ErrorInfo+=e.ResultItem[r].ResultInfo+"\n";break}}}return e},et=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.FRIEND,"friend_add",{From_Account:j.identifier,AddFriendItem:e.AddFriendItem},function(e){var o=Ze(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},tt=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.FRIEND,"friend_delete",{From_Account:j.identifier,To_Account:e.To_Account,DeleteType:e.DeleteType},function(e){var o=Ze(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},nt=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.FRIEND,"pendency_get",{From_Account:j.identifier,PendencyType:e.PendencyType,StartTime:e.StartTime,MaxLimited:e.MaxLimited,LastSequence:e.LastSequence},t,n)},ot=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.FRIEND,"pendency_delete",{From_Account:j.identifier,PendencyType:e.PendencyType,To_Account:e.To_Account},function(e){var o=Ze(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},it=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.FRIEND,"friend_response",{From_Account:j.identifier,ResponseFriendItem:e.ResponseFriendItem},function(e){var o=Ze(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},rt=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.FRIEND,"friend_get_all",{From_Account:j.identifier,TimeStamp:e.TimeStamp,StartIndex:e.StartIndex,GetCount:e.GetCount,LastStandardSequence:e.LastStandardSequence,TagList:e.TagList},t,n)},st=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.PROFILE,"portrait_get",{From_Account:j.identifier,To_Account:e.To_Account,TagList:e.TagList},function(e){var o=[];if(e.Fail_Account&&e.Fail_Account.length&&(o=e.Fail_Account),e.Invalid_Account&&e.Invalid_Account.length)for(var i in e.Invalid_Account)o.push(e.Invalid_Account[i]);if(o.length){e.ActionStatus=d.FAIL,e.ErrorCode=99999,e.ErrorInfo="";for(var r in o){var s=o[r];for(var u in e.UserProfileItem)if(e.UserProfileItem[u].To_Account==s){var a=e.UserProfileItem[u].ResultCode;e.UserProfileItem[u].ResultInfo="["+a+"]"+e.UserProfileItem[u].ResultInfo,e.ErrorInfo+="账号:"+s+","+e.UserProfileItem[u].ResultInfo+"\n";break}}}e.ActionStatus==d.FAIL?n&&n(e):t&&t(e)},n)},ut=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.PROFILE,"portrait_set",{From_Account:j.identifier,ProfileItem:e.ProfileItem},function(n){for(var o in e.ProfileItem){var i=e.ProfileItem[o];if("Tag_Profile_IM_Nick"==i.Tag){j.identifierNick=i.Value;break}}t&&t(n)},n)},at=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.FRIEND,"black_list_add",{From_Account:j.identifier,To_Account:e.To_Account},function(e){var o=Ze(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},ct=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.FRIEND,"black_list_delete",{From_Account:j.identifier,To_Account:e.To_Account},function(e){var o=Ze(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},lt=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.FRIEND,"black_list_get",{From_Account:j.identifier,StartIndex:e.StartIndex,MaxLimited:e.MaxLimited,LastSequence:e.LastSequence},t,n)},pt=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.RECENT_CONTACT,"get",{From_Account:j.identifier,Count:e.Count},t,n)},ft=function(e,t,n){fe(n,!0)&&(de()?cmdName="pic_up":cmdName="pic_up_test",Mt.apiCall(u.PIC,cmdName,{App_Version:y.APP_VERSION,From_Account:j.identifier,To_Account:e.To_Account,Seq:e.Seq,Timestamp:e.Timestamp,Random:e.Random,File_Str_Md5:e.File_Str_Md5,File_Size:e.File_Size,File_Type:e.File_Type,Server_Ver:y.SERVER_VERSION,Auth_Key:Y,Busi_Id:e.Busi_Id,PkgFlag:e.PkgFlag,Slice_Offset:e.Slice_Offset,Slice_Size:e.Slice_Size,Slice_Data:e.Slice_Data},t,n))},dt=function(e,t){fe(t,!0)&&Mt.apiCall(u.OPEN_IM,"authkey",{},e,t)},gt=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.IM_OPEN_STAT,"web_report",e,t,n)},mt=function(e,t,n){fe(n,!0)&&Mt.apiCall(u.OPEN_IM,"getlongpollingid",{},function(e){t&&t(e)},n)},It=function(e,t,n){Mt.apiCall(u.PIC,"apply_download",e,t,n)};r=ie.getBrowserInfo(),re.info("BROWSER_INFO: type="+r.type+", ver="+r.ver),"ie"==r.type&&parseInt(r.ver)<10&&(s=!0);var Mt=0==s?new function(){var e=null;this.init=function(t,n,o){t&&(e=t)},this.callBack=function(t){e&&e(t)},this.clear=function(){e=null},this.apiCall=function(e,t,n,o,i,r,s){var u=ge(e,t,0,i);0!=u&&le("POST",u,n,0,0,function(r){console.log("***webim.js***");var s=null,u="";"pic_up"==t&&(n.Slice_Data="");r.ActionStatus==d.OK?(re.info("["+e+"]["+t+"]success: "),o&&o(r),s=0,u=""):(s=r.ErrorCode,u=r.ErrorInfo,i&&(r.SrcErrorInfo=r.ErrorInfo,r.ErrorInfo="["+e+"]["+t+"]failed: ","longpolling"==t&&60008==r.ErrorCode||re.error(r.ErrorInfo),i(r))),ye(t,s,u)},function(e){i&&i(e),ye(t,e.ErrorCode,e.ErrorInfo)})}}:new function(){var e=null;this.init=function(t,n,o){t&&(e=t)},this.callBack=function(t){e&&e(t)},this.clear=function(){e=null},this.apiCall=function(e,t,n,o,i,r,s){var u=ge(e,t,0,i);if(0!=u){var a=K++,c="jsonpRequest"+a,l=document.createElement("script"),p=0;window[c]=V,l.type="text/javascript",u=u+"&jsonpcallback="+c+"&jsonpbody="+encodeURIComponent(JSON.stringify(n)),l.src=u,l.async=!0,void 0!==l.onreadystatechange&&(l.event="onclick",l.htmlFor=l.id="_jsonpRequest_"+a),l.onload=l.onreadystatechange=function(){if(this.readyState&&"complete"!==this.readyState&&"loaded"!==this.readyState||p)return!1;l.onload=l.onreadystatechange=null,l.onclick&&l.onclick();var r=z,s="\n request url: \n"+u+"\n request body: \n"+JSON.stringify(n)+"\n response: \n"+JSON.stringify(r);r.ActionStatus==d.OK?(re.info("["+e+"]["+t+"]success: "+s),o&&o(r)):(r.ErrorInfo="["+e+"]["+t+"]failed "+s,"longpolling"!=t||60008!=r.ErrorCode?re.error(r.ErrorInfo):re.warn("["+e+"]["+t+"]success: "+s),i&&i(r)),z=void 0,document.body.removeChild(l),p=1},document.body.appendChild(l)}}},Et=function e(t,n,o,i,r,s){this._impl={skey:e.skey(t,n),type:t,id:n,name:o,icon:i,unread:0,isAutoRead:!1,time:r>=0?r:0,curMaxMsgSeq:s>=0?s:0,msgs:[],isFinished:1}};Et.skey=function(e,t){return e+t},Et.prototype.type=function(){return this._impl.type},Et.prototype.id=function(){return this._impl.id},Et.prototype.name=function(){return this._impl.name},Et.prototype.icon=function(){return this._impl.icon},Et.prototype.unread=function(e){if(void 0===e)return this._impl.unread;this._impl.unread=e},Et.prototype.isFinished=function(e){if(void 0===e)return this._impl.isFinished;this._impl.isFinished=e},Et.prototype.time=function(){return this._impl.time},Et.prototype.curMaxMsgSeq=function(e){if(void 0===e)return this._impl.curMaxMsgSeq;this._impl.curMaxMsgSeq=e},Et.prototype.msgCount=function(){return this._impl.msgs.length},Et.prototype.msg=function(e){return this._impl.msgs[e]},Et.prototype.msgs=function(){return this._impl.msgs},Et.prototype._impl_addMsg=function(e){this._impl.msgs.push(e),e.time>this._impl.time&&(this._impl.time=e.time),e.seq>this._impl.curMaxMsgSeq&&(this._impl.curMaxMsgSeq=e.seq),e.isSend||this._impl.isAutoRead||this._impl.unread++};var _t=function(e,t){this.toAccount=e,this.lastedMsgTime=t},yt=function(e,t,n,o,i,r,s,u){this.sess=e,this.subType=s>=0?s:0,this.fromAccount=r,this.fromAccountNick=u||r,this.isSend=Boolean(t),this.seq=n>=0?n:ue(),this.random=o>=0?o:ae(),this.time=i>=0?i:se(),this.elems=[]};yt.prototype.getSession=function(){return this.sess},yt.prototype.getType=function(){return this.subType},yt.prototype.getSubType=function(){return this.subType},yt.prototype.getFromAccount=function(){return this.fromAccount},yt.prototype.getFromAccountNick=function(){return this.fromAccountNick},yt.prototype.getIsSend=function(){return this.isSend},yt.prototype.getSeq=function(){return this.seq},yt.prototype.getTime=function(){return this.time},yt.prototype.getRandom=function(){return this.random},yt.prototype.getElems=function(){return this.elems},yt.prototype.addText=function(e){this.addElem(new t.Msg.Elem(g.TEXT,e))},yt.prototype.addFace=function(e){this.addElem(new t.Msg.Elem(g.FACE,e))},yt.prototype.addImage=function(e){this.addElem(new t.Msg.Elem(g.IMAGE,e))},yt.prototype.addLocation=function(e){this.addElem(new t.Msg.Elem(g.LOCATION,e))},yt.prototype.addFile=function(e){this.addElem(new t.Msg.Elem(g.FILE,e))},yt.prototype.addCustom=function(e){this.addElem(new t.Msg.Elem(g.CUSTOM,e))},yt.prototype.addElem=function(e){this.elems.push(e)},yt.prototype.toHtml=function(){var e="";for(var t in this.elems)e+=this.elems[t].toHtml();return e},(yt.Elem=function(e,t){this.type=e,this.content=t}).prototype.getType=function(){return this.type},yt.Elem.prototype.getContent=function(){return this.content},yt.Elem.prototype.toHtml=function(){return this.content.toHtml()},yt.Elem.Text=function(e){this.text=ie.xssFilter(e)},yt.Elem.Text.prototype.getText=function(){return this.text},yt.Elem.Text.prototype.toHtml=function(){return this.text},yt.Elem.Face=function(e,t){this.index=e,this.data=t},yt.Elem.Face.prototype.getIndex=function(){return this.index},yt.Elem.Face.prototype.getData=function(){return this.data},yt.Elem.Face.prototype.toHtml=function(){var e=null,t=ne[this.data],n=oe[t];return n&&n[1]&&(e=n[1]),e?"<img src='"+e+"'/>":this.data},yt.Elem.Location=function(e,t,n){this.latitude=t,this.longitude=e,this.desc=n},yt.Elem.Location.prototype.getLatitude=function(){return this.latitude},yt.Elem.Location.prototype.getLongitude=function(){return this.longitude},yt.Elem.Location.prototype.getDesc=function(){return this.desc},yt.Elem.Location.prototype.toHtml=function(){return"经度="+this.longitude+",纬度="+this.latitude+",描述="+this.desc},yt.Elem.Images=function(e){this.UUID=e,this.ImageInfoArray=[]},yt.Elem.Images.prototype.addImage=function(e){this.ImageInfoArray.push(e)},yt.Elem.Images.prototype.toHtml=function(){var e=this.getImage(m.SMALL),t=this.getImage(m.LARGE),n=this.getImage(m.ORIGIN);return t||(t=e),n||(n=e),"<img src='"+e.getUrl()+"#"+t.getUrl()+"#"+n.getUrl()+"' style='CURSOR: hand' id='"+this.getImageId()+"' bigImgUrl='"+t.getUrl()+"' onclick='imageClick(this)' />"},yt.Elem.Images.prototype.getImageId=function(){return this.UUID},yt.Elem.Images.prototype.getImage=function(e){for(var t in this.ImageInfoArray)if(this.ImageInfoArray[t].getType()==e)return this.ImageInfoArray[t];return null},yt.Elem.Images.Image=function(e,t,n,o,i){this.type=e,this.size=t,this.width=n,this.height=o,this.url=i},yt.Elem.Images.Image.prototype.getType=function(){return this.type},yt.Elem.Images.Image.prototype.getSize=function(){return this.size},yt.Elem.Images.Image.prototype.getWidth=function(){return this.width},yt.Elem.Images.Image.prototype.getHeight=function(){return this.height},yt.Elem.Images.Image.prototype.getUrl=function(){return this.url},yt.Elem.Sound=function(e,t,n,o,i,r,s){this.uuid=e,this.second=t,this.size=n,this.senderId=o,this.receiverId=i,this.downFlag=r,this.busiId=s==l.C2C?2:1,void 0!==r&&void 0!==busiId?Me(e,o,0,r,i,this.busiId,_.SOUND):this.downUrl=me(e,o)},yt.Elem.Sound.prototype.getUUID=function(){return this.uuid},yt.Elem.Sound.prototype.getSecond=function(){return this.second},yt.Elem.Sound.prototype.getSize=function(){return this.size},yt.Elem.Sound.prototype.getSenderId=function(){return this.senderId},yt.Elem.Sound.prototype.getDownUrl=function(){return this.downUrl},yt.Elem.Sound.prototype.toHtml=function(){return"ie"==r.type&&parseInt(r.ver)<=8?"[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:"+this.downUrl:'<audio id="uuid_'+this.uuid+'" src="'+this.downUrl+'" controls="controls" onplay="onChangePlayAudio(this)" preload="none"></audio>'},yt.Elem.File=function(e,t,n,o,i,r,s){this.uuid=e,this.name=t,this.size=n,this.senderId=o,this.receiverId=i,this.downFlag=r,this.busiId=s==l.C2C?2:1,void 0!==r&&void 0!==busiId?Me(e,o,0,r,i,this.busiId,_.FILE):this.downUrl=Ie(e,o,t)},yt.Elem.File.prototype.getUUID=function(){return this.uuid},yt.Elem.File.prototype.getName=function(){return this.name},yt.Elem.File.prototype.getSize=function(){return this.size},yt.Elem.File.prototype.getSenderId=function(){return this.senderId},yt.Elem.File.prototype.getDownUrl=function(){return this.downUrl},yt.Elem.File.prototype.getDownFlag=function(){return this.downFlag},yt.Elem.File.prototype.toHtml=function(){var e,t;return e=this.size,t="Byte",this.size>=1024&&(e=Math.round(this.size/1024),t="KB"),'<a href="javascript" onclick="webim.onDownFile("'+this.uuid+'")" title="点击下载文件" ><i class="glyphicon glyphicon-file">&nbsp;'+this.name+"("+e+t+")</i></a>"},yt.Elem.GroupTip=function(e,t,n,o,i){this.opType=e,this.opUserId=t,this.groupId=n,this.groupName=o,this.userIdList=i||[],this.groupInfoList=[],this.memberInfoList=[],this.groupMemberNum=null},yt.Elem.GroupTip.prototype.addGroupInfo=function(e){this.groupInfoList.push(e)},yt.Elem.GroupTip.prototype.addMemberInfo=function(e){this.memberInfoList.push(e)},yt.Elem.GroupTip.prototype.getOpType=function(){return this.opType},yt.Elem.GroupTip.prototype.getOpUserId=function(){return this.opUserId},yt.Elem.GroupTip.prototype.getGroupId=function(){return this.groupId},yt.Elem.GroupTip.prototype.getGroupName=function(){return this.groupName},yt.Elem.GroupTip.prototype.getUserIdList=function(){return this.userIdList},yt.Elem.GroupTip.prototype.getGroupInfoList=function(){return this.groupInfoList},yt.Elem.GroupTip.prototype.getMemberInfoList=function(){return this.memberInfoList},yt.Elem.GroupTip.prototype.getGroupMemberNum=function(){return this.groupMemberNum},yt.Elem.GroupTip.prototype.setGroupMemberNum=function(e){return this.groupMemberNum=e},yt.Elem.GroupTip.prototype.toHtml=function(){var e="[群提示消息]";switch(this.opType){case G.JOIN:e+=this.opUserId+"邀请了";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="加入该群";break;case G.QUIT:e+=this.opUserId+"主动退出该群";break;case G.KICK:e+=this.opUserId+"将";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="踢出该群";break;case G.SET_ADMIN:e+=this.opUserId+"将";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="设为管理员";break;case G.CANCEL_ADMIN:e+=this.opUserId+"取消";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="的管理员资格";break;case G.MODIFY_GROUP_INFO:e+=this.opUserId+"修改了群资料：";for(var t in this.groupInfoList){var n=this.groupInfoList[t].getType(),o=this.groupInfoList[t].getValue();switch(n){case O.FACE_URL:e+="群头像为"+o+"; ";break;case O.NAME:e+="群名称为"+o+"; ";break;case O.OWNER:e+="群主为"+o+"; ";break;case O.NOTIFICATION:e+="群公告为"+o+"; ";break;case O.INTRODUCTION:e+="群简介为"+o+"; ";break;default:e+="未知信息为:type="+n+",value="+o+"; "}}break;case G.MODIFY_MEMBER_INFO:e+=this.opUserId+"修改了群成员资料:";for(var t in this.memberInfoList){var i=this.memberInfoList[t].getUserId(),r=this.memberInfoList[t].getShutupTime();if(e+=i+": ",e+=null!=r&&void 0!==r?0==r?"取消禁言; ":"禁言"+r+"秒; ":" shutupTime为空",this.memberInfoList.length>10&&9==t){e+="等"+this.memberInfoList.length+"人";break}}break;case G.READED:Log.info("消息已读同步");break;default:e+="未知群提示消息类型：type="+this.opType}return e},yt.Elem.GroupTip.GroupInfo=function(e,t){this.type=e,this.value=t},yt.Elem.GroupTip.GroupInfo.prototype.getType=function(){return this.type},yt.Elem.GroupTip.GroupInfo.prototype.getValue=function(){return this.value},yt.Elem.GroupTip.MemberInfo=function(e,t){this.userId=e,this.shutupTime=t},yt.Elem.GroupTip.MemberInfo.prototype.getUserId=function(){return this.userId},yt.Elem.GroupTip.MemberInfo.prototype.getShutupTime=function(){return this.shutupTime},yt.Elem.Custom=function(e,t,n){this.data=e,this.desc=t,this.ext=n},yt.Elem.Custom.prototype.getData=function(){return this.data},yt.Elem.Custom.prototype.getDesc=function(){return this.desc},yt.Elem.Custom.prototype.getExt=function(){return this.ext},yt.Elem.Custom.prototype.toHtml=function(){return this.data};var ht=new function(){var t={},n=[];e={},this.cookie="",this.syncFlag=0;var o=function(e){for(var n in t)e(t[n])},i=function(t){var n=!1,o=t.sess._impl.skey,i=t.isSend+t.seq+t.random;return e[o]&&e[o][i]&&(n=!0),e[o]?e[o][i]={time:t.time}:(e[o]={},e[o][i]={time:t.time}),n};this.sessMap=function(){return t},this.sessCount=function(){return n.length},this.sessByTypeId=function(e,n){var o=Et.skey(e,n);return void 0===o||null==o?null:t[o]},this.delSessByTypeId=function(n,o){var i=Et.skey(n,o);return void 0!==i&&null!=i&&(t[i]&&(delete t[i],delete e[i]),!0)},this.resetCookieAndSyncFlag=function(){this.cookie="",this.syncFlag=0},this.setAutoRead=function(e,t,n){if(n&&o(function(e){e._impl.isAutoRead=!1}),e&&(e._impl.isAutoRead=t,t))if(e._impl.unread=0,e._impl.type==l.C2C){var i=[];i.push(new _t(e._impl.id,e._impl.time)),Oe(ht.cookie,i,function(e){re.info("[setAutoRead]: c2CMsgReaded success")},function(e){re.error("[setAutoRead}: c2CMsgReaded failed:"+e.ErrorInfo)})}else if(e._impl.type==l.GROUP){var r={GroupId:e._impl.id,MsgReadedSeq:e._impl.curMaxMsgSeq};$e(r,function(e){re.info("groupMsgReaded success")},function(e){re.error("groupMsgReaded failed:"+e.ErrorInfo)})}},this.c2CMsgReaded=function(e,t,n){var o=[];o.push(new _t(e.To_Account,e.LastedMsgTime)),Oe(ht.cookie,o,function(e){t&&(re.info("c2CMsgReaded success"),t(e))},function(e){n&&(re.error("c2CMsgReaded failed:"+e.ErrorInfo),n(e))})},this.addSession=function(e){t[e._impl.skey]=e},this.delSession=function(e){delete t[e._impl.skey]},this.addMsg=function(e){if(i(e))return!1;var n=e.sess;return t[n._impl.skey]||this.addSession(n),n._impl_addMsg(e),!0},this.updateTimeline=function(){var e=new Array;o(function(t){e.push(t)}),e.sort(function(e,t){return t.time-e.time}),n=e}},Ct=new function(){var e=null,t=null,n={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,15:null,255:null},o={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},i={1:null},r=!1,s=0,u=0,a=null,c=!1,p=0,f=90,m=null,I={},M=0,E={},_={};this.setLongPollingOn=function(e){r=e},this.getLongPollingOn=function(){return r},this.resetLongPollingInfo=function(){r=!1,s=0,u=0},this.setBigGroupLongPollingOn=function(e){c=e},this.setBigGroupLongPollingKey=function(e){m=e},this.resetBigGroupLongPollingInfo=function(){c=!1,p=0,m=null,I={}},this.setBigGroupLongPollingMsgMap=function(e,t){var n=I[e];n?(n=parseInt(n)+t,I[e]=n):I[e]=t},this.clear=function(){t=null,n={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,15:null,255:null},o={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},i={1:null},e=null,r=!1,s=0,u=0,a=null,c=!1,p=0,m=null,I={},_={},H=[],Y=null,X=null};var y=function(e,t){dt(function(t){H=t.IpList,Y=t.AuthKey,X=t.ExpireTime,e&&e(t)},function(e){re.error("initIpAndAuthkey failed:"+e.ErrorInfo),t&&t(e)})},C=function(e,t){var n={Member_Account:j.identifier,Limit:1e3,Offset:0,GroupBaseInfoFilter:["NextMsgSeq"]};Ye(n,function(t){if(!t.GroupIdList||0==t.GroupIdList.length)return re.info("initMyGroupMaxSeqs: 目前还没有加入任何群组"),void(e&&e(t));for(var n=0;n<t.GroupIdList.length;n++){var o=t.GroupIdList[n].GroupId,i=t.GroupIdList[n].NextMsgSeq-1;E[o]=i}e&&e(t)},function(e){re.error("initMyGroupMaxSeqs failed:"+e.ErrorInfo),t&&t(e)})},N=function(e,t,n){M++;var o={GroupId:e,ReqMsgSeq:t,ReqMsgNumber:n};re.warn("第"+M+"次补齐群消息,参数="+JSON.stringify(o)),Ct.syncGroupMsgs(o)},b=function(e,t){var n=E[e];n?t>n&&(E[e]=t):E[e]=t},B=function(e,t){for(var n in e){var o=e[n];if(o.From_Account){var i=oe(o,!1,!0);i&&t.push(i),b(o.ToGroupId,o.MsgSeq)}}return t},K=function(t,n){var o={},i=[];for(var r in n){var s=o[n[r].ToGroupId];s||(s=o[n[r].ToGroupId]={min:99999999,max:-1,msgs:[]}),n[r].NoticeSeq>u&&(re.warn("noticeSeq="+u+",msgNoticeSeq="+n[r].NoticeSeq),u=n[r].NoticeSeq),n[r].Event=t,o[n[r].ToGroupId].msgs.push(n[r]),n[r].MsgSeq<s.min&&(o[n[r].ToGroupId].min=n[r].MsgSeq),n[r].MsgSeq>s.max&&(o[n[r].ToGroupId].max=n[r].MsgSeq)}for(var a in o){var c=o[a].max-o[a].min+1,l=E[a];l?o[a].min-l>1||o[a].msgs.length<c?(re.warn("发起一次补齐群消息请求,curMaxMsgSeq="+l+", minMsgSeq="+o[a].min+", maxMsgSeq="+o[a].max+", msgs.length="+o[a].msgs.length+", tempCount="+c),N(a,o[a].max,o[a].max-l),b(a,o[a].max)):i=B(o[a].msgs,i):(re.warn("不存在该群的最大消息seq，群id="+a),o[a].msgs.length<c?(re.warn("发起一次补齐群消息请求,minMsgSeq="+o[a].min+", maxMsgSeq="+o[a].max+", msgs.length="+o[a].msgs.length+", tempCount="+c),N(a,o[a].max,c),b(a,o[a].max)):i=B(o[a].msgs,i))}i.length&&ht.updateTimeline(),e&&i.length&&e(i)},z=function(t,n){var o={},i=[];for(var r in n){var s=o[n[r].ToGroupId];s||(s=o[n[r].ToGroupId]={min:99999999,max:-1,msgs:[]}),n[r].NoticeSeq>u&&(re.warn("noticeSeq="+u+",msgNoticeSeq="+n[r].NoticeSeq),u=n[r].NoticeSeq),n[r].Event=t,o[n[r].ToGroupId].msgs.push(n[r]),n[r].MsgSeq<s.min&&(o[n[r].ToGroupId].min=n[r].MsgSeq),n[r].MsgSeq>s.max&&(o[n[r].ToGroupId].max=n[r].MsgSeq)}for(var a in o){var c=o[a].max-o[a].min+1,l=E[a];l?o[a].min-l>1||o[a].msgs.length<c?(re.warn("发起一次补齐群消息请求,curMaxMsgSeq="+l+", minMsgSeq="+o[a].min+", maxMsgSeq="+o[a].max+", msgs.length="+o[a].msgs.length+", tempCount="+c),N(a,o[a].max,o[a].max-l),b(a,o[a].max)):i=B(o[a].msgs,i):(re.warn("不存在该群的最大消息seq，群id="+a),o[a].msgs.length<c?(re.warn("发起一次补齐群消息请求,minMsgSeq="+o[a].min+", maxMsgSeq="+o[a].max+", msgs.length="+o[a].msgs.length+", tempCount="+c),N(a,o[a].max,c),b(a,o[a].max)):i=B(o[a].msgs,i))}i.length&&ht.updateTimeline(),e&&i.length&&e(i)},V=function(e,t){for(var o in e){var i=e[o],r=i.MsgBody,s=r.ReportType;0==t&&i.NoticeSeq&&i.NoticeSeq>u&&(u=i.NoticeSeq);i.GroupInfo.To_Account;if(t){var a=i.ToGroupId+"_"+s+"_"+r.Operator_Account;if(_[a]){re.warn("收到重复的群系统消息：key="+a);continue}_[a]=!0}var c={SrcFlag:0,ReportType:s,GroupId:i.ToGroupId,GroupName:i.GroupInfo.GroupName,Operator_Account:r.Operator_Account,MsgTime:i.MsgTimeStamp,groupReportTypeMsg:r};switch(s){case F.JOIN_GROUP_REQUEST:c.RemarkInfo=r.RemarkInfo,c.MsgKey=r.MsgKey,c.Authentication=r.Authentication,c.UserDefinedField=i.UserDefinedField,c.From_Account=i.From_Account,c.MsgSeq=i.ClientSeq,c.MsgRandom=i.MsgRandom;break;case F.JOIN_GROUP_ACCEPT:case F.JOIN_GROUP_REFUSE:c.RemarkInfo=r.RemarkInfo;break;case F.KICK:case F.DESTORY:case F.CREATE:case F.INVITED_JOIN_GROUP_REQUEST:case F.QUIT:case F.SET_ADMIN:case F.CANCEL_ADMIN:case F.REVOKE:case F.READED:break;case F.CUSTOM:c.MsgSeq=i.MsgSeq,c.UserDefinedField=r.UserDefinedField;break;default:re.error("未知群系统消息类型：reportType="+s)}t?s==F.JOIN_GROUP_REQUEST&&n[s]&&n[s](c):n[s]&&n[s](c)}},J=function(e,t){var n,i,r;for(var s in e){switch(n=e[s],i=n.PushType,0==t&&n.NoticeSeq&&n.NoticeSeq>u&&(u=n.NoticeSeq),r={Type:i},i){case R.FRIEND_ADD:r.Accounts=n.FriendAdd_Account;break;case R.FRIEND_DELETE:r.Accounts=n.FriendDel_Account;break;case R.PENDENCY_ADD:r.PendencyList=n.PendencyAdd;break;case R.PENDENCY_DELETE:r.Accounts=n.FrienPencydDel_Account;break;case R.BLACK_LIST_ADD:r.Accounts=n.BlackListAdd_Account;break;case R.BLACK_LIST_DELETE:r.Accounts=n.BlackListDel_Account;break;default:re.error("未知好友系统通知类型：friendNotice="+JSON.stringify(n))}t?i==R.PENDENCY_ADD&&o[i]&&o[i](r):o[i]&&o[i](r)}},W=function(e,t){var n,o,r;for(var s in e){switch(n=e[s],o=n.PushType,0==t&&n.NoticeSeq&&n.NoticeSeq>u&&(u=n.NoticeSeq),r={Type:o},o){case v.PROFILE_MODIFY:r.Profile_Account=n.Profile_Account,r.ProfileList=n.ProfileList;break;default:re.error("未知资料系统通知类型：profileNotice="+JSON.stringify(n))}t?o==v.PROFILE_MODIFY&&i[o]&&i[o](r):i[o]&&i[o](r)}},Q=function(e){var t=e.MsgBody,o=t.ReportType,i=(e.GroupInfo.To_Account,{SrcFlag:1,ReportType:o,GroupId:e.ToGroupId,GroupName:e.GroupInfo.GroupName,Operator_Account:t.Operator_Account,MsgTime:e.MsgTimeStamp});switch(o){case F.JOIN_GROUP_REQUEST:i.RemarkInfo=t.RemarkInfo,i.MsgKey=t.MsgKey,i.Authentication=t.Authentication,i.UserDefinedField=e.UserDefinedField,i.From_Account=e.From_Account,i.MsgSeq=e.ClientSeq,i.MsgRandom=e.MsgRandom;break;case F.JOIN_GROUP_ACCEPT:case F.JOIN_GROUP_REFUSE:i.RemarkInfo=t.RemarkInfo;break;case F.KICK:case F.DESTORY:case F.CREATE:case F.INVITED_JOIN_GROUP_REQUEST:case F.QUIT:case F.SET_ADMIN:case F.CANCEL_ADMIN:case F.REVOKE:break;case F.CUSTOM:i.MsgSeq=e.MsgSeq,i.UserDefinedField=t.UserDefinedField;break;default:re.error("未知群系统消息类型：reportType="+o)}n[o]&&n[o](i)},$=function(e){for(var t=0,n=e.length;t<n;t++)Z(e[t])},Z=function(e){var t=e.SubMsgType;switch(t){case T.READED:break;default:re.error("未知C2c系统消息：reportType="+reportType)}onC2cEventCallbacks[t]&&onC2cEventCallbacks[t](e)};this.longPolling=function(e,t){function n(){Ae(o,function(e){for(var t in e.EventArray){var n=e.EventArray[t];switch(n.Event){case h.C2C:s=n.NotifySeq,re.warn("longpolling: received new c2c msg"),Ct.syncMsgs();break;case h.GROUP_COMMON:re.warn("longpolling: received new group msgs"),z(n.Event,n.GroupMsgArray);break;case h.GROUP_TIP:re.warn("longpolling: received new group tips"),z(n.Event,n.GroupTips);break;case h.GROUP_SYSTEM:re.warn("longpolling: received new group system msgs"),V(n.GroupTips,!1);break;case h.FRIEND_NOTICE:re.warn("longpolling: received new friend system notice"),J(n.FriendListMod,!1);break;case h.PROFILE_NOTICE:re.warn("longpolling: received new profile system notice"),W(n.ProfileDataMod,!1);break;case h.C2C_COMMON:u=n.C2cMsgArray[0].NoticeSeq,re.warn("longpolling: received new c2c_common msg",u),K(n.Event,n.C2cMsgArray);break;case h.C2C_EVENT:u=n.C2cNotifyMsgArray[0].NoticeSeq,re.warn("longpolling: received new c2c_event msg"),$(n.C2cNotifyMsgArray);break;default:re.error("longpolling收到未知新消息类型: Event="+n.Event)}}var o={ActionStatus:d.OK,ErrorCode:0};ee(o)},function(e){ee(e),t&&t(e)})}var o={Timeout:w/1e3,Cookie:{NotifySeq:s,NoticeSeq:u}};q?(o.Cookie.LongPollingId=q,n()):mt(0,function(e){q=o.Cookie.LongPollingId=e.LongPollingId,w=e.Timeout>60?w:1e3*e.Timeout,n()})},this.bigGroupLongPolling=function(e,t){Se({StartSeq:p,HoldTime:f,Key:m},function(t){var n=[];if(p=t.NextSeq,f=t.HoldTime,m=t.Key,t.RspMsgList&&t.RspMsgList.length>0){for(var o,i,r,s=0,u=t.RspMsgList.length-1;u>=0;u--)if(!(o=t.RspMsgList[u]).IsPlaceMsg&&o.From_Account&&o.MsgBody&&0!=o.MsgBody.length)switch(i=o.Event){case h.GROUP_COMMON:re.info("bigGroupLongPolling: return new group msg"),(r=oe(o,!1,!1))&&n.push(r),s+=1;break;case h.GROUP_TIP:case h.GROUP_TIP2:re.info("bigGroupLongPolling: return new group tip"),(r=oe(o,!1,!1))&&n.push(r);break;case h.GROUP_SYSTEM:re.info("bigGroupLongPolling: new group system msg"),Q(o);break;default:re.error("bigGroupLongPolling收到未知新消息类型: Event="+i)}s>0&&(Ct.setBigGroupLongPollingMsgMap(o.ToGroupId,s),re.warn("current bigGroupLongPollingMsgMap: "+JSON.stringify(I)))}x=0;var l={ActionStatus:d.OK,ErrorCode:P.ON,ErrorInfo:"connection is ok..."};Mt.callBack(l),e?e(n):a&&a(n),c&&Ct.bigGroupLongPolling()},function(e){if(60008!=e.ErrorCode&&(re.error(e.ErrorInfo),x++),91101==e.ErrorCode&&(re.error("多实例登录，被kick"),onKickedEventCall&&onKickedEventCall()),x<10)c&&Ct.bigGroupLongPolling();else{var n={ActionStatus:d.FAIL,ErrorCode:P.OFF,ErrorInfo:"connection is off"};Mt.callBack(n)}t&&t(e)},1e3*f)};var ee=function(e){if(0==e.ErrorCode||60008==e.ErrorCode){k=0,D=!1;var t,n=!1;switch(U){case P.INIT:n=!0,U=P.ON,t="create connection successfully(INIT->ON)";break;case P.ON:t="connection is on...(ON->ON)";break;case P.RECONNECT:U=P.ON,t="connection is on...(RECONNECT->ON)";break;case P.OFF:n=!0,U=P.RECONNECT,t="reconnect successfully(OFF->RECONNECT)"}var o={ActionStatus:d.OK,ErrorCode:U,ErrorInfo:t};n&&Mt.callBack(o),r&&Ct.longPolling()}else if(91101==e.ErrorCode)re.error("多实例登录，被kick"),onKickedEventCall&&onKickedEventCall();else if(k++,re.warn("longPolling接口第"+k+"次报错: "+e.ErrorInfo),k<=10)setTimeout(te,100);else{U=P.OFF;var i={ActionStatus:d.FAIL,ErrorCode:P.OFF,ErrorInfo:"connection is off"};0==D&&Mt.callBack(i),D=!0,re.warn("5000毫秒之后,SDK会发起新的longPolling请求..."),setTimeout(te,5e3)}},K=function(t,n){var o=[];msgInfos=n;for(var i in msgInfos){var r,s,u,a=msgInfos[i];a.From_Account==j.identifier?(r=!0,s=a.To_Account,u=""):(r=!1,s=a.From_Account,u="");var c=ht.sessByTypeId(l.C2C,s);c||(c=new Et(l.C2C,s,s,u,0,0));var p=new yt(c,r,a.MsgSeq,a.MsgRandom,a.MsgTimeStamp,a.From_Account),f=null,d=null,m=null;for(var I in a.MsgBody){switch(f=a.MsgBody[I],m=f.MsgType){case g.TEXT:d=new yt.Elem.Text(f.MsgContent.Text);break;case g.FACE:d=new yt.Elem.Face(f.MsgContent.Index,f.MsgContent.Data);break;case g.IMAGE:d=new yt.Elem.Images(f.MsgContent.UUID);for(var M in f.MsgContent.ImageInfoArray){var E=f.MsgContent.ImageInfoArray[M];d.addImage(new yt.Elem.Images.Image(E.Type,E.Size,E.Width,E.Height,E.URL))}break;case g.SOUND:f.MsgContent?d=new yt.Elem.Sound(f.MsgContent.UUID,f.MsgContent.Second,f.MsgContent.Size,a.From_Account,a.To_Account,f.MsgContent.Download_Flag,l.C2C):(m=g.TEXT,d=new yt.Elem.Text("[语音消息]下载地址解析出错"));break;case g.LOCATION:d=new yt.Elem.Location(f.MsgContent.Longitude,f.MsgContent.Latitude,f.MsgContent.Desc);break;case g.FILE:case g.FILE+" ":m=g.FILE,f.MsgContent?d=new yt.Elem.File(f.MsgContent.UUID,f.MsgContent.FileName,f.MsgContent.FileSize,a.From_Account,a.To_Account,f.MsgContent.Download_Flag,l.C2C):(m=g.TEXT,d=new yt.Elem.Text("[文件消息下载地址解析出错]"));break;case g.CUSTOM:try{var _=JSON.parse(f.MsgContent.Data);if(_&&_.userAction&&_.userAction==L.ING)continue}catch(e){}m=g.CUSTOM,d=new yt.Elem.Custom(f.MsgContent.Data,f.MsgContent.Desc,f.MsgContent.Ext);break;default:m=g.TEXT,d=new yt.Elem.Text("web端暂不支持"+f.MsgType+"消息")}p.elems.push(new yt.Elem(m,d))}p.elems.length>0&&ht.addMsg(p)&&o.push(p)}o.length>0&&ht.updateTimeline(),o.length>0&&e&&e(o)},te=function(){r&&Ct.longPolling()},ne=function(e){for(var t in e){var n=e[t];switch(n.Event){case h.GROUP_SYSTEM:re.warn("handlerApplyJoinGroupSystemMsgs： handler new group system msg"),V(n.GroupTips,!0);break;default:re.error("syncMsgs收到未知的群系统消息类型: Event="+n.Event)}}};this.syncMsgs=function(t,n){var o=[],i=[];Ge(ht.cookie,ht.syncFlag,function(n){2==n.SyncFlag&&(ht.syncFlag=0),i=n.MsgList,ht.cookie=n.Cookie;for(var r in i){var s,u,a,c=i[r];c.From_Account==j.identifier?(s=!0,u=c.To_Account,a=""):(s=!1,u=c.From_Account,a="");var p=ht.sessByTypeId(l.C2C,u);p||(p=new Et(l.C2C,u,u,a,0,0));var f=new yt(p,s,c.MsgSeq,c.MsgRandom,c.MsgTimeStamp,c.From_Account),d=null,m=null,I=null;for(var M in c.MsgBody){switch(d=c.MsgBody[M],I=d.MsgType){case g.TEXT:m=new yt.Elem.Text(d.MsgContent.Text);break;case g.FACE:m=new yt.Elem.Face(d.MsgContent.Index,d.MsgContent.Data);break;case g.IMAGE:m=new yt.Elem.Images(d.MsgContent.UUID);for(var E in d.MsgContent.ImageInfoArray){var _=d.MsgContent.ImageInfoArray[E];m.addImage(new yt.Elem.Images.Image(_.Type,_.Size,_.Width,_.Height,_.URL))}break;case g.SOUND:d.MsgContent?m=new yt.Elem.Sound(d.MsgContent.UUID,d.MsgContent.Second,d.MsgContent.Size,c.From_Account,c.To_Account,d.MsgContent.Download_Flag,l.C2C):(I=g.TEXT,m=new yt.Elem.Text("[语音消息]下载地址解析出错"));break;case g.LOCATION:m=new yt.Elem.Location(d.MsgContent.Longitude,d.MsgContent.Latitude,d.MsgContent.Desc);break;case g.FILE:case g.FILE+" ":I=g.FILE,d.MsgContent?m=new yt.Elem.File(d.MsgContent.UUID,d.MsgContent.FileName,d.MsgContent.FileSize,c.From_Account,c.To_Account,d.MsgContent.Download_Flag,l.C2C):(I=g.TEXT,m=new yt.Elem.Text("[文件消息下载地址解析出错]"));break;case g.CUSTOM:try{var y=JSON.parse(d.MsgContent.Data);if(y&&y.userAction&&y.userAction==L.ING)continue}catch(e){}I=g.CUSTOM,m=new yt.Elem.Custom(d.MsgContent.Data,d.MsgContent.Desc,d.MsgContent.Ext);break;default:I=g.TEXT,m=new yt.Elem.Text("web端暂不支持"+d.MsgType+"消息")}f.elems.push(new yt.Elem(I,m))}f.elems.length>0&&ht.addMsg(f)&&o.push(f)}ne(n.EventArray),o.length>0&&ht.updateTimeline(),t?t(o):o.length>0&&e&&e(o)},function(e){re.error("getMsgs failed:"+e.ErrorInfo),n&&n(e)})},this.getC2CHistoryMsgs=function(e,t,n){if(console.log("为什么不进来啊"),e.Peer_Account||!n)if(e.MaxCnt||(e.MaxCnt=15),e.MaxCnt<=0&&n)n(ie.getReturnError("MaxCnt should be greater than 0",-14));else if(e.MaxCnt>15){if(n)return void n(ie.getReturnError("MaxCnt can not be greater than 15",-15))}else{null!=e.MsgKey&&void 0!==e.MsgKey||(e.MsgKey="");var o={Peer_Account:e.Peer_Account,MaxCnt:e.MaxCnt,LastMsgTime:e.LastMsgTime,MsgKey:e.MsgKey};Re(o,function(n){var o=[];msgInfos=n.MsgList;var i=ht.sessByTypeId(l.C2C,e.Peer_Account);i||(i=new Et(l.C2C,e.Peer_Account,e.Peer_Account,"",0,0));for(var r in msgInfos){var s,u=msgInfos[r];u.From_Account==j.identifier?(s=!0,u.To_Account,""):(s=!1,u.From_Account,"");var a=new yt(i,s,u.MsgSeq,u.MsgRandom,u.MsgTimeStamp,u.From_Account),c=null,p=null,f=null;for(var d in u.MsgBody){switch(c=u.MsgBody[d],f=c.MsgType){case g.TEXT:p=new yt.Elem.Text(c.MsgContent.Text);break;case g.FACE:p=new yt.Elem.Face(c.MsgContent.Index,c.MsgContent.Data);break;case g.IMAGE:p=new yt.Elem.Images(c.MsgContent.UUID);for(var m in c.MsgContent.ImageInfoArray){var I=c.MsgContent.ImageInfoArray[m];p.addImage(new yt.Elem.Images.Image(I.Type,I.Size,I.Width,I.Height,I.URL))}break;case g.SOUND:c.MsgContent?p=new yt.Elem.Sound(c.MsgContent.UUID,c.MsgContent.Second,c.MsgContent.Size,u.From_Account,u.To_Account,c.MsgContent.Download_Flag,l.C2C):(f=g.TEXT,p=new yt.Elem.Text("[语音消息]下载地址解析出错"));break;case g.LOCATION:p=new yt.Elem.Location(c.MsgContent.Longitude,c.MsgContent.Latitude,c.MsgContent.Desc);break;case g.FILE:case g.FILE+" ":f=g.FILE,c.MsgContent?p=new yt.Elem.File(c.MsgContent.UUID,c.MsgContent.FileName,c.MsgContent.FileSize,u.From_Account,u.To_Account,c.MsgContent.Download_Flag,l.C2C):(f=g.TEXT,p=new yt.Elem.Text("[文件消息下载地址解析出错]"));break;case g.CUSTOM:f=g.CUSTOM,p=new yt.Elem.Custom(c.MsgContent.Data,c.MsgContent.Desc,c.MsgContent.Ext);break;default:f=g.TEXT,p=new yt.Elem.Text("web端暂不支持"+c.MsgType+"消息")}a.elems.push(new yt.Elem(f,p))}ht.addMsg(a),o.push(a)}if(ht.updateTimeline(),t){var M={Complete:n.Complete,MsgCount:o.length,LastMsgTime:n.LastMsgTime,MsgKey:n.MsgKey,MsgList:o};i.isFinished(n.Complete),t(M)}},function(e){re.error("getC2CHistoryMsgs failed:"+e.ErrorInfo),n&&n(e)})}else n(ie.getReturnError("Peer_Account is empty",-13))},this.syncGroupMsgs=function(t,n,o){if(t.ReqMsgSeq<=0){if(o){var i=ie.getReturnError("ReqMsgSeq must be greater than 0",-16);o(i)}}else{var r={GroupId:t.GroupId,ReqMsgSeq:t.ReqMsgSeq,ReqMsgNumber:t.ReqMsgNumber};Qe(r,function(t){var o=[],i=(t.GroupId,t.RspMsgList),r=t.IsFinished;if(null!=i&&void 0!==i){for(var s=i.length-1;s>=0;s--){var u=i[s];if(!u.IsPlaceMsg&&u.From_Account&&u.MsgBody&&0!=u.MsgBody.length){var a=oe(u,!0,!0,r);a&&o.push(a)}}o.length>0&&ht.updateTimeline(),n?n(o):o.length>0&&e&&e(o)}else n&&n([])},function(e){re.error("getGroupMsgs failed:"+e.ErrorInfo),o&&o(e)})}};var oe=function(e,n,o,i){if(e.IsPlaceMsg||!e.From_Account||!e.MsgBody||0==e.MsgBody.length)return null;var r,s,u,a=e.ToGroupId,c=a;e.GroupInfo&&e.GroupInfo.GroupName&&(c=e.GroupInfo.GroupName),u=e.From_Account,e.GroupInfo&&e.GroupInfo.From_AccountNick&&(u=e.GroupInfo.From_AccountNick),e.From_Account==j.identifier?(r=!0,e.From_Account,s=""):(r=!1,e.From_Account,s="");var p=ht.sessByTypeId(l.GROUP,a);p||(p=new Et(l.GROUP,a,c,s,0,0)),void 0!==i&&p.isFinished(i||0);var f=A.COMMON;if(h.GROUP_TIP==e.Event||h.GROUP_TIP2==e.Event){f=A.TIP;var d=e.MsgBody;e.MsgBody=[],e.MsgBody.push({MsgType:g.GROUP_TIP,MsgContent:d})}else e.MsgPriority&&(e.MsgPriority==S.REDPACKET?f=A.REDPACKET:e.MsgPriority==S.LOVEMSG&&(f=A.LOVEMSG));var m=new yt(p,r,e.MsgSeq,e.MsgRandom,e.MsgTimeStamp,e.From_Account,f,u),I=null,M=null,E=null;for(var _ in e.MsgBody){switch(I=e.MsgBody[_],E=I.MsgType){case g.TEXT:M=new yt.Elem.Text(I.MsgContent.Text);break;case g.FACE:M=new yt.Elem.Face(I.MsgContent.Index,I.MsgContent.Data);break;case g.IMAGE:M=new yt.Elem.Images(I.MsgContent.UUID);for(var y in I.MsgContent.ImageInfoArray)M.addImage(new yt.Elem.Images.Image(I.MsgContent.ImageInfoArray[y].Type,I.MsgContent.ImageInfoArray[y].Size,I.MsgContent.ImageInfoArray[y].Width,I.MsgContent.ImageInfoArray[y].Height,I.MsgContent.ImageInfoArray[y].URL));break;case g.SOUND:I.MsgContent?M=new yt.Elem.Sound(I.MsgContent.UUID,I.MsgContent.Second,I.MsgContent.Size,e.From_Account,e.To_Account,I.MsgContent.Download_Flag,l.GROUP):(E=g.TEXT,M=new yt.Elem.Text("[语音消息]下载地址解析出错"));break;case g.LOCATION:M=new yt.Elem.Location(I.MsgContent.Longitude,I.MsgContent.Latitude,I.MsgContent.Desc);break;case g.FILE:case g.FILE+" ":E=g.FILE;Ie(I.MsgContent.UUID,e.From_Account,I.MsgContent.FileName);I.MsgContent?M=new yt.Elem.File(I.MsgContent.UUID,I.MsgContent.FileName,I.MsgContent.FileSize,e.From_Account,e.To_Account,I.MsgContent.Download_Flag,l.GROUP):(E=g.TEXT,M=new yt.Elem.Text("[文件消息]地址解析出错"));break;case g.GROUP_TIP:var C=I.MsgContent.OpType;if(M=new yt.Elem.GroupTip(C,I.MsgContent.Operator_Account,a,e.GroupInfo.GroupName,I.MsgContent.List_Account),G.JOIN==C||G.QUIT==C)M.setGroupMemberNum(I.MsgContent.MemberNum);else if(G.MODIFY_GROUP_INFO==C){var T=!1,F={GroupId:a,GroupFaceUrl:null,GroupName:null,OwnerAccount:null,GroupNotification:null,GroupIntroduction:null},R=I.MsgContent.MsgGroupNewInfo;if(R.GroupFaceUrl){var v=new yt.Elem.GroupTip.GroupInfo(O.FACE_URL,R.GroupFaceUrl);M.addGroupInfo(v),T=!0,F.GroupFaceUrl=R.GroupFaceUrl}if(R.GroupName){var N=new yt.Elem.GroupTip.GroupInfo(O.NAME,R.GroupName);M.addGroupInfo(N),T=!0,F.GroupName=R.GroupName}if(R.Owner_Account){var P=new yt.Elem.GroupTip.GroupInfo(O.OWNER,R.Owner_Account);M.addGroupInfo(P),T=!0,F.OwnerAccount=R.Owner_Account}if(R.GroupNotification){var b=new yt.Elem.GroupTip.GroupInfo(O.NOTIFICATION,R.GroupNotification);M.addGroupInfo(b),T=!0,F.GroupNotification=R.GroupNotification}if(R.GroupIntroduction){var L=new yt.Elem.GroupTip.GroupInfo(O.INTRODUCTION,R.GroupIntroduction);M.addGroupInfo(L),T=!0,F.GroupIntroduction=R.GroupIntroduction}0==n&&T&&t&&t(F)}else if(G.MODIFY_MEMBER_INFO==C){var U=I.MsgContent.MsgMemberInfo;for(var D in U){var k=U[D];M.addMemberInfo(new yt.Elem.GroupTip.MemberInfo(k.User_Account,k.ShutupTime))}}break;case g.CUSTOM:E=g.CUSTOM,M=new yt.Elem.Custom(I.MsgContent.Data,I.MsgContent.Desc,I.MsgContent.Ext);break;default:E=g.TEXT,M=new yt.Elem.Text("web端暂不支持"+I.MsgType+"消息")}m.elems.push(new yt.Elem(E,M))}return 0==o?m:ht.addMsg(m)?m:null};this.init=function(s,u,c){if(s.onMsgNotify||re.warn("listeners.onMsgNotify is empty"),e=s.onMsgNotify,s.onBigGroupMsgNotify?a=s.onBigGroupMsgNotify:re.warn("listeners.onBigGroupMsgNotify is empty"),s.onC2cEventNotifys?onC2cEventCallbacks=s.onC2cEventNotifys:re.warn("listeners.onC2cEventNotifys is empty"),s.onGroupSystemNotifys?n=s.onGroupSystemNotifys:re.warn("listeners.onGroupSystemNotifys is empty"),s.onGroupInfoChangeNotify?t=s.onGroupInfoChangeNotify:re.warn("listeners.onGroupInfoChangeNotify is empty"),s.onFriendSystemNotifys?o=s.onFriendSystemNotifys:re.warn("listeners.onFriendSystemNotifys is empty"),s.onProfileSystemNotifys?i=s.onProfileSystemNotifys:re.warn("listeners.onProfileSystemNotifys is empty"),s.onKickedEventCall?onKickedEventCall=s.onKickedEventCall:re.warn("listeners.onKickedEventCall is empty"),s.onAppliedDownloadUrl?onAppliedDownloadUrl=s.onAppliedDownloadUrl:re.warn("listeners.onAppliedDownloadUrl is empty"),j.identifier&&j.userSig)C(function(e){re.info("initMyGroupMaxSeqs success"),y(function(e){if(re.info("initIpAndAuthkey success"),u){re.info("login success(have login state))");var t={ActionStatus:d.OK,ErrorCode:0,ErrorInfo:"login success"};u(t)}Ct.setLongPollingOn(!0),r&&Ct.longPolling(u)},c)},c);else if(u){var l={ActionStatus:d.OK,ErrorCode:0,ErrorInfo:"login success(no login state)"};u(l)}},this.sendMsg=function(e,t,n){Te(e,function(o){if(e.sess.type()==l.C2C){if(!ht.addMsg(e)){var i="sendMsg: addMsg failed!",r=ie.getReturnError(i,-17);return re.error(i),void(n&&n(r))}ht.updateTimeline()}t&&t(o)},function(e){n&&n(e)})}},Tt=new function(){this.fileMd5=null;var e=function(e,t,n){function o(){var t=a*s,n=t+s>=e.size?e.size:t+s,o=r.call(e,t,n);i.readAsArrayBuffer(o)}var i=null;try{i=new FileReader}catch(e){if(n)return void n(ie.getReturnError("当前浏览器不支持FileReader",-18))}var r=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice;if(r||!n){var s=2097152,u=Math.ceil(e.size/s),a=0,c=new SparkMD5;i.onload=function(e){for(var n="",i=new Uint8Array(e.target.result),r=i.byteLength,s=0;s<r;s++)n+=String.fromCharCode(i[s]);c.appendBinary(n),++a<u?o():(this.fileMd5=c.end(),t&&t(this.fileMd5))},o()}else n(ie.getReturnError("当前浏览器不支持FileAPI",-19))};this.submitUploadFileForm=function(e,t,n){function o(e,t){var n=document.createElement("input");n.type="hidden",n.name=e,n.value=t,f.appendChild(n)}function i(){var e;try{e=JSON.parse(m.contentWindow.name)||{}}catch(t){e={}}e.ActionStatus?(m.src="about:blank",m.parentNode.removeChild(m),m=null,e.ActionStatus==d.OK?t&&t(e):n&&n(e)):setTimeout(i,100)}var r,s,u=e.formId,a=e.fileId,c="uploadResultIframe_"+J++,l=e.To_Account,p=e.businessType,f=document.getElementById(u);if(!f)return r="获取表单对象为空: formId="+u+"(formId非法)",s=ie.getReturnError(r,-20),void(n&&n(s));var g=document.getElementById(a);if(!g)return r="获取文件对象为空: fileId="+a+"(没有选择文件或者fileId非法)",s=ie.getReturnError(r,-21),void(n&&n(s));g.name="file";var m=document.createElement("iframe");m.name=c,m.id=c,m.style.display="none",document.body.appendChild(m);var M,E="https://pic.tim.qq.com/v4/openpic/"+(M=de()?"pic_up":"pic_up_test")+"?tinyid="+j.tinyid+"&a2="+j.a2+"&sdkappid="+j.sdkAppID+"&accounttype="+j.accountType+"&contenttype=http";f.action=E,f.method="post",f.target=c,o("App_Version",y.APP_VERSION),o("From_Account",j.identifier),o("To_Account",l),o("Seq",ue().toString()),o("Timestamp",se().toString()),o("Random",ae().toString()),o("Busi_Id",p),o("PkgFlag",I.RAW_DATA.toString()),o("Auth_Key",Y),o("Server_Ver",y.SERVER_VERSION.toString()),o("File_Type",e.fileType),setTimeout(i,500),f.submit()},this.uploadFile=function(t,n,o){var i={init:function(e,t,n){var o=this;o.file=e.file,o.onProgressCallBack=e.onProgressCallBack,e.abortButton&&(e.abortButton.onclick=o.abortHandler),o.total=o.file.size,o.loaded=0,o.step=1105920,o.sliceSize=0,o.sliceOffset=0,o.timestamp=se(),o.seq=ue(),o.random=ae(),o.fromAccount=j.identifier,o.toAccount=e.To_Account,o.fileMd5=e.fileMd5,o.businessType=e.businessType,o.fileType=e.fileType,o.cbOk=t,o.cbErr=n,o.reader=new FileReader,o.blobSlice=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice,o.reader.onloadstart=o.onLoadStart,o.reader.onprogress=o.onProgress,o.reader.onabort=o.onAbort,o.reader.onerror=o.onerror,o.reader.onload=o.onLoad,o.reader.onloadend=o.onLoadEnd},upload:function(){i.readBlob(0)},onLoadStart:function(){},onProgress:function(e){var t=i;t.loaded+=e.loaded,t.onProgressCallBack&&t.onProgressCallBack(t.loaded,t.total)},onAbort:function(){},onError:function(){},onLoad:function(e){var t=i;if(e.target.readyState==FileReader.DONE){var n=e.target.result,o=n.indexOf(",");-1!=o&&(n=n.substr(o+1));var r={From_Account:t.fromAccount,To_Account:t.toAccount,Busi_Id:t.businessType,File_Type:t.fileType,File_Str_Md5:t.fileMd5,PkgFlag:I.BASE64_DATA,File_Size:t.total,Slice_Offset:t.sliceOffset,Slice_Size:t.sliceSize,Slice_Data:n,Seq:t.seq,Timestamp:t.timestamp,Random:t.random},s=function(e){if(0==e.IsFinish)t.loaded=e.Next_Offset,t.loaded<t.total?t.readBlob(t.loaded):t.loaded=t.total;else if(t.cbOk){var n={ActionStatus:e.ActionStatus,ErrorCode:e.ErrorCode,ErrorInfo:e.ErrorInfo,File_UUID:e.File_UUID,File_Size:e.Next_Offset,URL_INFO:e.URL_INFO,Download_Flag:e.Download_Flag};t.fileType==_.FILE&&(n.URL_INFO=Ie(e.File_UUID,j.identifier,t.file.name)),t.cbOk(n)}B=0};ft(r,s,function e(n){B<20?(B++,setTimeout(function(){ft(r,s,e)},1e3)):t.cbErr(n)})}},onLoadEnd:function(){},readBlob:function(e){var t,n=i,o=n.file,r=e+n.step;r>n.total?(r=n.total,n.sliceSize=r-e):n.sliceSize=n.step,n.sliceOffset=e,t=n.blobSlice.call(o,e,r),n.reader.readAsDataURL(t)},abortHandler:function(){var e=i;e.reader&&e.reader.abort()}};e(t.file,function(e){re.info("fileMd5: "+e),t.fileMd5=e,i.init(t,n,o),i.upload()},o)}};t.SESSION_TYPE=l,t.MSG_MAX_LENGTH=f,t.C2C_MSG_SUB_TYPE=C,t.GROUP_MSG_SUB_TYPE=A,t.MSG_ELEMENT_TYPE=g,t.GROUP_TIP_TYPE=G,t.IMAGE_TYPE=m,t.GROUP_SYSTEM_TYPE=F,t.FRIEND_NOTICE_TYPE=R,t.GROUP_TIP_MODIFY_GROUP_INFO_TYPE=O,t.BROWSER_INFO=r,t.Emotions=t.EmotionPicData=oe,t.EmotionDataIndexs=t.EmotionPicDataIndex=ne,t.TLS_ERROR_CODE=N,t.CONNECTION_STATUS=P,t.UPLOAD_PIC_BUSSINESS_TYPE=b,t.RECENT_CONTACT_TYPE=p,t.UPLOAD_RES_TYPE=_,t.Tool=ie,t.Log=re,t.Msg=yt,t.Session=Et,t.MsgStore={sessMap:function(){return ht.sessMap()},sessCount:function(){return ht.sessCount()},sessByTypeId:function(e,t){return ht.sessByTypeId(e,t)},delSessByTypeId:function(e,t){return ht.delSessByTypeId(e,t)},resetCookieAndSyncFlag:function(){return ht.resetCookieAndSyncFlag()}},t.Resources=te,t.login=t.init=function(e,t,n,o,i){Mt.init(t.onConnNotify,o,i),t.jsonpCallback&&(V=t.jsonpCallback),_e(e,t,n,o,i)},t.logout=t.offline=function(e,t){return Ce("instance",e,t)},t.logoutAll=function(e,t){return Ce("all",e,t)},t.sendMsg=function(e,t,n){return Ct.sendMsg(e,t,n)},t.syncMsgs=function(e,t){return Ct.syncMsgs(e,t)},t.getC2CHistoryMsgs=function(e,t,n){return Ct.getC2CHistoryMsgs(e,t,n)},t.syncGroupMsgs=function(e,t,n){return Ct.syncGroupMsgs(e,t,n)},t.c2CMsgReaded=function(e,t,n){return ht.c2CMsgReaded(e,t,n)},t.groupMsgReaded=function(e,t,n){return $e(e,t,n)},t.setAutoRead=function(e,t,n){return ht.setAutoRead(e,t,n)},t.createGroup=function(e,t,n){return ve(e,t,n)},t.createGroupHigh=function(e,t,n){return Ne(e,t,n)},t.applyJoinGroup=function(e,t,n){return be(e,t,n)},t.handleApplyJoinGroupPendency=function(e,t,n){return Ue(e,t,n)},t.deleteApplyJoinGroupPendency=function(e,t,n){return Fe(e,t,n)},t.quitGroup=function(e,t,n){return De(e,t,n)},t.searchGroupByName=function(e,t,n){return we(e,t,n)},t.getGroupPublicInfo=function(e,t,n){return qe(e,t,n)},t.getGroupInfo=function(e,t,n){return xe(e,t,n)},t.modifyGroupBaseInfo=function(e,t,n){return Pe(e,t,n)},t.getGroupMemberInfo=function(e,t,n){return Be(e,t,n)},t.addGroupMember=function(e,t,n){return Ke(e,t,n)},t.modifyGroupMember=function(e,t,n){return ze(e,t,n)},t.deleteGroupMember=function(e,t,n){return Ve(e,t,n)},t.destroyGroup=function(e,t,n){return Je(e,t,n)},t.changeGroupOwner=function(e,t,n){return He(e,t,n)},t.getJoinedGroupListHigh=function(e,t,n){return Ye(e,t,n)},t.getRoleInGroup=function(e,t,n){return Xe(e,t,n)},t.forbidSendMsg=function(e,t,n){return je(e,t,n)},t.sendCustomGroupNotify=function(e,t,n){return We(e,t,n)},t.applyJoinBigGroup=function(e,t,n){return Le(e,t,n)},t.quitBigGroup=function(e,t,n){return ke(e,t,n)},t.getProfilePortrait=function(e,t,n){return st(e,t,n)},t.setProfilePortrait=function(e,t,n){return ut(e,t,n)},t.applyAddFriend=function(e,t,n){return et(e,t,n)},t.getPendency=function(e,t,n){return nt(e,t,n)},t.deletePendency=function(e,t,n){return ot(e,t,n)},t.responseFriend=function(e,t,n){return it(e,t,n)},t.getAllFriend=function(e,t,n){return rt(e,t,n)},t.deleteFriend=function(e,t,n){return tt(e,t,n)},t.addBlackList=function(e,t,n){return at(e,t,n)},t.deleteBlackList=function(e,t,n){return ct(e,t,n)},t.getBlackList=function(e,t,n){return lt(e,t,n)},t.getRecentContactList=function(e,t,n){return pt(e,t,n)},t.uploadFile=t.uploadPic=function(e,t,n){return Tt.uploadFile(e,t,n)},t.submitUploadFileForm=function(e,t,n){return Tt.submitUploadFileForm(e,t,n)},t.uploadFileByBase64=t.uploadPicByBase64=function(e,t,n){var o={To_Account:e.toAccount,Busi_Id:e.businessType,File_Type:e.File_Type,File_Str_Md5:e.fileMd5,PkgFlag:I.BASE64_DATA,File_Size:e.totalSize,Slice_Offset:0,Slice_Size:e.totalSize,Slice_Data:e.base64Str,Seq:ue(),Timestamp:se(),Random:ae()};return ft(o,t,n)},t.setJsonpLastRspData=function(e){z="string"==typeof e?JSON.parse(e):e},t.getLongPollingId=function(e,t,n){return mt(0,t,n)},t.applyDownload=function(e,t,n){return It(e,t,n)},t.onDownFile=function(e){window.open(te.downloadMap["uuid_"+e])},t.checkLogin=function(e,t){return fe(e,t)}}(t),module.exports=t; 
 			}); 
		define("utils/webim_handler.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,o,n){o&&o(t(e));var r,i,s,c;if(r=e.getElems(),console.log("----\x3e msg.fromAccount: "+e.fromAccount+", identifier: "+G.identifier),e.fromAccount!==G.identifier){for(var a in r)if(i=r[a])if(s=i.getType(),console.log("0x256 - type: "+s),c=i.getContent())if("TIMCustomElem"===s){var u=c.getExt(),l=c.getData();if("TXWhiteBoardExt"===u){console.log("无压缩数据类型： TXWhiteBoardExt"),n&&n(l);break}}else"TIMCustomFile"===s&&console.warn("已压缩压缩数据类型： TXWhiteBoardExt_gzip_");else console.log("content is null")}else console.log("self msg")}function o(e,o){var n,r,t,s,c;switch((n=e.getFromAccount())||(n=""),(r=e.getFromAccountNick())||(r=n),t=e.getSession().type(),s=e.getSubType(),t){case R.SESSION_TYPE.C2C:switch(s){case R.C2C_MSG_SUB_TYPE.COMMON:console.log(e.elems[0].content.text,"kkkkkk"),c=e.elems[0].content.text&&e.elems[0].content.text.indexOf("csyzwfelab20180425hhhdfq")>-1?JSON.parse(e.elems[0].content.text):i(e),R.Log.warn("receive a new c2c msg: fromAccountNick="+r+", content="+c);var a={To_Account:n,LastedMsgTime:e.getTime()};R.c2CMsgReaded(a),console.error("收到一条c2c消息(好友消息或者全员推送消息): 发送人="+r+", 内容="+c)}break;case R.SESSION_TYPE.GROUP:}return{content:c,fromAccountNick:r}}function n(e,o,n,t,i){R.login(e,o,n,function(o){if(console.debug(o),console.debug(o),R.Log.info("webim登录成功",e),console.log("webim登陆成功",e),G=e,r({ProfileItem:[{Tag:"Tag_Profile_IM_Nick",Value:e.identifierNick}]},function(){}),i){var n={};n.callback=i,t&&t(n)}else t&&t()},function(e){console.log("webim登录失败",e.message),console.error(e.ErrorInfo)})}function r(e,o){R.setProfilePortrait(e,function(e){R.Log.info("修改昵称成功"),o&&o()},function(e){console.log("修改昵称失败",e),o&&o(e)})}function t(e){var o,n;e.getFromAccount(),(o=e.getFromAccountNick())||(o="未知用户"),e.getSession().type(),n=e.getSubType(),e.getIsSend();var r="";switch(n){case R.GROUP_MSG_SUB_TYPE.COMMON:r=i(e);break;case R.GROUP_MSG_SUB_TYPE.REDPACKET:r="[群红包消息]"+i(e);break;case R.GROUP_MSG_SUB_TYPE.LOVEMSG:r="[群点赞消息]"+i(e),m();break;case R.GROUP_MSG_SUB_TYPE.TIP:r="[群提示消息]"+i(e)}return{fromAccountNick:o,content:r}}function i(e){var o,n,r,t,i="";o=e.getElems();for(var T in o)switch(n=o[T],r=n.getType(),t=n.getContent(),r){case R.MSG_ELEMENT_TYPE.TEXT:i+=s(t);break;case R.MSG_ELEMENT_TYPE.FACE:i+=c(t);break;case R.MSG_ELEMENT_TYPE.IMAGE:i+=a(t);break;case R.MSG_ELEMENT_TYPE.SOUND:i+=u(t);break;case R.MSG_ELEMENT_TYPE.FILE:i+=l(t);break;case R.MSG_ELEMENT_TYPE.LOCATION:break;case R.MSG_ELEMENT_TYPE.CUSTOM:i+=g(t);break;case R.MSG_ELEMENT_TYPE.GROUP_TIP:i+=f(t);break;default:R.Log.error("未知消息元素类型: elemType="+r)}return R.Tool.formatHtml2Text(i)}function s(e){return e.getText()}function c(e){return e.getData()}function a(e){var o=e.getImage(R.IMAGE_TYPE.SMALL),n=e.getImage(R.IMAGE_TYPE.LARGE),r=e.getImage(R.IMAGE_TYPE.ORIGIN);return n||(n=o),r||(r=o),"<img src='"+o.getUrl()+"#"+n.getUrl()+"#"+r.getUrl()+"' style='CURSOR: hand' id='"+e.getImageId()+"' bigImgUrl='"+n.getUrl()+"' onclick='imageClick(this)' />"}function u(e){e.getSecond();var o=e.getDownUrl();return"ie"==R.BROWSER_INFO.type&&parseInt(R.BROWSER_INFO.ver)<=8?"[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:"+o:'<audio src="'+o+'" controls="controls" onplay="onChangePlayAudio(this)" preload="none"></audio>'}function l(e){var o=Math.round(e.getSize()/1024);return'<a href="'+e.getDownUrl()+'" title="点击下载文件" ><i class="glyphicon glyphicon-file">&nbsp;'+e.getName()+"("+o+"KB)</i></a>"}function g(e){var o=e.getData();e.getDesc(),e.getExt();return o}function f(e){var o,n,r,t,i="";switch(o=e.getOpType(),n=e.getOpUserId(),o){case R.GROUP_TIP_TYPE.JOIN:r=e.getUserIdList();for(var s in r)if(i+=r[s]+",",r.length>10&&9==s){i+="等"+r.length+"人";break}i=i.substring(0,i.length-1),i+="进入房间",i+=';{"type":'+o+',"userIdList":"'+r.join(",")+'"}',t=parseInt(t)+1;break;case R.GROUP_TIP_TYPE.QUIT:i+=n+"离开房间",i+=';{"type":'+o+',"userIdList":"'+n+'"}',t>0&&(t=parseInt(t)-1);break;case R.GROUP_TIP_TYPE.KICK:i+=n+"将",r=e.getUserIdList();for(var s in r)if(i+=r[s]+",",r.length>10&&9==s){i+="等"+r.length+"人";break}i+="踢出该群";break;case R.GROUP_TIP_TYPE.SET_ADMIN:i+=n+"将",r=e.getUserIdList();for(var s in r)if(i+=r[s]+",",r.length>10&&9==s){i+="等"+r.length+"人";break}i+="设为管理员";break;case R.GROUP_TIP_TYPE.CANCEL_ADMIN:i+=n+"取消",r=e.getUserIdList();for(var s in r)if(i+=r[s]+",",r.length>10&&9==s){i+="等"+r.length+"人";break}i+="的管理员资格";break;case R.GROUP_TIP_TYPE.MODIFY_GROUP_INFO:i+=n+"修改了群资料：";var c,a,u=e.getGroupInfoList();for(var s in u)switch(c=u[s].getType(),a=u[s].getValue(),c){case R.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.FACE_URL:i+="群头像为"+a+"; ";break;case R.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.NAME:i+="群名称为"+a+"; ";break;case R.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.OWNER:i+="群主为"+a+"; ";break;case R.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.NOTIFICATION:i+="群公告为"+a+"; ";break;case R.GROUP_TIP_MODIFY_GROUP_INFO_TYPE.INTRODUCTION:i+="群简介为"+a+"; ";break;default:i+="未知信息为:type="+c+",value="+a+"; "}break;case R.GROUP_TIP_TYPE.MODIFY_MEMBER_INFO:i+=n+"修改了群成员资料:";var l,g,f=e.getMemberInfoList();for(var s in f)if(l=f[s].getUserId(),g=f[s].getShutupTime(),i+=l+": ",i+=null!=g&&void 0!==g?0==g?"取消禁言; ":"禁言"+g+"秒; ":" shutupTime为空",f.length>10&&9==s){i+="等"+f.length+"人";break}break;default:i+="未知群提示消息类型：type="+o}return i}function T(){console.warn("tlslogin need rewrite")}function d(){}function M(){}function p(){}function E(){}function m(){}function _(e){$("#send_msg_text").val($("#send_msg_text").val()+e.id)}function I(e,o,n,r,t,i){var s="收到一条群系统消息: type="+e+", typeCh="+o+",群ID="+n+", 群名称="+r+", 内容="+t+", 时间="+R.Tool.formatTimeStamp(i);R.Log.warn(s),console.error(s)}var G,O,S,P,N,y,C,h,v,R=require("webim_wx.js");module.exports={init:function(e){O=e.accountMode,S=e.accountType,P=e.sdkAppID,N=e.avChatRoomId||0,y=e.selType,C=e.selToID},onBigGroupMsgNotify:function(o,n,r){for(var t=o.length-1;t>=0;t--){var i=o[t];console.log("***onBigGroupMsgNotify***",i),R.Log.warn("receive a new avchatroom group msg: "+i.getFromAccountNick()),e(i,n,r),console.log("监听大群新消息",i)}},onMsgNotify:function(e,n){console.log("***777***",e);for(var r in e)n(o(e[r]))},handlderMsg:o,sdkLogin:n,createBigGroup:function(e,o,n){R.createGroup({GroupId:e.roomID,Owner_Account:e.userID,Type:"AVChatRoom",Name:e.roomName||"",MaxMemberCount:500,ApplyJoinOption:"FreeAccess",MemberList:[]},function(e){e.ErrorCode?o&&o({code:e.ErrorCode,errMsg:e.err_msg,callback:n}):o&&o({code:0,callback:n})},function(e){o&&o({errCode:e.ErrorCode,errMsg:e.ErrorInfo||"webim建房失败"})})},applyJoinBigGroup:function(e,o,n){var r={GroupId:e};console.log("***applyJoinBigGroup***",e),N=e,h=null,R.applyJoinBigGroup(r,function(r){r.JoinedStatus&&"JoinedSuccess"==r.JoinedStatus?(R.Log.info("进群成功"),console.log("进群成功"),C=e,o&&o({errCode:0,callback:n})):(console.error("进群失败"),o&&o({errCode:999,errMsg:"IM进群失败",callback:n}))},function(e){console.error(e.ErrorInfo),console.log("进群请求失败",e.ErrorInfo),o&&o({errCode:999,errMsg:e.ErrorInfo||"IM进群失败",callback:n})})},showMsg:t,convertMsgtoHtml:i,convertTextMsgToHtml:s,convertFaceMsgToHtml:c,convertImageMsgToHtml:a,convertSoundMsgToHtml:u,convertFileMsgToHtml:l,convertLocationMsgToHtml:function(e){return"经度="+e.getLongitude()+",纬度="+e.getLatitude()+",描述="+e.getDesc()},convertCustomMsgToHtml:g,convertGroupTipMsgToHtml:f,tlsLogin:T,tlsGetUserSig:function(e){if(e.ErrorCode==R.TLS_ERROR_CODE.OK){G.identifier=R.Tool.getQueryString("identifier"),G.userSig=e.UserSig,G.sdkAppID=G.appIDAt3rd=Number(R.Tool.getQueryString("sdkappid"));var o=R.Tool.getCookie("accountType");o?(G.accountType=o,n()):location.href=location.href.replace(/\?.*$/gi,"")}else e.ErrorCode==R.TLS_ERROR_CODE.SIGNATURE_EXPIRATION?T():console.error("["+e.ErrorCode+"]"+e.ErrorInfo)},imageClick:function(e){var o=e.src.split("#"),n=o[0],r=o[1],t=o[2];R.Log.info("小图url:"+n),R.Log.info("大图url:"+r),R.Log.info("原图url:"+t)},onChangePlayAudio:function(e){curPlayAudio?curPlayAudio!=e&&(curPlayAudio.currentTime=0,curPlayAudio.pause(),curPlayAudio=e):curPlayAudio=e},smsPicClick:function(){G.identifier?(M(),d()):1==O?(R.Tool.setCookie("accountType",G.accountType,86400),T()):console.error("请填写帐号和票据")},onSendMsg:function(e,o,n,r,i){if(console.log("accountMode",o),n&&(G.identifierNick=n),G.identifier)if(o.myselToID&&(C=o.myselToID),C){var s=e,c=R.Tool.getStrBytes(e);if(s.length<1)console.error("发送的消息不能为空!");else{var a,u,l=o.TYPE||y,g=o.myselToID||C;if(l==R.SESSION_TYPE.GROUP?(a=R.MSG_MAX_LENGTH.GROUP,u="消息长度超出限制(最多"+Math.round(a/3)+"汉字)"):(a=R.MSG_MAX_LENGTH.C2C,u="消息长度超出限制(最多"+Math.round(a/3)+"汉字)"),c>a)console.error(u);else{h=new R.Session(l,g,g,v,Math.round((new Date).getTime()/1e3));var f,d=Math.round(4294967296*Math.random()),M=Math.round((new Date).getTime()/1e3);f=l==R.SESSION_TYPE.GROUP?R.GROUP_MSG_SUB_TYPE.COMMON:R.C2C_MSG_SUB_TYPE.COMMON;var e=new R.Msg(h,!0,-1,d,M,G.identifier,f,G.identifierNick),p=/\[[^[\]]{1,3}\]/gm;console.log(s,"fefeff");var E,m,_,I,S,P=s.match(p);if(!P||P.length<1)E=new R.Msg.Elem.Text(s),console.log("***text_obj***",E),e.addText(E);else{for(var N=0;N<P.length;N++)(_=s.substring(0,s.indexOf(P[N])))&&(E=new R.Msg.Elem.Text(_),e.addText(E)),I=R.EmotionDataIndexs[P[N]],R.Emotions[I]?(m=new R.Msg.Elem.Face(I,P[N]),e.addFace(m)):(E=new R.Msg.Elem.Text(P[N]),e.addText(E)),S=s.indexOf(P[N])+P[N].length,s=s.substring(S);s&&(E=new R.Msg.Elem.Text(s),e.addText(E))}console.log(e),R.sendMsg(e,function(o){l==R.SESSION_TYPE.C2C&&t(e),R.Log.info("发消息成功"),console.log("发消息成功"),r&&r(t(e))},function(o){R.Log.error("发消息失败:"+o.ErrorInfo),console.log("发消息失败:"+o.ErrorInfo),console.error("发消息失败:"+o.ErrorInfo),i(t(e))})}}}else console.error("您还没有进入房间，暂不能聊天");else 1==O?(R.Tool.setCookie("accountType",G.accountType,86400),T()):console.error("请填写帐号和票据")},sendCustomMsg:function(e,o,n,r){if(o.myselToID&&(C=o.myselToID),y=o.TYPE||y,G.identifier)if(C){var i=e.data||"",s=e.desc||"",c=e.ext||"",a=R.Tool.getStrBytes(i);if(y==R.SESSION_TYPE.C2C?(l=R.MSG_MAX_LENGTH.C2C,g="消息长度超出限制(最多"+Math.round(l/3)+"汉字)"):(l=R.MSG_MAX_LENGTH.GROUP,g="消息长度超出限制(最多"+Math.round(l/3)+"汉字)"),a>l)alert(g);else{var u=e.text,a=R.Tool.getStrBytes(e.text);if(u.length<1)console.error("发送的消息不能为空!");else{var l,g;if(y==R.SESSION_TYPE.GROUP?(l=R.MSG_MAX_LENGTH.GROUP,g="消息长度超出限制(最多"+Math.round(l/3)+"汉字)"):(l=R.MSG_MAX_LENGTH.C2C,g="消息长度超出限制(最多"+Math.round(l/3)+"汉字)"),a>l)console.error(g);else{h=new R.Session(y,C,C,v,Math.round((new Date).getTime()/1e3));var f,d=Math.round(4294967296*Math.random()),M=Math.round((new Date).getTime()/1e3);f=y==R.SESSION_TYPE.GROUP?R.GROUP_MSG_SUB_TYPE.COMMON:R.C2C_MSG_SUB_TYPE.COMMON;var e=new R.Msg(h,!0,-1,d,M,G.identifier,f,G.identifierNick),p=new R.Msg.Elem.Custom(i,s,c);e.addCustom(p);var E,m,_,I,S,P=/\[[^[\]]{1,3}\]/gm,N=u.match(P);if(!N||N.length<1)E=new R.Msg.Elem.Text(u),e.addText(E);else{for(var L=0;L<N.length;L++)(_=u.substring(0,u.indexOf(N[L])))&&(E=new R.Msg.Elem.Text(_),e.addText(E)),I=R.EmotionDataIndexs[N[L]],R.Emotions[I]?(m=new R.Msg.Elem.Face(I,N[L]),e.addFace(m)):(E=new R.Msg.Elem.Text(N[L]),e.addText(E)),S=u.indexOf(N[L])+N[L].length,u=u.substring(S);u&&(E=new R.Msg.Elem.Text(u),e.addText(E))}R.sendMsg(e,function(o){y==R.SESSION_TYPE.C2C&&t(e),R.Log.info("发自定义消息成功"),console.log("发自定义消息成功",e),r&&r(t(e))},function(e){R.Log.info(e.ErrorInfo),console.log("发自定义消息失败:",e)})}}}}else console.error("您还没有进入房间，暂不能聊天");else 1==O?(R.Tool.setCookie("accountType",G.accountType,86400),T()):console.error("请填写帐号和票据")},sendC2CCustomMsg:function(e,o,n){if(G.identifier){var r=o.data||"",t=o.desc||"",i=o.ext||"",s=R.Tool.getStrBytes(r),c=R.MSG_MAX_LENGTH.C2C,a="消息长度超出限制(最多"+Math.round(c/3)+"汉字)";if(s>c)alert(a);else{var u=new R.Session(R.SESSION_TYPE.C2C,e,e,"",Math.round((new Date).getTime()/1e3)),l=Math.round(4294967296*Math.random()),g=Math.round((new Date).getTime()/1e3),f=R.C2C_MSG_SUB_TYPE.COMMON,o=new R.Msg(u,!0,-1,l,g,G.identifier,f,G.identifierNick),d=new R.Msg.Elem.Custom(r,t,i);o.addCustom(d),R.sendMsg(o,function(e){R.Log.info("发自定义消息成功"),console.log("发自定义消息成功"),n&&n({errCode:0,errMsg:""})},function(e){R.Log.info(e.ErrorInfo),console.log("发自定义消息失败:",e),n&&n({errCode:-1,errMsg:"发自定义消息失败:"+e.ErrorInfo})})}}else 1==O?(R.Tool.setCookie("accountType",G.accountType,86400),T()):console.error("请填写帐号和票据")},sendGroupLoveMsg:function(){if(G.identifier)if(C){h||(h=new R.Session(y,C,C,v,Math.round((new Date).getTime()/1e3)));var e=Math.round(4294967296*Math.random()),o=Math.round((new Date).getTime()/1e3),n=R.GROUP_MSG_SUB_TYPE.LOVEMSG,r=new R.Msg(h,!0,-1,e,o,G.identifier,n,G.identifierNick),i=new R.Msg.Elem.Text("love_msg");r.addText(i),R.sendMsg(r,function(e){y==R.SESSION_TYPE.C2C&&t(r),R.Log.info("点赞成功")},function(e){R.Log.error("发送点赞消息失败:"+e.ErrorInfo),console.error("发送点赞消息失败:"+e.ErrorInfo)})}else console.error("您还没有进入房间，暂不能点赞");else 1==O?(R.Tool.setCookie("accountType",G.accountType,86400),T()):console.error("请填写帐号和票据")},hideDiscussForm:function(){},showDiscussForm:d,hideDiscussTool:M,showDiscussTool:function(){},hideDiscussEmotion:p,showDiscussEmotion:E,showLoveMsgAnimation:m,initEmotionUL:function(){return},showEmotionDialog:function(){openEmotionFlag?(openEmotionFlag=!1,p()):(openEmotionFlag=!0,E())},selectEmotionImg:_,quitBigGroup:function(e){console.log("***注释掉判断语句，请注意quitBigGroup webim_handler.js:1082***",N,e);var o={GroupId:0==N?e:N};console.log("***===quitBigGroup===***",o),R.quitBigGroup(o,function(e){R.Log.info("退群成功"),console.log("IM退群成功"),h=null},function(e){console.error("TTTTTTTTTT",e.ErrorInfo)})},destroyGroup:function(){var e={GroupId:N};R.destroyGroup(e,function(e){R.Log.info("解散群成功"),h=null})},logout:function(){R.logout(function(e){R.Log.info("登出成功"),console.log("IM登出成功"),G&&(G.identifier=null,G.userSig=null),h=null})},onApplyJoinGroupRequestNotify:function(e){var o=e.MsgTime,n=e.Operator_Account+"申请加入你的群";I(e.ReportType,"[申请加群]",e.GroupId,e.GroupName,n,o)},onApplyJoinGroupAcceptNotify:function(e){var o=e.Operator_Account+"同意你的加群申请，附言："+e.RemarkInfo;I(e.ReportType,"[申请加群被同意]",e.GroupId,e.GroupName,o,e.MsgTime)},onApplyJoinGroupRefuseNotify:function(e){var o=e.Operator_Account+"拒绝了你的加群申请，附言："+e.RemarkInfo;I(e.ReportType,"[申请加群被拒绝]",e.GroupId,e.GroupName,o,e.MsgTime)},onKickedGroupNotify:function(e){var o="你被管理员"+e.Operator_Account+"踢出该群";I(e.ReportType,"[被踢出群]",e.GroupId,e.GroupName,o,e.MsgTime)},onDestoryGroupNotify:function(e){var o="群主"+e.Operator_Account+"已解散该群";I(e.ReportType,"[群被解散]",e.GroupId,e.GroupName,o,e.MsgTime)},onCreateGroupNotify:function(e){I(e.ReportType,"[创建群]",e.GroupId,e.GroupName,"你创建了该群",e.MsgTime)},onInvitedJoinGroupNotify:function(e){var o="你被管理员"+e.Operator_Account+"邀请加入该群";I(e.ReportType,"[被邀请加群]",e.GroupId,e.GroupName,o,e.MsgTime)},onQuitGroupNotify:function(e){I(e.ReportType,"[主动退群]",e.GroupId,e.GroupName,"你退出了该群",e.MsgTime)},onSetedGroupAdminNotify:function(e){var o="你被群主"+e.Operator_Account+"设置为管理员";I(e.ReportType,"[被设置为管理员]",e.GroupId,e.GroupName,o,e.MsgTime)},onCanceledGroupAdminNotify:function(e){var o="你被群主"+e.Operator_Account+"取消了管理员资格";I(e.ReportType,"[被取消管理员]",e.GroupId,e.GroupName,o,e.MsgTime)},onRevokeGroupNotify:function(e){I(e.ReportType,"[群被回收]",e.GroupId,e.GroupName,"该群已被回收",e.MsgTime)},onCustomGroupNotify:function(e){var o=e.UserDefinedField;I(e.ReportType,"[用户自定义系统消息]",e.GroupId,e.GroupName,o,e.MsgTime)},onGroupInfoChangeNotify:function(e){var o=e.GroupId,n=(e.GroupFaceUrl,e.GroupName);e.OwnerAccount,e.GroupNotification,e.GroupIntroduction;n&&R.Log.warn("群id="+o+"的新名称为："+n)},showGroupSystemMsg:I,getC2CHistoryMsgs:function(e,o,n,r,t,i,s){if(y!=R.SESSION_TYPE.GROUP){var c={Peer_Account:C,MaxCnt:15,LastMsgTime:n=n,MsgKey:o=o};console.log("准备",c),R.getC2CHistoryMsgs(c,function(o){console.log(o,"qiuqiu"),0==n&&i(1);var s=o.Complete;if(o.MsgCount,0!=o.MsgList.length){s&&t();var a,u=o.MsgList.reverse();for(var l in u)a=o.MsgList[l],console.log(l,o.MsgList.length),l==o.MsgList.length-1?0==n?e(a,1,1):e(a,1,0):e(a,0,0);s||r(o.MsgKey,o.LastMsgTime)}else R.Log.error("没有历史消息了:data="+JSON.stringify(c))},function(e){console.log("baocuo"),s(e)})}else alert("当前的聊天类型为群聊天，不能进行拉取好友历史消息操作")}}; 
 			}); 
		define("utils/webim_wx.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=0,t=0;module.exports=function(){var n={},o={login:function(e,t,n){},syncMsgs:function(e,t){},getC2CHistoryMsgs:function(e,t,n){},syncGroupMsgs:function(e,t,n){},sendMsg:function(e,t,n){},logout:function(e,t){},setAutoRead:function(e,t,n){},getProfilePortrait:function(e,t,n){},setProfilePortrait:function(e,t,n){},applyAddFriend:function(e,t,n){},getPendency:function(e,t,n){},deletePendency:function(e,t,n){},responseFriend:function(e,t,n){},getAllFriend:function(e,t,n){},deleteFriend:function(e,t,n){},addBlackList:function(e,t,n){},getBlackList:function(e,t,n){},deleteBlackList:function(e,t,n){},uploadPic:function(e,t,n){},createGroup:function(e,t,n){},applyJoinGroup:function(e,t,n){},handleApplyJoinGroup:function(e,t,n){},deleteApplyJoinGroupPendency:function(e,t,n){},quitGroup:function(e,t,n){},getGroupPublicInfo:function(e,t,n){},getGroupInfo:function(e,t,n){},modifyGroupBaseInfo:function(e,t,n){},destroyGroup:function(e,t,n){},getJoinedGroupListHigh:function(e,t,n){},getGroupMemberInfo:function(e,t,n){},addGroupMember:function(e,t,n){},modifyGroupMember:function(e,t,n){},forbidSendMsg:function(e,t,n){},deleteGroupMember:function(e,t,n){},sendCustomGroupNotify:function(e,t,n){},Msg:function(e,t,n,o,r,i,s,u){},MsgStore:{sessMap:function(){return{}},sessCount:function(){return 0},sessByTypeId:function(e,t){return{}},delSessByTypeId:function(e,t){return!0},resetCookieAndSyncFlag:function(){},downloadMap:{}}};return function(o){var r={VERSION:"1.7.0",APPID:"537048168"},i=!0,s={FORMAL:{COMMON:"https://webim.tim.qq.com",PIC:"https://pic.tim.qq.com"},TEST:{COMMON:"https://test.tim.qq.com",PIC:"https://pic.tim.qq.com"}},u={},a={OPEN_IM:"openim",GROUP:"group_open_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat"},l={openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v1",group_open_long_polling_http_noauth_svc:"v1",imopenstat:"v4"},c={login:1,pic_up:3,apply_join_group:9,create_group:10,longpolling:18,send_group_msg:19,sendmsg:20},p={C2C:"C2C",GROUP:"GROUP"},f={C2C:1,GROUP:2},g={C2C:12e3,GROUP:8898},d={OK:"OK",FAIL:"FAIL"},m={TEXT:"TIMTextElem",FACE:"TIMFaceElem",IMAGE:"TIMImageElem",CUSTOM:"TIMCustomElem",SOUND:"TIMSoundElem",FILE:"TIMFileElem",LOCATION:"TIMLocationElem",GROUP_TIP:"TIMGroupTipElem"},I={ORIGIN:1,LARGE:2,SMALL:3},M={RAW_DATA:0,BASE64_DATA:1},E={BUSSINESS_ID:"10001",AUTH_KEY:"617574686b6579",SERVER_IP:"182.140.186.147"},_={SOUND:2106,FILE:2107},y={IMAGE:1,FILE:2,SHORT_VIDEO:3,SOUND:4},h={APP_VERSION:"2.1",SERVER_VERSION:1},C={C2C:1,GROUP_COMMON:3,GROUP_TIP:4,GROUP_SYSTEM:5,GROUP_TIP2:6,FRIEND_NOTICE:7,PROFILE_NOTICE:8,C2C_COMMON:9,C2C_EVENT:10},T={COMMON:0},A={READED:92},S={COMMON:0,LOVEMSG:1,TIP:2,REDPACKET:3},G={REDPACKET:1,COMMON:2,LOVEMSG:3},O={JOIN:1,QUIT:2,KICK:3,SET_ADMIN:4,CANCEL_ADMIN:5,MODIFY_GROUP_INFO:6,MODIFY_MEMBER_INFO:7},F={FACE_URL:1,NAME:2,OWNER:3,NOTIFICATION:4,INTRODUCTION:5},R={JOIN_GROUP_REQUEST:1,JOIN_GROUP_ACCEPT:2,JOIN_GROUP_REFUSE:3,KICK:4,DESTORY:5,CREATE:6,INVITED_JOIN_GROUP_REQUEST:7,QUIT:8,SET_ADMIN:9,CANCEL_ADMIN:10,REVOKE:11,READED:15,CUSTOM:255},v={FRIEND_ADD:1,FRIEND_DELETE:2,PENDENCY_ADD:3,PENDENCY_DELETE:4,BLACK_LIST_ADD:5,BLACK_LIST_DELETE:6,PENDENCY_REPORT:7,FRIEND_UPDATE:8},N={PROFILE_MODIFY:1},P={OK:0,SIGNATURE_EXPIRATION:11},b={INIT:-1,ON:0,RECONNECT:1,OFF:9999},L={GROUP_MSG:1,C2C_MSG:2,USER_HEAD:3,GROUP_HEAD:4},U={ING:14,STOP:15},D=b.INIT,k=!1,w=0,q=6e4,x=null,B=0,K=0,z=0,V=null,J=null,H=0,Y=[],X=null,Q=null,W={sdkAppID:null,appIDAt3rd:null,accountType:null,identifier:null,tinyid:null,identifierNick:null,userSig:null,a2:null,contentType:"json",apn:1},j={},$=0,Z={},ee=0,te=[],ne=[],oe=[],re={downloadMap:{}},ie={"[惊讶]":0,"[撇嘴]":1,"[色]":2,"[发呆]":3,"[得意]":4,"[流泪]":5,"[害羞]":6,"[闭嘴]":7,"[睡]":8,"[大哭]":9,"[尴尬]":10,"[发怒]":11,"[调皮]":12,"[龇牙]":13,"[微笑]":14,"[难过]":15,"[酷]":16,"[冷汗]":17,"[抓狂]":18,"[吐]":19,"[偷笑]":20,"[可爱]":21,"[白眼]":22,"[傲慢]":23,"[饿]":24,"[困]":25,"[惊恐]":26,"[流汗]":27,"[憨笑]":28,"[大兵]":29,"[奋斗]":30,"[咒骂]":31,"[疑问]":32,"[嘘]":33,"[晕]":34},se={},ue=new function(){this.formatTimeStamp=function(e,t){if(!e)return 0;var n;t=t||"yyyy-MM-dd hh:mm:ss";var o=new Date(1e3*e),r={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds()};n=/(y+)/.test(t)?t.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length)):t;for(var i in r)new RegExp("("+i+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return n},this.groupTypeEn2Ch=function(e){var t=null;switch(e){case"Public":t="公开群";break;case"ChatRoom":t="聊天室";break;case"Private":t="讨论组";break;case"AVChatRoom":t="直播聊天室";break;default:t=e}return t},this.groupTypeCh2En=function(e){var t=null;switch(e){case"公开群":t="Public";break;case"聊天室":t="ChatRoom";break;case"讨论组":t="Private";break;case"直播聊天室":t="AVChatRoom";break;default:t=e}return t},this.groupRoleEn2Ch=function(e){var t=null;switch(e){case"Member":t="成员";break;case"Admin":t="管理员";break;case"Owner":t="群主";break;default:t=e}return t},this.groupRoleCh2En=function(e){var t=null;switch(e){case"成员":t="Member";break;case"管理员":t="Admin";break;case"群主":t="Owner";break;default:t=e}return t},this.groupMsgFlagEn2Ch=function(e){var t=null;switch(e){case"AcceptAndNotify":t="接收并提示";break;case"AcceptNotNotify":t="接收不提示";break;case"Discard":t="屏蔽";break;default:t=e}return t},this.groupMsgFlagCh2En=function(e){var t=null;switch(e){case"接收并提示":t="AcceptAndNotify";break;case"接收不提示":t="AcceptNotNotify";break;case"屏蔽":t="Discard";break;default:t=e}return t},this.formatText2Html=function(e){var t=e;return t&&(t=(t=(t=this.xssFilter(t)).replace(/ /g,"&nbsp;")).replace(/\n/g,"<br/>")),t},this.formatHtml2Text=function(e){var t=e;return t&&(t=(t=t.replace(/&nbsp;/g," ")).replace(/<br\/>/g,"\n")),t},this.getStrBytes=function(e){if(null==e||void 0===e)return 0;if("string"!=typeof e)return 0;var t,n,o,r=0;for(n=0,o=e.length;n<o;n++)r+=(t=e.charCodeAt(n))<=127?1:t<=2047?2:t<=65535?3:4;return r},this.xssFilter=function(e){return e=e.toString(),e=e.replace(/[<]/g,"&lt;"),e=e.replace(/[>]/g,"&gt;")},this.trimStr=function(e){return e?(e=e.toString()).replace(/(^\s*)|(\s*$)/g,""):""},this.validNumber=function(e){return(e=e.toString()).match(/(^\d{1,8}$)/g)},this.getReturnError=function(e,t){return t||(t=-100),{ActionStatus:d.FAIL,ErrorCode:t,ErrorInfo:e+"["+t+"]"}},this.setCookie=function(e,t,n,o,r){var i=new Date;i.setTime(i.getTime()+1e3*n),document.cookie=e+"="+escape(t)+";expires="+i.toGMTString()},this.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},this.delCookie=function(e){var t=new Date;t.setTime(t.getTime()-1);var n=this.getCookie(e);null!=n&&(document.cookie=e+"="+escape(n)+";expires="+t.toGMTString())},this.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}},ae=new function(){var e=!0;this.setOn=function(t){e=t},this.getOn=function(){return e},this.error=function(t){try{e&&console.error(t)}catch(e){}},this.warn=function(t){try{e&&console.warn(t)}catch(e){}},this.info=function(t){try{e&&console.info(t)}catch(e){}},this.debug=function(t){try{e&&console.debug(t)}catch(e){}}},le=function(e){return e||(e=new Date),Math.round(e.getTime()/1e3)},ce=function(){return ee?ee+=1:ee=Math.round(1e7*Math.random()),ee},pe=function(){return Math.round(4294967296*Math.random())},fe=function(n,o,r,i,s,u,a){e++,t++,Z[$++]=wx.request({url:o+"&reqSeq="+e,data:r,dataType:"json",method:n,header:{"Content-Type":"application/json"},success:function(e){t--,w=B=0,u&&u(e.data)},fail:function(e){t--,setTimeout(function(){var e=ue.getReturnError("请求服务器失败,请检查你的网络是否正常",-2);a&&a(e)},16)}})},ge=function(e,t,n,o,r,i,s){fe(e,t,JSON.stringify(n),0,0,function(e){var t=null;e&&(t=e),i&&i(t)},s)},de=function(){return W.sdkAppID&&W.identifier},me=function(e,t){if(!de()){if(t){var n=ue.getReturnError("请登录",-4);e&&e(n)}return!1}return!0},Ie=function(){return i},Me=function(e,t,n,o){var i=s;i=Ie()?s.FORMAL.COMMON:s.TEST.COMMON,e==a.PIC&&(i=Ie()?s.FORMAL.PIC:s.TEST.PIC);var u=i+"/"+l[e]+"/"+e+"/"+t+"?websdkappid="+r.APPID+"&v="+r.VERSION;if(de()){if("login"==t)u+="&identifier="+encodeURIComponent(W.identifier)+"&usersig="+W.userSig;else if(W.tinyid&&W.a2)u+="&tinyid="+W.tinyid+"&a2="+W.a2;else if(o)return ae.error("tinyid或a2为空["+e+"]["+t+"]"),o(ue.getReturnError("tinyid或a2为空["+e+"]["+t+"]",-5)),!1;u+="&contenttype="+W.contentType}return u+="&sdkappid="+W.sdkAppID+"&accounttype="+W.accountType+"&apn="+W.apn+"&reqtime="+le()},Ee=function(e,t){var n=null;return X&&Y[0]?n="http://"+Y[0]+"/asn.com/stddownload_common_file?authkey="+X+"&bid="+E.BUSSINESS_ID+"&subbid="+W.sdkAppID+"&fileid="+e+"&filetype="+_.SOUND+"&openid="+t+"&ver=0":ae.error("拼接语音下载url不报错：ip或者authkey为空"),n},_e=function(e,t,n){var o=null;return X&&Y[0]?o="http://"+Y[0]+"/asn.com/stddownload_common_file?authkey="+X+"&bid="+E.BUSSINESS_ID+"&subbid="+W.sdkAppID+"&fileid="+e+"&filetype="+_.FILE+"&openid="+t+"&ver=0&filename="+encodeURIComponent(n):ae.error("拼接文件下载url不报错：ip或者authkey为空"),re.downloadMap["uuid_"+e]=o,o},ye=function(e,t,n,o,r,i,s){var u={From_Account:t,To_Account:r,os_platform:10,Timestamp:le().toString(),Random:pe().toString(),request_info:[{busi_id:i,download_flag:o,type:s,uuid:e,version:h.SERVER_VERSION,auth_key:X,ip:Y[0]}]};yt(u,function(e){0==e.error_code&&e.response_info&&(re.downloadMap["uuid_"+u.uuid]=e.response_info.url),onAppliedDownloadUrl&&onAppliedDownloadUrl({uuid:u.uuid,url:e.response_info.url,maps:re.downloadMap})},function(e){ae.error("获取下载地址失败",u.uuid)})},he=function(){for(var e in Z){var t=Z[e];t&&(t.abort(),Z[$]=null)}$=0,Z={}},Ce=function(){he(),W={sdkAppID:null,appIDAt3rd:null,accountType:null,identifier:null,identifierNick:null,userSig:null,contentType:"json",apn:1},j={},ee=0,z=0,V=null,oe=[],Gt.clear(),x=null},Te=function(e,t,n,o,r){Ce(),n&&(j=n),0==j.isAccessFormalEnv&&(ae.error("请切换为正式环境"),i=j.isAccessFormalEnv),0==j.isLogOn&&ae.setOn(j.isLogOn),e||!r?e.sdkAppID||!r?e.accountType||!r?(e.identifier&&(W.identifier=e.identifier.toString()),e.identifier&&!e.userSig&&r?r(ue.getReturnError("loginInfo.userSig is empty",-9)):(e.userSig&&(W.userSig=e.userSig.toString()),W.sdkAppID=e.sdkAppID,W.accountType=e.accountType,W.identifier&&W.userSig?Se(function(e,n){Gt.init(t,function(t){o&&(t.identifierNick=e,t.headurl=n,o(t))},r)},r):Gt.init(t,o,r))):r(ue.getReturnError("loginInfo.accountType is empty",-8)):r(ue.getReturnError("loginInfo.sdkAppID is empty",-7)):r(ue.getReturnError("loginInfo is empty",-6))},Ae=function(e,t,n){if("longpolling"!=e||60008!=t&&91101!=t){var o=c[e];if(o){var i=le(),s=null,u={Code:t,ErrMsg:n};if(W.a2?s=W.a2.substring(0,10)+"_"+i+"_"+pe():W.userSig&&(s=W.userSig.substring(0,10)+"_"+i+"_"+pe()),s){var a={UniqKey:s,EventId:o,ReportTime:i,MsgCmdErrorCode:u};if("login"==e){var l=[];l.push(a),Et({EvtItems:l,MainVersion:r.VERSION,Version:"0"},function(e){l=null},function(e){l=null})}else oe.push(a),oe.length>=20&&Et({EvtItems:oe,MainVersion:r.VERSION,Version:"0"},function(e){oe=[]},function(e){oe=[]})}}}},Se=function(e,t){ht.apiCall(a.OPEN_IM,"login",{State:"Online"},function(n){if(n.TinyId)W.tinyid=n.TinyId;else if(t)return void t(ue.getReturnError("TinyId is empty",-10));if(n.A2Key)W.a2=n.A2Key;else if(t)return void t(ue.getReturnError("A2Key is empty",-11));var o=["Tag_Profile_IM_Nick","Tag_Profile_IM_Image"],r={From_Account:W.identifier,To_Account:[W.identifier],LastStandardSequence:0,TagList:o};ct(r,function(t){var n,o;if(t.UserProfileItem&&t.UserProfileItem.length>0)for(var r in t.UserProfileItem)for(var i in t.UserProfileItem[r].ProfileItem)switch(t.UserProfileItem[r].ProfileItem[i].Tag){case"Tag_Profile_IM_Nick":(n=t.UserProfileItem[r].ProfileItem[i].Value)&&(W.identifierNick=n);break;case"Tag_Profile_IM_Image":(o=t.UserProfileItem[r].ProfileItem[i].Value)&&(W.headurl=o)}e&&e(W.identifierNick,W.headurl)},t)},t)},Ge=function(e,t,n){if(!me(n,!1))return Ce(),void(t&&t({ActionStatus:d.OK,ErrorCode:0,ErrorInfo:"logout success"}));"all"==e?ht.apiCall(a.OPEN_IM,"logout",{},function(e){Ce(),t&&t(e)},n):ht.apiCall(a.OPEN_IM,"longpollinglogout",{LongPollingId:x},function(e){Ce(),t&&t(e)},n)},Oe=function(e,t,n){if(me(n,!0)){var o=null;switch(e.sess.type()){case p.C2C:o={From_Account:W.identifier,To_Account:e.sess.id().toString(),MsgTimeStamp:e.time,MsgSeq:e.seq,MsgRandom:e.random,MsgBody:[]};break;case p.GROUP:var r=e.getSubType();switch(o={GroupId:e.sess.id().toString(),From_Account:W.identifier,Random:e.random,MsgBody:[]},r){case S.COMMON:o.MsgPriority="COMMON";break;case S.REDPACKET:o.MsgPriority="REDPACKET";break;case S.LOVEMSG:o.MsgPriority="LOVEMSG";break;case S.TIP:ae.error("不能主动发送群提示消息,subType="+r);break;default:return void ae.error("发送群消息时，出现未知子消息类型：subType="+r)}}for(var i in e.elems){var s=e.elems[i],u=null,l=s.type;switch(l){case m.TEXT:u={Text:s.content.text};break;case m.FACE:u={Index:s.content.index,Data:s.content.data};break;case m.IMAGE:var c=[];for(var f in s.content.ImageInfoArray)c.push({Type:s.content.ImageInfoArray[f].type,Size:s.content.ImageInfoArray[f].size,Width:s.content.ImageInfoArray[f].width,Height:s.content.ImageInfoArray[f].height,URL:s.content.ImageInfoArray[f].url});u={UUID:s.content.UUID,ImageInfoArray:c};break;case m.SOUND:ae.warn("web端暂不支持发送语音消息");continue;case m.LOCATION:ae.warn("web端暂不支持发送地理位置消息");continue;case m.FILE:u={UUID:s.content.uuid,FileName:s.content.name,FileSize:s.content.size,DownloadFlag:s.content.downFlag};break;case m.CUSTOM:u={Data:s.content.data,Desc:s.content.desc,Ext:s.content.ext},l=m.CUSTOM;break;default:ae.warn("web端暂不支持发送"+s.type+"消息");continue}e.PushInfoBoolean&&(o.OfflinePushInfo=e.PushInfo),o.MsgBody.push({MsgType:l,MsgContent:u})}e.sess.type()==p.C2C?ht.apiCall(a.OPEN_IM,"sendmsg",o,t,n):e.sess.type()==p.GROUP&&ht.apiCall(a.GROUP,"send_group_msg",o,t,n)}},Fe=function(e,t,n){(i||"undefined"==typeof stopPolling||1!=stopPolling)&&me(n,!0)&&ht.apiCall(a.OPEN_IM,"longpolling",e,t,n,q,!0)},Re=function(e,t,n,o){ht.apiCall(a.BIG_GROUP_LONG_POLLING,"get_msg",e,t,n,o)},ve=function e(t,n,o,r){me(r,!0)&&ht.apiCall(a.OPEN_IM,"getmsg",{Cookie:t,SyncFlag:n},function(t){if(t.MsgList&&t.MsgList.length)for(var n in t.MsgList)te.push(t.MsgList[n]);1==t.SyncFlag?e(t.Cookie,t.SyncFlag,o,r):(t.MsgList=te,te=[],o&&o(t))},r)},Ne=function(e,t,n,o){if(me(o,!0)){var r=[];for(var i in t){var s={To_Account:t[i].toAccount,LastedMsgTime:t[i].lastedMsgTime};r.push(s)}ht.apiCall(a.OPEN_IM,"msgreaded",{C2CMsgReaded:{Cookie:e,C2CMsgReadedItem:r}},n,o)}},Pe=function(e,t,n){me(n,!0)&&ht.apiCall(a.OPEN_IM,"deletemsg",e,t,n)},be=function e(t,n,o){me(o,!0)&&ht.apiCall(a.OPEN_IM,"getroammsg",t,function(r){var i=t.MaxCnt,s=r.Complete,u=r.MaxCnt,a=r.MsgKey,l=r.LastMsgTime;if(r.MsgList&&r.MsgList.length)for(var c in r.MsgList)ne.push(r.MsgList[c]);var p=null;0==s&&u<i&&(p={Peer_Account:t.Peer_Account,MaxCnt:i-u,LastMsgTime:l,MsgKey:a}),p?e(p,n,o):(r.MsgList=ne,ne=[],n&&n(r))},o)},Le=function(e,t,n){if(me(n,!0)){for(var o={Type:e.Type,Name:e.Name},r=[],i=0;i<e.MemberList.length;i++)r.push({Member_Account:e.MemberList[i]});o.MemberList=r,e.GroupId&&(o.GroupId=e.GroupId),e.Owner_Account&&(o.Owner_Account=e.Owner_Account),e.Introduction&&(o.Introduction=e.Introduction),e.Notification&&(o.Notification=e.Notification),e.MaxMemberCount&&(o.MaxMemberCount=e.MaxMemberCount),e.ApplyJoinOption&&(o.ApplyJoinOption=e.ApplyJoinOption),e.AppDefinedData&&(o.AppDefinedData=e.AppDefinedData),e.FaceUrl&&(o.FaceUrl=e.FaceUrl),ht.apiCall(a.GROUP,"create_group",o,t,n)}},Ue=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"create_group",e,t,n)},De=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"modify_group_base_info",e,t,n)},ke=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"apply_join_group",{GroupId:e.GroupId,ApplyMsg:e.ApplyMsg,UserDefinedField:e.UserDefinedField},t,n)},we=function(e,t,n){var o;o=me(n,!1)?a.GROUP:a.BIG_GROUP,ht.apiCall(o,"apply_join_group",{GroupId:e.GroupId,ApplyMsg:e.ApplyMsg,UserDefinedField:e.UserDefinedField},function(o){if(o.JoinedStatus&&"JoinedSuccess"==o.JoinedStatus){if(!o.LongPollingKey)return void(n&&n(ue.getReturnError("The type of group is not AVChatRoom: groupid="+e.GroupId,-12)));Gt.resetBigGroupLongPollingInfo(),Gt.setBigGroupLongPollingOn(!0),Gt.setBigGroupLongPollingKey(o.LongPollingKey),Gt.setBigGroupLongPollingMsgMap(e.GroupId,0),Gt.bigGroupLongPolling()}t&&t(o)},function(e){n&&n(e)})},qe=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"handle_apply_join_group",{GroupId:e.GroupId,Applicant_Account:e.Applicant_Account,HandleMsg:e.HandleMsg,Authentication:e.Authentication,MsgKey:e.MsgKey,ApprovalMsg:e.ApprovalMsg,UserDefinedField:e.UserDefinedField},t,function(e){if(10024==e.ErrorCode){if(t){var o={ActionStatus:d.OK,ErrorCode:0,ErrorInfo:"该申请已经被处理过"};t(o)}}else n&&n(e)})},xe=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"quit_group",{GroupId:e.GroupId},t,n)},Be=function(e,t,n){var o;o=me(n,!1)?a.GROUP:a.BIG_GROUP,Gt.resetBigGroupLongPollingInfo(),ht.apiCall(o,"quit_group",{GroupId:e.GroupId},function(e){Gt.resetBigGroupLongPollingInfo(),t&&t(e)},n)},Ke=function(e,t,n){ht.apiCall(a.GROUP,"search_group",e,t,n)},ze=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"get_group_public_info",{GroupIdList:e.GroupIdList,ResponseFilter:{GroupBasePublicInfoFilter:e.GroupBasePublicInfoFilter}},function(e){if(e.ErrorInfo="",e.GroupInfo)for(var o in e.GroupInfo){var r=e.GroupInfo[o].ErrorCode;r>0&&(e.ActionStatus=d.FAIL,e.GroupInfo[o].ErrorInfo="["+r+"]"+e.GroupInfo[o].ErrorInfo,e.ErrorInfo+=e.GroupInfo[o].ErrorInfo+"\n")}e.ActionStatus==d.FAIL?n&&n(e):t&&t(e)},n)},Ve=function(e,t,n){if(me(n,!0)){var o={GroupIdList:e.GroupIdList,ResponseFilter:{GroupBaseInfoFilter:e.GroupBaseInfoFilter,MemberInfoFilter:e.MemberInfoFilter}};e.AppDefinedDataFilter_Group&&(o.ResponseFilter.AppDefinedDataFilter_Group=e.AppDefinedDataFilter_Group),e.AppDefinedDataFilter_GroupMember&&(o.ResponseFilter.AppDefinedDataFilter_GroupMember=e.AppDefinedDataFilter_GroupMember),ht.apiCall(a.GROUP,"get_group_info",o,t,n)}},Je=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"get_group_member_info",{GroupId:e.GroupId,Offset:e.Offset,Limit:e.Limit,MemberInfoFilter:e.MemberInfoFilter,MemberRoleFilter:e.MemberRoleFilter,AppDefinedDataFilter_GroupMember:e.AppDefinedDataFilter_GroupMember},t,n)},He=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"add_group_member",{GroupId:e.GroupId,Silence:e.Silence,MemberList:e.MemberList},t,n)},Ye=function(e,t,n){if(me(n,!0)){var o={};e.GroupId&&(o.GroupId=e.GroupId),e.Member_Account&&(o.Member_Account=e.Member_Account),e.Role&&(o.Role=e.Role),e.MsgFlag&&(o.MsgFlag=e.MsgFlag),e.ShutUpTime&&(o.ShutUpTime=e.ShutUpTime),e.NameCard&&(o.NameCard=e.NameCard),e.AppMemberDefinedData&&(o.AppMemberDefinedData=e.AppMemberDefinedData),ht.apiCall(a.GROUP,"modify_group_member_info",o,t,n)}},Xe=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"delete_group_member",{GroupId:e.GroupId,Silence:e.Silence,MemberToDel_Account:e.MemberToDel_Account,Reason:e.Reason},t,n)},Qe=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"destroy_group",{GroupId:e.GroupId},t,n)},We=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"change_group_owner",e,t,n)},je=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"get_joined_group_list",{Member_Account:e.Member_Account,Limit:e.Limit,Offset:e.Offset,GroupType:e.GroupType,ResponseFilter:{GroupBaseInfoFilter:e.GroupBaseInfoFilter,SelfInfoFilter:e.SelfInfoFilter}},t,n)},$e=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"get_role_in_group",{GroupId:e.GroupId,User_Account:e.User_Account},t,n)},Ze=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"forbid_send_msg",{GroupId:e.GroupId,Members_Account:e.Members_Account,ShutUpTime:e.ShutUpTime},t,n)},et=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"send_group_system_notification",e,t,n)},tt=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"group_msg_get",{GroupId:e.GroupId,ReqMsgSeq:e.ReqMsgSeq,ReqMsgNumber:e.ReqMsgNumber},t,n)},nt=function(e,t,n){me(n,!0)&&ht.apiCall(a.GROUP,"msg_read_report",{GroupId:e.GroupId,MsgReadedSeq:e.MsgReadedSeq},t,n)},ot=function(e){var t=[];if(e.Fail_Account&&e.Fail_Account.length&&(t=e.Fail_Account),e.Invalid_Account&&e.Invalid_Account.length)for(var n in e.Invalid_Account)t.push(e.Invalid_Account[n]);if(t.length){e.ActionStatus=d.FAIL,e.ErrorCode=99999,e.ErrorInfo="";for(var o in t){var r=t[o];for(var i in e.ResultItem)if(e.ResultItem[i].To_Account==r){var s=e.ResultItem[i].ResultCode;e.ResultItem[i].ResultInfo="["+s+"]"+e.ResultItem[i].ResultInfo,e.ErrorInfo+=e.ResultItem[i].ResultInfo+"\n";break}}}return e},rt=function(e,t,n){me(n,!0)&&ht.apiCall(a.FRIEND,"friend_add",{From_Account:W.identifier,AddFriendItem:e.AddFriendItem},function(e){var o=ot(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},it=function(e,t,n){me(n,!0)&&ht.apiCall(a.FRIEND,"friend_delete",{From_Account:W.identifier,To_Account:e.To_Account,DeleteType:e.DeleteType},function(e){var o=ot(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},st=function(e,t,n){me(n,!0)&&ht.apiCall(a.FRIEND,"pendency_get",{From_Account:W.identifier,PendencyType:e.PendencyType,StartTime:e.StartTime,MaxLimited:e.MaxLimited,LastSequence:e.LastSequence},t,n)},ut=function(e,t,n){me(n,!0)&&ht.apiCall(a.FRIEND,"pendency_delete",{From_Account:W.identifier,PendencyType:e.PendencyType,To_Account:e.To_Account},function(e){var o=ot(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},at=function(e,t,n){me(n,!0)&&ht.apiCall(a.FRIEND,"friend_response",{From_Account:W.identifier,ResponseFriendItem:e.ResponseFriendItem},function(e){var o=ot(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},lt=function(e,t,n){me(n,!0)&&ht.apiCall(a.FRIEND,"friend_get_all",{From_Account:W.identifier,TimeStamp:e.TimeStamp,StartIndex:e.StartIndex,GetCount:e.GetCount,LastStandardSequence:e.LastStandardSequence,TagList:e.TagList},t,n)},ct=function(e,t,n){me(n,!0)&&ht.apiCall(a.PROFILE,"portrait_get",{From_Account:W.identifier,To_Account:e.To_Account,TagList:e.TagList},function(e){var o=[];if(e.Fail_Account&&e.Fail_Account.length&&(o=e.Fail_Account),e.Invalid_Account&&e.Invalid_Account.length)for(var r in e.Invalid_Account)o.push(e.Invalid_Account[r]);if(o.length){e.ActionStatus=d.FAIL,e.ErrorCode=99999,e.ErrorInfo="";for(var i in o){var s=o[i];for(var u in e.UserProfileItem)if(e.UserProfileItem[u].To_Account==s){var a=e.UserProfileItem[u].ResultCode;e.UserProfileItem[u].ResultInfo="["+a+"]"+e.UserProfileItem[u].ResultInfo,e.ErrorInfo+="账号:"+s+","+e.UserProfileItem[u].ResultInfo+"\n";break}}}e.ActionStatus==d.FAIL?n&&n(e):t&&t(e)},n)},pt=function(e,t,n){me(n,!0)&&ht.apiCall(a.PROFILE,"portrait_set",{From_Account:W.identifier,ProfileItem:e.ProfileItem},function(n){for(var o in e.ProfileItem){var r=e.ProfileItem[o];if("Tag_Profile_IM_Nick"==r.Tag){W.identifierNick=r.Value;break}}t&&t(n)},n)},ft=function(e,t,n){me(n,!0)&&ht.apiCall(a.FRIEND,"black_list_add",{From_Account:W.identifier,To_Account:e.To_Account},function(e){var o=ot(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},gt=function(e,t,n){me(n,!0)&&ht.apiCall(a.FRIEND,"black_list_delete",{From_Account:W.identifier,To_Account:e.To_Account},function(e){var o=ot(e);o.ActionStatus==d.FAIL?n&&n(o):t&&t(o)},n)},dt=function(e,t,n){me(n,!0)&&ht.apiCall(a.FRIEND,"black_list_get",{From_Account:W.identifier,StartIndex:e.StartIndex,MaxLimited:e.MaxLimited,LastSequence:e.LastSequence},t,n)},mt=function(e,t,n){me(n,!0)&&ht.apiCall(a.RECENT_CONTACT,"get",{From_Account:W.identifier,Count:e.Count},t,n)},It=function(e,t,n){if(me(n,!0)){var o;o=Ie()?"pic_up":"pic_up_test",ht.apiCall(a.PIC,o,{App_Version:h.APP_VERSION,From_Account:W.identifier,To_Account:e.To_Account,Seq:e.Seq,Timestamp:e.Timestamp,Random:e.Random,File_Str_Md5:e.File_Str_Md5,File_Size:e.File_Size,File_Type:e.File_Type,Server_Ver:h.SERVER_VERSION,Auth_Key:X,Busi_Id:e.Busi_Id,PkgFlag:e.PkgFlag,Slice_Offset:e.Slice_Offset,Slice_Size:e.Slice_Size,Slice_Data:e.Slice_Data},t,n)}},Mt=function(e,t){me(t,!0)&&ht.apiCall(a.OPEN_IM,"authkey",{},e,t)},Et=function(e,t,n){me(n,!0)&&ht.apiCall(a.IM_OPEN_STAT,"web_report",e,t,n)},_t=function(e,t,n){me(n,!0)&&ht.apiCall(a.OPEN_IM,"getlongpollingid",{},function(e){t&&t(e)},n)},yt=function(e,t,n){ht.apiCall(a.PIC,"apply_download",e,t,n)};u="wechat";var ht=new function(){var e=null;this.init=function(t,n,o){t&&(e=t)},this.callBack=function(t){e&&e(t)},this.clear=function(){e=null},this.apiCall=function(e,t,n,o,r,i,s){var u=Me(e,t,0,r);0!=u&&ge("POST",u,n,0,0,function(i){var s=null,a="";"pic_up"==t&&(n.Slice_Data="");var l="\n request url: \n"+u+"\n request body: \n"+JSON.stringify(n)+"\n response: \n"+JSON.stringify(i);i.ActionStatus==d.OK?(ae.info("["+e+"]["+t+"]success: "+l),o&&o(i),s=0,a=""):(s=i.ErrorCode,a=i.ErrorInfo,r&&(i.SrcErrorInfo=i.ErrorInfo,i.ErrorInfo="["+e+"]["+t+"]failed: "+l,"longpolling"==t&&60008==i.ErrorCode||ae.error(i.ErrorInfo),r(i))),Ae(t,s,a)},function(e){r&&r(e),Ae(t,e.ErrorCode,e.ErrorInfo)})}},Ct=function e(t,n,o,r,i,s){this._impl={skey:e.skey(t,n),type:t,id:n,name:o,icon:r,unread:0,isAutoRead:!1,time:i>=0?i:0,curMaxMsgSeq:s>=0?s:0,msgs:[],isFinished:1}};Ct.skey=function(e,t){return e+t},Ct.prototype.type=function(){return this._impl.type},Ct.prototype.id=function(){return this._impl.id},Ct.prototype.name=function(){return this._impl.name},Ct.prototype.icon=function(){return this._impl.icon},Ct.prototype.unread=function(e){if(void 0===e)return this._impl.unread;this._impl.unread=e},Ct.prototype.isFinished=function(e){if(void 0===e)return this._impl.isFinished;this._impl.isFinished=e},Ct.prototype.time=function(){return this._impl.time},Ct.prototype.curMaxMsgSeq=function(e){if(void 0===e)return this._impl.curMaxMsgSeq;this._impl.curMaxMsgSeq=e},Ct.prototype.msgCount=function(){return this._impl.msgs.length},Ct.prototype.msg=function(e){return this._impl.msgs[e]},Ct.prototype.msgs=function(){return this._impl.msgs},Ct.prototype._impl_addMsg=function(e){this._impl.msgs.push(e),e.time>this._impl.time&&(this._impl.time=e.time),e.seq>this._impl.curMaxMsgSeq&&(this._impl.curMaxMsgSeq=e.seq),e.isSend||this._impl.isAutoRead||this._impl.unread++};var Tt=function(e,t){this.toAccount=e,this.lastedMsgTime=t},At=function(e,t,n,o,r,i,s,u){this.sess=e,this.subType=s>=0?s:0,this.fromAccount=i,this.fromAccountNick=u||i,this.isSend=Boolean(t),this.seq=n>=0?n:ce(),this.random=o>=0?o:pe(),this.time=r>=0?r:le(),this.elems=[]};At.prototype.getSession=function(){return this.sess},At.prototype.getType=function(){return this.subType},At.prototype.getSubType=function(){return this.subType},At.prototype.getFromAccount=function(){return this.fromAccount},At.prototype.getFromAccountNick=function(){return this.fromAccountNick},At.prototype.getIsSend=function(){return this.isSend},At.prototype.getSeq=function(){return this.seq},At.prototype.getTime=function(){return this.time},At.prototype.getRandom=function(){return this.random},At.prototype.getElems=function(){return this.elems},At.prototype.addText=function(e){this.addElem(new o.Msg.Elem(m.TEXT,e))},At.prototype.addFace=function(e){this.addElem(new o.Msg.Elem(m.FACE,e))},At.prototype.addImage=function(e){this.addElem(new o.Msg.Elem(m.IMAGE,e))},At.prototype.addLocation=function(e){this.addElem(new o.Msg.Elem(m.LOCATION,e))},At.prototype.addFile=function(e){this.addElem(new o.Msg.Elem(m.FILE,e))},At.prototype.addCustom=function(e){this.addElem(new o.Msg.Elem(m.CUSTOM,e))},At.prototype.addElem=function(e){this.elems.push(e)},At.prototype.toHtml=function(){var e="";for(var t in this.elems)e+=this.elems[t].toHtml();return e},(At.Elem=function(e,t){this.type=e,this.content=t}).prototype.getType=function(){return this.type},At.Elem.prototype.getContent=function(){return this.content},At.Elem.prototype.toHtml=function(){return this.content.toHtml()},At.Elem.Text=function(e){this.text=ue.xssFilter(e)},At.Elem.Text.prototype.getText=function(){return this.text},At.Elem.Text.prototype.toHtml=function(){return this.text},At.Elem.Face=function(e,t){this.index=e,this.data=t},At.Elem.Face.prototype.getIndex=function(){return this.index},At.Elem.Face.prototype.getData=function(){return this.data},At.Elem.Face.prototype.toHtml=function(){var e=null,t=ie[this.data],n=se[t];return n&&n[1]&&(e=n[1]),e?"<img src='"+e+"'/>":this.data},At.Elem.Location=function(e,t,n){this.latitude=t,this.longitude=e,this.desc=n},At.Elem.Location.prototype.getLatitude=function(){return this.latitude},At.Elem.Location.prototype.getLongitude=function(){return this.longitude},At.Elem.Location.prototype.getDesc=function(){return this.desc},At.Elem.Location.prototype.toHtml=function(){return"经度="+this.longitude+",纬度="+this.latitude+",描述="+this.desc},At.Elem.Images=function(e){this.UUID=e,this.ImageInfoArray=[]},At.Elem.Images.prototype.addImage=function(e){this.ImageInfoArray.push(e)},At.Elem.Images.prototype.toHtml=function(){var e=this.getImage(I.SMALL),t=this.getImage(I.LARGE),n=this.getImage(I.ORIGIN);return t||(t=e),n||(n=e),"<img src='"+e.getUrl()+"#"+t.getUrl()+"#"+n.getUrl()+"' style='CURSOR: hand' id='"+this.getImageId()+"' bigImgUrl='"+t.getUrl()+"' onclick='imageClick(this)' />"},At.Elem.Images.prototype.getImageId=function(){return this.UUID},At.Elem.Images.prototype.getImage=function(e){for(var t in this.ImageInfoArray)if(this.ImageInfoArray[t].getType()==e)return this.ImageInfoArray[t];return null},At.Elem.Images.Image=function(e,t,n,o,r){this.type=e,this.size=t,this.width=n,this.height=o,this.url=r},At.Elem.Images.Image.prototype.getType=function(){return this.type},At.Elem.Images.Image.prototype.getSize=function(){return this.size},At.Elem.Images.Image.prototype.getWidth=function(){return this.width},At.Elem.Images.Image.prototype.getHeight=function(){return this.height},At.Elem.Images.Image.prototype.getUrl=function(){return this.url},At.Elem.Sound=function(e,t,n,o,r,i,s){this.uuid=e,this.second=t,this.size=n,this.senderId=o,this.receiverId=r,this.downFlag=i,this.busiId=s==p.C2C?2:1,void 0!==i&&void 0!==busiId?ye(e,o,0,i,r,this.busiId,y.SOUND):this.downUrl=Ee(e,o)},At.Elem.Sound.prototype.getUUID=function(){return this.uuid},At.Elem.Sound.prototype.getSecond=function(){return this.second},At.Elem.Sound.prototype.getSize=function(){return this.size},At.Elem.Sound.prototype.getSenderId=function(){return this.senderId},At.Elem.Sound.prototype.getDownUrl=function(){return this.downUrl},At.Elem.Sound.prototype.toHtml=function(){return"ie"==u.type&&parseInt(u.ver)<=8?"[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:"+this.downUrl:'<audio id="uuid_'+this.uuid+'" src="'+this.downUrl+'" controls="controls" onplay="onChangePlayAudio(this)" preload="none"></audio>'},At.Elem.File=function(e,t,n,o,r,i,s){this.uuid=e,this.name=t,this.size=n,this.senderId=o,this.receiverId=r,this.downFlag=i,this.busiId=s==p.C2C?2:1,void 0!==i&&void 0!==busiId?ye(e,o,0,i,r,this.busiId,y.FILE):this.downUrl=_e(e,o,t)},At.Elem.File.prototype.getUUID=function(){return this.uuid},At.Elem.File.prototype.getName=function(){return this.name},At.Elem.File.prototype.getSize=function(){return this.size},At.Elem.File.prototype.getSenderId=function(){return this.senderId},At.Elem.File.prototype.getDownUrl=function(){return this.downUrl},At.Elem.File.prototype.getDownFlag=function(){return this.downFlag},At.Elem.File.prototype.toHtml=function(){var e,t;return e=this.size,t="Byte",this.size>=1024&&(e=Math.round(this.size/1024),t="KB"),'<a href="javascript" onclick="webim.onDownFile("'+this.uuid+'")" title="点击下载文件" ><i class="glyphicon glyphicon-file">&nbsp;'+this.name+"("+e+t+")</i></a>"},At.Elem.GroupTip=function(e,t,n,o,r){this.opType=e,this.opUserId=t,this.groupId=n,this.groupName=o,this.userIdList=r||[],this.groupInfoList=[],this.memberInfoList=[],this.groupMemberNum=null},At.Elem.GroupTip.prototype.addGroupInfo=function(e){this.groupInfoList.push(e)},At.Elem.GroupTip.prototype.addMemberInfo=function(e){this.memberInfoList.push(e)},At.Elem.GroupTip.prototype.getOpType=function(){return this.opType},At.Elem.GroupTip.prototype.getOpUserId=function(){return this.opUserId},At.Elem.GroupTip.prototype.getGroupId=function(){return this.groupId},At.Elem.GroupTip.prototype.getGroupName=function(){return this.groupName},At.Elem.GroupTip.prototype.getUserIdList=function(){return this.userIdList},At.Elem.GroupTip.prototype.getGroupInfoList=function(){return this.groupInfoList},At.Elem.GroupTip.prototype.getMemberInfoList=function(){return this.memberInfoList},At.Elem.GroupTip.prototype.getGroupMemberNum=function(){return this.groupMemberNum},At.Elem.GroupTip.prototype.setGroupMemberNum=function(e){return this.groupMemberNum=e},At.Elem.GroupTip.prototype.toHtml=function(){var e="[群提示消息]";switch(this.opType){case O.JOIN:e+=this.opUserId+"邀请了";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="加入该群";break;case O.QUIT:e+=this.opUserId+"主动退出该群";break;case O.KICK:e+=this.opUserId+"将";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="踢出该群";break;case O.SET_ADMIN:e+=this.opUserId+"将";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="设为管理员";break;case O.CANCEL_ADMIN:e+=this.opUserId+"取消";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="的管理员资格";break;case O.MODIFY_GROUP_INFO:e+=this.opUserId+"修改了群资料：";for(var t in this.groupInfoList){var n=this.groupInfoList[t].getType(),o=this.groupInfoList[t].getValue();switch(n){case F.FACE_URL:e+="群头像为"+o+"; ";break;case F.NAME:e+="群名称为"+o+"; ";break;case F.OWNER:e+="群主为"+o+"; ";break;case F.NOTIFICATION:e+="群公告为"+o+"; ";break;case F.INTRODUCTION:e+="群简介为"+o+"; ";break;default:e+="未知信息为:type="+n+",value="+o+"; "}}break;case O.MODIFY_MEMBER_INFO:e+=this.opUserId+"修改了群成员资料:";for(var t in this.memberInfoList){var r=this.memberInfoList[t].getUserId(),i=this.memberInfoList[t].getShutupTime();if(e+=r+": ",e+=null!=i&&void 0!==i?0==i?"取消禁言; ":"禁言"+i+"秒; ":" shutupTime为空",this.memberInfoList.length>10&&9==t){e+="等"+this.memberInfoList.length+"人";break}}break;case O.READED:Log.info("消息已读同步");break;default:e+="未知群提示消息类型：type="+this.opType}return e},At.Elem.GroupTip.GroupInfo=function(e,t){this.type=e,this.value=t},At.Elem.GroupTip.GroupInfo.prototype.getType=function(){return this.type},At.Elem.GroupTip.GroupInfo.prototype.getValue=function(){return this.value},At.Elem.GroupTip.MemberInfo=function(e,t){this.userId=e,this.shutupTime=t},At.Elem.GroupTip.MemberInfo.prototype.getUserId=function(){return this.userId},At.Elem.GroupTip.MemberInfo.prototype.getShutupTime=function(){return this.shutupTime},At.Elem.Custom=function(e,t,n){this.data=e,this.desc=t,this.ext=n},At.Elem.Custom.prototype.getData=function(){return this.data},At.Elem.Custom.prototype.getDesc=function(){return this.desc},At.Elem.Custom.prototype.getExt=function(){return this.ext},At.Elem.Custom.prototype.toHtml=function(){return this.data};var St=new function(){var e={},t=[];n={},this.cookie="",this.syncFlag=0;var o=function(t){for(var n in e)t(e[n])},r=function(e){var t=!1,o=e.sess._impl.skey,r=e.isSend+e.seq+e.random;return n[o]&&n[o][r]&&(t=!0),n[o]?n[o][r]={time:e.time}:(n[o]={},n[o][r]={time:e.time}),t};this.sessMap=function(){return e},this.sessCount=function(){return t.length},this.sessByTypeId=function(t,n){var o=Ct.skey(t,n);return void 0===o||null==o?null:e[o]},this.delSessByTypeId=function(t,o){var r=Ct.skey(t,o);return void 0!==r&&null!=r&&(e[r]&&(delete e[r],delete n[r]),!0)},this.resetCookieAndSyncFlag=function(){this.cookie="",this.syncFlag=0},this.setAutoRead=function(e,t,n){if(n&&o(function(e){e._impl.isAutoRead=!1}),e&&(e._impl.isAutoRead=t,t))if(e._impl.unread=0,e._impl.type==p.C2C){var r=[];r.push(new Tt(e._impl.id,e._impl.time)),Ne(St.cookie,r,function(e){ae.info("[setAutoRead]: c2CMsgReaded success")},function(e){ae.error("[setAutoRead}: c2CMsgReaded failed:"+e.ErrorInfo)})}else if(e._impl.type==p.GROUP){var i={GroupId:e._impl.id,MsgReadedSeq:e._impl.curMaxMsgSeq};nt(i,function(e){ae.info("groupMsgReaded success")},function(e){ae.error("groupMsgReaded failed:"+e.ErrorInfo)})}},this.c2CMsgReaded=function(e,t,n){var o=[];o.push(new Tt(e.To_Account,e.LastedMsgTime)),Ne(St.cookie,o,function(e){t&&(ae.info("c2CMsgReaded success"),t(e))},function(e){n&&(ae.error("c2CMsgReaded failed:"+e.ErrorInfo),n(e))})},this.addSession=function(t){e[t._impl.skey]=t},this.delSession=function(t){delete e[t._impl.skey]},this.addMsg=function(t){if(r(t))return!1;var n=t.sess;return e[n._impl.skey]||this.addSession(n),t.time>n._impl.time&&(n._impl.time=t.time),t.seq>n._impl.curMaxMsgSeq&&(n._impl.curMaxMsgSeq=t.seq),t.isSend||n._impl.isAutoRead||n._impl.unread++,!0},this.updateTimeline=function(){var e=new Array;o(function(t){e.push(t)}),e.sort(function(e,t){return t.time-e.time}),t=e}},Gt=new function(){var e=null,t=null,n={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,15:null,255:null},o={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},r={1:null},i=null,s=!1,u=0,a=0,l=null,c=!1,f=0,g=90,I=null,M={},E=0,_={},y={};this.setLongPollingOn=function(e){s=e},this.getLongPollingOn=function(){return s},this.resetLongPollingInfo=function(){s=!1,u=0,a=0},this.setBigGroupLongPollingOn=function(e){c=e},this.setBigGroupLongPollingKey=function(e){I=e},this.resetBigGroupLongPollingInfo=function(){c=!1,f=0,I=null,M={}},this.setBigGroupLongPollingMsgMap=function(e,t){var n=M[e];n?(n=parseInt(n)+t,M[e]=n):M[e]=t},this.clear=function(){t=null,n={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,15:null,255:null},o={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},r={1:null},e=null,s=!1,u=0,a=0,l=null,c=!1,f=0,I=null,M={},y={},Y=[],X=null,Q=null};var h=function(e,t){Mt(function(t){Y=t.IpList,X=t.AuthKey,Q=t.ExpireTime,e&&e(t)},function(e){ae.error("initIpAndAuthkey failed:"+e.ErrorInfo),t&&t(e)})},T=function(e,t){var n={Member_Account:W.identifier,Limit:1e3,Offset:0,GroupBaseInfoFilter:["NextMsgSeq"]};je(n,function(t){if(!t.GroupIdList||0==t.GroupIdList.length)return ae.info("initMyGroupMaxSeqs: 目前还没有加入任何群组"),void(e&&e(t));for(var n=0;n<t.GroupIdList.length;n++){var o=t.GroupIdList[n].GroupId,r=t.GroupIdList[n].NextMsgSeq-1;_[o]=r}e&&e(t)},function(e){ae.error("initMyGroupMaxSeqs failed:"+e.ErrorInfo),t&&t(e)})},P=function(e,t,n){E++;var o={GroupId:e,ReqMsgSeq:t,ReqMsgNumber:n};ae.warn("第"+E+"次补齐群消息,参数="+JSON.stringify(o)),Gt.syncGroupMsgs(o)},L=function(e,t){var n=_[e];n?t>n&&(_[e]=t):_[e]=t},K=function(e,t){for(var n in e){var o=e[n];if(o.From_Account){var r=re(o,!1,!0);r&&t.push(r),L(o.ToGroupId,o.MsgSeq)}}return t},z=function(t,n){var o={},r=[];for(var i in n){var s=o[n[i].ToGroupId];s||(s=o[n[i].ToGroupId]={min:99999999,max:-1,msgs:[]}),n[i].NoticeSeq>a&&(ae.warn("noticeSeq="+a+",msgNoticeSeq="+n[i].NoticeSeq),a=n[i].NoticeSeq),n[i].Event=t,o[n[i].ToGroupId].msgs.push(n[i]),n[i].MsgSeq<s.min&&(o[n[i].ToGroupId].min=n[i].MsgSeq),n[i].MsgSeq>s.max&&(o[n[i].ToGroupId].max=n[i].MsgSeq)}for(var u in o){var l=o[u].max-o[u].min+1,c=_[u];c?o[u].min-c>1||o[u].msgs.length<l?(ae.warn("发起一次补齐群消息请求,curMaxMsgSeq="+c+", minMsgSeq="+o[u].min+", maxMsgSeq="+o[u].max+", msgs.length="+o[u].msgs.length+", tempCount="+l),P(u,o[u].max,o[u].max-c),L(u,o[u].max)):r=K(o[u].msgs,r):(ae.warn("不存在该群的最大消息seq，群id="+u),o[u].msgs.length<l?(ae.warn("发起一次补齐群消息请求,minMsgSeq="+o[u].min+", maxMsgSeq="+o[u].max+", msgs.length="+o[u].msgs.length+", tempCount="+l),P(u,o[u].max,l),L(u,o[u].max)):r=K(o[u].msgs,r))}r.length&&St.updateTimeline(),e&&r.length&&e(r)},V=function(t,n){var o={},r=[];for(var i in n){var s=o[n[i].ToGroupId];s||(s=o[n[i].ToGroupId]={min:99999999,max:-1,msgs:[]}),n[i].NoticeSeq>a&&(ae.warn("noticeSeq="+a+",msgNoticeSeq="+n[i].NoticeSeq),a=n[i].NoticeSeq),n[i].Event=t,o[n[i].ToGroupId].msgs.push(n[i]),n[i].MsgSeq<s.min&&(o[n[i].ToGroupId].min=n[i].MsgSeq),n[i].MsgSeq>s.max&&(o[n[i].ToGroupId].max=n[i].MsgSeq)}for(var u in o){var l=o[u].max-o[u].min+1,c=_[u];c?o[u].min-c>1||o[u].msgs.length<l?(ae.warn("发起一次补齐群消息请求,curMaxMsgSeq="+c+", minMsgSeq="+o[u].min+", maxMsgSeq="+o[u].max+", msgs.length="+o[u].msgs.length+", tempCount="+l),P(u,o[u].max,o[u].max-c),L(u,o[u].max)):r=K(o[u].msgs,r):(ae.warn("不存在该群的最大消息seq，群id="+u),o[u].msgs.length<l?(ae.warn("发起一次补齐群消息请求,minMsgSeq="+o[u].min+", maxMsgSeq="+o[u].max+", msgs.length="+o[u].msgs.length+", tempCount="+l),P(u,o[u].max,l),L(u,o[u].max)):r=K(o[u].msgs,r))}r.length&&St.updateTimeline(),e&&r.length&&e(r)},J=function(e,t){for(var o in e){var r=e[o],i=r.MsgBody,s=i.ReportType;0==t&&r.NoticeSeq&&r.NoticeSeq>a&&(a=r.NoticeSeq);r.GroupInfo.To_Account;if(t){var u=r.ToGroupId+"_"+s+"_"+i.Operator_Account;if(y[u]){ae.warn("收到重复的群系统消息：key="+u);continue}y[u]=!0}var l={SrcFlag:0,ReportType:s,GroupId:r.ToGroupId,GroupName:r.GroupInfo.GroupName,Operator_Account:i.Operator_Account,MsgTime:r.MsgTimeStamp,groupReportTypeMsg:i};switch(s){case R.JOIN_GROUP_REQUEST:l.RemarkInfo=i.RemarkInfo,l.MsgKey=i.MsgKey,l.Authentication=i.Authentication,l.UserDefinedField=r.UserDefinedField,l.From_Account=r.From_Account,l.MsgSeq=r.ClientSeq,l.MsgRandom=r.MsgRandom;break;case R.JOIN_GROUP_ACCEPT:case R.JOIN_GROUP_REFUSE:l.RemarkInfo=i.RemarkInfo;break;case R.KICK:case R.DESTORY:case R.CREATE:case R.INVITED_JOIN_GROUP_REQUEST:case R.QUIT:case R.SET_ADMIN:case R.CANCEL_ADMIN:case R.REVOKE:case R.READED:break;case R.CUSTOM:l.MsgSeq=r.MsgSeq,l.UserDefinedField=i.UserDefinedField;break;default:ae.error("未知群系统消息类型：reportType="+s)}if(t)s==R.JOIN_GROUP_REQUEST&&n[s]&&n[s](l);else if(n[s])if(s==R.READED)for(var c=l.groupReportTypeMsg.GroupReadInfoArray,p=0,f=c.length;p<f;p++){var g=c[p];n[s](g)}else n[s](l)}},H=function(e,t){var n,r,i;for(var s in e){switch(n=e[s],r=n.PushType,0==t&&n.NoticeSeq&&n.NoticeSeq>a&&(a=n.NoticeSeq),i={Type:r},r){case v.FRIEND_ADD:i.Accounts=n.FriendAdd_Account;break;case v.FRIEND_DELETE:i.Accounts=n.FriendDel_Account;break;case v.PENDENCY_ADD:i.PendencyList=n.PendencyAdd;break;case v.PENDENCY_DELETE:i.Accounts=n.FrienPencydDel_Account;break;case v.BLACK_LIST_ADD:i.Accounts=n.BlackListAdd_Account;break;case v.BLACK_LIST_DELETE:i.Accounts=n.BlackListDel_Account;break;default:ae.error("未知好友系统通知类型：friendNotice="+JSON.stringify(n))}t?r==v.PENDENCY_ADD&&o[r]&&o[r](i):o[r]&&o[r](i)}},j=function(e,t){var n,o,i;for(var s in e){switch(n=e[s],o=n.PushType,0==t&&n.NoticeSeq&&n.NoticeSeq>a&&(a=n.NoticeSeq),i={Type:o},o){case N.PROFILE_MODIFY:i.Profile_Account=n.Profile_Account,i.ProfileList=n.ProfileList;break;default:ae.error("未知资料系统通知类型：profileNotice="+JSON.stringify(n))}t?o==N.PROFILE_MODIFY&&r[o]&&r[o](i):r[o]&&r[o](i)}},$=function(e){var t=e.MsgBody,o=t.ReportType,r=(e.GroupInfo.To_Account,{SrcFlag:1,ReportType:o,GroupId:e.ToGroupId,GroupName:e.GroupInfo.GroupName,Operator_Account:t.Operator_Account,MsgTime:e.MsgTimeStamp});switch(o){case R.JOIN_GROUP_REQUEST:r.RemarkInfo=t.RemarkInfo,r.MsgKey=t.MsgKey,r.Authentication=t.Authentication,r.UserDefinedField=e.UserDefinedField,r.From_Account=e.From_Account,r.MsgSeq=e.ClientSeq,r.MsgRandom=e.MsgRandom;break;case R.JOIN_GROUP_ACCEPT:case R.JOIN_GROUP_REFUSE:r.RemarkInfo=t.RemarkInfo;break;case R.KICK:case R.DESTORY:case R.CREATE:case R.INVITED_JOIN_GROUP_REQUEST:case R.QUIT:case R.SET_ADMIN:case R.CANCEL_ADMIN:case R.REVOKE:break;case R.CUSTOM:r.MsgSeq=e.MsgSeq,r.UserDefinedField=t.UserDefinedField;break;default:ae.error("未知群系统消息类型：reportType="+o)}n[o]&&n[o](r)},Z=function(e){for(var t=0,n=e.length;t<n;t++)ee(e[t])},ee=function(e){var t=e.SubMsgType;switch(t){case A.READED:break;default:ae.error("未知C2c系统消息：reportType="+reportType)}if(e.ReadC2cMsgNotify.UinPairReadArray&&onC2cEventCallbacks[t])for(var n=0,o=e.ReadC2cMsgNotify.UinPairReadArray.length;n<o;n++){var r=e.ReadC2cMsgNotify.UinPairReadArray[n];onC2cEventCallbacks[t](r)}};this.longPolling=function(e,t){function n(){Fe(o,function(e){for(var t in e.EventArray){var n=e.EventArray[t];switch(n.Event){case C.C2C:u=n.NotifySeq,ae.warn("longpolling: received new c2c msg"),Gt.syncMsgs();break;case C.GROUP_COMMON:ae.warn("longpolling: received new group msgs"),V(n.Event,n.GroupMsgArray);break;case C.GROUP_TIP:ae.warn("longpolling: received new group tips"),V(n.Event,n.GroupTips);break;case C.GROUP_SYSTEM:ae.warn("longpolling: received new group system msgs"),J(n.GroupTips,!1);break;case C.FRIEND_NOTICE:ae.warn("longpolling: received new friend system notice"),H(n.FriendListMod,!1);break;case C.PROFILE_NOTICE:ae.warn("longpolling: received new profile system notice"),j(n.ProfileDataMod,!1);break;case C.C2C_COMMON:a=n.C2cMsgArray[0].NoticeSeq,ae.warn("longpolling: received new c2c_common msg",a),z(n.Event,n.C2cMsgArray);break;case C.C2C_EVENT:a=n.C2cNotifyMsgArray[0].NoticeSeq,ae.warn("longpolling: received new c2c_event msg"),Z(n.C2cNotifyMsgArray);break;default:ae.error("longpolling收到未知新消息类型: Event="+n.Event)}}var o={ActionStatus:d.OK,ErrorCode:0};te(o)},function(e){te(e),t&&t(e)})}var o={Timeout:q/1e3,Cookie:{NotifySeq:u,NoticeSeq:a}};x?(o.Cookie.LongPollingId=x,n()):_t(0,function(e){x=o.Cookie.LongPollingId=e.LongPollingId,q=e.Timeout>60?q:1e3*e.Timeout,n()})},this.bigGroupLongPolling=function(e,t){Re({StartSeq:f,HoldTime:g,Key:I},function(t){var n=[];if(f=t.NextSeq,g=t.HoldTime,I=t.Key,t.RspMsgList&&t.RspMsgList.length>0){for(var o,r,i,s=0,u=t.RspMsgList.length-1;u>=0;u--)if(!(o=t.RspMsgList[u]).IsPlaceMsg&&o.From_Account&&o.MsgBody&&0!=o.MsgBody.length)switch(r=o.Event){case C.GROUP_COMMON:ae.info("bigGroupLongPolling: return new group msg"),(i=re(o,!1,!1))&&n.push(i),s+=1;break;case C.GROUP_TIP:case C.GROUP_TIP2:ae.info("bigGroupLongPolling: return new group tip"),(i=re(o,!1,!1))&&n.push(i);break;case C.GROUP_SYSTEM:ae.info("bigGroupLongPolling: new group system msg"),$(o);break;default:ae.error("bigGroupLongPolling收到未知新消息类型: Event="+r)}s>0&&(Gt.setBigGroupLongPollingMsgMap(o.ToGroupId,s),ae.warn("current bigGroupLongPollingMsgMap: "+JSON.stringify(M)))}B=0;var a={ActionStatus:d.OK,ErrorCode:b.ON,ErrorInfo:"connection is ok..."};ht.callBack(a),e?e(n):l&&l(n),c&&Gt.bigGroupLongPolling()},function(e){if(60008!=e.ErrorCode&&(ae.error(e.ErrorInfo),B++),91101!=e.ErrorCode&&(ae.error("多实例登录，被kick"),i&&i()),B<10)c&&Gt.bigGroupLongPolling();else{var n={ActionStatus:d.FAIL,ErrorCode:b.OFF,ErrorInfo:"connection is off"};ht.callBack(n)}t&&t(e)},1e3*g)};var te=function(e){if(0==e.ErrorCode||60008==e.ErrorCode){w=0,k=!1;var t,n=!1;switch(D){case b.INIT:n=!0,D=b.ON,t="create connection successfully(INIT->ON)";break;case b.ON:t="connection is on...(ON->ON)";break;case b.RECONNECT:D=b.ON,t="connection is on...(RECONNECT->ON)";break;case b.OFF:n=!0,D=b.RECONNECT,t="reconnect successfully(OFF->RECONNECT)"}var o={ActionStatus:d.OK,ErrorCode:D,ErrorInfo:t};n&&ht.callBack(o),s&&Gt.longPolling()}else if(91101==e.ErrorCode)ae.error("多实例登录，被kick"),i&&i();else if(w++,ae.warn("longPolling接口第"+w+"次报错: "+e.ErrorInfo),w<=10)setTimeout(ne,100);else{D=b.OFF;var r={ActionStatus:d.FAIL,ErrorCode:b.OFF,ErrorInfo:"connection is off"};0==k&&ht.callBack(r),k=!0,ae.warn("5000毫秒之后,SDK会发起新的longPolling请求..."),setTimeout(ne,5e3)}},z=function(t,n){var o=[],r=[];r=n;for(var i in r){var s,u,a,l=r[i];l.From_Account==W.identifier?(s=!0,u=l.To_Account,a=""):(s=!1,u=l.From_Account,a="");var c=St.sessByTypeId(p.C2C,u);c||(c=new Ct(p.C2C,u,u,a,0,0));var f=new At(c,s,l.MsgSeq,l.MsgRandom,l.MsgTimeStamp,l.From_Account),g=null,d=null,I=null;for(var M in l.MsgBody){switch(g=l.MsgBody[M],I=g.MsgType){case m.TEXT:d=new At.Elem.Text(g.MsgContent.Text);break;case m.FACE:d=new At.Elem.Face(g.MsgContent.Index,g.MsgContent.Data);break;case m.IMAGE:d=new At.Elem.Images(g.MsgContent.UUID);for(var E in g.MsgContent.ImageInfoArray){var _=g.MsgContent.ImageInfoArray[E];d.addImage(new At.Elem.Images.Image(_.Type,_.Size,_.Width,_.Height,_.URL))}break;case m.SOUND:g.MsgContent?d=new At.Elem.Sound(g.MsgContent.UUID,g.MsgContent.Second,g.MsgContent.Size,l.From_Account,l.To_Account,g.MsgContent.Download_Flag,p.C2C):(I=m.TEXT,d=new At.Elem.Text("[语音消息]下载地址解析出错"));break;case m.LOCATION:d=new At.Elem.Location(g.MsgContent.Longitude,g.MsgContent.Latitude,g.MsgContent.Desc);break;case m.FILE:case m.FILE+" ":I=m.FILE,g.MsgContent?d=new At.Elem.File(g.MsgContent.UUID,g.MsgContent.FileName,g.MsgContent.FileSize,l.From_Account,l.To_Account,g.MsgContent.Download_Flag,p.C2C):(I=m.TEXT,d=new At.Elem.Text("[文件消息下载地址解析出错]"));break;case m.CUSTOM:try{var y=JSON.parse(g.MsgContent.Data);if(y&&y.userAction&&y.userAction==U.ING)continue}catch(e){}I=m.CUSTOM,d=new At.Elem.Custom(g.MsgContent.Data,g.MsgContent.Desc,g.MsgContent.Ext);break;default:I=m.TEXT,d=new At.Elem.Text("web端暂不支持"+g.MsgType+"消息")}f.elems.push(new At.Elem(I,d))}f.elems.length>0&&St.addMsg(f)&&o.push(f)}o.length>0&&St.updateTimeline(),o.length>0&&e&&e(o)},ne=function(){s&&Gt.longPolling()},oe=function(e){for(var t in e){var n=e[t];switch(n.Event){case C.GROUP_SYSTEM:ae.warn("handlerApplyJoinGroupSystemMsgs： handler new group system msg"),J(n.GroupTips,!0);break;default:ae.error("syncMsgs收到未知的群系统消息类型: Event="+n.Event)}}};this.syncMsgs=function(t,n){var o=[],r=[];ve(St.cookie,St.syncFlag,function(n){2==n.SyncFlag&&(St.syncFlag=0),r=n.MsgList,St.cookie=n.Cookie;for(var i in r){var s,u,a,l=r[i];l.From_Account==W.identifier?(s=!0,u=l.To_Account,a=""):(s=!1,u=l.From_Account,a="");var c=St.sessByTypeId(p.C2C,u);c||(c=new Ct(p.C2C,u,u,a,0,0));var f=new At(c,s,l.MsgSeq,l.MsgRandom,l.MsgTimeStamp,l.From_Account),g=null,d=null,I=null;for(var M in l.MsgBody){switch(g=l.MsgBody[M],I=g.MsgType){case m.TEXT:d=new At.Elem.Text(g.MsgContent.Text);break;case m.FACE:d=new At.Elem.Face(g.MsgContent.Index,g.MsgContent.Data);break;case m.IMAGE:d=new At.Elem.Images(g.MsgContent.UUID);for(var E in g.MsgContent.ImageInfoArray){var _=g.MsgContent.ImageInfoArray[E];d.addImage(new At.Elem.Images.Image(_.Type,_.Size,_.Width,_.Height,_.URL))}break;case m.SOUND:g.MsgContent?d=new At.Elem.Sound(g.MsgContent.UUID,g.MsgContent.Second,g.MsgContent.Size,l.From_Account,l.To_Account,g.MsgContent.Download_Flag,p.C2C):(I=m.TEXT,d=new At.Elem.Text("[语音消息]下载地址解析出错"));break;case m.LOCATION:d=new At.Elem.Location(g.MsgContent.Longitude,g.MsgContent.Latitude,g.MsgContent.Desc);break;case m.FILE:case m.FILE+" ":I=m.FILE,g.MsgContent?d=new At.Elem.File(g.MsgContent.UUID,g.MsgContent.FileName,g.MsgContent.FileSize,l.From_Account,l.To_Account,g.MsgContent.Download_Flag,p.C2C):(I=m.TEXT,d=new At.Elem.Text("[文件消息下载地址解析出错]"));break;case m.CUSTOM:try{var y=JSON.parse(g.MsgContent.Data);if(y&&y.userAction&&y.userAction==U.ING)continue}catch(e){}I=m.CUSTOM,d=new At.Elem.Custom(g.MsgContent.Data,g.MsgContent.Desc,g.MsgContent.Ext);break;default:I=m.TEXT,d=new At.Elem.Text("web端暂不支持"+g.MsgType+"消息")}f.elems.push(new At.Elem(I,d))}f.elems.length>0&&St.addMsg(f)&&o.push(f)}oe(n.EventArray),o.length>0&&St.updateTimeline(),t?t(o):o.length>0&&e&&e(o)},function(e){ae.error("getMsgs failed:"+e.ErrorInfo),n&&n(e)})},this.getC2CHistoryMsgs=function(e,t,n){if(e.Peer_Account||!n)if(e.MaxCnt||(e.MaxCnt=15),e.MaxCnt<=0&&n)n(ue.getReturnError("MaxCnt should be greater than 0",-14));else if(e.MaxCnt>15){if(n)return void n(ue.getReturnError("MaxCnt can not be greater than 15",-15))}else{null!=e.MsgKey&&void 0!==e.MsgKey||(e.MsgKey="");var o={Peer_Account:e.Peer_Account,MaxCnt:e.MaxCnt,LastMsgTime:e.LastMsgTime,MsgKey:e.MsgKey};be(o,function(n){var o=[],r=[];r=n.MsgList;var i=St.sessByTypeId(p.C2C,e.Peer_Account);i||(i=new Ct(p.C2C,e.Peer_Account,e.Peer_Account,"",0,0));for(var s in r){var u,a=r[s];a.From_Account==W.identifier?(u=!0,a.To_Account,""):(u=!1,a.From_Account,"");var l=new At(i,u,a.MsgSeq,a.MsgRandom,a.MsgTimeStamp,a.From_Account),c=null,f=null,g=null;for(var d in a.MsgBody){switch(c=a.MsgBody[d],g=c.MsgType){case m.TEXT:f=new At.Elem.Text(c.MsgContent.Text);break;case m.FACE:f=new At.Elem.Face(c.MsgContent.Index,c.MsgContent.Data);break;case m.IMAGE:f=new At.Elem.Images(c.MsgContent.UUID);for(var I in c.MsgContent.ImageInfoArray){var M=c.MsgContent.ImageInfoArray[I];f.addImage(new At.Elem.Images.Image(M.Type,M.Size,M.Width,M.Height,M.URL))}break;case m.SOUND:c.MsgContent?f=new At.Elem.Sound(c.MsgContent.UUID,c.MsgContent.Second,c.MsgContent.Size,a.From_Account,a.To_Account,c.MsgContent.Download_Flag,p.C2C):(g=m.TEXT,f=new At.Elem.Text("[语音消息]下载地址解析出错"));break;case m.LOCATION:f=new At.Elem.Location(c.MsgContent.Longitude,c.MsgContent.Latitude,c.MsgContent.Desc);break;case m.FILE:case m.FILE+" ":g=m.FILE,c.MsgContent?f=new At.Elem.File(c.MsgContent.UUID,c.MsgContent.FileName,c.MsgContent.FileSize,a.From_Account,a.To_Account,c.MsgContent.Download_Flag,p.C2C):(g=m.TEXT,f=new At.Elem.Text("[文件消息下载地址解析出错]"));break;case m.CUSTOM:g=m.CUSTOM,f=new At.Elem.Custom(c.MsgContent.Data,c.MsgContent.Desc,c.MsgContent.Ext);break;default:g=m.TEXT,f=new At.Elem.Text("web端暂不支持"+c.MsgType+"消息")}l.elems.push(new At.Elem(g,f))}St.addMsg(l),o.push(l)}if(St.updateTimeline(),t){var E={Complete:n.Complete,MsgCount:o.length,LastMsgTime:n.LastMsgTime,MsgKey:n.MsgKey,MsgList:o};i.isFinished(n.Complete),t(E)}},function(e){ae.error("getC2CHistoryMsgs failed:"+e.ErrorInfo),n&&n(e)})}else n(ue.getReturnError("Peer_Account is empty",-13))},this.syncGroupMsgs=function(t,n,o){if(t.ReqMsgSeq<=0){if(o){var r=ue.getReturnError("ReqMsgSeq must be greater than 0",-16);o(r)}}else{var i={GroupId:t.GroupId,ReqMsgSeq:t.ReqMsgSeq,ReqMsgNumber:t.ReqMsgNumber};tt(i,function(t){var o=[],r=(t.GroupId,t.RspMsgList),i=t.IsFinished;if(null!=r&&void 0!==r){for(var s=r.length-1;s>=0;s--){var u=r[s];if(!u.IsPlaceMsg&&u.From_Account&&u.MsgBody&&0!=u.MsgBody.length){var a=re(u,!0,!0,i);a&&o.push(a)}}o.length>0&&St.updateTimeline(),n?n(o):o.length>0&&e&&e(o)}else n&&n([])},function(e){ae.error("getGroupMsgs failed:"+e.ErrorInfo),o&&o(e)})}};var re=function(e,n,o,r){if(e.IsPlaceMsg||!e.From_Account||!e.MsgBody||0==e.MsgBody.length)return null;var i,s,u,a=e.ToGroupId,l=a;e.GroupInfo&&e.GroupInfo.GroupName&&(l=e.GroupInfo.GroupName),u=e.From_Account,e.GroupInfo&&e.GroupInfo.From_AccountNick&&(u=e.GroupInfo.From_AccountNick),e.From_Account==W.identifier?(i=!0,e.From_Account,s=""):(i=!1,e.From_Account,s="");var c=St.sessByTypeId(p.GROUP,a);c||(c=new Ct(p.GROUP,a,l,s,0,0)),void 0!==r&&c.isFinished(r||0);var f=S.COMMON;if(C.GROUP_TIP==e.Event||C.GROUP_TIP2==e.Event){f=S.TIP;var g=e.MsgBody;e.MsgBody=[],e.MsgBody.push({MsgType:m.GROUP_TIP,MsgContent:g})}else e.MsgPriority&&(e.MsgPriority==G.REDPACKET?f=S.REDPACKET:e.MsgPriority==G.LOVEMSG&&(f=S.LOVEMSG));var d=new At(c,i,e.MsgSeq,e.MsgRandom,e.MsgTimeStamp,e.From_Account,f,u),I=null,M=null,E=null;for(var _ in e.MsgBody){switch(I=e.MsgBody[_],E=I.MsgType){case m.TEXT:M=new At.Elem.Text(I.MsgContent.Text);break;case m.FACE:M=new At.Elem.Face(I.MsgContent.Index,I.MsgContent.Data);break;case m.IMAGE:M=new At.Elem.Images(I.MsgContent.UUID);for(var y in I.MsgContent.ImageInfoArray)M.addImage(new At.Elem.Images.Image(I.MsgContent.ImageInfoArray[y].Type,I.MsgContent.ImageInfoArray[y].Size,I.MsgContent.ImageInfoArray[y].Width,I.MsgContent.ImageInfoArray[y].Height,I.MsgContent.ImageInfoArray[y].URL));break;case m.SOUND:I.MsgContent?M=new At.Elem.Sound(I.MsgContent.UUID,I.MsgContent.Second,I.MsgContent.Size,e.From_Account,e.To_Account,I.MsgContent.Download_Flag,p.GROUP):(E=m.TEXT,M=new At.Elem.Text("[语音消息]下载地址解析出错"));break;case m.LOCATION:M=new At.Elem.Location(I.MsgContent.Longitude,I.MsgContent.Latitude,I.MsgContent.Desc);break;case m.FILE:case m.FILE+" ":E=m.FILE;_e(I.MsgContent.UUID,e.From_Account,I.MsgContent.FileName);I.MsgContent?M=new At.Elem.File(I.MsgContent.UUID,I.MsgContent.FileName,I.MsgContent.FileSize,e.From_Account,e.To_Account,I.MsgContent.Download_Flag,p.GROUP):(E=m.TEXT,M=new At.Elem.Text("[文件消息]地址解析出错"));break;case m.GROUP_TIP:var h=I.MsgContent.OpType;if(M=new At.Elem.GroupTip(h,I.MsgContent.Operator_Account,a,e.GroupInfo.GroupName,I.MsgContent.List_Account),O.JOIN==h||O.QUIT==h)M.setGroupMemberNum(I.MsgContent.MemberNum);else if(O.MODIFY_GROUP_INFO==h){var T=!1,A={GroupId:a,GroupFaceUrl:null,GroupName:null,OwnerAccount:null,GroupNotification:null,GroupIntroduction:null},R=I.MsgContent.MsgGroupNewInfo;if(R.GroupFaceUrl){var v=new At.Elem.GroupTip.GroupInfo(F.FACE_URL,R.GroupFaceUrl);M.addGroupInfo(v),T=!0,A.GroupFaceUrl=R.GroupFaceUrl}if(R.GroupName){var N=new At.Elem.GroupTip.GroupInfo(F.NAME,R.GroupName);M.addGroupInfo(N),T=!0,A.GroupName=R.GroupName}if(R.Owner_Account){var P=new At.Elem.GroupTip.GroupInfo(F.OWNER,R.Owner_Account);M.addGroupInfo(P),T=!0,A.OwnerAccount=R.Owner_Account}if(R.GroupNotification){var b=new At.Elem.GroupTip.GroupInfo(F.NOTIFICATION,R.GroupNotification);M.addGroupInfo(b),T=!0,A.GroupNotification=R.GroupNotification}if(R.GroupIntroduction){var L=new At.Elem.GroupTip.GroupInfo(F.INTRODUCTION,R.GroupIntroduction);M.addGroupInfo(L),T=!0,A.GroupIntroduction=R.GroupIntroduction}0==n&&T&&t&&t(A)}else if(O.MODIFY_MEMBER_INFO==h){var U=I.MsgContent.MsgMemberInfo;for(var D in U){var k=U[D];M.addMemberInfo(new At.Elem.GroupTip.MemberInfo(k.User_Account,k.ShutupTime))}}break;case m.CUSTOM:E=m.CUSTOM,M=new At.Elem.Custom(I.MsgContent.Data,I.MsgContent.Desc,I.MsgContent.Ext);break;default:E=m.TEXT,M=new At.Elem.Text("web端暂不支持"+I.MsgType+"消息")}d.elems.push(new At.Elem(E,M))}return 0==o?d:St.addMsg(d)?d:null};this.init=function(u,a,c){if(u.onMsgNotify||ae.warn("listeners.onMsgNotify is empty"),e=u.onMsgNotify,u.onBigGroupMsgNotify?l=u.onBigGroupMsgNotify:ae.warn("listeners.onBigGroupMsgNotify is empty"),u.onC2cEventNotifys?onC2cEventCallbacks=u.onC2cEventNotifys:ae.warn("listeners.onC2cEventNotifys is empty"),u.onGroupSystemNotifys?n=u.onGroupSystemNotifys:ae.warn("listeners.onGroupSystemNotifys is empty"),u.onGroupInfoChangeNotify?t=u.onGroupInfoChangeNotify:ae.warn("listeners.onGroupInfoChangeNotify is empty"),u.onFriendSystemNotifys?o=u.onFriendSystemNotifys:ae.warn("listeners.onFriendSystemNotifys is empty"),u.onProfileSystemNotifys?r=u.onProfileSystemNotifys:ae.warn("listeners.onProfileSystemNotifys is empty"),u.onKickedEventCall?i=u.onKickedEventCall:ae.warn("listeners.onKickedEventCall is empty"),u.onAppliedDownloadUrl?onAppliedDownloadUrl=u.onAppliedDownloadUrl:ae.warn("listeners.onAppliedDownloadUrl is empty"),W.identifier&&W.userSig)T(function(e){ae.info("initMyGroupMaxSeqs success"),h(function(e){if(ae.info("initIpAndAuthkey success"),a){ae.info("login success(have login state))");var t={ActionStatus:d.OK,ErrorCode:0,ErrorInfo:"login success"};a(t)}Gt.setLongPollingOn(!0),s&&Gt.longPolling(a)},c)},c);else if(a){var p={ActionStatus:d.OK,ErrorCode:0,ErrorInfo:"login success(no login state)"};a(p)}},this.sendMsg=function(e,t,n){Oe(e,function(o){if(e.sess.type()==p.C2C){if(!St.addMsg(e)){var r="sendMsg: addMsg failed!",i=ue.getReturnError(r,-17);return ae.error(r),void(n&&n(i))}St.updateTimeline()}t&&t(o)},function(e){n&&n(e)})}},Ot=new function(){this.fileMd5=null;var e=function(e,t,n){function o(){var t=a*s,n=t+s>=e.size?e.size:t+s,o=i.call(e,t,n);r.readAsArrayBuffer(o)}var r=null;try{r=new FileReader}catch(e){if(n)return void n(ue.getReturnError("当前浏览器不支持FileReader",-18))}var i=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice;if(i||!n){var s=2097152,u=Math.ceil(e.size/s),a=0,l=new SparkMD5;r.onload=function(e){for(var n="",r=new Uint8Array(e.target.result),i=r.byteLength,s=0;s<i;s++)n+=String.fromCharCode(r[s]);l.appendBinary(n),++a<u?o():(this.fileMd5=l.end(),t&&t(this.fileMd5))},o()}else n(ue.getReturnError("当前浏览器不支持FileAPI",-19))};this.submitUploadFileForm=function(e,t,n){function o(e,t){var n=document.createElement("input");n.type="hidden",n.name=e,n.value=t,f.appendChild(n)}function r(){var e;try{e=JSON.parse(m.contentWindow.name)||{}}catch(t){e={}}e.ActionStatus?(m.src="about:blank",m.parentNode.removeChild(m),m=null,e.ActionStatus==d.OK?t&&t(e):n&&n(e)):setTimeout(r,100)}var i,s,u=e.formId,a=e.fileId,l="uploadResultIframe_"+H++,c=e.To_Account,p=e.businessType,f=document.getElementById(u);if(!f)return i="获取表单对象为空: formId="+u+"(formId非法)",s=ue.getReturnError(i,-20),void(n&&n(s));var g=document.getElementById(a);if(!g)return i="获取文件对象为空: fileId="+a+"(没有选择文件或者fileId非法)",s=ue.getReturnError(i,-21),void(n&&n(s));g.name="file";var m=document.createElement("iframe");m.name=l,m.id=l,m.style.display="none",document.body.appendChild(m);var I,E="https://pic.tim.qq.com/v4/openpic/"+(I=Ie()?"pic_up":"pic_up_test")+"?tinyid="+W.tinyid+"&a2="+W.a2+"&sdkappid="+W.sdkAppID+"&accounttype="+W.accountType+"&contenttype=http";f.action=E,f.method="post",f.target=l,o("App_Version",h.APP_VERSION),o("From_Account",W.identifier),o("To_Account",c),o("Seq",ce().toString()),o("Timestamp",le().toString()),o("Random",pe().toString()),o("Busi_Id",p),o("PkgFlag",M.RAW_DATA.toString()),o("Auth_Key",X),o("Server_Ver",h.SERVER_VERSION.toString()),o("File_Type",e.fileType),setTimeout(r,500),f.submit()},this.uploadFile=function(t,n,o){var r={init:function(e,t,n){var o=this;o.file=e.file,o.onProgressCallBack=e.onProgressCallBack,e.abortButton&&(e.abortButton.onclick=o.abortHandler),o.total=o.file.size,o.loaded=0,o.step=1105920,o.sliceSize=0,o.sliceOffset=0,o.timestamp=le(),o.seq=ce(),o.random=pe(),o.fromAccount=W.identifier,o.toAccount=e.To_Account,o.fileMd5=e.fileMd5,o.businessType=e.businessType,o.fileType=e.fileType,o.cbOk=t,o.cbErr=n,o.reader=new FileReader,o.blobSlice=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice,o.reader.onloadstart=o.onLoadStart,o.reader.onprogress=o.onProgress,o.reader.onabort=o.onAbort,o.reader.onerror=o.onerror,o.reader.onload=o.onLoad,o.reader.onloadend=o.onLoadEnd},upload:function(){r.readBlob(0)},onLoadStart:function(){},onProgress:function(e){var t=r;t.loaded+=e.loaded,t.onProgressCallBack&&t.onProgressCallBack(t.loaded,t.total)},onAbort:function(){},onError:function(){},onLoad:function(e){var t=r;if(e.target.readyState==FileReader.DONE){var n=e.target.result,o=n.indexOf(",");-1!=o&&(n=n.substr(o+1));var i={From_Account:t.fromAccount,To_Account:t.toAccount,Busi_Id:t.businessType,File_Type:t.fileType,File_Str_Md5:t.fileMd5,PkgFlag:M.BASE64_DATA,File_Size:t.total,Slice_Offset:t.sliceOffset,Slice_Size:t.sliceSize,Slice_Data:n,Seq:t.seq,Timestamp:t.timestamp,Random:t.random},s=function(e){if(0==e.IsFinish)t.loaded=e.Next_Offset,t.loaded<t.total?t.readBlob(t.loaded):t.loaded=t.total;else if(t.cbOk){var n={ActionStatus:e.ActionStatus,ErrorCode:e.ErrorCode,ErrorInfo:e.ErrorInfo,File_UUID:e.File_UUID,File_Size:e.Next_Offset,URL_INFO:e.URL_INFO,Download_Flag:e.Download_Flag};t.fileType==y.FILE&&(n.URL_INFO=_e(e.File_UUID,W.identifier,t.file.name)),t.cbOk(n)}K=0};It(i,s,function e(n){K<20?(K++,setTimeout(function(){It(i,s,e)},1e3)):t.cbErr(n)})}},onLoadEnd:function(){},readBlob:function(e){var t,n=r,o=n.file,i=e+n.step;i>n.total?(i=n.total,n.sliceSize=i-e):n.sliceSize=n.step,n.sliceOffset=e,t=n.blobSlice.call(o,e,i),n.reader.readAsDataURL(t)},abortHandler:function(){var e=r;e.reader&&e.reader.abort()}};e(t.file,function(e){ae.info("fileMd5: "+e),t.fileMd5=e,r.init(t,n,o),r.upload()},o)}};o.SESSION_TYPE=p,o.MSG_MAX_LENGTH=g,o.C2C_MSG_SUB_TYPE=T,o.GROUP_MSG_SUB_TYPE=S,o.MSG_ELEMENT_TYPE=m,o.GROUP_TIP_TYPE=O,o.IMAGE_TYPE=I,o.GROUP_SYSTEM_TYPE=R,o.FRIEND_NOTICE_TYPE=v,o.GROUP_TIP_MODIFY_GROUP_INFO_TYPE=F,o.BROWSER_INFO=u,o.Emotions=o.EmotionPicData=se,o.EmotionDataIndexs=o.EmotionPicDataIndex=ie,o.TLS_ERROR_CODE=P,o.CONNECTION_STATUS=b,o.UPLOAD_PIC_BUSSINESS_TYPE=L,o.RECENT_CONTACT_TYPE=f,o.UPLOAD_RES_TYPE=y,o.Tool=ue,o.Log=ae,o.Msg=At,o.Session=Ct,o.MsgStore={sessMap:function(){return St.sessMap()},sessCount:function(){return St.sessCount()},sessByTypeId:function(e,t){return St.sessByTypeId(e,t)},delSessByTypeId:function(e,t){return St.delSessByTypeId(e,t)},resetCookieAndSyncFlag:function(){return St.resetCookieAndSyncFlag()}},o.Resources=re,o.login=o.init=function(e,t,n,o,r){ht.init(t.onConnNotify,o,r),t.jsonpCallback&&(J=t.jsonpCallback),Te(e,t,n,o,r)},o.logout=o.offline=function(e,t){return Ge("instance",e,t)},o.logoutAll=function(e,t){return Ge("all",e,t)},o.sendMsg=function(e,t,n){return Gt.sendMsg(e,t,n)},o.syncMsgs=function(e,t){return Gt.syncMsgs(e,t)},o.getC2CHistoryMsgs=function(e,t,n){return Gt.getC2CHistoryMsgs(e,t,n)},o.syncGroupMsgs=function(e,t,n){return Gt.syncGroupMsgs(e,t,n)},o.c2CMsgReaded=function(e,t,n){return St.c2CMsgReaded(e,t,n)},o.groupMsgReaded=function(e,t,n){return nt(e,t,n)},o.setAutoRead=function(e,t,n){return St.setAutoRead(e,t,n)},o.createGroup=function(e,t,n){return Le(e,t,n)},o.createGroupHigh=function(e,t,n){return Ue(e,t,n)},o.applyJoinGroup=function(e,t,n){return ke(e,t,n)},o.handleApplyJoinGroupPendency=function(e,t,n){return qe(e,t,n)},o.deleteApplyJoinGroupPendency=function(e,t,n){return Pe(e,t,n)},o.quitGroup=function(e,t,n){return xe(e,t,n)},o.searchGroupByName=function(e,t,n){return Ke(e,t,n)},o.getGroupPublicInfo=function(e,t,n){return ze(e,t,n)},o.getGroupInfo=function(e,t,n){return Ve(e,t,n)},o.modifyGroupBaseInfo=function(e,t,n){return De(e,t,n)},o.getGroupMemberInfo=function(e,t,n){return Je(e,t,n)},o.addGroupMember=function(e,t,n){return He(e,t,n)},o.modifyGroupMember=function(e,t,n){return Ye(e,t,n)},o.deleteGroupMember=function(e,t,n){return Xe(e,t,n)},o.destroyGroup=function(e,t,n){return Qe(e,t,n)},o.changeGroupOwner=function(e,t,n){return We(e,t,n)},o.getJoinedGroupListHigh=function(e,t,n){return je(e,t,n)},o.getRoleInGroup=function(e,t,n){return $e(e,t,n)},o.forbidSendMsg=function(e,t,n){return Ze(e,t,n)},o.sendCustomGroupNotify=function(e,t,n){return et(e,t,n)},o.applyJoinBigGroup=function(e,t,n){return we(e,t,n)},o.quitBigGroup=function(e,t,n){return Be(e,t,n)},o.getProfilePortrait=function(e,t,n){return ct(e,t,n)},o.setProfilePortrait=function(e,t,n){return pt(e,t,n)},o.applyAddFriend=function(e,t,n){return rt(e,t,n)},o.getPendency=function(e,t,n){return st(e,t,n)},o.deletePendency=function(e,t,n){return ut(e,t,n)},o.responseFriend=function(e,t,n){return at(e,t,n)},o.getAllFriend=function(e,t,n){return lt(e,t,n)},o.deleteFriend=function(e,t,n){return it(e,t,n)},o.addBlackList=function(e,t,n){return ft(e,t,n)},o.deleteBlackList=function(e,t,n){return gt(e,t,n)},o.getBlackList=function(e,t,n){return dt(e,t,n)},o.getRecentContactList=function(e,t,n){return mt(e,t,n)},o.uploadFile=o.uploadPic=function(e,t,n){return Ot.uploadFile(e,t,n)},o.submitUploadFileForm=function(e,t,n){return Ot.submitUploadFileForm(e,t,n)},o.uploadFileByBase64=o.uploadPicByBase64=function(e,t,n){var o={To_Account:e.toAccount,Busi_Id:e.businessType,File_Type:e.File_Type,File_Str_Md5:e.fileMd5,PkgFlag:M.BASE64_DATA,File_Size:e.totalSize,Slice_Offset:0,Slice_Size:e.totalSize,Slice_Data:e.base64Str,Seq:ce(),Timestamp:le(),Random:pe()};return It(o,t,n)},o.setJsonpLastRspData=function(e){V="string"==typeof e?JSON.parse(e):e},o.getLongPollingId=function(e,t,n){return _t(0,t,n)},o.applyDownload=function(e,t,n){return yt(e,t,n)},o.onDownFile=function(e){window.open(re.downloadMap["uuid_"+e])},o.checkLogin=function(e,t){return me(e,t)}}(o),o}(); 
 			}); 
		define("utils/webim_wx.min.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";module.exports=function(){var e={},t={login:function(e,t,n){},syncMsgs:function(e,t){},getC2CHistoryMsgs:function(e,t,n){},syncGroupMsgs:function(e,t,n){},sendMsg:function(e,t,n){},logout:function(e,t){},setAutoRead:function(e,t,n){},getProfilePortrait:function(e,t,n){},setProfilePortrait:function(e,t,n){},applyAddFriend:function(e,t,n){},getPendency:function(e,t,n){},deletePendency:function(e,t,n){},responseFriend:function(e,t,n){},getAllFriend:function(e,t,n){},deleteFriend:function(e,t,n){},addBlackList:function(e,t,n){},getBlackList:function(e,t,n){},deleteBlackList:function(e,t,n){},uploadPic:function(e,t,n){},createGroup:function(e,t,n){},applyJoinGroup:function(e,t,n){},handleApplyJoinGroup:function(e,t,n){},deleteApplyJoinGroupPendency:function(e,t,n){},quitGroup:function(e,t,n){},getGroupPublicInfo:function(e,t,n){},getGroupInfo:function(e,t,n){},modifyGroupBaseInfo:function(e,t,n){},destroyGroup:function(e,t,n){},getJoinedGroupListHigh:function(e,t,n){},getGroupMemberInfo:function(e,t,n){},addGroupMember:function(e,t,n){},modifyGroupMember:function(e,t,n){},forbidSendMsg:function(e,t,n){},deleteGroupMember:function(e,t,n){},sendCustomGroupNotify:function(e,t,n){},Msg:function(e,t,n,o,r,i,s,u){},MsgStore:{sessMap:function(){return{}},sessCount:function(){return 0},sessByTypeId:function(e,t){return{}},delSessByTypeId:function(e,t){return!0},resetCookieAndSyncFlag:function(){},downloadMap:{}}};return function(t){var n={VERSION:"1.7.0",APPID:"537048168"},o=!0,r={FORMAL:{COMMON:"https://webim.tim.qq.com",PIC:"https://pic.tim.qq.com"},TEST:{COMMON:"https://test.tim.qq.com",PIC:"https://pic.tim.qq.com"}},i={},s={OPEN_IM:"openim",GROUP:"group_open_http_svc",FRIEND:"sns",PROFILE:"profile",RECENT_CONTACT:"recentcontact",PIC:"openpic",BIG_GROUP:"group_open_http_noauth_svc",BIG_GROUP_LONG_POLLING:"group_open_long_polling_http_noauth_svc",IM_OPEN_STAT:"imopenstat"},u={openim:"v4",group_open_http_svc:"v4",sns:"v4",profile:"v4",recentcontact:"v4",openpic:"v4",group_open_http_noauth_svc:"v1",group_open_long_polling_http_noauth_svc:"v1",imopenstat:"v4"},a={login:1,pic_up:3,apply_join_group:9,create_group:10,longpolling:18,send_group_msg:19,sendmsg:20},c={C2C:"C2C",GROUP:"GROUP"},l={C2C:1,GROUP:2},p={C2C:12e3,GROUP:8898},f={OK:"OK",FAIL:"FAIL"},g={TEXT:"TIMTextElem",FACE:"TIMFaceElem",IMAGE:"TIMImageElem",CUSTOM:"TIMCustomElem",SOUND:"TIMSoundElem",FILE:"TIMFileElem",LOCATION:"TIMLocationElem",GROUP_TIP:"TIMGroupTipElem"},d={ORIGIN:1,LARGE:2,SMALL:3},m={RAW_DATA:0,BASE64_DATA:1},I={BUSSINESS_ID:"10001",AUTH_KEY:"617574686b6579",SERVER_IP:"182.140.186.147"},M={SOUND:2106,FILE:2107},E={IMAGE:1,FILE:2,SHORT_VIDEO:3,SOUND:4},_={APP_VERSION:"2.1",SERVER_VERSION:1},y={C2C:1,GROUP_COMMON:3,GROUP_TIP:4,GROUP_SYSTEM:5,GROUP_TIP2:6,FRIEND_NOTICE:7,PROFILE_NOTICE:8,C2C_COMMON:9,C2C_EVENT:10},h={COMMON:0},C={READED:92},T={COMMON:0,LOVEMSG:1,TIP:2,REDPACKET:3},A={REDPACKET:1,COMMON:2,LOVEMSG:3},S={JOIN:1,QUIT:2,KICK:3,SET_ADMIN:4,CANCEL_ADMIN:5,MODIFY_GROUP_INFO:6,MODIFY_MEMBER_INFO:7},G={FACE_URL:1,NAME:2,OWNER:3,NOTIFICATION:4,INTRODUCTION:5},O={JOIN_GROUP_REQUEST:1,JOIN_GROUP_ACCEPT:2,JOIN_GROUP_REFUSE:3,KICK:4,DESTORY:5,CREATE:6,INVITED_JOIN_GROUP_REQUEST:7,QUIT:8,SET_ADMIN:9,CANCEL_ADMIN:10,REVOKE:11,READED:15,CUSTOM:255},F={FRIEND_ADD:1,FRIEND_DELETE:2,PENDENCY_ADD:3,PENDENCY_DELETE:4,BLACK_LIST_ADD:5,BLACK_LIST_DELETE:6,PENDENCY_REPORT:7,FRIEND_UPDATE:8},R={PROFILE_MODIFY:1},v={OK:0,SIGNATURE_EXPIRATION:11},N={INIT:-1,ON:0,RECONNECT:1,OFF:9999},P={GROUP_MSG:1,C2C_MSG:2,USER_HEAD:3,GROUP_HEAD:4},b={ING:14,STOP:15},L=N.INIT,U=!1,D=0,k=6e4,w=null,q=0,x=0,B=0,K=null,z=null,V=0,J=[],H=null,Y=null,X={sdkAppID:null,appIDAt3rd:null,accountType:null,identifier:null,tinyid:null,identifierNick:null,userSig:null,a2:null,contentType:"json",apn:1},Q={},W=0,j={},$=0,Z=[],ee=[],te=[],ne={downloadMap:{}},oe={"[惊讶]":0,"[撇嘴]":1,"[色]":2,"[发呆]":3,"[得意]":4,"[流泪]":5,"[害羞]":6,"[闭嘴]":7,"[睡]":8,"[大哭]":9,"[尴尬]":10,"[发怒]":11,"[调皮]":12,"[龇牙]":13,"[微笑]":14,"[难过]":15,"[酷]":16,"[冷汗]":17,"[抓狂]":18,"[吐]":19,"[偷笑]":20,"[可爱]":21,"[白眼]":22,"[傲慢]":23,"[饿]":24,"[困]":25,"[惊恐]":26,"[流汗]":27,"[憨笑]":28,"[大兵]":29,"[奋斗]":30,"[咒骂]":31,"[疑问]":32,"[嘘]":33,"[晕]":34},re={},ie=new function(){this.formatTimeStamp=function(e,t){if(!e)return 0;var n;t=t||"yyyy-MM-dd hh:mm:ss";var o=new Date(1e3*e),r={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds()};n=/(y+)/.test(t)?t.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length)):t;for(var i in r)new RegExp("("+i+")").test(n)&&(n=n.replace(RegExp.$1,1==RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return n},this.groupTypeEn2Ch=function(e){var t=null;switch(e){case"Public":t="公开群";break;case"ChatRoom":t="聊天室";break;case"Private":t="讨论组";break;case"AVChatRoom":t="直播聊天室";break;default:t=e}return t},this.groupTypeCh2En=function(e){var t=null;switch(e){case"公开群":t="Public";break;case"聊天室":t="ChatRoom";break;case"讨论组":t="Private";break;case"直播聊天室":t="AVChatRoom";break;default:t=e}return t},this.groupRoleEn2Ch=function(e){var t=null;switch(e){case"Member":t="成员";break;case"Admin":t="管理员";break;case"Owner":t="群主";break;default:t=e}return t},this.groupRoleCh2En=function(e){var t=null;switch(e){case"成员":t="Member";break;case"管理员":t="Admin";break;case"群主":t="Owner";break;default:t=e}return t},this.groupMsgFlagEn2Ch=function(e){var t=null;switch(e){case"AcceptAndNotify":t="接收并提示";break;case"AcceptNotNotify":t="接收不提示";break;case"Discard":t="屏蔽";break;default:t=e}return t},this.groupMsgFlagCh2En=function(e){var t=null;switch(e){case"接收并提示":t="AcceptAndNotify";break;case"接收不提示":t="AcceptNotNotify";break;case"屏蔽":t="Discard";break;default:t=e}return t},this.formatText2Html=function(e){var t=e;return t&&(t=this.xssFilter(t),t=t.replace(/ /g,"&nbsp;"),t=t.replace(/\n/g,"<br/>")),t},this.formatHtml2Text=function(e){var t=e;return t&&(t=t.replace(/&nbsp;/g," "),t=t.replace(/<br\/>/g,"\n")),t},this.getStrBytes=function(e){if(null==e||void 0===e)return 0;if("string"!=typeof e)return 0;var t,n,o,r=0;for(n=0,o=e.length;n<o;n++)r+=(t=e.charCodeAt(n))<=127?1:t<=2047?2:t<=65535?3:4;return r},this.xssFilter=function(e){return e=e.toString(),e=e.replace(/[<]/g,"&lt;"),e=e.replace(/[>]/g,"&gt;"),e=e.replace(/"/g,"&quot;")},this.trimStr=function(e){return e?(e=e.toString()).replace(/(^\s*)|(\s*$)/g,""):""},this.validNumber=function(e){return(e=e.toString()).match(/(^\d{1,8}$)/g)},this.getReturnError=function(e,t){return t||(t=-100),{ActionStatus:f.FAIL,ErrorCode:t,ErrorInfo:e+"["+t+"]"}},this.setCookie=function(e,t,n,o,r){var i=new Date;i.setTime(i.getTime()+1e3*n),document.cookie=e+"="+escape(t)+";expires="+i.toGMTString()},this.getCookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},this.delCookie=function(e){var t=new Date;t.setTime(t.getTime()-1);var n=this.getCookie(e);null!=n&&(document.cookie=e+"="+escape(n)+";expires="+t.toGMTString())},this.getQueryString=function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=location.search.substr(1).match(t);return null!=n?unescape(n[2]):null}},se=new function(){var e=!0;this.setOn=function(t){e=t},this.getOn=function(){return e},this.error=function(t){try{e&&console.error(t)}catch(e){}},this.warn=function(t){try{e&&console.warn(t)}catch(e){}},this.info=function(t){try{e&&console.info(t)}catch(e){}},this.debug=function(t){try{e&&console.debug(t)}catch(e){}}},ue=function(e){return e||(e=new Date),Math.round(e.getTime()/1e3)},ae=function(){return $?$+=1:$=Math.round(1e7*Math.random()),$},ce=function(){return Math.round(4294967296*Math.random())},le=function(e,t,n,o,r,i,s){wx.request({url:t,data:n,dataType:"json",method:e,header:{"Content-Type":"application/json"},success:function(e){D=q=0,i&&i(e.data)},fail:function(e){setTimeout(function(){var e=ie.getReturnError("请求服务器失败,请检查你的网络是否正常",-2);s&&s(e)},16)}})},pe=function(e,t,n,o,r,i,s){le(e,t,JSON.stringify(n),0,0,function(e){var t=null;e&&(t=JSON.parse(e)),i&&i(t)},s)},fe=function(){return X.sdkAppID&&X.identifier},ge=function(e,t){if(!fe()){if(t){var n=ie.getReturnError("请登录",-4);e&&e(n)}return!1}return!0},de=function(){return o},me=function(e,t,o,i){var a=r;a=de()?r.FORMAL.COMMON:r.TEST.COMMON,e==s.PIC&&(a=de()?r.FORMAL.PIC:r.TEST.PIC);var c=a+"/"+u[e]+"/"+e+"/"+t+"?websdkappid="+n.APPID+"&v="+n.VERSION;if(fe()){if("login"==t)c+="&identifier="+encodeURIComponent(X.identifier)+"&usersig="+X.userSig;else if(X.tinyid&&X.a2)c+="&tinyid="+X.tinyid+"&a2="+X.a2;else if(i)return se.error("tinyid或a2为空["+e+"]["+t+"]"),i(ie.getReturnError("tinyid或a2为空["+e+"]["+t+"]",-5)),!1;c+="&contenttype="+X.contentType}return c+="&sdkappid="+X.sdkAppID+"&accounttype="+X.accountType+"&apn="+X.apn+"&reqtime="+ue()},Ie=function(e,t){var n=null;return H&&J[0]?n="http://"+J[0]+"/asn.com/stddownload_common_file?authkey="+H+"&bid="+I.BUSSINESS_ID+"&subbid="+X.sdkAppID+"&fileid="+e+"&filetype="+M.SOUND+"&openid="+t+"&ver=0":se.error("拼接语音下载url不报错：ip或者authkey为空"),n},Me=function(e,t,n){var o=null;return H&&J[0]?o="http://"+J[0]+"/asn.com/stddownload_common_file?authkey="+H+"&bid="+I.BUSSINESS_ID+"&subbid="+X.sdkAppID+"&fileid="+e+"&filetype="+M.FILE+"&openid="+t+"&ver=0&filename="+encodeURIComponent(n):se.error("拼接文件下载url不报错：ip或者authkey为空"),ne.downloadMap["uuid_"+e]=o,o},Ee=function(e,t,n,o,r,i,s){var u={From_Account:t,To_Account:r,os_platform:10,Timestamp:ue().toString(),Random:ce().toString(),request_info:[{busi_id:i,download_flag:o,type:s,uuid:e,version:_.SERVER_VERSION,auth_key:H,ip:J[0]}]};Et(u,function(e){0==e.error_code&&e.response_info&&(ne.downloadMap["uuid_"+u.uuid]=e.response_info.url),onAppliedDownloadUrl&&onAppliedDownloadUrl({uuid:u.uuid,url:e.response_info.url,maps:ne.downloadMap})},function(e){se.error("获取下载地址失败",u.uuid)})},_e=function(){for(var e in j){var t=j[e];t&&(t.abort(),j[W]=null)}W=0,j={}},ye=function(){_e(),X={sdkAppID:null,appIDAt3rd:null,accountType:null,identifier:null,identifierNick:null,userSig:null,contentType:"json",apn:1},Q={},$=0,B=0,K=null,te=[],At.clear(),w=null},he=function(e,t,n,r,i){return ye(),n&&(Q=n),0==Q.isAccessFormalEnv&&(se.error("请切换为正式环境"),o=Q.isAccessFormalEnv),0==Q.isLogOn&&se.setOn(Q.isLogOn),!e&&i?void i(ie.getReturnError("loginInfo is empty",-6)):!e.sdkAppID&&i?void i(ie.getReturnError("loginInfo.sdkAppID is empty",-7)):!e.accountType&&i?void i(ie.getReturnError("loginInfo.accountType is empty",-8)):(e.identifier&&(X.identifier=e.identifier.toString()),e.identifier&&!e.userSig&&i?void i(ie.getReturnError("loginInfo.userSig is empty",-9)):(e.userSig&&(X.userSig=e.userSig.toString()),X.sdkAppID=e.sdkAppID,X.accountType=e.accountType,void(X.identifier&&X.userSig?Te(function(e,n){At.init(t,function(t){r&&(t.identifierNick=e,t.headurl=n,r(t))},i)},i):At.init(t,r,i))))},Ce=function(e,t,o){if("longpolling"!=e||60008!=t&&91101!=t){var r=a[e];if(r){var i=ue(),s=null,u={Code:t,ErrMsg:o};if(X.a2?s=X.a2.substring(0,10)+"_"+i+"_"+ce():X.userSig&&(s=X.userSig.substring(0,10)+"_"+i+"_"+ce()),s){var c={UniqKey:s,EventId:r,ReportTime:i,MsgCmdErrorCode:u};if("login"==e){var l=[];l.push(c),It({EvtItems:l,MainVersion:n.VERSION,Version:"0"},function(e){l=null},function(e){l=null})}else te.push(c),te.length>=20&&It({EvtItems:te,MainVersion:n.VERSION,Version:"0"},function(e){te=[]},function(e){te=[]})}}}},Te=function(e,t){_t.apiCall(s.OPEN_IM,"login",{State:"Online"},function(n){if(n.TinyId)X.tinyid=n.TinyId;else if(t)return void t(ie.getReturnError("TinyId is empty",-10));if(n.A2Key)X.a2=n.A2Key;else if(t)return void t(ie.getReturnError("A2Key is empty",-11));var o=["Tag_Profile_IM_Nick","Tag_Profile_IM_Image"],r={From_Account:X.identifier,To_Account:[X.identifier],LastStandardSequence:0,TagList:o};at(r,function(t){var n;if(t.UserProfileItem&&t.UserProfileItem.length>0)for(var o in t.UserProfileItem)for(var r in t.UserProfileItem[o].ProfileItem)switch(t.UserProfileItem[o].ProfileItem[r].Tag){case"Tag_Profile_IM_Nick":(n=t.UserProfileItem[o].ProfileItem[r].Value)&&(X.identifierNick=n);break;case"Tag_Profile_IM_Image":image=t.UserProfileItem[o].ProfileItem[r].Value,image&&(X.headurl=image)}e&&e(X.identifierNick,X.headurl)},t)},t)},Ae=function(e,t,n){if(!ge(n,!1))return ye(),void(t&&t({ActionStatus:f.OK,ErrorCode:0,ErrorInfo:"logout success"}));"all"==e?_t.apiCall(s.OPEN_IM,"logout",{},function(e){ye(),t&&t(e)},n):_t.apiCall(s.OPEN_IM,"longpollinglogout",{LongPollingId:w},function(e){ye(),t&&t(e)},n)},Se=function(e,t,n){if(ge(n,!0)){var o=null;switch(e.sess.type()){case c.C2C:o={From_Account:X.identifier,To_Account:e.sess.id().toString(),MsgTimeStamp:e.time,MsgSeq:e.seq,MsgRandom:e.random,MsgBody:[]};break;case c.GROUP:var r=e.getSubType();switch(o={GroupId:e.sess.id().toString(),From_Account:X.identifier,Random:e.random,MsgBody:[]},r){case T.COMMON:o.MsgPriority="COMMON";break;case T.REDPACKET:o.MsgPriority="REDPACKET";break;case T.LOVEMSG:o.MsgPriority="LOVEMSG";break;case T.TIP:se.error("不能主动发送群提示消息,subType="+r);break;default:return void se.error("发送群消息时，出现未知子消息类型：subType="+r)}}for(var i in e.elems){var u=e.elems[i],a=null,l=u.type;switch(l){case g.TEXT:a={Text:u.content.text};break;case g.FACE:a={Index:u.content.index,Data:u.content.data};break;case g.IMAGE:var p=[];for(var f in u.content.ImageInfoArray)p.push({Type:u.content.ImageInfoArray[f].type,Size:u.content.ImageInfoArray[f].size,Width:u.content.ImageInfoArray[f].width,Height:u.content.ImageInfoArray[f].height,URL:u.content.ImageInfoArray[f].url});a={UUID:u.content.UUID,ImageInfoArray:p};break;case g.SOUND:se.warn("web端暂不支持发送语音消息");continue;case g.LOCATION:se.warn("web端暂不支持发送地理位置消息");continue;case g.FILE:a={UUID:u.content.uuid,FileName:u.content.name,FileSize:u.content.size,DownloadFlag:u.content.downFlag};break;case g.CUSTOM:a={Data:u.content.data,Desc:u.content.desc,Ext:u.content.ext},l=g.CUSTOM;break;default:se.warn("web端暂不支持发送"+u.type+"消息");continue}e.PushInfoBoolean&&(o.OfflinePushInfo=e.PushInfo),o.MsgBody.push({MsgType:l,MsgContent:a})}e.sess.type()==c.C2C?_t.apiCall(s.OPEN_IM,"sendmsg",o,t,n):e.sess.type()==c.GROUP&&_t.apiCall(s.GROUP,"send_group_msg",o,t,n)}},Ge=function(e,t,n){(o||"undefined"==typeof stopPolling||1!=stopPolling)&&ge(n,!0)&&_t.apiCall(s.OPEN_IM,"longpolling",e,t,n,k,!0)},Oe=function(e,t,n,o){_t.apiCall(s.BIG_GROUP_LONG_POLLING,"get_msg",e,t,n,o)},Fe=function e(t,n,o,r){ge(r,!0)&&_t.apiCall(s.OPEN_IM,"getmsg",{Cookie:t,SyncFlag:n},function(t){if(t.MsgList&&t.MsgList.length)for(var n in t.MsgList)Z.push(t.MsgList[n]);1==t.SyncFlag?e(t.Cookie,t.SyncFlag,o,r):(t.MsgList=Z,Z=[],o&&o(t))},r)},Re=function(e,t,n,o){if(ge(o,!0)){var r=[];for(var i in t){var u={To_Account:t[i].toAccount,LastedMsgTime:t[i].lastedMsgTime};r.push(u)}_t.apiCall(s.OPEN_IM,"msgreaded",{C2CMsgReaded:{Cookie:e,C2CMsgReadedItem:r}},n,o)}},ve=function(e,t,n){ge(n,!0)&&_t.apiCall(s.OPEN_IM,"deletemsg",e,t,n)},Ne=function e(t,n,o){ge(o,!0)&&_t.apiCall(s.OPEN_IM,"getroammsg",t,function(r){var i=t.MaxCnt,s=r.Complete,u=r.MaxCnt,a=r.MsgKey,c=r.LastMsgTime;if(r.MsgList&&r.MsgList.length)for(var l in r.MsgList)ee.push(r.MsgList[l]);var p=null;0==s&&u<i&&(p={Peer_Account:t.Peer_Account,MaxCnt:i-u,LastMsgTime:c,MsgKey:a}),p?e(p,n,o):(r.MsgList=ee,ee=[],n&&n(r))},o)},Pe=function(e,t,n){if(ge(n,!0)){for(var o={Type:e.Type,Name:e.Name},r=[],i=0;i<e.MemberList.length;i++)r.push({Member_Account:e.MemberList[i]});o.MemberList=r,e.GroupId&&(o.GroupId=e.GroupId),e.Owner_Account&&(o.Owner_Account=e.Owner_Account),e.Introduction&&(o.Introduction=e.Introduction),e.Notification&&(o.Notification=e.Notification),e.MaxMemberCount&&(o.MaxMemberCount=e.MaxMemberCount),e.ApplyJoinOption&&(o.ApplyJoinOption=e.ApplyJoinOption),e.AppDefinedData&&(o.AppDefinedData=e.AppDefinedData),e.FaceUrl&&(o.FaceUrl=e.FaceUrl),_t.apiCall(s.GROUP,"create_group",o,t,n)}},be=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"create_group",e,t,n)},Le=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"modify_group_base_info",e,t,n)},Ue=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"apply_join_group",{GroupId:e.GroupId,ApplyMsg:e.ApplyMsg,UserDefinedField:e.UserDefinedField},t,n)},De=function(e,t,n){var o;o=ge(n,!1)?s.GROUP:s.BIG_GROUP,_t.apiCall(o,"apply_join_group",{GroupId:e.GroupId,ApplyMsg:e.ApplyMsg,UserDefinedField:e.UserDefinedField},function(o){if(o.JoinedStatus&&"JoinedSuccess"==o.JoinedStatus){if(!o.LongPollingKey)return void(n&&n(ie.getReturnError("The type of group is not AVChatRoom: groupid="+e.GroupId,-12)));At.setBigGroupLongPollingOn(!0),At.setBigGroupLongPollingKey(o.LongPollingKey),At.setBigGroupLongPollingMsgMap(e.GroupId,0),At.bigGroupLongPolling()}t&&t(o)},function(e){n&&n(e)})},ke=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"handle_apply_join_group",{GroupId:e.GroupId,Applicant_Account:e.Applicant_Account,HandleMsg:e.HandleMsg,Authentication:e.Authentication,MsgKey:e.MsgKey,ApprovalMsg:e.ApprovalMsg,UserDefinedField:e.UserDefinedField},t,function(e){if(10024==e.ErrorCode){if(t){var o={ActionStatus:f.OK,ErrorCode:0,ErrorInfo:"该申请已经被处理过"};t(o)}}else n&&n(e)})},we=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"quit_group",{GroupId:e.GroupId},t,n)},qe=function(e,t,n){var o;o=ge(n,!1)?s.GROUP:s.BIG_GROUP,_t.apiCall(o,"quit_group",{GroupId:e.GroupId},function(e){At.resetBigGroupLongPollingInfo(),t&&t(e)},n)},xe=function(e,t,n){_t.apiCall(s.GROUP,"search_group",e,t,n)},Be=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"get_group_public_info",{GroupIdList:e.GroupIdList,ResponseFilter:{GroupBasePublicInfoFilter:e.GroupBasePublicInfoFilter}},function(e){if(e.ErrorInfo="",e.GroupInfo)for(var o in e.GroupInfo){var r=e.GroupInfo[o].ErrorCode;r>0&&(e.ActionStatus=f.FAIL,e.GroupInfo[o].ErrorInfo="["+r+"]"+e.GroupInfo[o].ErrorInfo,e.ErrorInfo+=e.GroupInfo[o].ErrorInfo+"\n")}e.ActionStatus==f.FAIL?n&&n(e):t&&t(e)},n)},Ke=function(e,t,n){if(ge(n,!0)){var o={GroupIdList:e.GroupIdList,ResponseFilter:{GroupBaseInfoFilter:e.GroupBaseInfoFilter,MemberInfoFilter:e.MemberInfoFilter}};e.AppDefinedDataFilter_Group&&(o.ResponseFilter.AppDefinedDataFilter_Group=e.AppDefinedDataFilter_Group),e.AppDefinedDataFilter_GroupMember&&(o.ResponseFilter.AppDefinedDataFilter_GroupMember=e.AppDefinedDataFilter_GroupMember),_t.apiCall(s.GROUP,"get_group_info",o,t,n)}},ze=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"get_group_member_info",{GroupId:e.GroupId,Offset:e.Offset,Limit:e.Limit,MemberInfoFilter:e.MemberInfoFilter,MemberRoleFilter:e.MemberRoleFilter,AppDefinedDataFilter_GroupMember:e.AppDefinedDataFilter_GroupMember},t,n)},Ve=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"add_group_member",{GroupId:e.GroupId,Silence:e.Silence,MemberList:e.MemberList},t,n)},Je=function(e,t,n){if(ge(n,!0)){var o={};e.GroupId&&(o.GroupId=e.GroupId),e.Member_Account&&(o.Member_Account=e.Member_Account),e.Role&&(o.Role=e.Role),e.MsgFlag&&(o.MsgFlag=e.MsgFlag),e.ShutUpTime&&(o.ShutUpTime=e.ShutUpTime),e.NameCard&&(o.NameCard=e.NameCard),e.AppMemberDefinedData&&(o.AppMemberDefinedData=e.AppMemberDefinedData),_t.apiCall(s.GROUP,"modify_group_member_info",o,t,n)}},He=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"delete_group_member",{GroupId:e.GroupId,Silence:e.Silence,MemberToDel_Account:e.MemberToDel_Account,Reason:e.Reason},t,n)},Ye=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"destroy_group",{GroupId:e.GroupId},t,n)},Xe=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"change_group_owner",e,t,n)},Qe=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"get_joined_group_list",{Member_Account:e.Member_Account,Limit:e.Limit,Offset:e.Offset,GroupType:e.GroupType,ResponseFilter:{GroupBaseInfoFilter:e.GroupBaseInfoFilter,SelfInfoFilter:e.SelfInfoFilter}},t,n)},We=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"get_role_in_group",{GroupId:e.GroupId,User_Account:e.User_Account},t,n)},je=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"forbid_send_msg",{GroupId:e.GroupId,Members_Account:e.Members_Account,ShutUpTime:e.ShutUpTime},t,n)},$e=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"send_group_system_notification",e,t,n)},Ze=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"group_msg_get",{GroupId:e.GroupId,ReqMsgSeq:e.ReqMsgSeq,ReqMsgNumber:e.ReqMsgNumber},t,n)},et=function(e,t,n){ge(n,!0)&&_t.apiCall(s.GROUP,"msg_read_report",{GroupId:e.GroupId,MsgReadedSeq:e.MsgReadedSeq},t,n)},tt=function(e){var t=[];if(e.Fail_Account&&e.Fail_Account.length&&(t=e.Fail_Account),e.Invalid_Account&&e.Invalid_Account.length)for(var n in e.Invalid_Account)t.push(e.Invalid_Account[n]);if(t.length){e.ActionStatus=f.FAIL,e.ErrorCode=99999,e.ErrorInfo="";for(var o in t){var r=t[o];for(var i in e.ResultItem)if(e.ResultItem[i].To_Account==r){var s=e.ResultItem[i].ResultCode;e.ResultItem[i].ResultInfo="["+s+"]"+e.ResultItem[i].ResultInfo,e.ErrorInfo+=e.ResultItem[i].ResultInfo+"\n";break}}}return e},nt=function(e,t,n){ge(n,!0)&&_t.apiCall(s.FRIEND,"friend_add",{From_Account:X.identifier,AddFriendItem:e.AddFriendItem},function(e){var o=tt(e);o.ActionStatus==f.FAIL?n&&n(o):t&&t(o)},n)},ot=function(e,t,n){ge(n,!0)&&_t.apiCall(s.FRIEND,"friend_delete",{From_Account:X.identifier,To_Account:e.To_Account,DeleteType:e.DeleteType},function(e){var o=tt(e);o.ActionStatus==f.FAIL?n&&n(o):t&&t(o)},n)},rt=function(e,t,n){ge(n,!0)&&_t.apiCall(s.FRIEND,"pendency_get",{From_Account:X.identifier,PendencyType:e.PendencyType,StartTime:e.StartTime,MaxLimited:e.MaxLimited,LastSequence:e.LastSequence},t,n)},it=function(e,t,n){ge(n,!0)&&_t.apiCall(s.FRIEND,"pendency_delete",{From_Account:X.identifier,PendencyType:e.PendencyType,To_Account:e.To_Account},function(e){var o=tt(e);o.ActionStatus==f.FAIL?n&&n(o):t&&t(o)},n)},st=function(e,t,n){ge(n,!0)&&_t.apiCall(s.FRIEND,"friend_response",{From_Account:X.identifier,ResponseFriendItem:e.ResponseFriendItem},function(e){var o=tt(e);o.ActionStatus==f.FAIL?n&&n(o):t&&t(o)},n)},ut=function(e,t,n){ge(n,!0)&&_t.apiCall(s.FRIEND,"friend_get_all",{From_Account:X.identifier,TimeStamp:e.TimeStamp,StartIndex:e.StartIndex,GetCount:e.GetCount,LastStandardSequence:e.LastStandardSequence,TagList:e.TagList},t,n)},at=function(e,t,n){ge(n,!0)&&_t.apiCall(s.PROFILE,"portrait_get",{From_Account:X.identifier,To_Account:e.To_Account,TagList:e.TagList},function(e){var o=[];if(e.Fail_Account&&e.Fail_Account.length&&(o=e.Fail_Account),e.Invalid_Account&&e.Invalid_Account.length)for(var r in e.Invalid_Account)o.push(e.Invalid_Account[r]);if(o.length){e.ActionStatus=f.FAIL,e.ErrorCode=99999,e.ErrorInfo="";for(var i in o){var s=o[i];for(var u in e.UserProfileItem)if(e.UserProfileItem[u].To_Account==s){var a=e.UserProfileItem[u].ResultCode;e.UserProfileItem[u].ResultInfo="["+a+"]"+e.UserProfileItem[u].ResultInfo,e.ErrorInfo+="账号:"+s+","+e.UserProfileItem[u].ResultInfo+"\n";break}}}e.ActionStatus==f.FAIL?n&&n(e):t&&t(e)},n)},ct=function(e,t,n){ge(n,!0)&&_t.apiCall(s.PROFILE,"portrait_set",{From_Account:X.identifier,ProfileItem:e.ProfileItem},function(n){for(var o in e.ProfileItem){var r=e.ProfileItem[o];if("Tag_Profile_IM_Nick"==r.Tag){X.identifierNick=r.Value;break}}t&&t(n)},n)},lt=function(e,t,n){ge(n,!0)&&_t.apiCall(s.FRIEND,"black_list_add",{From_Account:X.identifier,To_Account:e.To_Account},function(e){var o=tt(e);o.ActionStatus==f.FAIL?n&&n(o):t&&t(o)},n)},pt=function(e,t,n){ge(n,!0)&&_t.apiCall(s.FRIEND,"black_list_delete",{From_Account:X.identifier,To_Account:e.To_Account},function(e){var o=tt(e);o.ActionStatus==f.FAIL?n&&n(o):t&&t(o)},n)},ft=function(e,t,n){ge(n,!0)&&_t.apiCall(s.FRIEND,"black_list_get",{From_Account:X.identifier,StartIndex:e.StartIndex,MaxLimited:e.MaxLimited,LastSequence:e.LastSequence},t,n)},gt=function(e,t,n){ge(n,!0)&&_t.apiCall(s.RECENT_CONTACT,"get",{From_Account:X.identifier,Count:e.Count},t,n)},dt=function(e,t,n){if(ge(n,!0)){var o;o=de()?"pic_up":"pic_up_test",_t.apiCall(s.PIC,o,{App_Version:_.APP_VERSION,From_Account:X.identifier,To_Account:e.To_Account,Seq:e.Seq,Timestamp:e.Timestamp,Random:e.Random,File_Str_Md5:e.File_Str_Md5,File_Size:e.File_Size,File_Type:e.File_Type,Server_Ver:_.SERVER_VERSION,Auth_Key:H,Busi_Id:e.Busi_Id,PkgFlag:e.PkgFlag,Slice_Offset:e.Slice_Offset,Slice_Size:e.Slice_Size,Slice_Data:e.Slice_Data},t,n)}},mt=function(e,t){ge(t,!0)&&_t.apiCall(s.OPEN_IM,"authkey",{},e,t)},It=function(e,t,n){ge(n,!0)&&_t.apiCall(s.IM_OPEN_STAT,"web_report",e,t,n)},Mt=function(e,t,n){ge(n,!0)&&_t.apiCall(s.OPEN_IM,"getlongpollingid",{},function(e){t&&t(e)},n)},Et=function(e,t,n){_t.apiCall(s.PIC,"apply_download",e,t,n)};i="wechat";var _t=new function(){var e=null;this.init=function(t,n,o){t&&(e=t)},this.callBack=function(t){e&&e(t)},this.clear=function(){e=null},this.apiCall=function(e,t,n,o,r,i,s){var u=me(e,t,0,r);0!=u&&pe("POST",u,n,0,0,function(i){var s=null,a="";"pic_up"==t&&(n.Slice_Data="");var c="\n request url: \n"+u+"\n request body: \n"+JSON.stringify(n)+"\n response: \n"+JSON.stringify(i);i.ActionStatus==f.OK?(se.info("["+e+"]["+t+"]success: "+c),o&&o(i),s=0,a=""):(s=i.ErrorCode,a=i.ErrorInfo,r&&(i.SrcErrorInfo=i.ErrorInfo,i.ErrorInfo="["+e+"]["+t+"]failed: "+c,"longpolling"==t&&60008==i.ErrorCode||se.error(i.ErrorInfo),r(i))),Ce(t,s,a)},function(e){r&&r(e),Ce(t,e.ErrorCode,e.ErrorInfo)})}},yt=function e(t,n,o,r,i,s){this._impl={skey:e.skey(t,n),type:t,id:n,name:o,icon:r,unread:0,isAutoRead:!1,time:i>=0?i:0,curMaxMsgSeq:s>=0?s:0,msgs:[],isFinished:1}};yt.skey=function(e,t){return e+t},yt.prototype.type=function(){return this._impl.type},yt.prototype.id=function(){return this._impl.id},yt.prototype.name=function(){return this._impl.name},yt.prototype.icon=function(){return this._impl.icon},yt.prototype.unread=function(e){if(void 0===e)return this._impl.unread;this._impl.unread=e},yt.prototype.isFinished=function(e){if(void 0===e)return this._impl.isFinished;this._impl.isFinished=e},yt.prototype.time=function(){return this._impl.time},yt.prototype.curMaxMsgSeq=function(e){if(void 0===e)return this._impl.curMaxMsgSeq;this._impl.curMaxMsgSeq=e},yt.prototype.msgCount=function(){return this._impl.msgs.length},yt.prototype.msg=function(e){return this._impl.msgs[e]},yt.prototype.msgs=function(){return this._impl.msgs},yt.prototype._impl_addMsg=function(e){this._impl.msgs.push(e),e.time>this._impl.time&&(this._impl.time=e.time),e.seq>this._impl.curMaxMsgSeq&&(this._impl.curMaxMsgSeq=e.seq),e.isSend||this._impl.isAutoRead||this._impl.unread++};var ht=function(e,t){this.toAccount=e,this.lastedMsgTime=t},Ct=function(e,t,n,o,r,i,s,u){this.sess=e,this.subType=s>=0?s:0,this.fromAccount=i,this.fromAccountNick=u||i,this.isSend=Boolean(t),this.seq=n>=0?n:ae(),this.random=o>=0?o:ce(),this.time=r>=0?r:ue(),this.elems=[]};Ct.prototype.getSession=function(){return this.sess},Ct.prototype.getType=function(){return this.subType},Ct.prototype.getSubType=function(){return this.subType},Ct.prototype.getFromAccount=function(){return this.fromAccount},Ct.prototype.getFromAccountNick=function(){return this.fromAccountNick},Ct.prototype.getIsSend=function(){return this.isSend},Ct.prototype.getSeq=function(){return this.seq},Ct.prototype.getTime=function(){return this.time},Ct.prototype.getRandom=function(){return this.random},Ct.prototype.getElems=function(){return this.elems},Ct.prototype.addText=function(e){this.addElem(new t.Msg.Elem(g.TEXT,e))},Ct.prototype.addFace=function(e){this.addElem(new t.Msg.Elem(g.FACE,e))},Ct.prototype.addImage=function(e){this.addElem(new t.Msg.Elem(g.IMAGE,e))},Ct.prototype.addLocation=function(e){this.addElem(new t.Msg.Elem(g.LOCATION,e))},Ct.prototype.addFile=function(e){this.addElem(new t.Msg.Elem(g.FILE,e))},Ct.prototype.addCustom=function(e){this.addElem(new t.Msg.Elem(g.CUSTOM,e))},Ct.prototype.addElem=function(e){this.elems.push(e)},Ct.prototype.toHtml=function(){var e="";for(var t in this.elems)e+=this.elems[t].toHtml();return e},(Ct.Elem=function(e,t){this.type=e,this.content=t}).prototype.getType=function(){return this.type},Ct.Elem.prototype.getContent=function(){return this.content},Ct.Elem.prototype.toHtml=function(){return this.content.toHtml()},Ct.Elem.Text=function(e){this.text=ie.xssFilter(e)},Ct.Elem.Text.prototype.getText=function(){return this.text},Ct.Elem.Text.prototype.toHtml=function(){return this.text},Ct.Elem.Face=function(e,t){this.index=e,this.data=t},Ct.Elem.Face.prototype.getIndex=function(){return this.index},Ct.Elem.Face.prototype.getData=function(){return this.data},Ct.Elem.Face.prototype.toHtml=function(){var e=null,t=oe[this.data],n=re[t];return n&&n[1]&&(e=n[1]),e?"<img src='"+e+"'/>":this.data},Ct.Elem.Location=function(e,t,n){this.latitude=t,this.longitude=e,this.desc=n},Ct.Elem.Location.prototype.getLatitude=function(){return this.latitude},Ct.Elem.Location.prototype.getLongitude=function(){return this.longitude},Ct.Elem.Location.prototype.getDesc=function(){return this.desc},Ct.Elem.Location.prototype.toHtml=function(){return"经度="+this.longitude+",纬度="+this.latitude+",描述="+this.desc},Ct.Elem.Images=function(e){this.UUID=e,this.ImageInfoArray=[]},Ct.Elem.Images.prototype.addImage=function(e){this.ImageInfoArray.push(e)},Ct.Elem.Images.prototype.toHtml=function(){var e=this.getImage(d.SMALL),t=this.getImage(d.LARGE),n=this.getImage(d.ORIGIN);return t||(t=e),n||(n=e),"<img src='"+e.getUrl()+"#"+t.getUrl()+"#"+n.getUrl()+"' style='CURSOR: hand' id='"+this.getImageId()+"' bigImgUrl='"+t.getUrl()+"' onclick='imageClick(this)' />"},Ct.Elem.Images.prototype.getImageId=function(){return this.UUID},Ct.Elem.Images.prototype.getImage=function(e){for(var t in this.ImageInfoArray)if(this.ImageInfoArray[t].getType()==e)return this.ImageInfoArray[t];return null},Ct.Elem.Images.Image=function(e,t,n,o,r){this.type=e,this.size=t,this.width=n,this.height=o,this.url=r},Ct.Elem.Images.Image.prototype.getType=function(){return this.type},Ct.Elem.Images.Image.prototype.getSize=function(){return this.size},Ct.Elem.Images.Image.prototype.getWidth=function(){return this.width},Ct.Elem.Images.Image.prototype.getHeight=function(){return this.height},Ct.Elem.Images.Image.prototype.getUrl=function(){return this.url},Ct.Elem.Sound=function(e,t,n,o,r,i,s){this.uuid=e,this.second=t,this.size=n,this.senderId=o,this.receiverId=r,this.downFlag=i,this.busiId=s==c.C2C?2:1,void 0!==i&&void 0!==busiId?Ee(e,o,0,i,r,this.busiId,E.SOUND):this.downUrl=Ie(e,o)},Ct.Elem.Sound.prototype.getUUID=function(){return this.uuid},Ct.Elem.Sound.prototype.getSecond=function(){return this.second},Ct.Elem.Sound.prototype.getSize=function(){return this.size},Ct.Elem.Sound.prototype.getSenderId=function(){return this.senderId},Ct.Elem.Sound.prototype.getDownUrl=function(){return this.downUrl},Ct.Elem.Sound.prototype.toHtml=function(){return"ie"==i.type&&parseInt(i.ver)<=8?"[这是一条语音消息]demo暂不支持ie8(含)以下浏览器播放语音,语音URL:"+this.downUrl:'<audio id="uuid_'+this.uuid+'" src="'+this.downUrl+'" controls="controls" onplay="onChangePlayAudio(this)" preload="none"></audio>'},Ct.Elem.File=function(e,t,n,o,r,i,s){this.uuid=e,this.name=t,this.size=n,this.senderId=o,this.receiverId=r,this.downFlag=i,this.busiId=s==c.C2C?2:1,void 0!==i&&void 0!==busiId?Ee(e,o,0,i,r,this.busiId,E.FILE):this.downUrl=Me(e,o,t)},Ct.Elem.File.prototype.getUUID=function(){return this.uuid},Ct.Elem.File.prototype.getName=function(){return this.name},Ct.Elem.File.prototype.getSize=function(){return this.size},Ct.Elem.File.prototype.getSenderId=function(){return this.senderId},Ct.Elem.File.prototype.getDownUrl=function(){return this.downUrl},Ct.Elem.File.prototype.getDownFlag=function(){return this.downFlag},Ct.Elem.File.prototype.toHtml=function(){var e,t;return e=this.size,t="Byte",this.size>=1024&&(e=Math.round(this.size/1024),t="KB"),'<a href="javascript" onclick="webim.onDownFile("'+this.uuid+'")" title="点击下载文件" ><i class="glyphicon glyphicon-file">&nbsp;'+this.name+"("+e+t+")</i></a>"},Ct.Elem.GroupTip=function(e,t,n,o,r){this.opType=e,this.opUserId=t,this.groupId=n,this.groupName=o,this.userIdList=r||[],this.groupInfoList=[],this.memberInfoList=[],this.groupMemberNum=null},Ct.Elem.GroupTip.prototype.addGroupInfo=function(e){this.groupInfoList.push(e)},Ct.Elem.GroupTip.prototype.addMemberInfo=function(e){this.memberInfoList.push(e)},Ct.Elem.GroupTip.prototype.getOpType=function(){return this.opType},Ct.Elem.GroupTip.prototype.getOpUserId=function(){return this.opUserId},Ct.Elem.GroupTip.prototype.getGroupId=function(){return this.groupId},Ct.Elem.GroupTip.prototype.getGroupName=function(){return this.groupName},Ct.Elem.GroupTip.prototype.getUserIdList=function(){return this.userIdList},Ct.Elem.GroupTip.prototype.getGroupInfoList=function(){return this.groupInfoList},Ct.Elem.GroupTip.prototype.getMemberInfoList=function(){return this.memberInfoList},Ct.Elem.GroupTip.prototype.getGroupMemberNum=function(){return this.groupMemberNum},Ct.Elem.GroupTip.prototype.setGroupMemberNum=function(e){return this.groupMemberNum=e},Ct.Elem.GroupTip.prototype.toHtml=function(){var e="[群提示消息]";switch(this.opType){case S.JOIN:e+=this.opUserId+"邀请了";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="加入该群";break;case S.QUIT:e+=this.opUserId+"主动退出该群";break;case S.KICK:e+=this.opUserId+"将";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="踢出该群";break;case S.SET_ADMIN:e+=this.opUserId+"将";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="设为管理员";break;case S.CANCEL_ADMIN:e+=this.opUserId+"取消";for(var t in this.userIdList)if(e+=this.userIdList[t]+",",this.userIdList.length>10&&9==t){e+="等"+this.userIdList.length+"人";break}e+="的管理员资格";break;case S.MODIFY_GROUP_INFO:e+=this.opUserId+"修改了群资料：";for(var t in this.groupInfoList){var n=this.groupInfoList[t].getType(),o=this.groupInfoList[t].getValue();switch(n){case G.FACE_URL:e+="群头像为"+o+"; ";break;case G.NAME:e+="群名称为"+o+"; ";break;case G.OWNER:e+="群主为"+o+"; ";break;case G.NOTIFICATION:e+="群公告为"+o+"; ";break;case G.INTRODUCTION:e+="群简介为"+o+"; ";break;default:e+="未知信息为:type="+n+",value="+o+"; "}}break;case S.MODIFY_MEMBER_INFO:e+=this.opUserId+"修改了群成员资料:";for(var t in this.memberInfoList){var r=this.memberInfoList[t].getUserId(),i=this.memberInfoList[t].getShutupTime();if(e+=r+": ",e+=null!=i&&void 0!==i?0==i?"取消禁言; ":"禁言"+i+"秒; ":" shutupTime为空",this.memberInfoList.length>10&&9==t){e+="等"+this.memberInfoList.length+"人";break}}break;case S.READED:Log.info("消息已读同步");break;default:e+="未知群提示消息类型：type="+this.opType}return e},Ct.Elem.GroupTip.GroupInfo=function(e,t){this.type=e,this.value=t},Ct.Elem.GroupTip.GroupInfo.prototype.getType=function(){return this.type},Ct.Elem.GroupTip.GroupInfo.prototype.getValue=function(){return this.value},Ct.Elem.GroupTip.MemberInfo=function(e,t){this.userId=e,this.shutupTime=t},Ct.Elem.GroupTip.MemberInfo.prototype.getUserId=function(){return this.userId},Ct.Elem.GroupTip.MemberInfo.prototype.getShutupTime=function(){return this.shutupTime},Ct.Elem.Custom=function(e,t,n){this.data=e,this.desc=t,this.ext=n},Ct.Elem.Custom.prototype.getData=function(){return this.data},Ct.Elem.Custom.prototype.getDesc=function(){return this.desc},Ct.Elem.Custom.prototype.getExt=function(){return this.ext},Ct.Elem.Custom.prototype.toHtml=function(){return this.data};var Tt=new function(){var t={},n=[];e={},this.cookie="",this.syncFlag=0;var o=function(e){for(var n in t)e(t[n])},r=function(t){var n=!1,o=t.sess._impl.skey,r=t.isSend+t.seq+t.random;return e[o]&&e[o][r]&&(n=!0),e[o]?e[o][r]={time:t.time}:(e[o]={},e[o][r]={time:t.time}),n};this.sessMap=function(){return t},this.sessCount=function(){return n.length},this.sessByTypeId=function(e,n){var o=yt.skey(e,n);return void 0===o||null==o?null:t[o]},this.delSessByTypeId=function(n,o){var r=yt.skey(n,o);return void 0!==r&&null!=r&&(t[r]&&(delete t[r],delete e[r]),!0)},this.resetCookieAndSyncFlag=function(){this.cookie="",this.syncFlag=0},this.setAutoRead=function(e,t,n){if(n&&o(function(e){e._impl.isAutoRead=!1}),e&&(e._impl.isAutoRead=t,t))if(e._impl.unread=0,e._impl.type==c.C2C){var r=[];r.push(new ht(e._impl.id,e._impl.time)),Re(Tt.cookie,r,function(e){se.info("[setAutoRead]: c2CMsgReaded success")},function(e){se.error("[setAutoRead}: c2CMsgReaded failed:"+e.ErrorInfo)})}else if(e._impl.type==c.GROUP){var i={GroupId:e._impl.id,MsgReadedSeq:e._impl.curMaxMsgSeq};et(i,function(e){se.info("groupMsgReaded success")},function(e){se.error("groupMsgReaded failed:"+e.ErrorInfo)})}},this.c2CMsgReaded=function(e,t,n){var o=[];o.push(new ht(e.To_Account,e.LastedMsgTime)),Re(Tt.cookie,o,function(e){t&&(se.info("c2CMsgReaded success"),t(e))},function(e){n&&(se.error("c2CMsgReaded failed:"+e.ErrorInfo),n(e))})},this.addSession=function(e){t[e._impl.skey]=e},this.delSession=function(e){delete t[e._impl.skey]},this.addMsg=function(e){if(r(e))return!1;var n=e.sess;return t[n._impl.skey]||this.addSession(n),n._impl_addMsg(e),!0},this.updateTimeline=function(){var e=new Array;o(function(t){e.push(t)}),e.sort(function(e,t){return t.time-e.time}),n=e}},At=new function(){var e=null,t=null,n={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,15:null,255:null},o={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},r={1:null},i=null,s=!1,u=0,a=0,l=null,p=!1,d=0,m=90,I=null,M={},E=0,_={},h={};this.setLongPollingOn=function(e){s=e},this.getLongPollingOn=function(){return s},this.resetLongPollingInfo=function(){s=!1,u=0,a=0},this.setBigGroupLongPollingOn=function(e){p=e},this.setBigGroupLongPollingKey=function(e){I=e},this.resetBigGroupLongPollingInfo=function(){p=!1,d=0,I=null,M={}},this.setBigGroupLongPollingMsgMap=function(e,t){var n=M[e];n?(n=parseInt(n)+t,M[e]=n):M[e]=t},this.clear=function(){t=null,n={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null,9:null,10:null,11:null,15:null,255:null},o={1:null,2:null,3:null,4:null,5:null,6:null,7:null,8:null},r={1:null},e=null,s=!1,u=0,a=0,l=null,p=!1,d=0,I=null,M={},h={},J=[],H=null,Y=null};var v=function(e,t){mt(function(t){J=t.IpList,H=t.AuthKey,Y=t.ExpireTime,e&&e(t)},function(e){se.error("initIpAndAuthkey failed:"+e.ErrorInfo),t&&t(e)})},P=function(e,t){var n={Member_Account:X.identifier,Limit:1e3,Offset:0,GroupBaseInfoFilter:["NextMsgSeq"]};Qe(n,function(t){if(!t.GroupIdList||0==t.GroupIdList.length)return se.info("initMyGroupMaxSeqs: 目前还没有加入任何群组"),void(e&&e(t));for(var n=0;n<t.GroupIdList.length;n++){var o=t.GroupIdList[n].GroupId,r=t.GroupIdList[n].NextMsgSeq-1;_[o]=r}e&&e(t)},function(e){se.error("initMyGroupMaxSeqs failed:"+e.ErrorInfo),t&&t(e)})},x=function(e,t,n){E++;var o={GroupId:e,ReqMsgSeq:t,ReqMsgNumber:n};se.warn("第"+E+"次补齐群消息,参数="+JSON.stringify(o)),At.syncGroupMsgs(o)},B=function(e,t){var n=_[e];n?t>n&&(_[e]=t):_[e]=t},K=function(e,t){for(var n in e){var o=e[n];if(o.From_Account){var r=re(o,!1,!0);r&&t.push(r),B(o.ToGroupId,o.MsgSeq)}}return t},z=function(t,n){var o={},r=[];for(var i in n){var s=o[n[i].ToGroupId];s||(s=o[n[i].ToGroupId]={min:99999999,max:-1,msgs:[]}),n[i].NoticeSeq>a&&(se.warn("noticeSeq="+a+",msgNoticeSeq="+n[i].NoticeSeq),a=n[i].NoticeSeq),n[i].Event=t,o[n[i].ToGroupId].msgs.push(n[i]),n[i].MsgSeq<s.min&&(o[n[i].ToGroupId].min=n[i].MsgSeq),n[i].MsgSeq>s.max&&(o[n[i].ToGroupId].max=n[i].MsgSeq)}for(var u in o){var c=o[u].max-o[u].min+1,l=_[u];l?o[u].min-l>1||o[u].msgs.length<c?(se.warn("发起一次补齐群消息请求,curMaxMsgSeq="+l+", minMsgSeq="+o[u].min+", maxMsgSeq="+o[u].max+", msgs.length="+o[u].msgs.length+", tempCount="+c),x(u,o[u].max,o[u].max-l),B(u,o[u].max)):r=K(o[u].msgs,r):(se.warn("不存在该群的最大消息seq，群id="+u),o[u].msgs.length<c?(se.warn("发起一次补齐群消息请求,minMsgSeq="+o[u].min+", maxMsgSeq="+o[u].max+", msgs.length="+o[u].msgs.length+", tempCount="+c),x(u,o[u].max,c),B(u,o[u].max)):r=K(o[u].msgs,r))}r.length&&Tt.updateTimeline(),e&&r.length&&e(r)},V=function(t,n){var o={},r=[];for(var i in n){var s=o[n[i].ToGroupId];s||(s=o[n[i].ToGroupId]={min:99999999,max:-1,msgs:[]}),n[i].NoticeSeq>a&&(se.warn("noticeSeq="+a+",msgNoticeSeq="+n[i].NoticeSeq),a=n[i].NoticeSeq),n[i].Event=t,o[n[i].ToGroupId].msgs.push(n[i]),n[i].MsgSeq<s.min&&(o[n[i].ToGroupId].min=n[i].MsgSeq),n[i].MsgSeq>s.max&&(o[n[i].ToGroupId].max=n[i].MsgSeq)}for(var u in o){var c=o[u].max-o[u].min+1,l=_[u];l?o[u].min-l>1||o[u].msgs.length<c?(se.warn("发起一次补齐群消息请求,curMaxMsgSeq="+l+", minMsgSeq="+o[u].min+", maxMsgSeq="+o[u].max+", msgs.length="+o[u].msgs.length+", tempCount="+c),x(u,o[u].max,o[u].max-l),B(u,o[u].max)):r=K(o[u].msgs,r):(se.warn("不存在该群的最大消息seq，群id="+u),o[u].msgs.length<c?(se.warn("发起一次补齐群消息请求,minMsgSeq="+o[u].min+", maxMsgSeq="+o[u].max+", msgs.length="+o[u].msgs.length+", tempCount="+c),x(u,o[u].max,c),B(u,o[u].max)):r=K(o[u].msgs,r))}r.length&&Tt.updateTimeline(),e&&r.length&&e(r)},Q=function(e,t){for(var o in e){var r=e[o],i=r.MsgBody,s=i.ReportType;if(0==t&&r.NoticeSeq&&r.NoticeSeq>a&&(a=r.NoticeSeq),r.GroupInfo.To_Account,t){var u=r.ToGroupId+"_"+s+"_"+i.Operator_Account;if(h[u]){se.warn("收到重复的群系统消息：key="+u);continue}h[u]=!0}var c={SrcFlag:0,ReportType:s,GroupId:r.ToGroupId,GroupName:r.GroupInfo.GroupName,Operator_Account:i.Operator_Account,MsgTime:r.MsgTimeStamp,groupReportTypeMsg:i};switch(s){case O.JOIN_GROUP_REQUEST:c.RemarkInfo=i.RemarkInfo,c.MsgKey=i.MsgKey,c.Authentication=i.Authentication,c.UserDefinedField=r.UserDefinedField,c.From_Account=r.From_Account,c.MsgSeq=r.ClientSeq,c.MsgRandom=r.MsgRandom;break;case O.JOIN_GROUP_ACCEPT:case O.JOIN_GROUP_REFUSE:c.RemarkInfo=i.RemarkInfo;break;case O.KICK:case O.DESTORY:case O.CREATE:case O.INVITED_JOIN_GROUP_REQUEST:case O.QUIT:case O.SET_ADMIN:case O.CANCEL_ADMIN:case O.REVOKE:case O.READED:break;case O.CUSTOM:c.MsgSeq=r.MsgSeq,c.UserDefinedField=i.UserDefinedField;break;default:se.error("未知群系统消息类型：reportType="+s)}if(t)s==O.JOIN_GROUP_REQUEST&&n[s]&&n[s](c);else if(n[s])if(s==O.READED)for(var l=c.groupReportTypeMsg.GroupReadInfoArray,p=0,f=l.length;p<f;p++){var g=l[p];n[s](g)}else n[s](c)}},W=function(e,t){var n,r,i;for(var s in e){switch(n=e[s],r=n.PushType,0==t&&n.NoticeSeq&&n.NoticeSeq>a&&(a=n.NoticeSeq),i={Type:r},r){case F.FRIEND_ADD:i.Accounts=n.FriendAdd_Account;break;case F.FRIEND_DELETE:i.Accounts=n.FriendDel_Account;break;case F.PENDENCY_ADD:i.PendencyList=n.PendencyAdd;break;case F.PENDENCY_DELETE:i.Accounts=n.FrienPencydDel_Account;break;case F.BLACK_LIST_ADD:i.Accounts=n.BlackListAdd_Account;break;case F.BLACK_LIST_DELETE:i.Accounts=n.BlackListDel_Account;break;default:se.error("未知好友系统通知类型：friendNotice="+JSON.stringify(n))}t?r==F.PENDENCY_ADD&&o[r]&&o[r](i):o[r]&&o[r](i)}},j=function(e,t){var n,o,i;for(var s in e){switch(n=e[s],o=n.PushType,0==t&&n.NoticeSeq&&n.NoticeSeq>a&&(a=n.NoticeSeq),i={Type:o},o){case R.PROFILE_MODIFY:i.Profile_Account=n.Profile_Account,i.ProfileList=n.ProfileList;break;default:se.error("未知资料系统通知类型：profileNotice="+JSON.stringify(n))}t?o==R.PROFILE_MODIFY&&r[o]&&r[o](i):r[o]&&r[o](i)}},$=function(e){var t=e.MsgBody,o=t.ReportType,r=(e.GroupInfo.To_Account,{SrcFlag:1,ReportType:o,GroupId:e.ToGroupId,GroupName:e.GroupInfo.GroupName,Operator_Account:t.Operator_Account,MsgTime:e.MsgTimeStamp});switch(o){case O.JOIN_GROUP_REQUEST:r.RemarkInfo=t.RemarkInfo,r.MsgKey=t.MsgKey,r.Authentication=t.Authentication,r.UserDefinedField=e.UserDefinedField,r.From_Account=e.From_Account,r.MsgSeq=e.ClientSeq,r.MsgRandom=e.MsgRandom;break;case O.JOIN_GROUP_ACCEPT:case O.JOIN_GROUP_REFUSE:r.RemarkInfo=t.RemarkInfo;break;case O.KICK:case O.DESTORY:case O.CREATE:case O.INVITED_JOIN_GROUP_REQUEST:case O.QUIT:case O.SET_ADMIN:case O.CANCEL_ADMIN:case O.REVOKE:break;case O.CUSTOM:r.MsgSeq=e.MsgSeq,r.UserDefinedField=t.UserDefinedField;break;default:se.error("未知群系统消息类型：reportType="+o)}n[o]&&n[o](r)},Z=function(e){for(var t=0,n=e.length;t<n;t++)ee(e[t])},ee=function(e){var t=e.SubMsgType;switch(t){case C.READED:break;default:se.error("未知C2c系统消息：reportType="+reportType)}if(e.ReadC2cMsgNotify.UinPairReadArray&&onC2cEventCallbacks[t])for(var n=0,o=e.ReadC2cMsgNotify.UinPairReadArray.length;n<o;n++){var r=e.ReadC2cMsgNotify.UinPairReadArray[n];onC2cEventCallbacks[t](r)}};this.longPolling=function(e,t){function n(){Ge(o,function(e){for(var t in e.EventArray){var n=e.EventArray[t];switch(n.Event){case y.C2C:u=n.NotifySeq,se.warn("longpolling: received new c2c msg"),At.syncMsgs();break;case y.GROUP_COMMON:se.warn("longpolling: received new group msgs"),V(n.Event,n.GroupMsgArray);break;case y.GROUP_TIP:se.warn("longpolling: received new group tips"),V(n.Event,n.GroupTips);break;case y.GROUP_SYSTEM:se.warn("longpolling: received new group system msgs"),Q(n.GroupTips,!1);break;case y.FRIEND_NOTICE:se.warn("longpolling: received new friend system notice"),W(n.FriendListMod,!1);break;case y.PROFILE_NOTICE:se.warn("longpolling: received new profile system notice"),j(n.ProfileDataMod,!1);break;case y.C2C_COMMON:a=n.C2cMsgArray[0].NoticeSeq,se.warn("longpolling: received new c2c_common msg",a),z(n.Event,n.C2cMsgArray);break;case y.C2C_EVENT:a=n.C2cNotifyMsgArray[0].NoticeSeq,se.warn("longpolling: received new c2c_event msg"),Z(n.C2cNotifyMsgArray);break;default:se.error("longpolling收到未知新消息类型: Event="+n.Event)}}var o={ActionStatus:f.OK,ErrorCode:0};te(o)},function(e){te(e),t&&t(e)})}var o={Timeout:k/1e3,Cookie:{NotifySeq:u,NoticeSeq:a}};w?(o.Cookie.LongPollingId=w,n()):Mt(0,function(e){w=o.Cookie.LongPollingId=e.LongPollingId,k=e.Timeout>60?k:1e3*e.Timeout,n()})},this.bigGroupLongPolling=function(e,t){Oe({StartSeq:d,HoldTime:m,Key:I},function(t){var n=[];if(d=t.NextSeq,m=t.HoldTime,I=t.Key,t.RspMsgList&&t.RspMsgList.length>0){for(var o,r,i,s=0,u=t.RspMsgList.length-1;u>=0;u--)if(!(o=t.RspMsgList[u]).IsPlaceMsg&&o.From_Account&&o.MsgBody&&0!=o.MsgBody.length)switch(r=o.Event){case y.GROUP_COMMON:se.info("bigGroupLongPolling: return new group msg"),(i=re(o,!1,!1))&&n.push(i),s+=1;break;case y.GROUP_TIP:case y.GROUP_TIP2:se.info("bigGroupLongPolling: return new group tip"),(i=re(o,!1,!1))&&n.push(i);break;case y.GROUP_SYSTEM:se.info("bigGroupLongPolling: new group system msg"),$(o);break;default:se.error("bigGroupLongPolling收到未知新消息类型: Event="+r)}s>0&&(At.setBigGroupLongPollingMsgMap(o.ToGroupId,s),se.warn("current bigGroupLongPollingMsgMap: "+JSON.stringify(M)))}q=0;var a={ActionStatus:f.OK,ErrorCode:N.ON,ErrorInfo:"connection is ok..."};_t.callBack(a),e?e(n):l&&l(n),p&&At.bigGroupLongPolling()},function(e){if(60008!=e.ErrorCode&&(se.error(e.ErrorInfo),q++),91101!=e.ErrorCode&&(se.error("多实例登录，被kick"),i&&i()),q<10)p&&At.bigGroupLongPolling();else{var n={ActionStatus:f.FAIL,ErrorCode:N.OFF,ErrorInfo:"connection is off"};_t.callBack(n)}t&&t(e)},1e3*m)};var te=function(e){if(0==e.ErrorCode||60008==e.ErrorCode){D=0,U=!1;var t,n=!1;switch(L){case N.INIT:n=!0,L=N.ON,t="create connection successfully(INIT->ON)";break;case N.ON:t="connection is on...(ON->ON)";break;case N.RECONNECT:L=N.ON,t="connection is on...(RECONNECT->ON)";break;case N.OFF:n=!0,L=N.RECONNECT,t="reconnect successfully(OFF->RECONNECT)"}var o={ActionStatus:f.OK,ErrorCode:L,ErrorInfo:t};n&&_t.callBack(o),s&&At.longPolling()}else if(91101==e.ErrorCode)se.error("多实例登录，被kick"),i&&i();else if(D++,se.warn("longPolling接口第"+D+"次报错: "+e.ErrorInfo),D<=10)setTimeout(ne,100);else{L=N.OFF;var r={ActionStatus:f.FAIL,ErrorCode:N.OFF,ErrorInfo:"connection is off"};0==U&&_t.callBack(r),U=!0,se.warn("5000毫秒之后,SDK会发起新的longPolling请求..."),setTimeout(ne,5e3)}},z=function(t,n){var o=[],r=[];r=n;for(var i in r){var s,u,a,l=r[i];l.From_Account==X.identifier?(s=!0,u=l.To_Account,a=""):(s=!1,u=l.From_Account,a="");var p=Tt.sessByTypeId(c.C2C,u);p||(p=new yt(c.C2C,u,u,a,0,0));var f=new Ct(p,s,l.MsgSeq,l.MsgRandom,l.MsgTimeStamp,l.From_Account),d=null,m=null,I=null;for(var M in l.MsgBody){switch(d=l.MsgBody[M],I=d.MsgType){case g.TEXT:m=new Ct.Elem.Text(d.MsgContent.Text);break;case g.FACE:m=new Ct.Elem.Face(d.MsgContent.Index,d.MsgContent.Data);break;case g.IMAGE:m=new Ct.Elem.Images(d.MsgContent.UUID);for(var E in d.MsgContent.ImageInfoArray){var _=d.MsgContent.ImageInfoArray[E];m.addImage(new Ct.Elem.Images.Image(_.Type,_.Size,_.Width,_.Height,_.URL))}break;case g.SOUND:d.MsgContent?m=new Ct.Elem.Sound(d.MsgContent.UUID,d.MsgContent.Second,d.MsgContent.Size,l.From_Account,l.To_Account,d.MsgContent.Download_Flag,c.C2C):(I=g.TEXT,m=new Ct.Elem.Text("[语音消息]下载地址解析出错"));break;case g.LOCATION:m=new Ct.Elem.Location(d.MsgContent.Longitude,d.MsgContent.Latitude,d.MsgContent.Desc);break;case g.FILE:case g.FILE+" ":I=g.FILE,d.MsgContent?m=new Ct.Elem.File(d.MsgContent.UUID,d.MsgContent.FileName,d.MsgContent.FileSize,l.From_Account,l.To_Account,d.MsgContent.Download_Flag,c.C2C):(I=g.TEXT,m=new Ct.Elem.Text("[文件消息下载地址解析出错]"));break;case g.CUSTOM:try{var y=JSON.parse(d.MsgContent.Data);if(y&&y.userAction&&y.userAction==b.ING)continue}catch(e){}I=g.CUSTOM,m=new Ct.Elem.Custom(d.MsgContent.Data,d.MsgContent.Desc,d.MsgContent.Ext);break;default:I=g.TEXT,m=new Ct.Elem.Text("web端暂不支持"+d.MsgType+"消息")}f.elems.push(new Ct.Elem(I,m))}f.elems.length>0&&Tt.addMsg(f)&&o.push(f)}o.length>0&&Tt.updateTimeline(),o.length>0&&e&&e(o)},ne=function(){s&&At.longPolling()},oe=function(e){for(var t in e){var n=e[t];switch(n.Event){case y.GROUP_SYSTEM:se.warn("handlerApplyJoinGroupSystemMsgs： handler new group system msg"),Q(n.GroupTips,!0);break;default:se.error("syncMsgs收到未知的群系统消息类型: Event="+n.Event)}}};this.syncMsgs=function(t,n){var o=[],r=[];Fe(Tt.cookie,Tt.syncFlag,function(n){2==n.SyncFlag&&(Tt.syncFlag=0),r=n.MsgList,Tt.cookie=n.Cookie;for(var i in r){var s,u,a,l=r[i];l.From_Account==X.identifier?(s=!0,u=l.To_Account,a=""):(s=!1,u=l.From_Account,a="");var p=Tt.sessByTypeId(c.C2C,u);p||(p=new yt(c.C2C,u,u,a,0,0));var f=new Ct(p,s,l.MsgSeq,l.MsgRandom,l.MsgTimeStamp,l.From_Account),d=null,m=null,I=null;for(var M in l.MsgBody){switch(d=l.MsgBody[M],I=d.MsgType){case g.TEXT:m=new Ct.Elem.Text(d.MsgContent.Text);break;case g.FACE:m=new Ct.Elem.Face(d.MsgContent.Index,d.MsgContent.Data);break;case g.IMAGE:m=new Ct.Elem.Images(d.MsgContent.UUID);for(var E in d.MsgContent.ImageInfoArray){var _=d.MsgContent.ImageInfoArray[E];m.addImage(new Ct.Elem.Images.Image(_.Type,_.Size,_.Width,_.Height,_.URL))}break;case g.SOUND:d.MsgContent?m=new Ct.Elem.Sound(d.MsgContent.UUID,d.MsgContent.Second,d.MsgContent.Size,l.From_Account,l.To_Account,d.MsgContent.Download_Flag,c.C2C):(I=g.TEXT,m=new Ct.Elem.Text("[语音消息]下载地址解析出错"));break;case g.LOCATION:m=new Ct.Elem.Location(d.MsgContent.Longitude,d.MsgContent.Latitude,d.MsgContent.Desc);break;case g.FILE:case g.FILE+" ":I=g.FILE,d.MsgContent?m=new Ct.Elem.File(d.MsgContent.UUID,d.MsgContent.FileName,d.MsgContent.FileSize,l.From_Account,l.To_Account,d.MsgContent.Download_Flag,c.C2C):(I=g.TEXT,m=new Ct.Elem.Text("[文件消息下载地址解析出错]"));break;case g.CUSTOM:try{var y=JSON.parse(d.MsgContent.Data);if(y&&y.userAction&&y.userAction==b.ING)continue}catch(e){}I=g.CUSTOM,m=new Ct.Elem.Custom(d.MsgContent.Data,d.MsgContent.Desc,d.MsgContent.Ext);break;default:I=g.TEXT,m=new Ct.Elem.Text("web端暂不支持"+d.MsgType+"消息")}f.elems.push(new Ct.Elem(I,m))}f.elems.length>0&&Tt.addMsg(f)&&o.push(f)}oe(n.EventArray),o.length>0&&Tt.updateTimeline(),t?t(o):o.length>0&&e&&e(o)},function(e){se.error("getMsgs failed:"+e.ErrorInfo),n&&n(e)})},this.getC2CHistoryMsgs=function(e,t,n){if(e.Peer_Account||!n)if(e.MaxCnt||(e.MaxCnt=15),e.MaxCnt<=0&&n)n(ie.getReturnError("MaxCnt should be greater than 0",-14));else if(e.MaxCnt>15){if(n)return void n(ie.getReturnError("MaxCnt can not be greater than 15",-15))}else{null!=e.MsgKey&&void 0!==e.MsgKey||(e.MsgKey="");var o={Peer_Account:e.Peer_Account,MaxCnt:e.MaxCnt,LastMsgTime:e.LastMsgTime,MsgKey:e.MsgKey};Ne(o,function(n){var o=[],r=[];r=n.MsgList;var i=Tt.sessByTypeId(c.C2C,e.Peer_Account);i||(i=new yt(c.C2C,e.Peer_Account,e.Peer_Account,"",0,0));for(var s in r){var u,a=r[s];a.From_Account==X.identifier?(u=!0,a.To_Account):(u=!1,a.From_Account);var l=new Ct(i,u,a.MsgSeq,a.MsgRandom,a.MsgTimeStamp,a.From_Account),p=null,f=null,d=null;for(var m in a.MsgBody){switch(p=a.MsgBody[m],d=p.MsgType){case g.TEXT:f=new Ct.Elem.Text(p.MsgContent.Text);break;case g.FACE:f=new Ct.Elem.Face(p.MsgContent.Index,p.MsgContent.Data);break;case g.IMAGE:f=new Ct.Elem.Images(p.MsgContent.UUID);for(var I in p.MsgContent.ImageInfoArray){var M=p.MsgContent.ImageInfoArray[I];f.addImage(new Ct.Elem.Images.Image(M.Type,M.Size,M.Width,M.Height,M.URL))}break;case g.SOUND:p.MsgContent?f=new Ct.Elem.Sound(p.MsgContent.UUID,p.MsgContent.Second,p.MsgContent.Size,a.From_Account,a.To_Account,p.MsgContent.Download_Flag,c.C2C):(d=g.TEXT,f=new Ct.Elem.Text("[语音消息]下载地址解析出错"));break;case g.LOCATION:f=new Ct.Elem.Location(p.MsgContent.Longitude,p.MsgContent.Latitude,p.MsgContent.Desc);break;case g.FILE:case g.FILE+" ":d=g.FILE,p.MsgContent?f=new Ct.Elem.File(p.MsgContent.UUID,p.MsgContent.FileName,p.MsgContent.FileSize,a.From_Account,a.To_Account,p.MsgContent.Download_Flag,c.C2C):(d=g.TEXT,f=new Ct.Elem.Text("[文件消息下载地址解析出错]"));break;case g.CUSTOM:d=g.CUSTOM,f=new Ct.Elem.Custom(p.MsgContent.Data,p.MsgContent.Desc,p.MsgContent.Ext);break;default:d=g.TEXT,f=new Ct.Elem.Text("web端暂不支持"+p.MsgType+"消息")}l.elems.push(new Ct.Elem(d,f))}Tt.addMsg(l),o.push(l)}if(Tt.updateTimeline(),t){var E={Complete:n.Complete,MsgCount:o.length,LastMsgTime:n.LastMsgTime,MsgKey:n.MsgKey,MsgList:o};i.isFinished(n.Complete),t(E)}},function(e){se.error("getC2CHistoryMsgs failed:"+e.ErrorInfo),n&&n(e)})}else n(ie.getReturnError("Peer_Account is empty",-13))},this.syncGroupMsgs=function(t,n,o){if(t.ReqMsgSeq<=0){if(o){var r=ie.getReturnError("ReqMsgSeq must be greater than 0",-16);o(r)}}else{var i={GroupId:t.GroupId,ReqMsgSeq:t.ReqMsgSeq,ReqMsgNumber:t.ReqMsgNumber};Ze(i,function(t){var o=[],r=(t.GroupId,t.RspMsgList),i=t.IsFinished;if(null!=r&&void 0!==r){for(var s=r.length-1;s>=0;s--){var u=r[s];if(!u.IsPlaceMsg&&u.From_Account&&u.MsgBody&&0!=u.MsgBody.length){var a=re(u,!0,!0,i);a&&o.push(a)}}o.length>0&&Tt.updateTimeline(),n?n(o):o.length>0&&e&&e(o)}else n&&n([])},function(e){se.error("getGroupMsgs failed:"+e.ErrorInfo),o&&o(e)})}};var re=function(e,n,o,r){if(e.IsPlaceMsg||!e.From_Account||!e.MsgBody||0==e.MsgBody.length)return null;var i,s,u,a=e.ToGroupId,l=a;e.GroupInfo&&e.GroupInfo.GroupName&&(l=e.GroupInfo.GroupName),u=e.From_Account,e.GroupInfo&&e.GroupInfo.From_AccountNick&&(u=e.GroupInfo.From_AccountNick),e.From_Account==X.identifier?(i=!0,e.From_Account,s=""):(i=!1,e.From_Account,s="");var p=Tt.sessByTypeId(c.GROUP,a);p||(p=new yt(c.GROUP,a,l,s,0,0)),void 0!==r&&p.isFinished(r||0);var f=T.COMMON;if(y.GROUP_TIP==e.Event||y.GROUP_TIP2==e.Event){f=T.TIP;var d=e.MsgBody;e.MsgBody=[],e.MsgBody.push({MsgType:g.GROUP_TIP,MsgContent:d})}else e.MsgPriority&&(e.MsgPriority==A.REDPACKET?f=T.REDPACKET:e.MsgPriority==A.LOVEMSG&&(f=T.LOVEMSG));var m=new Ct(p,i,e.MsgSeq,e.MsgRandom,e.MsgTimeStamp,e.From_Account,f,u),I=null,M=null,E=null;for(var _ in e.MsgBody){switch(I=e.MsgBody[_],E=I.MsgType){case g.TEXT:M=new Ct.Elem.Text(I.MsgContent.Text);break;case g.FACE:M=new Ct.Elem.Face(I.MsgContent.Index,I.MsgContent.Data);break;case g.IMAGE:M=new Ct.Elem.Images(I.MsgContent.UUID);for(var h in I.MsgContent.ImageInfoArray)M.addImage(new Ct.Elem.Images.Image(I.MsgContent.ImageInfoArray[h].Type,I.MsgContent.ImageInfoArray[h].Size,I.MsgContent.ImageInfoArray[h].Width,I.MsgContent.ImageInfoArray[h].Height,I.MsgContent.ImageInfoArray[h].URL));break;case g.SOUND:I.MsgContent?M=new Ct.Elem.Sound(I.MsgContent.UUID,I.MsgContent.Second,I.MsgContent.Size,e.From_Account,e.To_Account,I.MsgContent.Download_Flag,c.GROUP):(E=g.TEXT,M=new Ct.Elem.Text("[语音消息]下载地址解析出错"));break;case g.LOCATION:M=new Ct.Elem.Location(I.MsgContent.Longitude,I.MsgContent.Latitude,I.MsgContent.Desc);break;case g.FILE:case g.FILE+" ":E=g.FILE,Me(I.MsgContent.UUID,e.From_Account,I.MsgContent.FileName),I.MsgContent?M=new Ct.Elem.File(I.MsgContent.UUID,I.MsgContent.FileName,I.MsgContent.FileSize,e.From_Account,e.To_Account,I.MsgContent.Download_Flag,c.GROUP):(E=g.TEXT,M=new Ct.Elem.Text("[文件消息]地址解析出错"));break;case g.GROUP_TIP:var C=I.MsgContent.OpType;if(M=new Ct.Elem.GroupTip(C,I.MsgContent.Operator_Account,a,e.GroupInfo.GroupName,I.MsgContent.List_Account),S.JOIN==C||S.QUIT==C)M.setGroupMemberNum(I.MsgContent.MemberNum);else if(S.MODIFY_GROUP_INFO==C){var O=!1,F={GroupId:a,GroupFaceUrl:null,GroupName:null,OwnerAccount:null,GroupNotification:null,GroupIntroduction:null},R=I.MsgContent.MsgGroupNewInfo;if(R.GroupFaceUrl){var v=new Ct.Elem.GroupTip.GroupInfo(G.FACE_URL,R.GroupFaceUrl);M.addGroupInfo(v),O=!0,F.GroupFaceUrl=R.GroupFaceUrl}if(R.GroupName){var N=new Ct.Elem.GroupTip.GroupInfo(G.NAME,R.GroupName);M.addGroupInfo(N),O=!0,F.GroupName=R.GroupName}if(R.Owner_Account){var P=new Ct.Elem.GroupTip.GroupInfo(G.OWNER,R.Owner_Account);M.addGroupInfo(P),O=!0,F.OwnerAccount=R.Owner_Account}if(R.GroupNotification){var b=new Ct.Elem.GroupTip.GroupInfo(G.NOTIFICATION,R.GroupNotification);M.addGroupInfo(b),O=!0,F.GroupNotification=R.GroupNotification}if(R.GroupIntroduction){var L=new Ct.Elem.GroupTip.GroupInfo(G.INTRODUCTION,R.GroupIntroduction);M.addGroupInfo(L),O=!0,F.GroupIntroduction=R.GroupIntroduction}0==n&&O&&t&&t(F)}else if(S.MODIFY_MEMBER_INFO==C){var U=I.MsgContent.MsgMemberInfo;for(var D in U){var k=U[D];M.addMemberInfo(new Ct.Elem.GroupTip.MemberInfo(k.User_Account,k.ShutupTime))}}break;case g.CUSTOM:E=g.CUSTOM,M=new Ct.Elem.Custom(I.MsgContent.Data,I.MsgContent.Desc,I.MsgContent.Ext);break;default:E=g.TEXT,M=new Ct.Elem.Text("web端暂不支持"+I.MsgType+"消息")}m.elems.push(new Ct.Elem(E,M))}return 0==o?m:Tt.addMsg(m)?m:null};this.init=function(u,a,c){if(u.onMsgNotify||se.warn("listeners.onMsgNotify is empty"),e=u.onMsgNotify,u.onBigGroupMsgNotify?l=u.onBigGroupMsgNotify:se.warn("listeners.onBigGroupMsgNotify is empty"),u.onC2cEventNotifys?onC2cEventCallbacks=u.onC2cEventNotifys:se.warn("listeners.onC2cEventNotifys is empty"),u.onGroupSystemNotifys?n=u.onGroupSystemNotifys:se.warn("listeners.onGroupSystemNotifys is empty"),u.onGroupInfoChangeNotify?t=u.onGroupInfoChangeNotify:se.warn("listeners.onGroupInfoChangeNotify is empty"),u.onFriendSystemNotifys?o=u.onFriendSystemNotifys:se.warn("listeners.onFriendSystemNotifys is empty"),u.onProfileSystemNotifys?r=u.onProfileSystemNotifys:se.warn("listeners.onProfileSystemNotifys is empty"),u.onKickedEventCall?i=u.onKickedEventCall:se.warn("listeners.onKickedEventCall is empty"),u.onAppliedDownloadUrl?onAppliedDownloadUrl=u.onAppliedDownloadUrl:se.warn("listeners.onAppliedDownloadUrl is empty"),X.identifier&&X.userSig)P(function(e){se.info("initMyGroupMaxSeqs success"),v(function(e){if(se.info("initIpAndAuthkey success"),a){se.info("login success(have login state))");var t={ActionStatus:f.OK,ErrorCode:0,ErrorInfo:"login success"};a(t)}At.setLongPollingOn(!0),s&&At.longPolling(a)},c)},c);else if(a){var p={ActionStatus:f.OK,ErrorCode:0,ErrorInfo:"login success(no login state)"};a(p)}},this.sendMsg=function(e,t,n){Se(e,function(o){if(e.sess.type()==c.C2C){if(!Tt.addMsg(e)){var r="sendMsg: addMsg failed!",i=ie.getReturnError(r,-17);return se.error(r),void(n&&n(i))}Tt.updateTimeline()}t&&t(o)},function(e){n&&n(e)})}},St=new function(){this.fileMd5=null;var e=function(e,t,n){function o(){var t=a*s,n=t+s>=e.size?e.size:t+s,o=i.call(e,t,n);r.readAsArrayBuffer(o)}var r=null;try{r=new FileReader}catch(e){if(n)return void n(ie.getReturnError("当前浏览器不支持FileReader",-18))}var i=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice;if(i||!n){var s=2097152,u=Math.ceil(e.size/s),a=0,c=new SparkMD5;r.onload=function(e){for(var n="",r=new Uint8Array(e.target.result),i=r.byteLength,s=0;s<i;s++)n+=String.fromCharCode(r[s]);c.appendBinary(n),++a<u?o():(this.fileMd5=c.end(),t&&t(this.fileMd5))},o()}else n(ie.getReturnError("当前浏览器不支持FileAPI",-19))};this.submitUploadFileForm=function(e,t,n){function o(e,t){var n=document.createElement("input");n.type="hidden",n.name=e,n.value=t,g.appendChild(n)}function r(){var e;try{e=JSON.parse(I.contentWindow.name)||{}}catch(t){e={}}e.ActionStatus?(I.src="about:blank",I.parentNode.removeChild(I),I=null,e.ActionStatus==f.OK?t&&t(e):n&&n(e)):setTimeout(r,100)}var i,s,u=e.formId,a=e.fileId,c="uploadResultIframe_"+V++,l=e.To_Account,p=e.businessType,g=document.getElementById(u);if(!g)return i="获取表单对象为空: formId="+u+"(formId非法)",s=ie.getReturnError(i,-20),void(n&&n(s));var d=document.getElementById(a);if(!d)return i="获取文件对象为空: fileId="+a+"(没有选择文件或者fileId非法)",s=ie.getReturnError(i,-21),void(n&&n(s));d.name="file";var I=document.createElement("iframe");I.name=c,I.id=c,I.style.display="none",document.body.appendChild(I);var M,E="https://pic.tim.qq.com/v4/openpic/"+(M=de()?"pic_up":"pic_up_test")+"?tinyid="+X.tinyid+"&a2="+X.a2+"&sdkappid="+X.sdkAppID+"&accounttype="+X.accountType+"&contenttype=http";g.action=E,g.method="post",g.target=c,o("App_Version",_.APP_VERSION),o("From_Account",X.identifier),o("To_Account",l),o("Seq",ae().toString()),o("Timestamp",ue().toString()),o("Random",ce().toString()),o("Busi_Id",p),o("PkgFlag",m.RAW_DATA.toString()),o("Auth_Key",H),o("Server_Ver",_.SERVER_VERSION.toString()),o("File_Type",e.fileType),setTimeout(r,500),g.submit()},this.uploadFile=function(t,n,o){var r={init:function(e,t,n){var o=this;o.file=e.file,o.onProgressCallBack=e.onProgressCallBack,e.abortButton&&(e.abortButton.onclick=o.abortHandler),o.total=o.file.size,o.loaded=0,o.step=1105920,o.sliceSize=0,o.sliceOffset=0,o.timestamp=ue(),o.seq=ae(),o.random=ce(),o.fromAccount=X.identifier,o.toAccount=e.To_Account,o.fileMd5=e.fileMd5,o.businessType=e.businessType,o.fileType=e.fileType,o.cbOk=t,o.cbErr=n,o.reader=new FileReader,o.blobSlice=File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice,o.reader.onloadstart=o.onLoadStart,o.reader.onprogress=o.onProgress,o.reader.onabort=o.onAbort,o.reader.onerror=o.onerror,o.reader.onload=o.onLoad,o.reader.onloadend=o.onLoadEnd},upload:function(){r.readBlob(0)},onLoadStart:function(){},onProgress:function(e){var t=r;t.loaded+=e.loaded,t.onProgressCallBack&&t.onProgressCallBack(t.loaded,t.total)},onAbort:function(){},onError:function(){},onLoad:function(e){var t=r;if(e.target.readyState==FileReader.DONE){var n=e.target.result,o=n.indexOf(",");-1!=o&&(n=n.substr(o+1));var i={From_Account:t.fromAccount,To_Account:t.toAccount,Busi_Id:t.businessType,File_Type:t.fileType,File_Str_Md5:t.fileMd5,PkgFlag:m.BASE64_DATA,File_Size:t.total,Slice_Offset:t.sliceOffset,Slice_Size:t.sliceSize,Slice_Data:n,Seq:t.seq,Timestamp:t.timestamp,Random:t.random},s=function(e){if(0==e.IsFinish)t.loaded=e.Next_Offset,t.loaded<t.total?t.readBlob(t.loaded):t.loaded=t.total;else if(t.cbOk){var n={ActionStatus:e.ActionStatus,ErrorCode:e.ErrorCode,ErrorInfo:e.ErrorInfo,File_UUID:e.File_UUID,File_Size:e.Next_Offset,URL_INFO:e.URL_INFO,Download_Flag:e.Download_Flag};t.fileType==E.FILE&&(n.URL_INFO=Me(e.File_UUID,X.identifier,t.file.name)),t.cbOk(n)}x=0};dt(i,s,function e(n){x<20?(x++,setTimeout(function(){dt(i,s,e)},1e3)):t.cbErr(n)})}},onLoadEnd:function(){},readBlob:function(e){var t,n=r,o=n.file,i=e+n.step;i>n.total?(i=n.total,n.sliceSize=i-e):n.sliceSize=n.step,n.sliceOffset=e,t=n.blobSlice.call(o,e,i),n.reader.readAsDataURL(t)},abortHandler:function(){var e=r;e.reader&&e.reader.abort()}};e(t.file,function(e){se.info("fileMd5: "+e),t.fileMd5=e,r.init(t,n,o),r.upload()},o)}};t.SESSION_TYPE=c,t.MSG_MAX_LENGTH=p,t.C2C_MSG_SUB_TYPE=h,t.GROUP_MSG_SUB_TYPE=T,t.MSG_ELEMENT_TYPE=g,t.GROUP_TIP_TYPE=S,t.IMAGE_TYPE=d,t.GROUP_SYSTEM_TYPE=O,t.FRIEND_NOTICE_TYPE=F,t.GROUP_TIP_MODIFY_GROUP_INFO_TYPE=G,t.BROWSER_INFO=i,t.Emotions=t.EmotionPicData=re,t.EmotionDataIndexs=t.EmotionPicDataIndex=oe,t.TLS_ERROR_CODE=v,t.CONNECTION_STATUS=N,t.UPLOAD_PIC_BUSSINESS_TYPE=P,t.RECENT_CONTACT_TYPE=l,t.UPLOAD_RES_TYPE=E,t.Tool=ie,t.Log=se,t.Msg=Ct,t.Session=yt,t.MsgStore={sessMap:function(){return Tt.sessMap()},sessCount:function(){return Tt.sessCount()},sessByTypeId:function(e,t){return Tt.sessByTypeId(e,t)},delSessByTypeId:function(e,t){return Tt.delSessByTypeId(e,t)},resetCookieAndSyncFlag:function(){return Tt.resetCookieAndSyncFlag()}},t.Resources=ne,t.login=t.init=function(e,t,n,o,r){_t.init(t.onConnNotify,o,r),t.jsonpCallback&&(z=t.jsonpCallback),he(e,t,n,o,r)},t.logout=t.offline=function(e,t){return Ae("instance",e,t)},t.logoutAll=function(e,t){return Ae("all",e,t)},t.sendMsg=function(e,t,n){return At.sendMsg(e,t,n)},t.syncMsgs=function(e,t){return At.syncMsgs(e,t)},t.getC2CHistoryMsgs=function(e,t,n){return At.getC2CHistoryMsgs(e,t,n)},t.syncGroupMsgs=function(e,t,n){return At.syncGroupMsgs(e,t,n)},t.c2CMsgReaded=function(e,t,n){return Tt.c2CMsgReaded(e,t,n)},t.groupMsgReaded=function(e,t,n){return et(e,t,n)},t.setAutoRead=function(e,t,n){return Tt.setAutoRead(e,t,n)},t.createGroup=function(e,t,n){return Pe(e,t,n)},t.createGroupHigh=function(e,t,n){return be(e,t,n)},t.applyJoinGroup=function(e,t,n){return Ue(e,t,n)},t.handleApplyJoinGroupPendency=function(e,t,n){return ke(e,t,n)},t.deleteApplyJoinGroupPendency=function(e,t,n){return ve(e,t,n)},t.quitGroup=function(e,t,n){return we(e,t,n)},t.searchGroupByName=function(e,t,n){return xe(e,t,n)},t.getGroupPublicInfo=function(e,t,n){return Be(e,t,n)},t.getGroupInfo=function(e,t,n){return Ke(e,t,n)},t.modifyGroupBaseInfo=function(e,t,n){return Le(e,t,n)},t.getGroupMemberInfo=function(e,t,n){return ze(e,t,n)},t.addGroupMember=function(e,t,n){return Ve(e,t,n)},t.modifyGroupMember=function(e,t,n){return Je(e,t,n)},t.deleteGroupMember=function(e,t,n){return He(e,t,n)},t.destroyGroup=function(e,t,n){return Ye(e,t,n)},t.changeGroupOwner=function(e,t,n){return Xe(e,t,n)},t.getJoinedGroupListHigh=function(e,t,n){return Qe(e,t,n)},t.getRoleInGroup=function(e,t,n){return We(e,t,n)},t.forbidSendMsg=function(e,t,n){return je(e,t,n)},t.sendCustomGroupNotify=function(e,t,n){return $e(e,t,n)},t.applyJoinBigGroup=function(e,t,n){return De(e,t,n)},t.quitBigGroup=function(e,t,n){return qe(e,t,n)},t.getProfilePortrait=function(e,t,n){return at(e,t,n)},t.setProfilePortrait=function(e,t,n){return ct(e,t,n)},t.applyAddFriend=function(e,t,n){return nt(e,t,n)},t.getPendency=function(e,t,n){return rt(e,t,n)},t.deletePendency=function(e,t,n){return it(e,t,n)},t.responseFriend=function(e,t,n){return st(e,t,n)},t.getAllFriend=function(e,t,n){return ut(e,t,n)},t.deleteFriend=function(e,t,n){return ot(e,t,n)},t.addBlackList=function(e,t,n){return lt(e,t,n)},t.deleteBlackList=function(e,t,n){return pt(e,t,n)},t.getBlackList=function(e,t,n){return ft(e,t,n)},t.getRecentContactList=function(e,t,n){return gt(e,t,n)},t.uploadFile=t.uploadPic=function(e,t,n){return St.uploadFile(e,t,n)},t.submitUploadFileForm=function(e,t,n){return St.submitUploadFileForm(e,t,n)},t.uploadFileByBase64=t.uploadPicByBase64=function(e,t,n){var o={To_Account:e.toAccount,Busi_Id:e.businessType,File_Type:e.File_Type,File_Str_Md5:e.fileMd5,PkgFlag:m.BASE64_DATA,File_Size:e.totalSize,Slice_Offset:0,Slice_Size:e.totalSize,Slice_Data:e.base64Str,Seq:ae(),Timestamp:ue(),Random:ce()};return dt(o,t,n)},t.setJsonpLastRspData=function(e){K="string"==typeof e?JSON.parse(e):e},t.getLongPollingId=function(e,t,n){return Mt(0,t,n)},t.applyDownload=function(e,t,n){return Et(e,t,n)},t.onDownFile=function(e){window.open(ne.downloadMap["uuid_"+e])},t.checkLogin=function(e,t){return ge(e,t)}}(t),t}(); 
 			}); 
		define("utils/webrtcroom.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e={serverDomain:require("../config.js").webrtcServerUrl,requestNum:0,heart:"",heartBeatReq:null,requestSeq:0,requestTask:[],request:function(e){var t=this;t.requestNum++;var r=wx.request({url:t.serverDomain+e.url,data:e.data||{},method:"POST",header:{"content-type":"application/json"},success:function(t){if(t.data.code)return console.error("服务器请求失败, url="+e.url+", params = "+(e.data?JSON.stringify(e.data):"")+", 错误信息="+JSON.stringify(t)),void(e.fail&&e.fail({errCode:t.data.code,errMsg:t.data.message}));e.success&&e.success(t)},fail:function(t){console.error("请求失败, url="+e.url+", 错误信息="+JSON.stringify(t)),e.fail&&e.fail(t)},complete:e.complete||function(){t.requestNum--}});return t.requestTask[t.requestSeq++]=r,r},clearRequest:function(){for(var e=this,t=0;t<e.requestSeq;t++)e.requestTask[t].abort();e.requestTask=[],e.requestSeq=0},getLoginInfo:function(e,t,r){var a=this,s={};e&&(s.userID=e),a.request({url:"/get_login_info",data:s,success:t,fail:r})},getRoomList:function(e,t,r,a){this.request({url:"/get_room_list",data:{index:e,count:t},success:r,fail:a})},createRoom:function(e,t,r,a){this.request({url:"/create_room",data:{userID:e,roomInfo:t},success:function(e){r&&r(e)},fail:a})},enterRoom:function(e,t,r,a){this.request({url:"/enter_room",data:{userID:e,roomID:t},success:function(e){r&&r(e)},fail:a})},quitRoom:function(e,t,r,a){var s=this;s.request({url:"/quit_room",data:{userID:e,roomID:t},success:r,fail:a}),s.stopHeartBeat()},startHeartBeat:function(e,t,r,a){var s=this;s.heart="1",s.heartBeat(e,t,r,a)},stopHeartBeat:function(){var e=this;e.heart="",e.heartBeatReq&&(e.heartBeatReq.abort(),e.heartBeatReq=null)},heartBeat:function(e,t,r,a){var s=this;s.heart?s.heartBeatReq=s.request({url:"/heartbeat",data:{userID:e,roomID:t},success:function(u){s.heart&&(console.log("心跳成功"),r&&r(u),setTimeout(function(){s.heartBeat(e,t,r,a)},7e3))},fail:function(u){a&&a(u),s.heart&&setTimeout(function(){s.heartBeat(e,t,r,a)},7e3)}}):s.clearRequest()}};module.exports=e; 
 			}); 
		define("utils/wxqrcode.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";!function(){function r(r,o){var f;r>o&&(f=r,r=o,o=f),f=o,f*=o,f+=o,f>>=1,p[f+=r]=1}function o(o,f){var e;for(F[o+l*f]=1,e=-2;e<2;e++)F[o+e+l*(f-2)]=1,F[o-2+l*(f+e+1)]=1,F[o+2+l*(f+e)]=1,F[o+e+1+l*(f+2)]=1;for(e=0;e<2;e++)r(o-1,f+e),r(o+1,f-e),r(o-e,f-1),r(o+e,f+1)}function f(r){for(;r>=255;)r=((r-=255)>>8)+(255&r);return r}function e(r,o,e,t){var a,n,i;for(a=0;a<t;a++)S[e+a]=0;for(a=0;a<o;a++){if(255!=(i=m[S[r+a]^S[e]]))for(n=1;n<t;n++)S[e+n-1]=S[e+n]^w[f(i+M[t-n])];else for(n=e;n<e+t;n++)S[n]=S[n+1];S[e+t-1]=255==i?0:w[f(i+M[0])]}}function t(r,o){var f;return r>o&&(f=r,r=o,o=f),f=o,f+=o*o,f>>=1,f+=r,p[f]}function a(r){var o,f,e,a;switch(r){case 0:for(f=0;f<l;f++)for(o=0;o<l;o++)o+f&1||t(o,f)||(F[o+f*l]^=1);break;case 1:for(f=0;f<l;f++)for(o=0;o<l;o++)1&f||t(o,f)||(F[o+f*l]^=1);break;case 2:for(f=0;f<l;f++)for(e=0,o=0;o<l;o++,e++)3==e&&(e=0),e||t(o,f)||(F[o+f*l]^=1);break;case 3:for(a=0,f=0;f<l;f++,a++)for(3==a&&(a=0),e=a,o=0;o<l;o++,e++)3==e&&(e=0),e||t(o,f)||(F[o+f*l]^=1);break;case 4:for(f=0;f<l;f++)for(e=0,a=f>>1&1,o=0;o<l;o++,e++)3==e&&(e=0,a=!a),a||t(o,f)||(F[o+f*l]^=1);break;case 5:for(a=0,f=0;f<l;f++,a++)for(3==a&&(a=0),e=0,o=0;o<l;o++,e++)3==e&&(e=0),(o&f&1)+!(!e|!a)||t(o,f)||(F[o+f*l]^=1);break;case 6:for(a=0,f=0;f<l;f++,a++)for(3==a&&(a=0),e=0,o=0;o<l;o++,e++)3==e&&(e=0),(o&f&1)+(e&&e==a)&1||t(o,f)||(F[o+f*l]^=1);break;case 7:for(a=0,f=0;f<l;f++,a++)for(3==a&&(a=0),e=0,o=0;o<l;o++,e++)3==e&&(e=0),(e&&e==a)+(o+f&1)&1||t(o,f)||(F[o+f*l]^=1)}}function n(r){var o,f=0;for(o=0;o<=r;o++)x[o]>=5&&(f+=R+x[o]-5);for(o=3;o<r-1;o+=2)x[o-2]==x[o+2]&&x[o+2]==x[o-1]&&x[o-1]==x[o+1]&&3*x[o-1]==x[o]&&(0==x[o-3]||o+3>r||3*x[o-3]>=4*x[o]||3*x[o+3]>=4*x[o])&&(f+=_);return f}function i(){var r,o,f,e,t,a=0,i=0;for(o=0;o<l-1;o++)for(r=0;r<l-1;r++)(F[r+l*o]&&F[r+1+l*o]&&F[r+l*(o+1)]&&F[r+1+l*(o+1)]||!(F[r+l*o]||F[r+1+l*o]||F[r+l*(o+1)]||F[r+1+l*(o+1)]))&&(a+=y);for(o=0;o<l;o++){for(x[0]=0,f=e=r=0;r<l;r++)(t=F[r+l*o])==e?x[f]++:x[++f]=1,i+=(e=t)?1:-1;a+=n(f)}i<0&&(i=-i);var c=i,s=0;for(c+=c<<2,c<<=1;c>l*l;)c-=l*l,s++;for(a+=s*N,r=0;r<l;r++){for(x[0]=0,f=e=o=0;o<l;o++)(t=F[r+l*o])==e?x[f]++:x[++f]=1,e=t;a+=n(f)}return a}function c(n){var c,x,R,y,_,N,Q,j;y=n.length,s=0;do{if(s++,R=4*(A-1)+16*(s-1),u=k[R++],v=k[R++],h=k[R++],d=k[R],R=h*(u+v)+v-3+(s<=9),y<=R)break}while(s<40);for(l=17+4*s,_=h+(h+d)*(u+v)+v,y=0;y<_;y++)z[y]=0;for(S=n.slice(0),y=0;y<l*l;y++)F[y]=0;for(y=0;y<(l*(l+1)+1)/2;y++)p[y]=0;for(y=0;y<3;y++){for(R=0,x=0,1==y&&(R=l-7),2==y&&(x=l-7),F[x+3+l*(R+3)]=1,c=0;c<6;c++)F[x+c+l*R]=1,F[x+l*(R+c+1)]=1,F[x+6+l*(R+c)]=1,F[x+c+1+l*(R+6)]=1;for(c=1;c<5;c++)r(x+c,R+1),r(x+1,R+c+1),r(x+5,R+c),r(x+c+1,R+5);for(c=2;c<4;c++)F[x+c+l*(R+2)]=1,F[x+2+l*(R+c+1)]=1,F[x+4+l*(R+c)]=1,F[x+c+1+l*(R+4)]=1}if(s>1)for(y=C[s],x=l-7;;){for(c=l-7;c>y-3&&(o(c,x),!(c<y));)c-=y;if(x<=y+9)break;o(6,x-=y),o(x,6)}for(F[8+l*(l-8)]=1,x=0;x<7;x++)r(7,x),r(l-8,x),r(7,x+l-7);for(c=0;c<8;c++)r(c,7),r(c+l-8,7),r(c,l-8);for(c=0;c<9;c++)r(c,8);for(c=0;c<8;c++)r(c+l-8,8),r(8,c);for(x=0;x<7;x++)r(8,x+l-7);for(c=0;c<l-14;c++)1&c?(r(8+c,6),r(6,8+c)):(F[8+c+6*l]=1,F[6+l*(8+c)]=1);if(s>6)for(y=g[s-7],R=17,c=0;c<6;c++)for(x=0;x<3;x++,R--)1&(R>11?s>>R-12:y>>R)?(F[5-c+l*(2-x+l-11)]=1,F[2-x+l-11+l*(5-c)]=1):(r(5-c,2-x+l-11),r(2-x+l-11,5-c));for(x=0;x<l;x++)for(c=0;c<=x;c++)F[c+l*x]&&r(c,x);for(_=S.length,N=0;N<_;N++)z[N]=S.charCodeAt(N);if(S=z.slice(0),c=h*(u+v)+v,_>=c-2&&(_=c-2,s>9&&_--),N=_,s>9){for(S[N+2]=0,S[N+3]=0;N--;)y=S[N],S[N+3]|=255&y<<4,S[N+2]=y>>4;S[2]|=255&_<<4,S[1]=_>>4,S[0]=64|_>>12}else{for(S[N+1]=0,S[N+2]=0;N--;)y=S[N],S[N+2]|=255&y<<4,S[N+1]=y>>4;S[1]|=255&_<<4,S[0]=64|_>>4}for(N=_+3-(s<10);N<c;)S[N++]=236,S[N++]=17;for(M[0]=1,N=0;N<d;N++){for(M[N+1]=1,Q=N;Q>0;Q--)M[Q]=M[Q]?M[Q-1]^w[f(m[M[Q]]+N)]:M[Q-1];M[0]=w[f(m[M[0]]+N)]}for(N=0;N<=d;N++)M[N]=m[M[N]];for(R=c,x=0,N=0;N<u;N++)e(x,h,R,d),x+=h,R+=d;for(N=0;N<v;N++)e(x,h+1,R,d),x+=h+1,R+=d;for(x=0,N=0;N<h;N++){for(Q=0;Q<u;Q++)z[x++]=S[N+Q*h];for(Q=0;Q<v;Q++)z[x++]=S[u*h+N+Q*(h+1)]}for(Q=0;Q<v;Q++)z[x++]=S[u*h+N+Q*(h+1)];for(N=0;N<d;N++)for(Q=0;Q<u+v;Q++)z[x++]=S[c+N+Q*d];for(S=z,c=x=l-1,R=_=1,j=(h+d)*(u+v)+v,N=0;N<j;N++)for(y=S[N],Q=0;Q<8;Q++,y<<=1){128&y&&(F[c+l*x]=1);do{_?c--:(c++,R?0!=x?x--:(R=!R,6==(c-=2)&&(c--,x=9)):x!=l-1?x++:(R=!R,6==(c-=2)&&(c--,x-=8))),_=!_}while(t(c,x))}for(S=F.slice(0),y=0,x=3e4,R=0;R<8&&(a(R),(c=i())<x&&(x=c,y=R),7!=y);R++)F=S.slice(0);for(y!=R&&a(y),x=b[y+(A-1<<3)],R=0;R<8;R++,x>>=1)1&x&&(F[l-1-R+8*l]=1,R<6?F[8+l*R]=1:F[8+l*(R+1)]=1);for(R=0;R<7;R++,x>>=1)1&x&&(F[8+l*(l-7+R)]=1,R?F[6-R+8*l]=1:F[7+8*l]=1);return F}var s,l,u,v,h,d,C=[0,11,15,19,23,27,31,16,18,20,22,24,26,28,20,22,24,24,26,28,28,22,24,24,26,26,28,28,24,24,26,26,26,28,28,24,26,26,26,28,28],g=[3220,1468,2713,1235,3062,1890,2119,1549,2344,2936,1117,2583,1330,2470,1667,2249,2028,3780,481,4011,142,3098,831,3445,592,2517,1776,2234,1951,2827,1070,2660,1345,3177],b=[30660,29427,32170,30877,26159,25368,27713,26998,21522,20773,24188,23371,17913,16590,20375,19104,13663,12392,16177,14854,9396,8579,11994,11245,5769,5054,7399,6608,1890,597,3340,2107],k=[1,0,19,7,1,0,16,10,1,0,13,13,1,0,9,17,1,0,34,10,1,0,28,16,1,0,22,22,1,0,16,28,1,0,55,15,1,0,44,26,2,0,17,18,2,0,13,22,1,0,80,20,2,0,32,18,2,0,24,26,4,0,9,16,1,0,108,26,2,0,43,24,2,2,15,18,2,2,11,22,2,0,68,18,4,0,27,16,4,0,19,24,4,0,15,28,2,0,78,20,4,0,31,18,2,4,14,18,4,1,13,26,2,0,97,24,2,2,38,22,4,2,18,22,4,2,14,26,2,0,116,30,3,2,36,22,4,4,16,20,4,4,12,24,2,2,68,18,4,1,43,26,6,2,19,24,6,2,15,28,4,0,81,20,1,4,50,30,4,4,22,28,3,8,12,24,2,2,92,24,6,2,36,22,4,6,20,26,7,4,14,28,4,0,107,26,8,1,37,22,8,4,20,24,12,4,11,22,3,1,115,30,4,5,40,24,11,5,16,20,11,5,12,24,5,1,87,22,5,5,41,24,5,7,24,30,11,7,12,24,5,1,98,24,7,3,45,28,15,2,19,24,3,13,15,30,1,5,107,28,10,1,46,28,1,15,22,28,2,17,14,28,5,1,120,30,9,4,43,26,17,1,22,28,2,19,14,28,3,4,113,28,3,11,44,26,17,4,21,26,9,16,13,26,3,5,107,28,3,13,41,26,15,5,24,30,15,10,15,28,4,4,116,28,17,0,42,26,17,6,22,28,19,6,16,30,2,7,111,28,17,0,46,28,7,16,24,30,34,0,13,24,4,5,121,30,4,14,47,28,11,14,24,30,16,14,15,30,6,4,117,30,6,14,45,28,11,16,24,30,30,2,16,30,8,4,106,26,8,13,47,28,7,22,24,30,22,13,15,30,10,2,114,28,19,4,46,28,28,6,22,28,33,4,16,30,8,4,122,30,22,3,45,28,8,26,23,30,12,28,15,30,3,10,117,30,3,23,45,28,4,31,24,30,11,31,15,30,7,7,116,30,21,7,45,28,1,37,23,30,19,26,15,30,5,10,115,30,19,10,47,28,15,25,24,30,23,25,15,30,13,3,115,30,2,29,46,28,42,1,24,30,23,28,15,30,17,0,115,30,10,23,46,28,10,35,24,30,19,35,15,30,17,1,115,30,14,21,46,28,29,19,24,30,11,46,15,30,13,6,115,30,14,23,46,28,44,7,24,30,59,1,16,30,12,7,121,30,12,26,47,28,39,14,24,30,22,41,15,30,6,14,121,30,6,34,47,28,46,10,24,30,2,64,15,30,17,4,122,30,29,14,46,28,49,10,24,30,24,46,15,30,4,18,122,30,13,32,46,28,48,14,24,30,42,32,15,30,20,4,117,30,40,7,47,28,43,22,24,30,10,67,15,30,19,6,118,30,18,31,47,28,34,34,24,30,20,61,15,30],m=[255,0,1,25,2,50,26,198,3,223,51,238,27,104,199,75,4,100,224,14,52,141,239,129,28,193,105,248,200,8,76,113,5,138,101,47,225,36,15,33,53,147,142,218,240,18,130,69,29,181,194,125,106,39,249,185,201,154,9,120,77,228,114,166,6,191,139,98,102,221,48,253,226,152,37,179,16,145,34,136,54,208,148,206,143,150,219,189,241,210,19,92,131,56,70,64,30,66,182,163,195,72,126,110,107,58,40,84,250,133,186,61,202,94,155,159,10,21,121,43,78,212,229,172,115,243,167,87,7,112,192,247,140,128,99,13,103,74,222,237,49,197,254,24,227,165,153,119,38,184,180,124,17,68,146,217,35,32,137,46,55,63,209,91,149,188,207,205,144,135,151,178,220,252,190,97,242,86,211,171,20,42,93,158,132,60,57,83,71,109,65,162,31,45,67,216,183,123,164,118,196,23,73,236,127,12,111,246,108,161,59,82,41,157,85,170,251,96,134,177,187,204,62,90,203,89,95,176,156,169,160,81,11,245,22,235,122,117,44,215,79,174,213,233,230,231,173,232,116,214,244,234,168,80,88,175],w=[1,2,4,8,16,32,64,128,29,58,116,232,205,135,19,38,76,152,45,90,180,117,234,201,143,3,6,12,24,48,96,192,157,39,78,156,37,74,148,53,106,212,181,119,238,193,159,35,70,140,5,10,20,40,80,160,93,186,105,210,185,111,222,161,95,190,97,194,153,47,94,188,101,202,137,15,30,60,120,240,253,231,211,187,107,214,177,127,254,225,223,163,91,182,113,226,217,175,67,134,17,34,68,136,13,26,52,104,208,189,103,206,129,31,62,124,248,237,199,147,59,118,236,197,151,51,102,204,133,23,46,92,184,109,218,169,79,158,33,66,132,21,42,84,168,77,154,41,82,164,85,170,73,146,57,114,228,213,183,115,230,209,191,99,198,145,63,126,252,229,215,179,123,246,241,255,227,219,171,75,150,49,98,196,149,55,110,220,165,87,174,65,130,25,50,100,200,141,7,14,28,56,112,224,221,167,83,166,81,162,89,178,121,242,249,239,195,155,43,86,172,69,138,9,18,36,72,144,61,122,244,245,247,243,251,235,203,139,11,22,44,88,176,125,250,233,207,131,27,54,108,216,173,71,142,0],S=[],z=[],F=[],p=[],x=[],A=2,M=[],R=3,y=3,_=40,N=10,Q=null,j={get ecclevel(){return A},set ecclevel(r){A=r},get size(){return _size},set size(r){_size=r},get canvas(){return Q},set canvas(r){Q=r},getFrame:function(r){return c(r)},utf16to8:function(r){var o,f,e,t;for(o="",e=r.length,f=0;f<e;f++)(t=r.charCodeAt(f))>=1&&t<=127?o+=r.charAt(f):t>2047?(o+=String.fromCharCode(224|t>>12&15),o+=String.fromCharCode(128|t>>6&63),o+=String.fromCharCode(128|t>>0&63)):(o+=String.fromCharCode(192|t>>6&31),o+=String.fromCharCode(128|t>>0&63));return o},draw:function(r,o,f,e,t){var a=this;if(A=t||A,o=o||Q){var n=Math.min(f,e);r=a.utf16to8(r);var i=a.getFrame(r),c=wx.createCanvasContext(o),s=Math.round(n/(l+8)),u=s*(l+8),v=Math.floor((n-u)/2);n=u,c.setFillStyle("#ffffff"),c.fillRect(0,0,f,f),c.setFillStyle("#000000");for(var h=0;h<l;h++)for(var d=0;d<l;d++)i[d*l+h]&&c.fillRect(s*(4+h)+v,s*(4+d)+v,s,s);c.draw()}else console.warn("No canvas provided to draw QR code in!")}};module.exports={api:j}}(); 
 			}); 
		define("app.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("./config.js"),a=require("./utils/util.js");App({onLaunch:function(o){var n=this;wx.showLoading({title:"正在加载"}),wx.onMemoryWarning(function(){console.log("onMemoryWarningReceive")}),wx.onNetworkStatusChange(function(e){console.log(e.isConnected,"网络断开"),console.log(e.networkType)}),wx.request({data:{houseId:e.houseId},url:a.newUrl()+"elab-marketing-authentication/mimiapp/parameter/detail",method:"post",success:function(a){a.data.single&&(n.globalData.projectName=a.data.single.name||e.projectName,n.globalData.logo=a.data.single.logo,n.globalData.shareImage=a.data.single.shareImage,console.log(n.globalData.shareImage,a))},fail:function(e){}}),o.shareTickets&&wx.getShareInfo({shareTicket:o.shareTickets[0],success:function(e){e.errMsg,e.encryptedData,e.iv},fail:function(){},complete:function(){}}),wx.getSystemInfo({success:function(e){console.log(e),n.systemInfo=e}}),console.log(a),wx.request({url:a.newUrl()+"elab-marketing-authentication/ipAddr/getIpAddr",method:"post",success:function(e){n.globalData.ip=e.data.single},fail:function(e){console.log("获取ip失败")}})},onUnload:function(e){},onHide:function(e){var o=getCurrentPages()[getCurrentPages().length-1];if("huxingtupian"!==o.data.despage||!o.data.previewFlag){var n={clkId:"clk_2cmina_2",clkDesPage:"",clkName:"close",type:"CLK",pvCurPageName:getCurrentPages()[getCurrentPages().length-1].data.despage||"",pvCurPageParams:""};a.trackRequest(n,this)}},getToken:function(e){var o=this;if(this.globalData.tonken)"function"==typeof e&&e(this.globalData.tonken);else{var n=a.reformParam(a.tokenUrl,{nickname:"",mobile:"",verifycode:"",invitation_code:"",password:"",source:"3",new_guested:"1",module:"",houseid:"109",anonymous:"1",appVersion:"150"});wx.request({url:a.url(),method:"POST",data:n,success:function(a){console.log(a,"app.js *** getToken"),o.globalData.tonken=a.data.single.tonken,"function"==typeof e&&e(o.globalData.tonken)}})}},getUserInfo:function(e){this.globalData.userInfo=wx.getStorageSync("userInfo"),this.globalData.userInfo&&"function"==typeof e&&e(this.globalData.userInfo)},event:function(e){console.log("app.js执行event"),this.gloabalFun.a&&"function"==typeof this.gloabalFun.a&&this.gloabalFun.a(e)},login:function(o){var n=this,t=this;n.globalData.userInfo=wx.getStorageSync("userInfo"),t.globalData.single&&"null"!=t.globalData.single&&"undefined"!=t.globalData.single&&t.globalData.single.id&&"null"!=t.globalData.single.id&&"undefined"!=t.globalData.single.id?(console.log("******app.login2-app.globalData.single***",t.globalData.single),"function"==typeof o&&o()):wx.login({success:function(l){if(l.code){var i=n.globalData.secret,s=l.code;n.globalData.code=l.code;var r={code:s,appid:n.globalData.appid,secret:i};console.log("=========login-code======",r);var g={nickname:t.globalData.userInfo?t.globalData.userInfo.nickName:"",mobile:"",source:"3",customerHead:t.globalData.userInfo?t.globalData.userInfo.avatarUrl:"",registChannel:t.globalData.fromChannel||"",houseId:e.houseId,appVersion:"1.0",code:r.code||"",appId:r.appid||"",secret:r.secret||""};console.log(g,"param"),wx.request({url:a.newUrl()+"elab-marketing-authentication/customer/miniapp/login",method:"POST",data:g,header:{"content-type":"application/json"},success:function(n){if(console.log("***app.login***",n),n.data.success)if(n.data.single){var l=n.data.single;t.globalData.qrpictureurl=l.qrpictureurl,t.globalData.tonken=l.token,t.globalData.single=l,t.globalData.loginid=l.loginNo,t.globalData.sessionKey=l.sessionKey,t.globalData.openid=l.openId||"",t.globalData.phone=wx.getStorageSync("phone"),t.globalData.identifier=l.id+"_"+l.houseId,console.log(t.globalData),"function"==typeof o&&o(),t.proto_getLoginInfo(t),wx.request({url:a.newUrl()+"elab-marketing-authentication/share/sign",method:"POST",data:{customerId:t.globalData.single.id,houseId:e.houseId,userRole:0},success:function(e){t.globalData.shareToken=e.data.single||""}})}else wx.showToast({title:"数据不存在,请稍后再试",icon:"warn",duration:1500});else wx.showToast({title:n.data.message,icon:"warn",duration:1500})},fail:function(e){console.log("获取信息失败: ",e),"request:fail timeout"==e.errMsg?wx.showToast({title:"网络请求超时，请检查网络状态",icon:"warn",duration:1500}):wx.showToast({title:e.errMsg,icon:"warn",duration:1500})}})}}})},proto_getLoginInfo:function(o){wx.request({url:a.newUrl()+"elab-marketing-authentication/tencent/signature",method:"POST",data:{identifier:o.globalData.identifier,appId:e.sdkAppID},header:{"content-type":"application/json"},success:function(e){if(e.data.code)return console.log("获取登录信息失败，调试期间请点击右上角三个点按钮，选择打开调试"),void wx.showToast({title:e.data.message+"["+e.data.code+"]",icon:"warn",duration:1500});console.log("获取usersig登录信息成功",e),o.globalData.userSig=e.data.single.signature},fail:function(e){console.log("获取IM信息失败: ",e),"request:fail timeout"==e.errMsg?wx.showToast({title:"网络请求超时，请检查网络状态",icon:"warn",duration:1500}):wx.showToast({title:e.errMsg,icon:"warn",duration:1500})}})},systemInfo:{},gloabalFun:{a:null},globalData:{appid:"wx0a46b845467c5771",secret:"60059ac45698b3646373f53a718f477f",shareToken:null,videoCustomer:null,openid:null,sessionKey:null,tonken:null,projectName:e.projectName,logo:null,shareImage:null,houseid:e.houseId,code:null,currDespage:null,ip:"",fromChannel:"",imHelloWord:null,imRepeat:null,qrpictureurl:null,identifier:null,single:null,tmpPhone:!1,globalUserInfoFlag:!1,phone:null,userSig:null,like:null,isShowVideoButton:!1,view:null,parm:null,loginid:null,userInfo:null,sessionTime:(new Date).getTime(),isPhone:!1,isUserInfo:!1,houseTypeDetail:null,dataJson:"",pullLog:"",pushLog:""}}); 
 			}); 	require("app.js");
 		__wxRoute = 'pages/components/live-room/liveroom';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/components/live-room/liveroom.js';	define("pages/components/live-room/liveroom.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("../../../utils/liveroom.js"),t=(require("../../../config.js"),null),o=[{name:"静音"},{name:"美颜"},{name:"相机"},{name:"连麦"}];Component({properties:{role:{type:String,value:"audience"},roomid:{type:String,value:"",observer:function(e,t){this.data.roomID=e}},roomname:{type:String,value:"undefined"},debug:{type:Boolean,value:!1},template:{type:String,value:"1v3"},beauty:{type:Number,value:5},muted:{type:Boolean,value:!1},pureaudio:{type:Boolean,value:!1}},data:{isCaster:!0,menuItems:[],userName:"",userID:"",roomID:"",pusherContext:null,playerContext:null,linkedPlayerContext:null,unload:1,isInRoom:0,unfold:!1,mainPusherInfo:{url:"",aspect:"3:4",minBitrate:0,maxBitrate:0,puserID:""},audience:{url:null,mixUrl:null,accelerateUrl:null,pusherName:"",pusherID:"",isLinked:!1,aspect:"3:4",loading:!1,objectFit:!1},linkPusherInfo:{url:"",loading:!0,debug:!0},members:[],visualPlayers:[],requestLinking:!1,mode:"SD"},methods:{toggleDebug:function(){var e=this;e.setData({debug:!e.data.debug},function(){console.log(">> Debug: ",e.data.debug)})},toggleBeauty:function(){var e=this,t=5==e.data.beauty?0:5;e.setData({beauty:t},function(){console.log(t>0?"开启美颜":"关闭美颜")})},toggleMuted:function(){var e=this;e.setData({muted:!e.data.muted},function(){console.log(e.data.muted?"静音":"非静音")})},clipPusherIDs:function(){var e=this,t="",o="",n="";e.data.mainPusherInfo.url&&(o=substring(aa.lastIndexOf("/")+1,aa.indexOf("?"))),e.data.linkPusherInfo.url&&(n=substring(aa.lastIndexOf("/")+1,aa.indexOf("?"))),t="MAIN: "+o+"; LINK: "+n,wx.setClipboardData({data:t,success:function(e){wx.showToast({title:"复制成功",duration:500,mask:!0})}})},unfoldCtrlMenu:function(){var e=this,t=e.data.menuItems;t=t.length>0?[]:o,e.setData({menuItems:t,unfold:!e.data.unfold},function(){wx.showToast({title:t.length>0?"unfold":"close",duration:500,mask:!0})})},selectMenu:function(e){var t=this,o=e.currentTarget.dataset.index;wx.showToast({title:"选中 "+o+": "+t.data.menuItems[o],duration:500,mask:!0})},sendTextMsg:function(t){var o=this;if(t.startsWith(">"))switch(t){case">debug":return void o.toggleDebug()}e.sendRoomTextMsg({data:{msg:t},success:function(){},fail:function(e){console.log("发送消息失败: ",e),o.triggerEvent("RoomEvent",{tag:"error",code:-9005,detail:"发送消息失败"})}})},switchCamera:function(){var e=this;console.log("切换摄像头: ",e.data.pusherContext),e.data.pusherContext&&e.data.pusherContext.switchCamera({})},respondJoinReq:function(t,o){console.info("respondJoinReq(agree:"+t+", audience:"+o+") called");t?e.acceptJoinPusher({data:o}):e.rejectJoinPusher({data:o})},setupLiveRoomListener:function(){var t=this;e.setListener({onRoomClose:t.onRoomClose,onRecvRoomTextMsg:t.onRecvRoomTextMsg,onSketchpadData:t.onSketchpadData,onKickOut:t.onKickOut,onRecvJoinPusherRequest:t.onRecvJoinPusherRequest,onPusherQuit:t.onPusherQuit,onPusherJoin:t.onPusherJoin,onPushersChange:t.onPushersChange})},start:function(){console.info("start() called");var t=this;0==t.data.isCaster?t.enter():e.getPushURL({success:function(e){console.log("getPushURL 成功，",e),t.data.mainPusherInfo.url=e.pushURL,console.log("设置推流模式为:SD"),t.setData({mainPusherInfo:t.data.mainPusherInfo,mode:"SD"},function(){t.setupLiveRoomListener(),t.data.pusherContext=wx.createLivePusherContext("pusher"),console.log("创建 pusherContext：",t.data.pusherContext),t.data.pusherContext.start()})},fail:function(e){console.log("获取推流地址失败: ",e),t.triggerEvent("RoomEvent",{tag:"error",code:-9002,detail:"获取推流地址失败"})}})},stop:function(){console.log("stop() called");var t=this;console.log("stop pusherContext：",t.data.pusherContext,t.data.playerContext),t.data.pusherContext&&t.data.pusherContext.stop(),t.data.playerContext&&t.data.playerContext.stop();var o=t.data.members;o&&o.forEach(function(e){e.context&&e.context.stop()}),t.setData({unload:1,members:[{}],visualPlayer:[],pusherContext:null,playerContext:null,linkedPlayerContext:null}),t.exit(),e.setListener({})},pause:function(){console.log("pause() called");var e=this;e.data.pusherContext&&e.data.pusherContext.pause(),e.data.playerContext&&e.data.playerContext.pause()},resume:function(){console.log("resume() called");var e=this;e.data.pusherContext&&e.data.pusherContext.resume(),e.data.playerContext&&e.data.playerContext.resume()},onPusherJoin:function(e){console.log("==> onPusherJion() called: ",e);var o=t,n=o.data.members.filter(function(e){return e.userID}),a=e.pushers,r=a.map(function(e){return e.userID}).indexOf(o.data.userID);switch(-1!=r&&a.splice(r,1),-1!=(r=a.map(function(e){return e.userID}).indexOf(o.data.audience.pusherID))&&a.splice(r,1),console.log("%c===> "+a.length+" 人加入Link","color: red"),a=a.map(function(e){return{userID:e.userID,userName:e.userName,accelerateURL:e.accelerateURL,context:null}}),n=n.concat(a),o.data.template){case"1v1":n.length>1?n.splice(1,n.length-1):n.length<1&&n.push({});break;case"vertical1v3":case"1v3":if(n.length>3)n.splice(3,n.length-3);else for(var s=3-n.length-(!o.data.isCaster&&o.data.linkPusherInfo.url?1:0),l=0;l<s;l++)n.push({})}console.log("设置推流模式为:RTC"),o.setData({members:n,mode:"RTC"},function(){n.forEach(function(e){e.context||e.userID&&(e.context=wx.createLivePlayerContext(e.userID,o))}),console.log("data.members: ",o.data.members)})},onPusherQuit:function(e){console.log("===> onPusherQuit() called: ",e);var o=t,n=e.pushers,a=o.data.members,r=!0,s=!1,l=void 0;try{for(var i,u=n[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var c=i.value;for(var d in a)if(c.userID==a[d].userID){a[d].context&&a[d].context.stop(),a.splice(d,1),a.push({});break}}}catch(e){s=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(s)throw l}}for(var h="SD",d=0;d<a.length;++d)a[d].userID&&(h="RTC");console.log("设置推流模式为:",h),o.setData({members:a,mode:h},function(){console.log("members after onPusherQuit: ",o.data.members)})},onRecvJoinPusherRequest:function(e){var o=t;console.log("onRecvJoinPusherRequest() called, pusher = ",JSON.stringify(e)),o.triggerEvent("RoomEvent",{tag:"joinPusher",code:0,detail:e})},onKickOut:function(){console.log("onKickOut() called")},enter:function(){var t=this;console.log("enter room width roomid: ",t.data.roomID),e.setListener({onRoomClose:t.onRoomClose,onRecvRoomTextMsg:t.onRecvRoomTextMsg,onSketchpadData:t.onSketchpadData,onPusherQuit:t.onLinkPusherQuit,onPusherJoin:t.onPusherJoin,onKickOut:t.onLinkKickOut,onPushersChange:t.onPushersChange}),e.enterRoom({data:{roomID:t.data.roomID},success:function(o){console.info("enterRoom 成功: ",o),t.data.audience.url=o.mixedPlayURL,t.data.audience.mixUrl=o.mixedPlayURL,t.data.mainPusherInfo.puserID=o.roomCreator,o.pushers&&o.pushers.length>0?(t.data.audience.pusherName=o.pushers[0].userName,t.data.audience.pusherID=o.pushers[0].userID,t.data.audience.accelerateUrl=o.pushers[0].accelerateURL):console.error("缺少加速流"),e.sendC2CCustomMsg({cmd:"sketchpad",msg:'{"type":"request", "action":"currentPPT"}'}),t.playMixedUrl().then(function(){console.log("playMixedUrl done")}).catch(function(e){console.log("playMixedUrl Error: ",e)})},fail:function(e){console.error("enterRoom 失败: ",e),t.data.unload||(t.data.playerContex&&t.data.playerContext.stop(),t.triggerEvent("RoomEvent",{tag:"error",code:-9003,detail:"enterRoom 失败"}))}})},create:function(){console.log("create() called");var t=this;e.createRoom({data:{roomInfo:t.data.roomname,pushURL:t.data.mainPusherInfo.url},success:function(e){console.log("创建房间成功, ret = ",e),t.setData({roomID:e.roomID}),t.triggerEvent("RoomEvent",{tag:"created",code:0,detail:"创建房间成功"})},fail:function(e){console.error("创建房间失败",e),t.data.unload||t.data.pusherContext.stop(),t.triggerEvent("RoomEvent",{tag:"error",code:-9001,detail:"创建房间失败"})}})},exit:function(){console.log("exit() called"),e.exitRoom({})},onPlay:function(e){var t=this;switch(console.error("拉流情况：",e.detail.code),e.detail.code){case-2301:console.error("多次拉流失败"),t.triggerEvent("RoomEvent",{tag:"error",code:e.detail.code,detail:"多次拉流失败"})}},linkJionPusher:function(){console.log("linkJionPusher() called");var t=this;e.joinPusher({data:{pushURL:t.data.linkPusherInfo.url,roomID:t.data.roomID},success:function(){console.log("连麦成功完成"),t.triggerEvent("RoomEvent",{tag:"LinkOn",code:0,detail:"连麦成功完成"})},fail:function(e){console.error("连麦失败: ",e),t.triggerEvent("RoomEvent",{tag:"error",code:0,detail:"连麦失败"})}})},playMixedUrl:function(){console.log("==> playMixedUrl");var e=t,o=[{debug:!1,mute:!1,url:e.data.audience.mixUrl,mode:"live",maxCache:3,minCache:1,loading:!1,objectFit:"contain",userName:e.data.audience.pusherName}];return new Promise(function(t){e.setData({visualPlayers:o},function(){t()})})},playAccelerateUrl:function(){console.info("playAccelerateUrl() called");var e=t,o=[{debug:!1,mute:!1,url:e.data.audience.accelerateUrl,mode:"RTC",maxCache:.3,minCache:.1,loading:!1,objectFit:"fillCrop",userName:e.data.audience.pusherName}];return new Promise(function(t){e.setData({visualPlayers:o},function(){t()})})},stopPlayUrl:function(){var e=t;return new Promise(function(t){e.setData({visualPlayers:[]},function(){t()})})},getPushUrl:function(){console.info("getPushUrl() called");return new Promise(function(t,o){e.getPushURL({success:function(e){console.log("getPushURL() 成功，",e),t(e.pushURL)},fail:function(e){console.log("getPushUrl() 获取推流地址失败: ",e),o(e)}})})},startLinkPush:function(e){console.info("startLinkPush() called");var o=t;return new Promise(function(t,n){o.data.linkPusherInfo.url=e,o.data.members.splice(0,1),console.log("设置推流模式为:RTC"),o.setData({members:o.data.members,linkPusherInfo:o.data.linkPusherInfo,mode:"RTC"},function(){o.data.pusherContext=wx.createLivePusherContext("audience_pusher"),console.log("startLinkPush.创建 pusherContext：",o.data.pusherContext),o.data.pusherContext.start(),t()})})},link:function(){var e=this;Promise.resolve().then(e.stopPlayer).then(e.playAccelerateUrl).then(e.getPushUrl).then(e.startLinkPush).then(function(){return new Promise(function(t,o){console.log("----\x3e link() self.data: ",e.data),t()})}).catch(function(t){console.log("过程出错： 停止mix流播放 --\x3e 播放 accelerate流 --\x3e 获取推流连接开始推流 --\x3e onLinkPush 成功后 jionPusher: ",t),e.triggerEvent("RoomEvent",{tag:"error",code:-1,detail:"连麦过程发生错误"})})},requestJionPusher:function(){console.log("requestJionPusher() called");var o=t;o.data.requestLinking?wx.showToast({title:"等待大主播接受连麦",duration:1e3}):(console.info("用户请求连麦"),o.data.requestLinking=!0,e.requestJoinPusher({data:{timeout:5e3},success:function(e){o.data.requestLinking=!1,console.log("请求连麦成功: ",e),o.link()},fail:function(e){console.log("请求连麦失败: ",e),o.data.requestLinking=!1,o.triggerEvent("RoomEvent",{tag:"error",code:-9004,detail:"请求连麦失败"})}}))},onLinkError:function(e){console.error("onLinkError() called: ",e),self.triggerEvent("RoomEvent",{tag:"error",code:-2,detail:"播放错误"})},kickoutSubPusher:function(o){console.log("kickoutSubPusher() called");var n=t;console.log("==> kickoutSubPusher: ",o);var a=o.currentTarget.dataset.userid;e.kickoutSubPusher({data:{userID:a},success:function(e){console.log("--\x3e 踢人成功： ",e);var t=n.data.members,o=t.map(function(e){return e.userID}).indexOf(a);-1!=o&&(t.splice(o,1),t.push({})),n.setData({members:t}),console.log("data.members: ",n.data.members)},fail:function(e){console.log("---\x3e 踢人失败： ",e)}})},quitLink:function(){console.log("quitLink() called");var t=this;e.quitPusher({success:function(e){console.log("quitPusher 成功：",e),t.resetToAudience()},fail:function(e){console.error("quitPusher Error: ",e),t.triggerEvent("RoomEvent",{tag:"error",code:-1,detail:'退出连麦"quitPusher"返回错误'})}})},resetToAudience:function(){console.log("resetToAudience() called");var e=t;Promise.resolve().then(function(){return console.log("停止推流"),new Promise(function(t){console.log("停止推流"),e.data.pusherContext&&e.data.pusherContext.stop(),e.data.linkPusherInfo.url=null,e.setData({pusherContext:null,linkPusherInfo:e.data.linkPusherInfo},function(){return t()})})}).then(function(){return console.log("清理 member players"),new Promise(function(t){var o=e.data.members;o&&o.forEach(function(e){e.context&&e.context.stop()}),o="1v1"==e.data.template?[{}]:[{},{},{}],e.setData({members:o},function(){return t()})})}).then(e.stopPlayUrl).then(e.playMixedUrl).then(function(){return new Promise(function(t){e.triggerEvent("RoomEvent",{tag:"LinkOut",code:0,detail:"连麦断开"}),t()})}).catch(function(e){console.error("resetToAudience 流程出现错误：",e)})},onLinkPusherQuit:function(e){console.log("onLinkPusherQuit() called ",e);var o=t,n=e.pushers;n&&(-1!=n.map(function(e){return e.userID}).indexOf(o.data.userID)?o.resetToAudience():o.onPusherQuit(e))},onLinkKickOut:function(e){console.log("onLinkKickOut() called");var o=t;console.log("%c onLinkKickOut: ","color: red;",e),o.quitLink()},onPushEvent:function(e){var t=this;switch(e){case-1301:console.log("打开摄像头失败: ",e),t.triggerEvent("RoomEvent",{tag:"error",code:-1301,detail:"打开摄像头失败"});break;case-1302:console.log("打开麦克风失败: ",e),t.triggerEvent("RoomEvent",{tag:"error",code:-1302,detail:"打开麦克风失败"});break;case-1307:console.error("推流连接断开: ",e),t.exit(),t.triggerEvent("RoomEvent",{tag:"error",code:-1307,detail:"推流连接断开"});break;case-1305:console.log("不支持的视频分辨率"),t.triggerEvent("RoomEvent",{tag:"error",code:-1305,detail:"不支持的视频分辨率"});break;case-1306:console.log("不支持的音频采样率"),t.triggerEvent("RoomEvent",{tag:"error",code:-1306,detail:"不支持的音频采样率"});break;default:console.log("推流事件：",e)}},onLinkPush:function(e){var t=this;switch(console.log("onLinkPush推流情况：",e.detail.code),e.detail.code){case 1002:console.log("onLinkPush推流成功：",e.detail.code),t.linkJionPusher();break;case 5e3:console.log("收到5000: ",e.detail.code),t.exit(),t.data.exit=5e3,t.triggerEvent("RoomEvent",{tag:"error",code:5e3,detail:"收到5000就退房"});break;default:t.onPushEvent(e.detail.code)}},onMainPush:function(e){var t=this;switch(console.log(">> onMainPush() called: ",e),console.log("推流情况：",e.detail.code),e.detail.code){case 1005:console.log("推流动态分辨率改变： ",e);break;case 1002:console.log("推流成功：",e.detail.code),t.data.isInRoom||(t.setData({isInRoom:1}),t.create());break;case 5e3:console.log("收到5000: ",e.detail.code),t.exit(),t.data.exit=5e3,t.triggerEvent("RoomEvent",{tag:"error",code:5e3,detail:"收到5000就退房"});break;default:t.onPushEvent(e.detail.code)}},onMainError:function(e){var t=this;console.error("onMainError called: ",e),t.triggerEvent("RoomEvent",{tag:"error",code:-1,detail:e.detail&&e.detail.errMsg||"推流错误"})},onMainPlayState:function(e){console.log("===> onMainPlayState: ",e)},onMainPlayError:function(e){console.log("===> onMainPlayError: ",e)},onRoomClose:function(e){console.log("onRoomClose: e=",e),t&&t.triggerEvent("RoomEvent",{tag:"roomClosed",code:-9006,detail:"房间已经解散了"})},onRecvRoomTextMsg:function(e){var o=t;console.log("onRecvRoomTextMsg called, ret: ",e),o.triggerEvent("RoomEvent",{tag:"recvTextMsg",code:0,detail:e})},onSketchpadData:function(e){var o=t;console.log("onSketchpadData called, ret: ",e),o.triggerEvent("RoomEvent",{tag:"sketchpadData",code:0,detail:e})},onPushersChange:function(){var o=t;o&&o.data&&!o.data.isCaster&&e.getPushers({success:function(e){var t=e.data.pushers;if(t&&t.length>1)console.log("处于连麦状态，改变播放缓冲区时长为1-3s"),o.data.visualPlayers&&o.data.visualPlayers.length>0&&((n=o.data.visualPlayers[0]).maxCache=3,o.setData({visualPlayers:o.data.visualPlayers}));else if(console.log("处于非连麦状态，改变播放缓冲区时长为1-5s"),o.data.visualPlayers&&o.data.visualPlayers.length>0){var n=o.data.visualPlayers[0];n.maxCache=5,o.setData({visualPlayers:o.data.visualPlayers})}},fail:function(e){}})}},attached:function(){console.log("ready() called"),wx.setKeepScreenOn({keepScreenOn:!0});var o=this;t=this;var n=e.getAccountInfo(),a=n.userID,r=n.userName;o.data.isCaster="presenter"==o.data.role,o.setData({isCaster:o.data.isCaster,userID:a,userName:r,unload:0,members:"1v1"==o.data.template?[{}]:[{},{},{}]}),console.log("data: ",o.data)},detached:function(){console.log("detached() called"),t=null,this.stop()}}); 
 			}); 	require("pages/components/live-room/liveroom.js");
 		__wxRoute = 'pages/components/rtc-room/rtc-room';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/components/rtc-room/rtc-room.js';	define("pages/components/rtc-room/rtc-room.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("../../../utils/rtcroom.js"),t=require("../../../utils/webim_wx.js"),a=require("../../../utils/report.js"),s=getApp();Component({properties:{roomID:{type:String,value:""},roomInfo:{type:String,value:""},template:{type:String,value:"",observer:function(e,t){this.init(e)}},beauty:{type:String,value:5},aspect:{type:String,value:"3:4"},minBitrate:{type:Number,value:200},maxBitrate:{type:Number,value:400},muted:{type:Boolean,value:!1},debug:{type:Boolean,value:!1},assistant:{type:Object,value:null},hideBg:{type:Boolean,value:!1},flag:{type:Boolean,value:!1},flagStatus:{type:Number,value:1},startTime:{type:String,value:""}},data:{pusherContext:"",hasPushStarted:!1,pushURL:"",members:[{},{},{}],maxMembers:3,self:{},hasExitRoom:!0,push_stream_start:0,push_stream_tap:0,push_info:"",play_stream_start:0,play_stream_end:0,play_stream_tap:0,play_info:"",ERROR_GET_PUSH_URL:-1,ERROR_CREATE_ROOM:-2,ERROR_ENTER_ROOM:-3,ERROR_OPEN_CAMERA:-4,ERROR_OPEN_MIC:-5,ERROR_PUSH_DISCONNECT:-6,ERROR_CAMERA_MIC_PERMISSION:-7,ERROR_REACH_MAX_MEMBERS:-8},ready:function(){this.data.pusherContext||(this.data.pusherContext=wx.createLivePusherContext("rtcpusher")),self=this},detached:function(){console.log("组件 detached"),self.exitRoom()},onUnload:function(){self.data.pusherContext&&self.data.pusherContext.stop(),self.data.playerContext&&self.data.playerContext.stop()},methods:{init:function(e){switch(self=this,e){case"1v3":this.setData({maxMembers:3,members:[{},{},{}],template:e});break;case"1v1":this.setData({maxMembers:1,members:[{}],template:e})}},start:function(t){self=this,self.data.hasExitRoom=!1,e.setListener({onPusherJoin:self.onPusherJoin,onPusherQuit:self.onPusherQuit,onRoomClose:self.onRoomClose,onPush:self.onPush,onRecvRoomTextMsg:self.onRecvRoomTextMsg}),self.createRoom(t)},stop:function(){self.data.hasExitRoom=!0,console.log("组件停止"),self.exitRoom()},pause:function(){self.data.pusherContext||(self.data.pusherContext=wx.createLivePusherContext("rtcpusher")),self.data.pusherContext&&self.data.pusherContext.pause(),self.data.members.forEach(function(e){e.playerContext&&e.playerContext.pause()})},resume:function(){self.data.pusherContext||(self.data.pusherContext=wx.createLivePusherContext("rtcpusher")),self.data.pusherContext&&self.data.pusherContext.resume(),self.data.members.forEach(function(e){e.playerContext&&e.playerContext.resume()})},switchCamera:function(){self.data.pusherContext||(self.data.pusherContext=wx.createLivePusherContext("rtcpusher")),self.data.pusherContext&&self.data.pusherContext.switchCamera({})},sendTextMsg:function(a,s){a&&(3==s.flag?e.sendRoomTextMsg({data:{text:"ceshi2",msg:a,ext:a},typedata:{TYPE:t.SESSION_TYPE.C2C,myselToID:s.myselToID||"",flag:s.flag}}):e.sendRoomTextMsg({data:{text:"ceshi2",data:a,ext:a},typedata:{TYPE:t.SESSION_TYPE.C2C,myselToID:s.myselToID||"",flag:s.flag}}))},getAccountInfo:function(){var t=e.getAccountInfo();return{userID:t.userID,userName:t.userName,userAvatar:t.userAvatar,userSig:t.userSig,sdkAppID:t.sdkAppID,accountType:t.accountType,accountMode:t.accountMode,token:t.token}},getRoomInfo:function(){var t=e.getRoomInfo();return{roomID:t.roomID,roomCreator:t.roomCreator,roomInfo:t.roomInfo,mixedPlayURL:t.mixedPlayURL,pushers:t.pushers,isDestory:t.isDestory}},createRoom:function(t){var a={roomID:self.data.roomID,roomName:self.data.roomInfo};console.log("********creatroom********",a),e.createRoom({data:{roomInfo:a},success:function(e){self.data.roomID=e.roomID,console.log("创建房间成功，房间号：",e.roomID,self.data.roomID),self.getPushURLAndStartPush(self.data.roomID,t)},fail:function(e){console.error("创建房间失败:",e),self.exitRoom(),self.postErrorEvent(self.data.ERROR_CREATE_ROOM,"创建房间失败["+e.errMsg+"("+e.errCode+")]")}})},enterRoom:function(){e.enterRoom({data:{roomID:self.data.roomID,pushURL:self.data.pushURL,roomInfo:self.data.roomInfo},success:function(e){console.log("进房成功")},fail:function(e){console.error("进房失败:",e),self.exitRoom(),self.postErrorEvent(self.data.ERROR_ENTER_ROOM,"进入房间失败["+e.errMsg+"("+e.errCode+")]")}})},exitRoom:function(t){self.data.pusherContext||(self.data.pusherContext=wx.createLivePusherContext("rtcpusher")),self.data.pusherContext&&self.data.pusherContext.stop&&self.data.pusherContext.stop(),self.data.members.forEach(function(e){e.playerContext&&e.playerContext.stop()});for(var a=0;a<self.data.maxMembers;a++)self.data.members[a]={};self.setData({members:self.data.members}),e.exitRoom({roomID:self.data.roomID}),t&&self.postEvent("roomClosed",0,"")},postErrorEvent:function(e,t){self.postEvent("error",e,t)},postEvent:function(e,t,a){self.triggerEvent("onRoomEvent",{tag:e,code:t,detail:a},{})},getPushURLAndStartPush:function(t,a){var s={};t&&(s.roomID=t),e.getPushURL({data:s,success:function(e){console.log("==========###getPushURLAndStartPush###",e),self.data.hasExitRoom||(self.data.hasPushStarted=!1,self.setData({push_stream_start:+new Date,push_stream_tap:+new Date,pushURL:e.pushURL})),"function"==typeof a&&a(t)},fail:function(e){console.error("获取推流地址失败:",JSON.stringify(e)),self.postErrorEvent(self.data.ERROR_GET_PUSH_URL,"获取推流地址失败["+e.errMsg+"("+e.errCode+")]")}})},onPusherJoin:function(e){self.data.play_stream_start||(self.data.play_stream_start=+new Date,self.data.play_stream_tap=+new Date),console.log("####***拉流开始时间戳***###",self.data.play_stream_start),e.pushers.forEach(function(e){for(var t=-1,a=!1,s=0;self.data.members&&s<self.data.members.length;s++)self.data.members[s].userID&&self.data.members[s].userID==e.userID?a=!0:self.data.members[s].userID||-1!=t||(t=s);a||-1==t||(e.loading=!1,e.playerContext=wx.createLivePlayerContext(e.userID),self.data.members[t]=e)}),self.setData({members:self.data.members})},onPusherQuit:function(e){e.pushers.forEach(function(e){for(var t=0;t<self.data.maxMembers;t++)self.data.members[t].userID==e.userID&&(self.data.members[t]={})}),self.setData({members:self.data.members})},onRoomClose:function(){console.log("房间解散"),self.exitRoom(!0)},onRecvRoomTextMsg:function(e){console.log("***111***",e),self.postEvent("recvTextMsg",0,JSON.stringify(e))},onPush:function(e){self.data.pusherContext||(self.data.pusherContext=wx.createLivePusherContext("rtcpusher"));var t;t=e.detail?e.detail.code:e,console.log("推流情况：",t),s.globalData.pushLog+=JSON.stringify(e),s.globalData.pushLog.length>1500&&self.triggerEvent("trigVideo",{},{}),-1!=self.data.push_stream_tap&&(self.data.push_stream_tap=+new Date-self.data.push_stream_tap,self.data.push_info+="["+t+":"+self.data.push_stream_tap+"]",self.data.push_stream_tap=+new Date);switch(t){case 1002:self.data.hasPushStarted||(self.data.hasPushStarted=!0,self.enterRoom(),self.data.push_stream_tap=-1,a.setReportData({int64_tc_push_stream:+new Date-self.data.push_stream_start,str_push_info:self.data.push_info}));break;case-1301:console.error("打开摄像头失败: ",t),self.postErrorEvent(self.data.ERROR_OPEN_CAMERA,"打开摄像头失败"),self.exitRoom();break;case-1302:console.error("打开麦克风失败: ",t),self.postErrorEvent(self.data.ERROR_OPEN_MIC,"打开麦克风失败"),self.exitRoom();break;case-1307:console.error("推流连接断开: ",t),self.postErrorEvent(self.data.ERROR_PUSH_DISCONNECT,"推流连接断开"),self.exitRoom();break;case 5e3:console.log("收到5000: ",t),self.exitRoom()}},onError:function(e){console.log("推流错误：",e),10001==e.detail.errCode&&(e.detail.errMsg="未获取到摄像头功能权限，请删除小程序后重新打开"),10002==e.detail.errCode&&(e.detail.errMsg="未获取到录音功能权限，请删除小程序后重新打开"),self.postErrorEvent(self.data.ERROR_CAMERA_MIC_PERMISSION,e.detail.errMsg||"未获取到摄像头、录音功能权限，请删除小程序后重新打开")},decline:function(){self.stop(),console.log("***rtc-room***triggerEvent***decline***"),self.triggerEvent("decline",{},{})},changeMute:function(){console.log("******muted******",this.muted),this.muted=!this.muted,this.setData({muted:this.muted})},onPlay:function(e){console.log("***live-player-onPlay***",e),s.globalData.pullLog+=JSON.stringify(e),self.triggerEvent("onliveplay",{},{}),s.globalData.pullLog.length>1500&&self.triggerEvent("trigVideo",{},{}),-1!=self.data.play_stream_tap&&(self.data.play_stream_tap=+new Date-self.data.play_stream_tap,self.data.play_info+="["+e.detail.code+":"+self.data.play_stream_tap+"]",console.log("####***拉流间隔耗时戳***###",self.data.play_info),self.data.play_stream_tap=+new Date),self.data.members.forEach(function(t){if(e.currentTarget.id==t.userID)switch(e.detail.code){case 2007:console.log("视频播放loading: ",e),t.loading=!0;break;case 2004:console.log("视频播放开始: ",e),t.loading=!1,self.data.play_stream_end||(self.data.play_stream_end=+new Date,self.data.play_stream_tap=-1,console.warn("int64_tc_play_stream"+self.data.play_stream_start+", "+self.data.play_stream_end),a.setReportData({int64_tc_play_stream:self.data.play_stream_end-self.data.play_stream_start,int64_ts_play_stream:self.data.play_stream_end,str_play_info:self.data.play_info}));break;default:console.log("拉流情况：",e)}}),self.setData({members:self.data.members})}}}); 
 			}); 	require("pages/components/rtc-room/rtc-room.js");
 		__wxRoute = 'pages/index/index';__wxRouteBegin = true; 	define("pages/index/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var t=require("../../utils/util.js"),a=require("../../config.js"),o=getApp(),n=t.getImgUrl(),i=null;(new Date).getTime();Page({data:{color1:a.color1,color2:a.color2,color3:a.color3,color4:a.color4,InitFlag:"0",homeLocation:{},home3D:{},initData:{},newsModule:[],operationModule:[],featureModule:{},editControl:{},parameterModule:{},momentModule:{},viewModule:{},valueModule:{},areaModule:{},layoutModule:{},effectModule:{},sampleModule:{},realityModule:{},watchModule:{},matchModule:{},scrollFlag:!0,shangjuModel:[],despageForChat:"xuanzeguwenliebiao",despage:"zhuye",title:o.globalData.projectName,quanjinUrl:n+"wepy_pro/v1-2/720bg.png",mask1:"rgba(135,189,190,0.00)",mask2:"#212C2C",defaultBanner:[{coverUrl:n+"wepy_pro/v1-2/head.jpg",jumpUrl:""}],bannerUrl:n+"wepy_pro/v1-2/banner-1.png",rightButtonUrl:n+"wepy_pro/v1-2/right-button.png",notificationUrl:n+"wepy_pro/v1-2/notification.png",projectFeatureUrl:n+"wepy_pro/v1-2/projectFeature.png",statisticsUrl:n+"wepy_pro/v1-2/statistics.png",investmentUrl:n+"wepy_pro/v1-2/investment.png",locationUrl:n+"wepy_pro/v1-2/location.png",neighborUrl:n+"wepy_pro/v1-2/neighbor.png",liveUrl:n+"wepy_pro/v1-2/live.png",quanjinIconUrl:n+"wepy_pro/v1-2/720icon.png",renderUrl:n+"wepy_pro/v1-2/renderings.png",typesUrl:n+"wepy_pro/v1-2/types.png",threeDUrl:n+"wepy_pro/v1-2/houseType/3D.png",showroomsUrl:n+"wepy_pro/v1-2/showrooms.png",photographyUrl:n+"wepy_pro/v1-2/photography.png",scrollMsg:{msgList:[]},homeMoment:{},homeBanner:[{coverUrl:n+"wepy_pro/v1-2/head.jpg",jumpUrl:""}],Height:"1070",showAdmit:!1,toView:"",gradient1:"#3A4A80",gradient2:"#6294A6",showPhoneModel:!1,swiperCurrent:0,showInfoModel:!1,isSend:!1,showPhoneAuth:!1,showAgree:!1,indexLiudian:!1,showAuth:!0,maidinData:[],phoneFun:null,phoneFailFun:null,infoFun:null,infoFailFun:null,appid:"",flag:!1,name:"",motto:"Hello World",currentTab:"0",userInfo:{},verifyText:"完成",verifyCode:"",tel:"",setInter:null,defaultImagePath:"../../image/wepy_pro/loading.gif",loadComplete:!1},scrollMsg:function(){},onUnload:function(){console.log("关闭小程序-onUnload")},onHide:function(){console.log("隐藏首页小程序-onHide")},onShareAppMessage:function(e){var a={clkId:"clk_2cMINA_1",type:"CLK",clkName:"fenxiang",pvCurPageName:this.data.despage||"",pvCurPageParams:i};return t.trackRequest(a,o),{imageUrl:o.globalData.shareImage||"",title:this.data.title||o.globalData.projectName,path:"/pages/index/index?shareToken="+o.globalData.shareToken}},goToShare:function(){var e={clkId:"clk_2cmina_18",clkDesPage:"woyaofenxiang",clkName:"woyaofenxiang",type:"CLK",pvCurPageName:"zhuye",pvCurPageParams:i};t.trackRequest(e,o)},bindChange:function(e){var t=this;if("autoplay"==e.detail.source)return!1;var a="";"1"==e.detail.current?a="600":(a="0"==this.data.homePapa.isShow?"700":"1070",console.log("this.data.homePapa.isShow,",this.data.homePapa.isShow,a)),t.setData({Height:a,currentTab:e.detail.current})},swiperChange:function(e){this.setData({swiperCurrent:e.detail.current})},asd:function(e){console.log(e)},imageLoad:function(e){this.setData({loadComplete:!0})},swichNav:function(e){console.log("滑动切换",e);var t=this,a="";"1"==e.target.dataset.current?a="600":(a="0"==this.data.homePapa.isShow?"700":"1070",console.log("this.data.homePapa.isShow,",this.data.homePapa.isShow,a)),t.setData({Height:a,currentTab:e.target.dataset.current})},goImgSwip:function(e){var n=e.currentTarget.dataset.type;wx.request({url:t.newUrl()+"elab-marketing-content/atlas/listGroup",method:"post",data:{appVersion:"",authToken:"",environment:"",type:n,houseId:a.houseId,openId:o.globalData.openid,uid:""},success:function(a){if(a.data.list&&a.data.list[0]){var l={clkId:e.currentTarget.dataset.clkid||"",clkDesPage:"tupianku",clkName:e.currentTarget.dataset.despage||"",type:"CLK",pvCurPageName:"zhuye",pvCurPageParams:i};t.trackRequest(l,o),wx.navigateTo({url:"../scaleImg/scaleImage?type="+n})}}})},goToShareProgram:function(){wx.getStorageSync("shareProgram")?wx.getSetting({success:function(e){console.log("***rtcroomCom.onLoad***getSetting",e),e.authSetting["scope.writePhotosAlbum"]?wx.navigateTo({url:"../shareProgram/shareProgram"}):wx.authorize({scope:"scope.writePhotosAlbum",success:function(){wx.navigateTo({url:"../shareProgram/shareProgram"})}})}}):wx.showToast({title:"暂时无法获取分享图，请稍后再试",icon:"none",duration:1500})},shareNoLink:function(){return wx.showToast({title:"敬请期待...",icon:"warn",duration:1500}),!1},goWebView:function(e){var a=this,n=e.currentTarget.dataset.url;if(n.includes("/layout"))return wx.showToast({title:"敬请期待...",icon:"warn",duration:1500}),!1;var i=e.currentTarget.dataset.srcurl,l=e.currentTarget.dataset.img,r=encodeURIComponent(n);if(null==n||0!=n.indexOf("http"))return!1;if(console.log("***linkUrl***",i),i){var s={houseId:o.globalData.houseid,picUrl:i,numberType:"2",status:"1",uniqueId:o.globalData.openid};wx.request({url:t.url(),method:"POST",data:t.reformParam(t.likeUrl,s),header:{"content-type":"application/json"},success:function(e){if(e.data.success&&e.data.single){console.log("***like***",e.data.single);var t=a.data.home3D;t.viewCount=Number(t.viewCount)+1,a.setData({home3D:t})}else console.log("***Scale-setLike***",e)}})}e.currentTarget.dataset.pageid,e.currentTarget.dataset.key;wx.navigateTo({url:"../webView/webView?view="+r+"&linkUrl="+i+"&imgUrl="+l})},goVideo:function(e){var a=this,n=e.currentTarget.dataset.srcurl;console.log("/////////////linkUrl/////////////",e);var i={houseId:o.globalData.houseid,picUrl:n,numberType:"2",status:"1",uniqueId:o.globalData.openid};wx.request({url:t.url(),method:"POST",data:t.reformParam(t.likeUrl,i),header:{"content-type":"application/json"},success:function(e){if(e.data.success&&e.data.single){console.log("***like-homeMoment.viewCount***",e.data.single),a.reqVideoInfo(n,e.data.single.id);var t=a.data.homeMoment;t.viewCount=Number(t.viewCount)+1,a.setData({homeMoment:t})}else console.log("***Scale-setLike***",e)}})},reqVideoInfo:function(e,a){var n={houseid:o.globalData.houseid};wx.request({url:t.url(),method:"POST",data:t.reformParam(t.videoInfo,n),header:{"content-type":"application/json"},success:function(t){t.data.success&&t.data.list?(console.log("***like***",t.data.list),wx.navigateTo({url:"../video/video?source="+encodeURI(decodeURI(t.data.list[0].video_url))+"&linkUrl="+e+"&id="+a})):(console.log("***reqVideoInfo***",t),wx.showToast({title:t.data.message,icon:"none",duration:1e3}))}})},userCheck:function(e){console.log(e.target.dataset.name),wx.navigateTo({url:"../detail/detail?id="+e.target.dataset.name})},log:function(e){this.data.userInfo.nickName;wx.navigateTo({url:"../multiroom/roomlist/roomlist"})},agree:function(e){var a={clkId:"clk_2cmina_20",clkDesPage:"",clkName:"tongyi",type:"CLK",pvCurPageName:"zhuye",pvCurPageParams:i};t.trackRequest(a,o),this.setData({showAgree:!0})},noagree:function(e){this.setData({showAgree:!1})},goHouseType:function(){var e={clkId:"clk_2cmina_12",clkDesPage:"huxingye",clkName:"huxing",type:"CLK",pvCurPageName:"zhuye",pvCurPageParams:i};t.trackRequest(e,o),wx.navigateTo({url:"../houseType/houseType"})},goToNoticeList:function(){var e={clkId:"clk_2cMINA_0",clkDesPage:"xiaoxitongzhi",clkName:"xiaoxitongzhi",type:"CLK",pvCurPageName:"zhuye",pvCurPageParams:i};t.trackRequest(e,o),wx.navigateTo({url:"../noticeList/noticeList"})},goToShareFriend:function(){var e={clkId:"clk_2cmina_19",clkDesPage:"wodetuijian",clkName:"wofenxiangdehaoyou",type:"CLK",pvCurPageName:"zhuye",pvCurPageParams:i};t.trackRequest(e,o),console.log("***goToShareFriend-authorizePhone***",o.globalData.phone),wx.navigateTo({url:"../shareFriend/shareFriend"})},video:function(e){this.data.userInfo.nickName;wx.navigateTo({url:"../multiroom/chatlist/chatList"})},goChatList:function(e){if(!o.globalData.openid)return!1;if(wx.getStorageSync("isSend"+a.houseId)){n={clkId:"clk_2cmina_23",clkDesPage:"xiaoxiliebiao",clkName:"zaixianzixun",type:"CLK",pvCurPageName:"zhuye",pvCurPageParams:i};t.trackRequest(n,o),wx.navigateTo({url:"../messagesList/messagesList"})}else{var n={clkId:"clk_2cmina_23",clkDesPage:"xuanzeguwenliebiao",clkName:"zaixianzixun",type:"CLK",pvCurPageName:"zhuye",pvCurPageParams:i};t.trackRequest(n,o),wx.navigateTo({url:"../counselorList/counselorList"})}},goxzs:function(e){console.log(e.detail.rawData),o.globalData.userInfo=e.detail.userInfo,wx.setStorageSync("userInfo",e.detail.userInfo),wx.navigateTo({url:"../multiroom/aide/aide"})},onLoad:function(e){i=JSON.stringify(e);var t=this;console.log("***onLoad***",e,e.shareToken),e&&e.shareToken&&"null"!=e.shareToken&&"undefined"!=e.shareToken&&(o.globalData.fromChannel=e.shareToken),t.authorizeIndexPhone()},onReady:function(){wx.setNavigationBarTitle({title:o.globalData.projectName})},proto_getLoginInfo:function(){wx.request({url:t.newUrl()+"elab-marketing-authentication/tencent/signature",method:"POST",data:{identifier:o.globalData.identifier,appId:a.sdkAppID},header:{"content-type":"application/json"},success:function(e){if(e.data.code)return console.log("获取登录信息失败，调试期间请点击右上角三个点按钮，选择打开调试"),void wx.showToast({title:e.data.message+"["+e.data.code+"]",icon:"warn",duration:1500});console.log("获取usersig登录信息成功",e),o.globalData.userSig=e.data.single.signature},fail:function(e){console.log("获取IM信息失败: ",e),"request:fail timeout"==e.errMsg?wx.showToast({title:"网络请求超时，请检查网络状态",icon:"warn",duration:1500}):wx.showToast({title:e.errMsg,icon:"warn",duration:1500})}})},onShow:function(e){this.setData({maidinData:[{id:"#jingcaishijiao",eventId:"exp_2cmina_0",flag:!0},{id:"#liaojiexiangmu",eventId:"exp_2cmina_1",flag:!0},{id:"#jingcaitupian",eventId:"exp_2cmina_2",flag:!0},{id:"#fenxianggeipengyou",eventId:"exp_2cmina_3",flag:!0}]}),wx.setStorageSync("loadTime",(new Date).getTime()),this.getInitData(),console.log("***onShow***",this.data.name),wx.showShareMenu({withShareTicket:!0}),wx.getStorageSync("phone")?this.setData({showPhoneAuth:!0}):this.setData({showPhoneAuth:!1}),wx.getStorageSync("indexLiudian")&&this.setData({indexLiudian:!0}),o.login(function(){var e={ip:o.globalData.ip,type:"PV",pvId:"P_2cMINA_1",pvCurPageName:"zhuye",pvCurPageParams:i,pvLastPageName:getCurrentPages()[getCurrentPages().length-2]?getCurrentPages()[getCurrentPages().length-2].data.despage:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(e,"埋点*app.globalData.userInfo*",o.globalData.userInfo),t.trackRequest(e,o)})},scrollExp:function(e){var a=this,n=this;if(o.globalData.openid&&this.data.scrollFlag){if(this.data.scrollFlag=!1,setTimeout(function(){a.data.scrollFlag=!0},1e3),console.log(this.data.maidinData),this.data.maidinData.length<1)return;this.data.maidinData.forEach(function(e,l){a.getTop(e.id,function(){console.log(e,"ooooo");var a={type:"EXP",eventId:e.eventId,pvCurPageName:"zhuye",pvCurPageParams:i,eventModuleDes:e.id.slice(1),eventName:e.id.slice(1),eventInnerModuleId:""};t.trackRequest(a,o),console.log(e.id,l),n.data.maidinData[l].id=0,console.log(n.data.maidinData)})})}},getTop:function(e,t){if(e){var a=wx.createSelectorQuery();return a.select(e).boundingClientRect(),a.selectViewport().scrollOffset(),a.exec(function(e){if(!e[0])return!1;console.log(e[0].top),e[0].top<550&&e[0].top>100&&t()})}},goBearVideo:function(e){var t=e.currentTarget.dataset.jump,a=e.currentTarget.dataset.item.title||"";console.log("/////////////goBearVideo/////////////",e),t&&wx.navigateTo({url:"../bearVideo/bearVideo?source="+t+"&title="+a})},goJump:function(e){if(console.log(e.currentTarget.dataset),e.currentTarget.dataset.jump){var a={type:"CLK",pvPageStayTime:((new Date).getTime()-wx.getStorageSync("loadTime"))/1e3,expand:"",clkDesPage:e.currentTarget.dataset.despage||"",clkName:e.currentTarget.dataset.despage||"",pvCurPageName:"zhuye",pvCurPageParams:i,clkId:e.currentTarget.dataset.clkid,clkParams:"clk_2cmina_4"==e.currentTarget.dataset.clkid?{trendId:e.currentTarget.dataset.item.id,title:e.currentTarget.dataset.item.title||"",jumpUrl:e.currentTarget.dataset.jump}:{linkParam:"view="+encodeURIComponent(e.currentTarget.dataset.jump)+"&title="+e.currentTarget.dataset.title,imageCode:e.currentTarget.dataset.item&&e.currentTarget.dataset.item.id?e.currentTarget.dataset.item.id:"",jumpUrl:e.currentTarget.dataset.jump||""}};e.currentTarget.dataset.clkid&&t.trackRequest(a,o),o.globalData.currDespage=e.currentTarget.dataset.despage||"",wx.navigateTo({url:"../webView/webView?view="+encodeURIComponent(e.currentTarget.dataset.jump)+"&title="+e.currentTarget.dataset.title,success:function(){},fail:function(e){console.log(e)}})}},goHealthCenter:function(){wx.navigateTo({url:"../healthCenter/healthCenter",success:function(){},fail:function(e){console.log(e)}})},goDreamHabitat:function(){wx.navigateTo({url:"../dreamHabitat/dreamHabitat",success:function(){},fail:function(e){console.log(e)}})},goMoment:function(e){var n=this;console.log("此时此刻",e),wx.request({url:t.newUrl()+"elab-marketing-content/moment/queryMomentCurrent",method:"POST",data:{houseId:a.houseId},success:function(a){console.log("获取视频信息",a),null!=a.data.single?e.currentTarget.dataset.id&&(wx.setStorageSync("momentId",e.currentTarget.dataset.id),wx.request({url:t.newUrl()+"elab-marketing-content/module/modifyMomentView",method:"POST",data:{id:e.currentTarget.dataset.id,viewNumber:1},success:function(e){var a={clkDesPage:"shishishijing",clkName:"shishishijing",clkId:"clk_2cmina_8",clkParams:{lookNum:n.data.momentModule.viewCount||"0"},type:"CLK"};t.trackRequest(a,o),wx.navigateTo({url:"../video/video"})}})):wx.showToast({title:"暂未直播"})}})},getInitData:function(){var o=this;wx.request({url:t.newUrl()+"elab-marketing-content/module/queryPositionHome",method:"POST",data:{houseId:a.houseId},header:{"content-type":"application/json"},success:function(n){if(n.data.success){if(n.data.single){var i=n.data.single;if(o.setData({InitFlag:"1",initData:i,homeBanner:i.focusModule.contentList,newsModule:i.newsModule?i.newsModule:{},operationModule:i.operationModule.contentList&&i.operationModule.contentList?i.operationModule.contentList:[],featureModule:i.featureModule.contentList&&i.featureModule.contentList[0]?i.featureModule.contentList[0]:{},editControl:i.editControl?i.editControl:{},parameterModule:i.parameterModule.contentList&&i.parameterModule.contentList[0]?i.parameterModule.contentList[0]:{},momentModule:i.momentModule?i.momentModule:{},viewModule:i.viewModule.contentList&&i.viewModule.contentList[0]?i.viewModule.contentList[0]:{},valueModule:i.valueModule.contentList&&i.valueModule.contentList[0]?i.valueModule.contentList[0]:{},areaModule:i.areaModule.contentList&&i.areaModule.contentList[0]?i.areaModule.contentList[0]:{},layoutModule:i.layoutModule.contentList&&i.layoutModule.contentList[0]?i.layoutModule.contentList[0]:{},effectModule:i.effectModule.contentList&&i.effectModule.contentList[0]?i.effectModule.contentList[0]:{},sampleModule:i.sampleModule.contentList&&i.sampleModule.contentList[0]?i.sampleModule.contentList[0]:{},realityModule:i.realityModule.contentList&&i.realityModule.contentList[0]?i.realityModule.contentList[0]:{},watchModule:i.watchModule.contentList&&i.watchModule.contentList[0]?i.watchModule.contentList[0]:{},matchModule:i.matchModule.contentList&&i.matchModule.contentList[0]?i.matchModule.contentList[0]:{}}),o.data.parameterModule.jumpUrl||wx.request({url:t.newUrl()+"elab-marketing-authentication/house/selectHouseParameter",method:"POST",data:{id:a.houseId},success:function(t){200==t.statusCode&&t.data.single&&t.data.single.catalogs&&(o.setData(e({},"parameterModule.jumpUrl",a.parameterUrl+a.houseId)),console.log(o.data.parameterModule.jumpUrl,a.parameterUrl,a.houseId))}}),!o.data.watchModule.jumpUrl){var l=!1;wx.request({url:t.newUrl()+"elab-marketing-authentication/layoutVr/house",method:"POST",data:{houseId:a.houseId,pageNo:1,pageSize:10},success:function(t){200==t.statusCode&&t.data.success&&t.data.list&&t.data.list.length>0&&(t.data.list.forEach(function(e){2==e.catalog&&(l=!0)}),l&&o.setData(e({},"watchModule.jumpUrl",a.tdviewUrl+a.houseId)),console.log(o.data.watchModule.jumpUrl,"watch"))}})}}console.log(o.data.initData,"oooooooooooooo"),wx.hideLoading()}},fail:function(e){console.log(e,"ghghgg"),wx.hideLoading()}}),wx.request({url:t.newUrl()+"elab-marketing-authentication/banner/pageList",method:"POST",data:{houseId:a.houseId},header:{"content-type":"application/json"},success:function(e){if(200==e.statusCode&&e.data.success){var t=[];e.data.pageModel.resultSet&&e.data.pageModel.resultSet.forEach(function(e){1==e.onlineStatus&&t.push(e)}),o.setData({shangjuModel:t}),console.log(o.data.shangjuModel)}}})},getUserInfo:function(e){var t=this;if(wx.setStorageSync("ISauthorizeInfo",!0),console.log(e.detail,"kkkkkkkkkkkkkkkkkkkk"),this.setData({showInfoModel:!1}),e.detail.errMsg.includes("fail"))wx.showModal({title:"提示",showCancel:!1,content:"您点击了拒绝授权,部分功能将无法向您开放",success:function(e){"function"==typeof t.data.infoFailFun&&t.data.infoFailFun()}});else{o.globalData.userInfo=e.detail.userInfo;this.data.userInfo.nickName;wx.setStorageSync("userInfo",e.detail.userInfo),"function"==typeof t.data.infoFun&&t.data.infoFun()}},getPhoneNumber:function(e){var t=this;this.setData({showPhoneModel:!1}),wx.setStorageSync("ISauthorizePhone",!0);var a=e.detail.iv,n=(e.detail.errMsg,o.globalData.houseid,o.globalData.tonken||""),i=e.detail.encryptedData,l=o.globalData.sessionKey,r=o.globalData.appid;console.log("***token***",n),o.globalData.tmpPhone=!0,console.log("****getPhoneNumber****"),e.detail.errMsg.includes("fail")?"function"==typeof t.data.phoneFailFun&&t.data.phoneFailFun():(i&&l&&a||wx.showToast({title:"系统提示:授权信息错误",icon:"warn",duration:1500}),o.globalData.single?t.getPhone(i,l,r,a,n):t.data.setInter=setInterval(function(){o.globalData.single&&(t.getPhone(i,l,r,a,n),clearInterval(t.data.setInter))},200))},getPhone:function(e,n,i,l,r){var s=this,u={encryptedData:e,sessionKey:n,appId:i,customerId:o.globalData.single&&o.globalData.single.id?o.globalData.single.id:"",houseId:a.houseId,shareParam:o.globalData.fromChannel,iv:l};wx.request({url:t.newUrl()+"elab-marketing-authentication/position/queryPositionPhone",method:"POST",data:u,header:{"content-type":"application/json",token:r},success:function(e){console.log("解密后 data: ",e),e.data.success&&e.data.single&&(console.log(e.data.single),o.globalData.phone=e.data.single.phone,wx.setStorageSync("phone",e.data.single.phone),s.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof s.data.phoneFun&&s.data.phoneFun())},fail:function(e){"function"==typeof s.data.phoneFailFun&&s.data.phoneFailFun(),console.log(e,"解密手机号失败ggggggggggg")}})},authorizePhone:function(e,t){var a=this;console.log("***authorizePhone***",o.globalData.phone,wx.getStorageSync("phone")),wx.getStorageSync("ISauthorizePhone")?(a.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof e&&e()):a.setData({showPhoneModel:!0,phoneFun:e,phoneFailFun:t||null})},authorizeIndexPhone:function(e,t){var a=this;wx.getStorageSync("ISauthorizePhone")||(o.globalData.phone=wx.getStorageSync("phone"),console.log("***authorizeIndexPhone***",o.globalData.phone,wx.getStorageSync("phone")),wx.getStorageSync("ISauthorizePhone")?(a.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof e&&e()):a.setData({showPhoneModel:!0,phoneFun:e||null,phoneFailFun:t||null}))},authorizeInfo:function(e,t){var a=this;o.globalData.userInfo=wx.getStorageSync("userInfo"),wx.getSetting({success:function(o){console.log("getSetting",o),o.authSetting["scope.userInfo"]?(a.setData({showInfoModel:!1}),"function"==typeof e&&e()):a.setData({showInfoModel:!0,infoFun:e,infoFailFun:t||null})},fail:function(){wx.showToast({title:"系统提示:网络错误",icon:"warn",duration:1500})}})},authorizeIndexInfo:function(e,t){var a=this;wx.getStorageSync("ISauthorizeInfo")?"function"==typeof e&&e():(o.globalData.userInfo=wx.getStorageSync("userInfo"),wx.getSetting({success:function(o){console.log("getSetting",o),o.authSetting["scope.userInfo"]?(a.setData({showInfoModel:!1}),"function"==typeof e&&e()):a.setData({showInfoModel:!0,infoFun:e,infoFailFun:t||null})},fail:function(){wx.showToast({title:"系统提示:网络错误",icon:"warn",duration:1500})}}))},userPhone:function(e){console.log(e,"寂静欢喜"),this.setData({tel:e.detail.value})},verifyCode:function(e){console.log(e,"yuan"),this.setData({verifyCode:e.detail.value})},getVerifyCode:function(){var e=this;e.data.isSend||(/^1\d{10}$/.test(e.data.tel)?wx.request({url:t.newUrl()+"elab-marketing-authentication/vcode/verifyCodeForLeavePhone/send",method:"POST",data:{phoneNumber:e.data.tel},header:{"content-type":"application/json",tonken:o.globalData.tonken},success:function(){e.setData({isSend:!0,showAdmit:!0,toView:"empty-box"});var t=60,a=setInterval(function(){t>0?(t-=1,e.setData({verifyText:t+"秒后获取"})):(e.setData({verifyText:"完成",isSend:!1}),clearInterval(a))},1e3)},fail:function(){wx.showToast({title:"网络连接出现问题，请稍后再试！",icon:"none",duration:2e3})}}):wx.showToast({title:"输入的手机号不合法",icon:"none",duration:2e3}))},sendTel:function(){var e=this;if(!e.data.flag){if(e.setData({flag:!0}),!/^1\d{10}$/.test(e.data.tel))return wx.showToast({title:"请输入正确的手机号",icon:"none",duration:2e3}),void e.setData({flag:!1});if(console.log(e.data.verifyCode.length),e.data.verifyCode.length<1)return wx.showToast({title:"验证码不能为空",icon:"none",duration:2e3}),void e.setData({flag:!1});wx.request({url:t.newUrl()+"elab-marketing-authentication/contact/leavephone/miniapp/insert",method:"POST",data:{houseId:a.houseId,leavePhoneCustomerId:o.globalData.single&&o.globalData.single.id?o.globalData.single.id:"",shareParam:o.globalData.fromChannel,mobile:e.data.tel,code:e.data.verifyCode,source:"3"},header:{"content-type":"application/json",tonken:o.globalData.tonken},success:function(a){if(console.log(a,"//////"),a.data.success){wx.setStorageSync("phone",e.data.tel),wx.setStorageSync("indexLiudian",!0),e.setData({showPhoneAuth:!0,showAgree:!0}),e.setData({dialog:!0});var n={clkId:"clk_2cmina22",clkDesPage:"zhuye",clkName:"zaixianliudian",type:"CLK",pvCurPageName:"zhuye",clkParams:{mobile:e.data.tel},pvCurPageParams:i};t.trackRequest(n,o),setTimeout(function(){e.setData({dialog:!1})},2e3)}else wx.showToast({title:a.data.message,icon:"none",duration:2e3}),e.setData({flag:!1})},fail:function(t){wx.showToast({title:res.data.message,icon:"none",duration:2e3}),e.setData({flag:!1})}})}},telData:function(){var e=this,a=o.globalData.houseid,n=getCurrentPages(),i=n[n.length-1],l=i.route;console.log("当前页面链接",i.route),wx.request({url:t.url(),method:"POST",data:t.reformParam(t.savephone,{houseid:a,name:o.globalData.loginid,channel:o.globalData.fromChannel,mobile:e.data.tel,platform:"3",refer:l}),success:function(){wx.setStorageSync("indexLiudian",!0),e.setData({showPhoneAuth:!0,showAgree:!0})},fail:function(e){}})}}); 
 			}); 	require("pages/index/index.js");
 		__wxRoute = 'pages/chat/chat';__wxRouteBegin = true; 	define("pages/chat/chat.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("../../utils/util.js"),t=require("../../utils/webim_wx.js"),a=require("../../config.js"),s=require("../../utils/webim_handler.js"),o=require("../../utils/tls.js"),i=getApp(),n=null,r="http://skyforest.static.elab-plus.com/",d=null,l={sdkappid:a.sdkAppID,accountType:a.accType,accountMode:0};o.init({sdkappid:l.sdkappid}),Page({onShow:function(){wx.setStorageSync("loadTime",(new Date).getTime());var t={type:"PV",pvId:"P_2cMINA_5",pvCurPageName:"liaotianchuangkou",pvCurPageParams:"",adviserId:this.data.adviserInfo.id,imTalkId:this.data.adviserInfo.id+"_"+i.globalData.single.id+"_"+a.houseId,imTalkType:"1",pvLastPageName:getCurrentPages()[getCurrentPages().length-2]?getCurrentPages()[getCurrentPages().length-2].data.despageForChat:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(t,"埋点"),e.trackRequest(t,i)},onUnload:function(){e.stopTrackEventTimeObj(),clearInterval(d),console.log(d,"aaaaaaaaaa"),this.data.videoFlag},clearInput:function(){this.setData({currentMessage:""})},data:{serverUrl:r,tempMessages:[],loading:!1,putMess:!1,loadMsgFlag:!1,messageNone:!1,lastMsgTime:0,msgKey:"",videoImg:r+"im/videoImg.jpg",isBusy:!1,getFirstMsg:!1,isFirstSend:!0,showvideo:!1,videoFlag:!0,videoStatus:null,timeUse:null,adviserWx:"",tryAgainFlag:!1,despage:"liaotianchuangkou",adviserPhone:"",toView:"",isGiveTel:!1,pdfImg:r+"im/pdf.png",loadingImg:"../../image/wepy_pro/loading.gif",scrollTop:200,currentMessage:"",userInfo:{},imgUrl:"",adviserId:"",adviserName:"",backButton:r+"im/back-button.png",busyButton:r+"im/online.png",dialog:!1,localMessages:[],Identifier:null,UserSig:null},bindConfirm:function(e){var a=this,o=this.data.currentMessage;o.replace(/^\s*|\s*$/g,"")&&s.onSendMsg(o,{TYPE:t.SESSION_TYPE.C2C,myselToID:a.data.adviserId},i.globalData.identifier,function(e){a.receiveMsgs(e,!0),a.clearInput()})},goBack:function(){},deny:function(){var e=this,a={csyzwfelab20180425hhhdfq:"secretkey",type:505,typedesc:"获取手机号码"};s.sendCustomMsg({text:"[用户已拒绝]",ext:JSON.stringify(a),data:""},{TYPE:t.SESSION_TYPE.C2C,myselToID:e.data.adviserId},i.globalData.identifier,function(e){}),wx.setStorageSync("isGiveTel",!0),e.setData({isGiveTel:!0}),wx.showToast({title:"您已拒绝该请求"})},admit:function(){var o=this;i.globalData.phone,wx.request({url:e.newUrl()+"elab-marketing-authentication/adviser/text/bindCustomer",method:"POST",data:{houseId:a.houseId,customerId:i.globalData.single.id,adviserId:o.data.adviserInfo.id,shareParam:i.globalData.fromChannel},success:function(e){if(wx.setStorageSync("isGiveTel",!0),o.setData({isGiveTel:!0}),e.data.success){wx.showToast({title:"您已同意！",icon:"success",duration:2e3});var a={csyzwfelab20180425hhhdfq:"secretkey",type:503,typedesc:"获取手机号码"};s.sendCustomMsg({text:"[用户已同意]",ext:JSON.stringify(a),data:""},{TYPE:t.SESSION_TYPE.C2C,myselToID:o.data.adviserId},i.globalData.identifier,function(e){})}else"CUSTOMER.HAS.BIND.ERROR"==e.data.errorCode&&wx.showToast({title:"您已被绑定",icon:"success"}),s.onSendMsg("客户已被其他顾问绑定",{TYPE:t.SESSION_TYPE.C2C,myselToID:o.data.adviserId},i.globalData.identifier,function(e){})}})},previewImage:function(e){var t=e.target.dataset.src;t&&wx.previewImage({current:t,urls:[e.target.dataset.src]})},tryAgain:function(e){var o=this;o.data.tryAgainFlag||(o.data.tryAgainFlag=!0,s.onSendMsg(e.currentTarget.dataset.msg,{TYPE:t.SESSION_TYPE.C2C,myselToID:o.data.adviserId},i.globalData.identifier,function(t){wx.setStorageSync("isSend"+a.houseId,!0),o.data.localMessages.splice(e.currentTarget.dataset.index,1),o.data.tempMessages.splice(e.currentTarget.dataset.index,1),console.log(o.data.localMessages),o.data.tryAgainFlag=!1,o.receiveMsgs(t,!0),o.data.isBusy&&o.receiveMsgs({content:"您好，非常抱歉，我正在为其他用户服务，稍后回复您！",type:!1},!1)},function(e){o.data.tryAgainFlag=!1,o.receiveMsgs(e,!0,!0)}))},receiveMsgs:function(t,a,s){t.local=a,t.time=e.formatTodayTime(new Date);var o=this.data.localMessages||[],i=this.data.tempMessages;s&&(t.failed=!0),i.push(t),o.push(t),this.setData({tempMessages:i,localMessages:o}),console.log(this.data.localMessages,"hhhh"),this.setData({toView:"hei"})},goVideo:function(){var t={type:"CLK",pvPageStayTime:((new Date).getTime()-wx.getStorageSync("loadTime"))/1e3,clkDesPage:"ekanfangjietongye",clkName:"shipin_guwentuisong",clkId:"clk_2cmina_40",clkParams:""};e.trackRequest(t,i),wx.getSetting({success:function(e){console.log("***chat.onLoad***getSetting",e),e.authSetting["scope.record"]?e.authSetting["scope.camera"]?wx.redirectTo({url:"../multiroom/aide/aide?isSuc=1"}):wx.authorize({scope:"scope.camera",complete:function(){wx.redirectTo({url:"../multiroom/aide/aide?isSuc=1"})}}):wx.authorize({scope:"scope.record",complete:function(){e.authSetting["scope.camera"]?wx.redirectTo({url:"../multiroom/aide/aide?isSuc=1"}):wx.authorize({scope:"scope.camera",complete:function(){wx.redirectTo({url:"../multiroom/aide/aide?isSuc=1"})}})}})},fail:function(){wx.showToast({title:"系统提示:网络错误",icon:"warn",duration:1500})}})},initIM:function(e,o){var r=this;s.init({accountMode:l.accountMode,accountType:l.accountType,sdkAppID:l.sdkappid,avChatRoomId:"@TGS#1Q3DQEEFH",selType:t.SESSION_TYPE.C2C,selToID:r.data.adviserId,selSess:null});var d={sdkAppID:l.sdkappid,appIDAt3rd:l.sdkappid,accountType:l.accountType,identifier:i.globalData.identifier,identifierNick:i.globalData.single.nickname||"小程序用户",userSig:i.globalData.userSig},c=(s.onDestoryGroupNotify,s.onRevokeGroupNotify,s.onCustomGroupNotify,{onConnNotify:s.onConnNotify,onBigGroupMsgNotify:function(e){s.onBigGroupMsgNotify(e,function(e){r.receiveMsgs(e)})},onMsgNotify:function(e){s.onMsgNotify(e,function(e){wx.setStorageSync("isSend"+a.houseId,!0),r.data.getFirstMsg||r.setData({getFirstMsg:!0});var o="【系统消息】该用户当前登录方式为微信小程序登录，无法使用此功能";if(e.content&&102==e.content.type||512==e.content.type)s.onSendMsg(o,{TYPE:t.SESSION_TYPE.C2C,myselToID:e.fromAccountNick});else if(e.content&&502==e.content.type){if(console.log(e),!e.content.param.isShowInvitation)return void console.log("150723");if(e.fromAccountNick!=r.data.adviserId||!wx.getStorageSync("phone"))return void s.onSendMsg("【系统消息】当前用户未授权手机号，暂时无法获取。请通过聊天方式索取客户手机号码！",{TYPE:t.SESSION_TYPE.C2C,myselToID:e.fromAccountNick});wx.setStorageSync("isGiveTel",!1),r.setData({isGiveTel:!1}),e.content.isover=!1,r.receiveMsgs(e,!1)}else{if(e.content&&513==e.content.type||504==e.content.type)return;e.content&&"string"==typeof e.content&&e.content.includes("onChangePlayAudio")?s.onSendMsg(o,{TYPE:t.SESSION_TYPE.C2C,myselToID:e.fromAccountNick}):e.fromAccountNick==r.data.adviserId&&r.receiveMsgs(e,!1)}})},onGroupSystemNotifys:s.onGroupSystemNotifys,onGroupInfoChangeNotify:s.onGroupInfoChangeNotify}),g={isAccessFormalEnv:!0,isLogOn:!1};1==l.accountMode?s.sdkLogin(d,c,g,function(){r.addFriend()}):s.sdkLogin(d,c,g,function(){console.log("登陆Im所需要的时间",(new Date).getTime()-n),r.loadMessage()})},scrollTop:function(){this.data.messageNone&&this.data.putMess&&(this.setData({putMess:!1}),this.loadMessage())},loadMessage:function(){var o=this;console.log("开始获取历史消息",new Date-n);var r=this;this.setData({loading:!0}),setTimeout(function(){o.setData({loading:!1})},2e3),s.getC2CHistoryMsgs(function(t,a,s){if(console.log((new Date).getTime()-n,"渲染数据时间",t.elems[0].content),a&&(r.setData({localMessages:r.data.tempMessages}),s&&r.setData({toView:"hei"})),console.log(r.data.localMessages,r.data.tempMessages),t.elems[0].content.ext){if(513==(o=JSON.parse(t.elems[0].content.ext)).type||504==o.type||512==o.type||505==o.type||503==o.type||501==o.type||500==o.type)return;return t.elems[0].content=o,515==t.elems[0].content.type||516==t.elems[0].content.type?t.elems[0].local=!1:t.elems[0].local=!0,t.elems[0].time=e.formatTodayTime(new Date(1e3*t.time)),(d=r.data.tempMessages).unshift(t.elems[0]),r.setData({tempMessages:d}),void(a&&(r.setData({localMessages:r.data.tempMessages}),s&&r.setData({toView:"hei"})))}if(!(t.elems[0].type&&"TIMSoundElem"==t.elems[0].type||t.elems[0].content.text.includes("【系统消息】")||t.elems[0].content.text.includes("顾问不存在")||t.elems[0].content.text.indexOf("该手机号码已被其他顾问绑定")>-1)){if(t.elems[0].content.text.indexOf("csyzwfelab20180425hhhdfq")>-1){var o=JSON.parse(t.elems[0].content.text);if(513==o.type||504==o.type||512==o.type||505==o.type||503==o.type||501==o.type||500==o.type)return;if(502==o.type&&!wx.getStorageSync("phone"))return;if(t.elems[0].content=o,515==t.elems[0].content.type||516==t.elems[0].content.type)return t.elems[0].local=!1,t.elems[0].time=e.formatTodayTime(new Date(1e3*t.time)),(d=r.data.tempMessages).unshift(t.elems[0]),r.setData({tempMessages:d}),void(a&&(r.setData({localMessages:r.data.tempMessages}),s&&r.setData({toView:"hei"})))}else t.elems[0].content=t.elems[0].content.text;t.fromAccount==i.globalData.identifier?t.elems[0].local=!0:t.elems[0].local=!1,t.elems[0].time=e.formatTodayTime(new Date(1e3*t.time));var d=r.data.tempMessages;d.unshift(t.elems[0]),r.setData({tempMessages:d}),a&&(r.setData({localMessages:r.data.tempMessages}),s&&r.setData({toView:"hei"}))}},r.data.msgKey,r.data.lastMsgTime,function(e,t){r.setData({loading:!1}),r.setData({msgKey:e}),r.setData({lastMsgTime:t}),r.setData({putMess:!0}),r.setData({messageNone:!0})},function(){r.setData({loading:!1}),r.setData({messageNone:!1})},function(o){if(1==o){if(1==r.data.videoStatus){var n={csyzwfelab20180425hhhdfq:"secretkey",param:{timeUse:r.data.timeUse},type:500,typedesc:"视频通讯成功"};s.sendCustomMsg({text:"视频通讯成功",ext:JSON.stringify(n),data:""},{TYPE:t.SESSION_TYPE.C2C,myselToID:r.data.adviserId},i.globalData.identifier)}if(2==r.data.videoStatus){var d={csyzwfelab20180425hhhdfq:"secretkey",type:501,typedesc:"视频通讯失败"};s.sendCustomMsg({text:"视频通讯失败",ext:JSON.stringify(d),data:""},{TYPE:t.SESSION_TYPE.C2C,myselToID:r.data.adviserId},i.globalData.identifier)}setTimeout(function(){var o=i.globalData.imHelloWord?i.globalData.imHelloWord:"您好，我是项目的置业顾问，请问您想咨询什么问题？我在这里为您快速解答。";console.log(o);var n={csyzwfelab20180425hhhdfq:"secretkey",param:{text:o},type:515,typedesc:o};((new Date).getTime()-wx.getStorageSync("needRepeatTo"+r.data.adviserId))/1e3/60/60>23?s.sendCustomMsg({text:o,ext:JSON.stringify(n),data:""},{TYPE:t.SESSION_TYPE.C2C,myselToID:r.data.adviserId},i.globalData.identifier,function(t){r.receiveMsgs({content:o,type:!1},!1),wx.setStorageSync("needRepeatTo"+r.data.adviserId,(new Date).getTime()),wx.request({url:e.newUrl()+"elab-marketing-notify/message/push",method:"POST",header:{token:i.globalData.tonken},data:{houseId:a.houseId,receiver:r.data.adviserInfo.id,businessType:1,workId:i.globalData.single.id,title:"消息通知顾问",code:"PUSH_003",pushContent:"已有客户发起在线咨询，请及时回复",receiverType:"adviser"},success:function(e){console.log(e)}}),wx.request({url:e.newUrl()+"elab-marketing-authentication/adviser/text/getCustomerDetail",method:"POST",data:{adviserId:r.data.adviserInfo.id,customerId:i.globalData.single.id,houseId:a.houseId},success:function(t){t.data.success&&(console.log(t.data,"ffff"),"小程序用户"==t.data.single.nameRemark&&(t.data.single.nameRemark=!1),wx.request({url:e.newUrl()+"elab-marketing-authentication/vcode/send/chatSms",method:"POST",data:{param:{name:t.data.single.nameRemark||i.globalData.single.nickname||t.data.single.mobileRemark||i.globalData.phone||"小程序客户"},phoneNumber:r.data.adviserInfo.mobile},success:function(e){console.log(e)}}))}})}):wx.setStorageSync("needRepeatTo"+r.data.adviserId,(new Date).getTime())},2e3)}},function(e){setTimeout(function(){r.loadMessage()},1e3),console.log(e)})},showDialog:function(e){e.currentTarget.dataset.url&&this.setData({imgUrl:encodeURI(decodeURIComponent(e.currentTarget.dataset.url))}),e.currentTarget.dataset.showvideo&&this.setData({showvideo:e.currentTarget.dataset.showvideo}),this.setData({dialog:e.currentTarget.dataset.dialog})},fun:function(e){console.log(e,"fun")},onReady:function(){wx.hideLoading(),wx.setNavigationBarTitle({title:"在线咨询"})},onLoad:function(t){wx.showLoading({title:"正在加载"}),n=(new Date).getTime(),console.log(t,"yuu",n),t.videoStatus&&1==t.videoStatus&&(this.setData({videoStatus:1}),this.setData({timeUse:t.videoTime})),t.videoStatus&&2==t.videoStatus&&this.setData({videoStatus:2});var s=this,o=JSON.parse(wx.getStorageSync("adviserInfo"));console.log(o,"顾问信息"),s.setData({adviserInfo:o}),s.setData({adviserName:o.name||"顾问"});var d=o.id+"_"+o.houseId;wx.getStorageSync("isGiveTel")&&this.setData({isGiveTel:!0}),this.setData({adviserId:d}),wx.request({url:e.newUrl()+"elab-marketing-authentication/adviser/text/connect",method:"POST",data:{adviserId:o.id,customerId:i.globalData.single.id,houseId:a.houseId},success:function(e){}}),wx.request({header:{token:i.globalData.tonken},url:e.newUrl()+"elab-marketing-authentication/worker/account/selfInfo",method:"POST",data:{adviserId:o.id},success:function(e){s.setData({isBusy:e.data.single.onlineStatus||!1}),s.setData({adviserWx:e.data.single.wxno||""}),s.setData({adviserPhone:e.data.single.mobile||""}),s.setData({busyButton:s.data.isBusy?r+"im/offline.png":r+"im/online.png"})},fail:function(e){console.log(e)}}),console.log("开始调用IM接口",new Date-n),s.initIM()},goH5:function(e){wx.setStorageSync("h5page",e.currentTarget.dataset.url),console.log(e.currentTarget.dataset.url,"uuuuu"),console.log(decodeURI(e.currentTarget.dataset.url)),console.log(encodeURIComponent(e.currentTarget.dataset.url)),wx.navigateTo({url:"../webView/webView?view="+encodeURIComponent(e.currentTarget.dataset.url),success:function(){},fail:function(e){console.log(e)}})},goVideoPage:function(e){this.setData({videoFlag:!1}),wx.navigateTo({url:"../video/video?source="+e.currentTarget.dataset.url})},goPDF:function(e){wx.downloadFile({url:e.currentTarget.dataset.url,success:function(e){var t=e.tempFilePath;wx.openDocument({filePath:t,success:function(e){console.log("打开文档成功")}})}})},bindButtonTap:function(){var o=this,n=this;if(this.data.isFirstSend){this.setData({isFirstSend:!1});var r=300;d=setInterval(function(){if(r--,o.data.getFirstMsg)clearInterval(d);else if(r<1){var e="",a={text:e=i.globalData.imRepeat?i.globalData.imRepeat:"您好，我现在在忙，请您留下电话号码，我会尽快联系您；\n您也可以通过以下方式联系我：\n我的电话号码："+n.data.adviserPhone+"\n我的微信号："+n.data.adviserWx,conSultantWeichat:n.data.adviserWx,conSultantphone:n.data.adviserPhone},l={csyzwfelab20180425hhhdfq:"secretkey",param:a,type:516,typedesc:"您好，我现在在忙，请您留下电话号码，我会尽快联系您"};s.sendCustomMsg({text:"您好，我现在在忙，请您留下电话号码，我会尽快联系您",ext:JSON.stringify(l),data:""},{TYPE:t.SESSION_TYPE.C2C,myselToID:n.data.adviserId},i.globalData.identifier,function(e){n.receiveMsgs({content:a.text,type:!1},!1)}),clearInterval(d)}},1e3)}n=this;this.data.currentMessage.replace(/^\s*|\s*$/g,"")&&(s.onSendMsg(this.data.currentMessage,{TYPE:t.SESSION_TYPE.C2C,myselToID:n.data.adviserId},i.globalData.identifier,function(t){wx.setStorageSync("isSend"+a.houseId,!0);var s={type:"CLK",adviserId:n.data.adviserInfo.id,imTalkId:n.data.adviserInfo.id+"_"+i.globalData.single.id+"_"+a.houseId,imTalkType:"1",clkName:"dianjifasong",pvCurPageName:"liaotianchuangkou",pvCurPageParams:"",pvLastPageName:getCurrentPages()[getCurrentPages().length-2]?getCurrentPages()[getCurrentPages().length-2].data.despageForChat:"",clkId:"clk_2cmina_27",clkParams:""};e.trackRequest(s,i),n.receiveMsgs(t,!0),n.data.isBusy&&n.receiveMsgs({content:"您好，非常抱歉，我正在为其他用户服务，稍后回复您！",type:!1},!1)},function(e){n.receiveMsgs(e,!0,!0)}),this.setData({currentMessage:""}))},bindKeyInput:function(e){this.setData({currentMessage:e.detail.value})}}); 
 			}); 	require("pages/chat/chat.js");
 		__wxRoute = 'pages/multiroom/room/room';__wxRouteBegin = true; 	__wxAppCurrentFile__ = 'pages/multiroom/room/room.js';	define("pages/multiroom/room/room.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t,a=require("../../../utils/rtcroom.js"),e=require("../../../utils/util.js"),o=getApp(),s=require("../../../config.js"),n=(require("../../../utils/webim_wx.js"),null);Page({data:{roomID:"",roomname:"",beauty:5,muted:!1,debug:!1,frontCamera:!0,assistant:{},startTime:null,endTime:null,flagStatus:1,selToID:null,dynatownId:null,hideBg:!1,flag:!1,status:"正在呼叫对方",color1:s.color1,color2:s.color2,backColor:s.backColor,hzdlFlag:!1,ysglFlag:!1,hqcsFlag:!1,wlkdFlag:!1,fwbjFlag:!1,bmsyFlag:!1,qtyyFlag:!1,goodIndex:"",evaluateFlag:"",TextArea:"",selectTags:[],aliveFlag:!1},handlehzdl:function(t){this.setData({hzdlFlag:!this.data.hzdlFlag});this.data.selectTags.includes("画质低劣")?(this.data.selectTags.splice(this.data.selectTags.findIndex(function(t){return"画质低劣"===t}),1),console.log(this.data.selectTags.join(","))):(this.data.selectTags.push("画质低劣"),console.log(this.data.selectTags.join(",")))},handleysgl:function(t){this.setData({ysglFlag:!this.data.ysglFlag});this.data.selectTags.includes("隐私顾虑")?this.data.selectTags.splice(this.data.selectTags.findIndex(function(t){return"隐私顾虑"===t}),1):this.data.selectTags.push("隐私顾虑")},handlehqcs:function(t){this.setData({hqcsFlag:!this.data.hqcsFlag});this.data.selectTags.includes("好奇尝试")?this.data.selectTags.splice(this.data.selectTags.findIndex(function(t){return"好奇尝试"===t}),1):this.data.selectTags.push("好奇尝试")},handlewlkd:function(t){this.setData({wlkdFlag:!this.data.wlkdFlag});this.data.selectTags.includes("网络卡顿")?this.data.selectTags.splice(this.data.selectTags.findIndex(function(t){return"网络卡顿"===t}),1):this.data.selectTags.push("网络卡顿")},handlefwbj:function(t){this.setData({fwbjFlag:!this.data.fwbjFlag});this.data.selectTags.includes("服务不佳")?this.data.selectTags.splice(this.data.selectTags.findIndex(function(t){return"服务不佳"===t}),1):this.data.selectTags.push("服务不佳")},handlebmsy:function(t){this.setData({bmsyFlag:!this.data.bmsyFlag});this.data.selectTags.includes("不明所以")?this.data.selectTags.splice(this.data.selectTags.findIndex(function(t){return"不明所以"===t}),1):this.data.selectTags.push("不明所以")},handleqtyy:function(t){this.setData({qtyyFlag:!this.data.qtyyFlag});this.data.selectTags.includes("其他原因")?this.data.selectTags.splice(this.data.selectTags.findIndex(function(t){return"其他原因"===t}),1):this.data.selectTags.push("其他原因")},handleIndex:function(t){var a=t.currentTarget.dataset.index;this.setData({goodIndex:a})},onRoomEvent:function(t){var a=this;switch(console.log("收到消息:",t),t.detail.tag){case"recvTextMsg":var e=JSON.parse(t.detail.detail);if(console.log("收到消息recvTextMsg:",t.detail.detail,e.textMsg),e.textMsg.indexOf(a.data.selToID+"离开房间")>0&&(wx.showToast({title:"对方已挂断",icon:"none",duration:1500}),a.setData({flagStatus:3,hideBg:!1,endTime:Date.now()}),a.videoInsert(30,10),o.globalData.dataJson+=JSON.stringify({getMessage:a.data.selToID,text:"对方已挂断"}),a.exit()),e.textMsg.indexOf(a.data.selToID+"进入房间")>0&&(o.globalData.dataJson+=JSON.stringify({getMessage:a.data.selToID,text:"对方接收到视频请求并进入房间"}),console.log("***对方接收到视频请求并进入房间***",a.data.hideBg)),e.textMsg.indexOf("108")>0)try{s=JSON.parse(e.textMsg);console.log("==========",s),"108"!==s.type&&108!==s.type||(a.setData({hideBg:!0}),o.globalData.dataJson+=JSON.stringify({getMessage:e.textMsg,text:"对方接通视频"}),console.log("***对方接通视频***",a.data.hideBg))}catch(t){}if(e.textMsg.indexOf("109")>0)try{var s=JSON.parse(e.textMsg);console.log("==========",s),"109"!==s.type&&109!==s.type||(a.setData({hideBg:!1}),console.log("***对方隐藏视频***",a.data.hideBg))}catch(t){}break;case"roomClosed":console.log("roomClose:",t.detail.detail),this.setData({flagStatus:4,endTime:Date.now()});n=getCurrentPages();console.log(n,n.length,n[n.length-1].__route__),n.length>1&&"pages/multiroom/room/room"==n[n.length-1].__route__&&(wx.showToast({title:"对方已挂断",icon:"none",duration:1500}),n=getCurrentPages(),console.log(n,n.length,n[n.length-1].__route__),n.length>1&&"pages/multiroom/room/room"==n[n.length-1].__route__&&a.exit());break;case"error":console.error("error:",t.detail.detail),console.log("error:",t.detail.detail),o.globalData.dataJson+=JSON.stringify(t),this.setData({flagStatus:5,endTime:Date.now()}),this.videoInsert(99,40);var n=getCurrentPages();console.log(n,n.length,n[n.length-1].__route__),n.length>1&&"pages/multiroom/room/room"==n[n.length-1].__route__&&wx.showModal({title:"提示",content:t.detail.detail,showCancel:!1,complete:function(){(n=getCurrentPages()).length>1&&"pages/multiroom/room/room"==n[n.length-1].__route__&&a.exit()}})}},exit:function(){var a=this;if(!0===a.data.aliveFlag)return!1;a.data.aliveFlag=!0;var s=0,n=0,l=a.data.startTime||"",i="",d="";if(i=a.data.endTime=a.data.endTime?a.data.endTime:Date.now(),console.log("&&&&&exit-self.data.flagStatus&&&&&",a.data.flagStatus,a.data.startTime,a.data.endTime),a.data.endTime&&a.data.startTime){var g=Math.floor((a.data.endTime-a.data.startTime)/1e3);d=1e3*g,n=Math.floor(g/60),s=g%60,t=(n>9?n:"0"+n)+":"+(s>9?s:"0"+s),console.log("***exit***",n,s,t)}var r={talkStartTime:l,talkEndTime:i,talkLongTime:d};if(1==this.data.flagStatus||n<1){this.setData({evaluateFlag:"0"});var c={ip:o.globalData.ip,type:"PV",adviserId:o.globalData.videoCustomer.id,imTalkType:"2",pvId:"P_2cMINA_7",pvCurPageName:"fankuiyemian",pvCurPageParams:JSON.stringify(r),pvLastPageName:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(c,"视频通话反馈埋点pv"),e.trackRequest(c,o)}else{this.setData({evaluateFlag:"1"});var u={ip:o.globalData.ip,type:"PV",adviserId:o.globalData.videoCustomer.id,imTalkType:"2",pvId:"P_2cMINA_8",pvCurPageName:"pingjiayemian",pvCurPageParams:JSON.stringify(r),pvLastPageName:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(u,"视频通话评价埋点pv"),e.trackRequest(u,o)}console.log("*******evaluateFlag******",this.data.evaluateFlag,a.data.endTime,a.data.startTime)},realExit:function(){var a=this;a.data.flag?a.data.endTime&&a.data.startTime?wx.redirectTo({url:"../../chat/chat?videoStatus=1&videoTime="+t}):wx.redirectTo({url:"../../chat/chat?videoStatus=2"}):wx.navigateBack({delta:1}),console.log("***真实退出该页面组件***",a.data.flag,a.data.endTime,a.data.startTime)},sendText:function(){var t=this.selectComponent("#rtcroom");if(t){var a={flag:"3",myselToID:"2758_83"};t.sendTextMsg("asdjgklasjdgklasdgk",a)}},onliveplay:function(){if(!this.data.startTime){console.log("***onliveplay***",this.data.startTime),this.setData({flagStatus:2,startTime:Date.now()});var t={ip:o.globalData.ip,type:"PV",adviserId:o.globalData.videoCustomer.id,imTalkType:"2",pvId:"P_2cMINA_6",pvCurPageName:"ekanfangjietongye",pvCurPageParams:"",pvLastPageName:getCurrentPages()[getCurrentPages().length-2]?getCurrentPages()[getCurrentPages().length-2].data.despage:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(t,"视频通话埋点pv"),e.trackRequest(t,o)}},trigVideo:function(){this.videoInsert(1,1)},decline:function(){var s=this,n=0,l=0;console.log("***room.js-decline***",s.data.flag,s.data.flagStatus);var i=this.selectComponent("#rtcroom"),d=a.getRoomInfo();if(console.log("***roomInfo***",d.isPush),!d.isPush)return!1;s.videoInsert(30,10);var g="fankuiyemian",r="";if(2==s.data.flagStatus&&(r="ekanfangjietongye"),s.data.endTime=s.data.endTime?s.data.endTime:Date.now(),s.setData({hideBg:!1}),s.data.endTime&&s.data.startTime){var c=Math.floor((s.data.endTime-s.data.startTime)/1e3);l=Math.floor(c/60),n=c%60,t=(l>9?l:"0"+l)+":"+(n>9?n:"0"+n),console.log("***decline-exit***",l,n,t),l>=1&&(g="pingjiayemian")}var u={clkId:"clk_2cmina_28",clkDesPage:g,type:"CLK",adviserId:o.globalData.videoCustomer.id,imTalkType:"2",pvCurPageName:r,clkName:"bodaguaduan",pvCurPageParams:""};console.log(u,"视频通话挂断点击埋点pv"),e.trackRequest(u,o),s.videoInsert(30,10),s.exit(),console.log("***rtcroomCom.exitRoom()***"),i.exitRoom()},bindTextAreaBlur:function(t){console.log("**bindTextAreaBlur***",t.detail.value),this.setData({TextArea:t.detail.value})},videoInsert:function(t,a){var n=this,l=o.globalData.single.id,i=s.houseId;console.log("***videoInsert***",l,i,t,a,e.newUrl()+"elab-marketing-system/imlog/insert"),wx.request({url:e.newUrl()+"elab-marketing-system/imlog/insert",method:"POST",data:{userId:l,dataJson:o.globalData.dataJson,pullLog:o.globalData.pullLog,pushLog:o.globalData.pushLog,mobile:o.globalData.phone,reqStatus:a,reqType:t,system:3,roomNo:n.data.roomID,roleType:0,created:Date.now(),creator:l+"_"+i},success:function(t){console.log("&&&success-videoInsert***",t)},fail:function(t){console.log("&&&fail-videoInsert***",t)},complete:function(t){o.globalData.dataJso=o.globalData.pullLog=o.globalData.pushLog=""}})},submitEvaluate:function(){var t=this,a=o.globalData.single.id,n=s.houseId;console.log("***submitEvaluate***",a,n),wx.request({url:e.newUrl()+"elab-marketing-authentication/feedback/insertFeedback",method:"POST",data:{userId:a,houseId:n,mobile:o.globalData.phone,remark:t.data.TextArea,tags:t.data.selectTags.join(",")},success:function(a){console.log("&&&success-submitEvaluate***",a),t.realExit()},fail:function(a){console.log("&&&fail-submitEvaluate***",a),t.realExit()}})},submitEvaluate2:function(){var t=this,a=o.globalData.single.id,n=s.houseId,l="1"==this.data.goodIndex?"10":"2"==this.data.goodIndex?"5":"0";console.log("***submitEvaluate***",a,n,l),wx.request({url:e.newUrl()+"elab-marketing-authentication/evalute/adviser/insert",method:"POST",data:{evaluateCustomerId:a,adviserId:this.data.dynatownId,houseId:n,evaluateMobile:o.globalData.phone,remark:t.data.TextArea,totalEvaluate:l},success:function(a){console.log("&&&success-submitEvaluate***",a),t.realExit()},fail:function(a){console.log("&&&fail-submitEvaluate***",a),t.realExit()}})},changeCamera:function(){},setBeauty:function(){var t=this.selectComponent("#rtcroom");if(t){a.getAccountInfo();var e={type:106,time:Date.now(),param:{text:"123456zjs"}},o={flag:"0"};t.sendTextMsg(JSON.stringify(e),o),a.getRoomList({data:{index:0,cnt:20},success:function(t){console.log(t),console.log("拉取房间列表成功",t)},fail:function(t){console.log(t),wx.showModal({title:"提示",content:t.errMsg,showCancel:!1})}})}},changeMute:function(){this.data.muted=!this.data.muted,this.setData({muted:this.data.muted})},showLog:function(){this.data.debug=!this.data.debug,this.setData({debug:this.data.debug})},updateDynatown:function(t){var a=this.data.dynatownId,o=s.houseId;console.log("***updateDynatown***",t,a,o,e.url()),wx.request({url:e.newUrl()+"elab-marketing-authentication/worker/adviser/switchStatus",method:"POST",data:{adviserId:a,houseId:o,userRole:2,onlineStatus:t},success:function(t){console.log("***updateDynatown_res***",t)},fail:function(t){}})},onLoad:function(t){n=JSON.stringify(t),console.log("********------",t),t&&t.isSuc?this.setData({flag:!0}):this.setData({flag:!1});var a=this;wx.getSetting({success:function(e){console.log("=======rtcroomCom.onLoad***getSetting",e),e.authSetting["scope.record"]&&e.authSetting["scope.camera"]?a.init(t):wx.openSetting({success:function(e){e.authSetting["scope.record"]&&e.authSetting["scope.camera"]?a.init(t):(console.log("******openSetting——success-other&&&&&&&",e),a.data.flag?wx.redirectTo({url:"../../chat/chat"}):wx.navigateBack({delta:1}))},fail:function(t){console.log("******openSetting错误&&&&&&&",t),wx.showModal({title:"提示",content:"操作太快,请稍后再试",success:function(t){t.confirm?a.data.flag?wx.redirectTo({url:"../../chat/chat"}):wx.navigateBack({delta:1}):t.cancel&&(a.data.flag?wx.redirectTo({url:"../../chat/chat"}):wx.navigateBack({delta:1}))}})}})},fail:function(){wx.showToast({title:"系统提示:网络错误",icon:"warn",duration:1500})}})},callConsultant:function(t){},init:function(t){var e=this;console.log("room.js onLoad");var o=new Date;o=o.getHours()+":"+o.getMinutes()+":"+o.getSeconds(),console.log("*************开始视频看房："+o+"**************"),console.log(t),e.data.aliveFlag=!1,e.data.role=t.type,e.data.roomID=t.roomID||"",e.data.roomname=t.roomName,e.data.username=t.userName,e.setData({roomID:e.data.roomID,roomname:e.data.roomname,username:e.data.username},function(){var t=e.selectComponent("#rtcroom");if(t){console.log("rtcroomCom");var o=a.getAccountInfo();console.log("accountInfo.opt:",o.opt),e.setData({assistant:o.opt||{},dynatownId:o.opt?o.opt.id:"",selToID:o.selToID||""}),t.start(function(t){e.setData({roomID:t}),e.updateDynatown("1"),e.videoInsert(10,10)})}})},chuli:function(){},onReady:function(){},onShow:function(){wx.setStorageSync("loadTime",(new Date).getTime());console.log("room.js onShow"),wx.setKeepScreenOn({keepScreenOn:!0})},onHide:function(){console.log("room.js onHide")},onUnload:function(){console.log("***onUnload***room.js onUnload",this.data.flagStatus),1==this.data.flagStatus&&console.log("=====this.data.flagStatus======",this.data.flagStatus)},onPullDownRefresh:function(){},onReachBottom:function(){}}); 
 			}); 	require("pages/multiroom/room/room.js");
 		__wxRoute = 'pages/multiroom/roomname/roomname';__wxRouteBegin = true; 	define("pages/multiroom/roomname/roomname.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Page({data:{roomName:"",userName:"",tapTime:""},bindRoomName:function(a){this.setData({roomName:a.detail.value})},create:function(){var a=this,e=new Date;if(!(e-this.data.tapTime<1e3))if(a.data.roomName||(a.data.roomName="新建多人音视频"),/[<>*{}()^%$#@!~&= ]/.test(a.data.roomName))wx.showModal({title:"提示",content:"名称不能为空或包含特殊字符",showCancel:!1});else{var t="../room/room?type=create&roomName="+a.data.roomName+"&userName="+a.data.userName;wx.redirectTo({url:t}),wx.showToast({title:"进入房间",icon:"success",duration:1e3}),a.setData({tapTime:e})}},onLoad:function(a){this.setData({userName:a.userName||""})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},onShareAppMessage:function(){return{path:"/pages/main/main",imageUrl:"https://mc.qcloudimg.com/static/img/dacf9205fe088ec2fef6f0b781c92510/share.png"}}}); 
 			}); 	require("pages/multiroom/roomname/roomname.js");
 		__wxRoute = 'pages/h5page/h5page';__wxRouteBegin = true; 	define("pages/h5page/h5page.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp();Page({onShareAppMessage:function(){return{imageUrl:a.globalData.shareImage||"",title:this.data.title||a.globalData.projectName,path:"/pages/h5page/h5page"}},data:{h5page:"http://www.baidu.com"},onLoad:function(a){var e=wx.getStorageSync("h5page");console.log(e,"pdf或者视频"),e&&this.setData({h5page:e})}}); 
 			}); 	require("pages/h5page/h5page.js");
 		__wxRoute = 'pages/bearVideo/bearVideo';__wxRouteBegin = true; 	define("pages/bearVideo/bearVideo.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";require("../../utils/util.js"),require("../../config.js"),getApp();Page({data:{source:"",videoContext:null,appFlag:!1,queit:!1,showInfoModel:!1,title:"",momentId:"",videoFlag:!0,windowHeight:0,currentFlag:0,id:""},onLoad:function(o){var e=this;console.log("***Video onLoad***",o,"bearvideo-啦啦啦",o.source),this.setData({source:o.source}),wx.getSystemInfo({success:function(o){"ios"==o.platform&&e.setData({currentFlag:-1,appFlag:!0}),e.setData({windowHeight:o.windowWidth}),console.log("可视区宽度",o.windowWidth),console.log("可视区高度",o.windowHeight)}})},onShow:function(o){console.log("***video.js-onShow***"),this.videoContext=wx.createVideoContext("myVideo"),wx.hideShareMenu()},onUnload:function(){console.log("***video.js-onUnload***")},goback:function(){wx.navigateBack({delta:1})},play:function(o){var e=this;setTimeout(function(){e.videoContext.requestFullScreen(90)},500)},queitFull:function(o){o.detail.fullScreen?(this.setData({queit:!1}),console.log("进入全屏",this.data.queit)):(this.setData({queit:!0}),console.log("退出全屏",this.data.queit))},onReady:function(){},onHide:function(){}}); 
 			}); 	require("pages/bearVideo/bearVideo.js");
 		__wxRoute = 'pages/multiroom/aide/aide';__wxRouteBegin = true; 	define("pages/multiroom/aide/aide.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=getApp(),o=require("../../../utils/util.js"),t=(require("../../../utils/rtcroom.js"),require("../../../getlogininfo.js")),a=require("../../../config.js");Page({data:{adviserList:[],aideData:{},isSuc:null},go:function(e){console.log(e.target.dataset),this.login(e.target.dataset.item.name),console.log(e.target.dataset.index,"uu")},login:function(e){wx.showLoading({title:"登录信息获取中"});var o=this;t.getLoginInfo({type:"multi_room",opt:e,success:function(e){console.log("success"),o.data.firstshow=!1,o.data.isGetLoginInfo=!0,console.log("我的昵称：",e.userName,e),o.setData({userName:e.userName}),wx.hideLoading(),o.creatroom(e.userName)},fail:function(e){o.data.isGetLoginInfo=!1,console.log("***获取登录信息失败&&&getlogininfo***",e),wx.hideLoading(),wx.showModal({title:"获取登录信息失败",content:e.errMsg,showCancel:!1,complete:function(){wx.navigateBack({})}})}})},creatroom:function(e){var o="../room/room?type=create&roomName=视频看房&userName="+e+"&roomID="+("web_"+Date.now())+"&isSuc="+this.data.isSuc;wx.redirectTo({url:o}),wx.showToast({title:"进入房间",icon:"success",duration:1e3})},onLoad:function(t){var i=this;console.log("------********",t),i.setData({isSuc:t.isSuc||""}),wx.request({url:o.newUrl()+"elab-marketing-authentication/worker/account/randomAdviser",method:"POST",data:{houseId:a.houseId},header:{"content-type":"application/json"},success:function(o){console.log("看房小助手接口:",o),o.data.single?(e.globalData.videoCustomer=i.aideData=o.data.single,i.login(i.aideData)):wx.showModal({title:"提示",content:"当前没有空闲的看房小助手",showCancel:!1,success:function(e){t.isSuc?wx.redirectTo({url:"../../chat/chat"}):wx.navigateBack({changed:!0})}})},fail:function(e){if(console.log("获取看房小助手接口失败: ",e),"request:fail timeout"==e.errMsg)var o=-1,a="网络请求超时，请检查网络状态";t.fail&&t.fail({errCode:o||-1,errMsg:a||"获取看房小助手接口失败，调试期间请点击右上角三个点按钮，选择打开调试"})}})}}); 
 			}); 	require("pages/multiroom/aide/aide.js");
 		__wxRoute = 'pages/multiroom/roomlist/roomlist';__wxRouteBegin = true; 	define("pages/multiroom/roomlist/roomlist.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var o=require("../../../utils/rtcroom.js"),t=require("../../../getlogininfo.js");Page({data:{roomName:"",roomList:[],userName:"",isGetLoginInfo:!1,firstshow:!0,tapTime:""},getRoomList:function(t){var e=this;e.data.isGetLoginInfo?o.getRoomList({data:{index:0,cnt:20},success:function(o){console.log(o),e.setData({roomList:o.rooms}),console.log("拉取房间列表成功"),t&&t()},fail:function(o){console.log(o),wx.showModal({title:"提示",content:o.errMsg,showCancel:!1}),t&&t()}}):wx.showModal({title:"提示",content:"登录信息初始化中，请稍后再试",showCancel:!1})},create:function(){var o=this,t=new Date;if(!(t-this.data.tapTime<1e3))if(o.data.isGetLoginInfo){var e="../roomname/roomname?type=create&roomName="+o.data.roomName+"&userName="+o.data.userName;wx.navigateTo({url:e}),o.setData({tapTime:t})}else wx.showModal({title:"提示",content:"登录信息初始化中，请稍后再试",showCancel:!1})},goRoom:function(o){var t=new Date;if(!(t-this.data.tapTime<1e3))if(o.currentTarget.dataset.num>3)wx.showModal({title:"提示",content:"房间人数已满",showCancel:!1,complete:function(){}});else{var e="../room/room?roomID="+o.currentTarget.dataset.roomid+"&roomName="+o.currentTarget.dataset.roomname+"&userName="+this.data.userName;wx.navigateTo({url:e}),this.setData({tapTime:t})}},onLoad:function(o){},onReady:function(){wx.showLoading({title:"登录信息获取中"});var o=this;console.log(this.data),t.getLoginInfo({type:"multi_room",success:function(t){console.log("success"),o.data.firstshow=!1,o.data.isGetLoginInfo=!0,o.getRoomList(function(){}),console.log("我的昵称：",t.userName),o.setData({userName:t.userName}),wx.hideLoading()},fail:function(t){o.data.isGetLoginInfo=!1,wx.hideLoading(),wx.showModal({title:"获取登录信息失败",content:t.errMsg,showCancel:!1,complete:function(){wx.navigateBack({})}})}})},onShow:function(){console.log("roomlist onshow"),!this.data.firstshow&&this.getRoomList(function(){})},onHide:function(){},onUnload:function(){o.logout()},onPullDownRefresh:function(){this.getRoomList(function(){}),wx.stopPullDownRefresh()},onReachBottom:function(){},onShareAppMessage:function(){return{path:"/pages/main/main",imageUrl:"https://mc.qcloudimg.com/static/img/dacf9205fe088ec2fef6f0b781c92510/share.png"}}}); 
 			}); 	require("pages/multiroom/roomlist/roomlist.js");
 		__wxRoute = 'pages/multiroom/chatlist/chatList';__wxRouteBegin = true; 	define("pages/multiroom/chatlist/chatList.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=getApp(),t=require("../../../utils/util.js"),o=(require("../../../utils/rtcroom.js"),require("../../../getlogininfo.js"));Page({onShareAppMessage:function(){return{imageUrl:e.globalData.shareImage||"",title:"分类",path:"/pages/classify/classify"}},data:{adviserList:[]},go:function(e){console.log(e.target.dataset),this.login(e.target.dataset.item.name),console.log(e.target.dataset.index,"uu")},login:function(e){wx.showLoading({title:"登录信息获取中"});var t=this;console.log(this.data),o.getLoginInfo({type:"multi_room",success:function(o){console.log("success"),t.data.firstshow=!1,t.data.isGetLoginInfo=!0,console.log("我的昵称：",o.userName,o),t.setData({userName:o.userName}),wx.hideLoading(),t.creatroom(o.userName,e)},fail:function(e){t.data.isGetLoginInfo=!1,wx.hideLoading(),wx.showModal({title:"获取登录信息失败",content:e.errMsg,showCancel:!1,complete:function(){wx.navigateBack({})}})}})},creatroom:function(e,t){var o="../room/room?type=create&roomName="+(e+"多人音视频")+"&userName="+e+"&roomID="+("web_"+Date.now())+"&consultantName="+t;wx.redirectTo({url:o}),wx.showToast({title:"进入房间",icon:"success",duration:1e3})},onLoad:function(o){var a=this;e.getToken(function(o){console.log(o,"tonken");var s=t.formatTime(new Date);console.log(s,"time"),wx.request({header:{auth_token:o},url:t.url(),method:"POST",data:t.reformParam(t.adviserList,{houseid:e.globalData.houseid,time:s,pageNo:"1",pageSize:"100"}),success:function(e){a.setData({adviserList:e.data.pageModel.resultSet})}})})}}); 
 			}); 	require("pages/multiroom/chatlist/chatList.js");
 		__wxRoute = 'pages/counselorList/counselorList';__wxRouteBegin = true; 	define("pages/counselorList/counselorList.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=getApp(),a=require("../../utils/util.js"),t=require("../../config.js"),o=a.getImgUrl()+"/wepy_pro",n="",i=require("../../getlogininfo.js"),s=i.authorizeInfo,l=i.getUserInfo;Page({data:{closeImg:o+"/close-button.png",chatButton:o+"/im-chat.png",showInfoModel:!1,infoFun:null,infoFailFun:null,showPhoneModel:!1,phoneFun:null,imTitle:"项目金牌顾问",imDesc:"请选择一名顾问为您在线咨询",isShowVideoButton:!1,despage:"xuanzeguwenliebiao",phoneFailFun:null,loading:!1,title:"在线咨询",sorry:o+"/sorry.png",defaultImg:o+"/Avatar_male.png",yuyue:o+"/yuyue.png",fixImg:o+"/fix-b.png",showTel:!1,adviserList:[],tryAgainFlag:!1,setInter:null},onShow:function(o){wx.setStorageSync("loadTime",(new Date).getTime());var i=this;try{e.login(function(o){var s=e.globalData.tonken,l=a.formatTime(new Date);console.log("***counselorList***",e.globalData.single.id,t.houseId),wx.request({url:a.newUrl()+"elab-marketing-authentication/adviser/video/callLog",method:"POST",data:{customerId:e.globalData.single.id,houseId:t.houseId},success:function(e){e.data.single&&i.setData({isShowVideoButton:!0})}}),wx.request({header:{token:s},url:a.newUrl()+"elab-marketing-authentication/worker/adviser/statusList",method:"POST",data:{houseId:t.houseId,time:l,pageNo:"1",pageSize:"100"},success:function(t){if(console.log(t,"列表返回"),!t.data.single.imAdvisers||void 0==t.data.single.imAdvisers||t.data.single.imAdvisers.length<1){i.setData({showTel:!0});var o={type:"PV",pvId:"P_2cMINA_4",pvCurPageName:"wuzaixianguwen",pvCurPageParams:n,pvLastPageName:getCurrentPages()[getCurrentPages().length-2]?getCurrentPages()[getCurrentPages().length-2].data.despage:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};return console.log(o,"埋点1"),void a.trackRequest(o,e)}var s=[];if(t.data.single.imAdvisers.forEach(function(e){e.onlineStatus||s.push(e)}),i.setData({adviserList:s||[]}),!i.data.adviserList||i.data.adviserList.length<1){console.log(i.data.adviserList.length,"你居然走这里？"),i.setData({showTel:!0});var l={type:"PV",pvId:"P_2cMINA_4",pvCurPageName:"wuzaixianguwen",pvCurPageParams:n,pvLastPageName:getCurrentPages()[getCurrentPages().length-2]?getCurrentPages()[getCurrentPages().length-2].data.despage:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(l,"埋点1"),a.trackRequest(l,e)}else{console.log(i.data.adviserList.length,"你应该走这里啊"),i.setData({showTel:!1});var g={type:"PV",pvId:"P_2cMINA_2",pvCurPageName:"xuanzeguwenliebiao",pvCurPageParams:n,pvLastPageName:getCurrentPages()[getCurrentPages().length-2]?getCurrentPages()[getCurrentPages().length-2].data.despage:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(g,"埋点2"),a.trackRequest(g,e)}console.log(i.data.adviserList,"拿到列表",i.data.showTel),i.setData({loading:!1})},complete:function(e){wx.hideLoading()}})})}catch(o){wx.hideLoading()}this.setData({loading:!0}),console.log("app.single",e.globalData.single,e.globalData),wx.hideShareMenu(),wx.setNavigationBarTitle({title:"在线咨询"}),console.log(e.globalData.isUserInfo,"isfalse"),e.globalData.isUserInfo||s.call(this,function(){},function(){}),console.log(wx.getStorageSync("phone"),"有值就不会弹起"),e.globalData.tmpPhone||wx.getStorageSync("phone")||(console.log("从未授权过",wx.getStorageSync("phone")),this.authorizeIndexPhone(function(){},function(){}))},goMessageList:function(e){wx.redirectTo({url:"../messagesList/messagesList"})},getPhoneNumber:function(a){var t=this;this.setData({showPhoneModel:!1}),wx.setStorageSync("ISauthorizePhone",!0);var o=a.detail.iv,n=(a.detail.errMsg,e.globalData.houseid,e.globalData.tonken||""),i=a.detail.encryptedData,s=e.globalData.sessionKey,l=e.globalData.appid;console.log("***token***",n),e.globalData.tmpPhone=!0,console.log("****getPhoneNumber****"),a.detail.errMsg.includes("fail")?"function"==typeof t.data.phoneFailFun&&t.data.phoneFailFun():(i&&s&&o||wx.showToast({title:"系统提示:授权信息错误",icon:"warn",duration:1500}),e.globalData.single?t.getPhone(i,s,l,o,n):t.data.setInter=setInterval(function(){e.globalData.single&&(t.getPhone(i,s,l,o,n),clearInterval(t.data.setInter))},200))},getPhone:function(o,n,i,s,l){var g=this,r={encryptedData:o,sessionKey:n,appId:i,customerId:e.globalData.single.id,houseId:t.houseId,shareParam:e.globalData.fromChannel,iv:s};wx.request({url:a.newUrl()+"elab-marketing-authentication/position/queryPositionPhone",method:"POST",data:r,header:{"content-type":"application/json",token:l},success:function(a){console.log("解密后 data: ",a),a.data.success&&a.data.single&&(console.log(a.data.single),e.globalData.phone=a.data.single.phone,wx.setStorageSync("phone",a.data.single.phone),g.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof g.data.phoneFun&&g.data.phoneFun())},fail:function(e){"function"==typeof g.data.phoneFailFun&&g.data.phoneFailFun(),console.log(e,"解密手机号失败ggggggggggg")}})},authorizeIndexPhone:function(a,t){var o=this;wx.getStorageSync("phone")?"function"==typeof a&&a():(e.globalData.phone=wx.getStorageSync("phone"),console.log("***authorizeIndexPhone***",e.globalData.phone,wx.getStorageSync("phone")),e.globalData.phone?(o.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof a&&a()):o.setData({showPhoneModel:!0,phoneFun:a||null,phoneFailFun:t||null}))},getUserInfo:function(e){l.call(this,e)},onUnload:function(){a.stopTrackEventTimeObj()},goChat:function(o){var n=o.currentTarget.dataset.item;wx.setStorageSync("adviserInfo",JSON.stringify(n));var i={type:"CLK",pvPageStayTime:((new Date).getTime()-wx.getStorageSync("loadTime"))/1e3,adviserId:n.id,imTalkId:n.id+"_"+e.globalData.single.id+"_"+t.houseId,imTalkType:"1",clkDesPage:"liaotianchuangkou",clkName:"xuanzeguwenliaotian",clkId:"clk_2cmina_24",clkParams:""};a.trackRequest(i,e),wx.redirectTo({url:"../chat/chat"}),console.log(n,"------------",JSON.stringify(n))},proto_getLoginInfo:function(){wx.request({url:a.newUrl()+"elab-marketing-authentication/tencent/signature",method:"POST",data:{identifier:e.globalData.identifier,appId:t.sdkAppID},header:{"content-type":"application/json"},success:function(a){if(a.data.code)return console.log("获取登录信息失败，调试期间请点击右上角三个点按钮，选择打开调试"),void wx.showToast({title:a.data.message+"["+a.data.code+"]",icon:"warn",duration:1500});console.log("获取usersig登录信息成功",a),e.globalData.userSig=a.data.single.signature},fail:function(e){console.log("获取IM信息失败: ",e),"request:fail timeout"==e.errMsg?wx.showToast({title:"网络请求超时，请检查网络状态",icon:"warn",duration:1500}):wx.showToast({title:e.errMsg,icon:"warn",duration:1500})}})},goVideo:function(t){var o=this;if(!o.data.tryAgainFlag){var n={type:"CLK",pvPageStayTime:((new Date).getTime()-wx.getStorageSync("loadTime"))/1e3,clkDesPage:"ekanfangjietongye",clkName:"shipin_xuanguwenliebiao",clkId:"clk_2cmina_42",clkParams:""};a.trackRequest(n,e),o.data.tryAgainFlag=!0,wx.getSetting({success:function(e){console.log("***rtcroomCom.onLoad***getSetting",e),e.authSetting["scope.record"]?e.authSetting["scope.camera"]?(o.data.tryAgainFlag=!1,wx.navigateTo({url:"../multiroom/aide/aide"})):wx.authorize({scope:"scope.camera",complete:function(){o.data.tryAgainFlag=!1,wx.navigateTo({url:"../multiroom/aide/aide"})}}):wx.authorize({scope:"scope.record",complete:function(){e.authSetting["scope.camera"]?(o.data.tryAgainFlag=!1,wx.navigateTo({url:"../multiroom/aide/aide"})):wx.authorize({scope:"scope.camera",complete:function(){o.data.tryAgainFlag=!1,wx.navigateTo({url:"../multiroom/aide/aide"})}})}})},fail:function(){o.data.tryAgainFlag=!1,wx.showToast({title:"系统提示:网络错误",icon:"warn",duration:1500})}})}},onReady:function(){},onLoad:function(o){wx.showLoading({title:"正在加载"});var i=this;n=JSON.stringify(o),wx.request({url:a.newUrl()+"elab-marketing-authentication/house/house/selectHouseLeadWork",method:"POST",data:{id:t.houseId},success:function(a){a.data.single.leadTitle&&i.setData({imTitle:a.data.single.leadTitle}),a.data.single.leadRemark&&i.setData({imDesc:a.data.single.leadRemark}),e.globalData.imHelloWord=a.data.single.greetings,e.globalData.imRepeat=a.data.single.autoReply}})},goTel:function(){var t=wx.getStorageSync("phone"),o=wx.getStorageSync("indexLiudian"),n={type:"CLK",pvPageStayTime:((new Date).getTime()-wx.getStorageSync("loadTime"))/1e3,clkDesPage:"querenliudianye",clkName:"wuren_liudianyuyue",clkId:"clk_2cmina_41",clkParams:""};a.trackRequest(n,e),t||o?wx.showToast({title:"留电成功，我们会尽快联系您",icon:"none",duration:2e3}):wx.navigateTo({url:"../savephone/savephone"}),console.log(12,t)}}); 
 			}); 	require("pages/counselorList/counselorList.js");
 		__wxRoute = 'pages/scaleImg/scaleImage';__wxRouteBegin = true; 	define("pages/scaleImg/scaleImage.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var a=require("../../utils/util.js"),t=require("../../config.js"),s=getApp(),i=a.getImgUrl();Page({data:{scaleWidth:"",scaleHeight:"",dataimg:"",gradient1:"#3A4A80",gradient2:"#6294A6",swipIndex:0,arrayStatus:[],despage:"tupianku",title:"tupianku",likeImg:i+"wepy_pro/v1-2/Thumbup@2x.png",likeImgRed:i+"wepy_pro/v1-2/Thumbup-red.png",isChosed:1,imgTotal:[],currentType:{atlasResponseList:[{}]},movableWidth:0},likeAdd:function(e){var i=this,n=i.data.imgTotal,r=!1;return n.forEach(function(a){a.groupType==e.currentTarget.dataset.type&&a.atlasResponseList.forEach(function(a){a.id==e.currentTarget.dataset.id&&(r=a.like)})}),1!=r&&(console.log("that.data.flag:",i.data.flag,r),0!=i.data.flag&&(i.data.flag=!1,console.log("that.data.flag:",i.data.flag,r),void wx.request({url:a.newUrl()+"elab-marketing-content/atlas/updateLike",method:"POST",data:{appVersion:"",authToken:"",environment:"3",houseId:t.houseId,imageId:e.currentTarget.dataset.id,imageType:e.currentTarget.dataset.type,like:1==r?-1:1,openId:s.globalData.openid,uid:""},success:function(t){n.forEach(function(a){a.groupType==e.currentTarget.dataset.type&&a.atlasResponseList.forEach(function(a){a.id==e.currentTarget.dataset.id&&(console.log("item.likeNumber:",a.likeNumber,r,a.like),a.likeNumber=a.likeNumber+(1==r?-1:1),a.like=!r)})}),i.setData({imgTotal:n,flag:!0}),console.log(i.data.imgTotal),n.forEach(function(a){a.groupType==e.currentTarget.dataset.type&&i.setData({currentType:a})}),console.log(i.data.currentType);var o={pvCurPageName:i.data.title||"",clkId:"clk_2cmina_37",clkParams:{imageCode:e.currentTarget.dataset.id},clkName:"dianzan",type:"CLK"};a.trackRequest(o,s)}})))},selectTap:function(e){switch(e.currentTarget.dataset.type){case 1:t="xiaoguotu";break;case 2:t="yangbanjiantu";break;case 3:t="shijingtu";break;case 4:var t="peitaotu"}var i=this;console.log(e.currentTarget.dataset.type),this.setData({swipIndex:0,isChosed:e.currentTarget.dataset.type}),console.log(this.data.imgTotal),this.data.imgTotal.forEach(function(a){if(a.groupType==e.currentTarget.dataset.type){i.setData({currentType:a});var t=[];t.length=a.atlasResponseList.length,t.fill(!1),a.atlasResponseList[0]&&(t[0]=a.atlasResponseList[0]),a.atlasResponseList[1]&&(t[1]=a.atlasResponseList[1]),i.setData({arrayStatus:t})}});var n={pvCurPageName:"tupianku",clkId:"clk_2cmina_38",clkName:"tupiankuleixing",clkParams:{imageCode:this.data.currentType.atlasResponseList[this.data.swipIndex].id,real_view:t,buttonType:"show_rooom"},type:"CLK"};a.trackRequest(n,s),console.log(i.data.currentType)},swipChange:function(a){if(a.detail.current<this.data.arrayStatus.length-1){var t="arrayStatus["+(a.detail.current+1)+"]";this.setData(e({},t,this.data.currentType.atlasResponseList[a.detail.current+1]))}},onLoad:function(e){wx.showLoading({title:"正在加载"});var i=this;console.log(e.type),wx.request({url:a.newUrl()+"elab-marketing-content/atlas/listGroup",method:"post",data:{appVersion:"",authToken:"",environment:"",houseId:t.houseId,openId:s.globalData.openid,uid:""},success:function(a){var t=0;i.setData({imgTotal:a.data.list}),e.type&&i.data.imgTotal.forEach(function(a){if(t+=30*a.groupName.length+38,a.groupType==e.type){i.setData({currentType:a,isChosed:e.type}),console.log(i.data.currentType);var s=[];s.length=a.atlasResponseList.length,s.fill(!1),a.atlasResponseList[0]&&(s[0]=a.atlasResponseList[0]),a.atlasResponseList[1]&&(s[1]=a.atlasResponseList[1]),i.setData({arrayStatus:s})}}),i.setData({movableWidth:t}),console.log(i.data.currentType,"PPPPPPPPPPPPPPPPPPP",i.data.movableWidth),wx.hideLoading()},fail:function(e){wx.hideLoading()}})},onReady:function(){wx.setNavigationBarTitle({title:"图片库"})},previewImage:function(e){var a=e.target.dataset.src;wx.previewImage({current:a,urls:[e.target.dataset.src]})},onShow:function(){wx.setStorageSync("loadTime",(new Date).getTime()),console.log("路由",getCurrentPages());var e={pvId:"P_2cMINA_14",pvCurPageName:this.data.despage||"",pvCurPageParams:"",pvLastPageName:"zhuye",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime"),type:"PV"};a.trackRequest(e,s)},onHide:function(){},onUnload:function(){var e={pvPageStayTime:((new Date).getTime()-wx.getStorageSync("loadTime"))/1e3,pvCurPageName:this.data.despage||"",clkDesPage:"zhuye",clkName:"fanhui",clkId:"clk_2cmina_36",clkParams:{imageCode:this.data.currentType.atlasResponseList[this.data.swipIndex].id||""},type:"CLK"};a.trackRequest(e,s)}}); 
 			}); 	require("pages/scaleImg/scaleImage.js");
 		__wxRoute = 'pages/messagesList/messagesList';__wxRouteBegin = true; 	define("pages/messagesList/messagesList.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=getApp(),a=require("../../utils/util.js"),n=(require("../../utils/tls.js"),require("../../utils/webim_wx.js")),i=require("../../config.js"),s=require("../../utils/webim_handler.js"),l=require("../../getlogininfo.js"),r=l.authorizeInfo,g=l.getUserInfo,c=a.getImgUrl(),d=null,u="";Page({data:{ePic:c+"wepy_pro/e-pic.png",defaultImg:c+"wepy_pro/Avatar_male.png",moreImg:c+"wepy_pro/more-coun.png",loadingImg:c+"wepy_pro/loading.gif",showInfoModel:!1,infoFun:null,despage:"xiaoxiliebiao",despageForChat:"xiaoxiliebiao",infoFailFun:null,isShowVideoButton:!1,showPhoneModel:!1,phoneFun:null,phoneFailFun:null,videoList:[],fixImg:c+"wepy_pro/fix-b.png",loading:!1,moreFag:!1,Config:{sdkappid:i.sdkAppID,accountType:i.accType,accountMode:0},adviserList:[],isSentAdviserList:[]},textChange:function(e){if(e.includes("csyzwfelab20180425hhhdfq")){var t=JSON.parse(e);return 506==t.type?"[视频]":507==t.type?"[链接]":508==t.type?"[此时此刻]":513==t.type?"":102==t.type?"":104==t.type?"[e看房]":501==t.type?"[视频通话失败]":500==t.type?"[视频通话成功]":509==t.type?"[图片]":502==t.type?"[获取手机号码]":204==t.type?"[PDF文件]":515==t.type||516==t.type?t.param.text:""}return e.includes("【系统消息】")||e.includes("【系统提示】")||e.includes("顾问不存在")||e.includes("onChangePlay")||e.includes("视频通话")?"":e.includes("e看房已发送")||e.includes("发起视频看房请求")?"":e},goVideo:function(e){var t={type:"CLK",pvPageStayTime:((new Date).getTime()-wx.getStorageSync("loadTime"))/1e3,clkDesPage:"ekanfangjietongye",clkName:"shipin_xiaoxiliebiao",clkId:"clk_2cmina_39",clkParams:""};a.trackRequest(t,o),wx.getSetting({success:function(e){console.log("***rtcroomCom.onLoad***getSetting",e),e.authSetting["scope.record"]?e.authSetting["scope.camera"]?wx.navigateTo({url:"../multiroom/aide/aide"}):wx.authorize({scope:"scope.camera",complete:function(){wx.navigateTo({url:"../multiroom/aide/aide"})}}):wx.authorize({scope:"scope.record",complete:function(t){console.log("******",t),e.authSetting["scope.camera"]?wx.navigateTo({url:"../multiroom/aide/aide"}):wx.authorize({scope:"scope.camera",complete:function(){wx.navigateTo({url:"../multiroom/aide/aide"})}})}})},fail:function(){wx.showToast({title:"系统提示:网络错误",icon:"warn",duration:1500})}})},onShow:function(e){wx.setStorageSync("loadTime",(new Date).getTime());var t=this;o.login(function(e){var n={type:"PV",pvId:"P_2cMINA_3",pvCurPageName:"xiaoxiliebiao",pvCurPageParams:u,pvLastPageName:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(n,"埋点"),a.trackRequest(n,o),wx.request({url:a.newUrl()+"elab-marketing-authentication/adviser/video/callLog",method:"POST",data:{customerId:o.globalData.single.id,houseId:i.houseId},success:function(e){e.data.single&&t.setData({isShowVideoButton:!0})}})}),o.globalData.isUserInfo||r.call(this,function(){},function(){}),o.globalData.tmpPhone||this.authorizeIndexPhone(function(){},function(){}),this.initData()},onReady:function(){wx.hideLoading(),wx.setNavigationBarTitle({title:"在线咨询"})},getPhoneNumber:function(e){var t=this;this.setData({showPhoneModel:!1}),wx.setStorageSync("ISauthorizePhone",!0);var n=e.detail.iv,s=(e.detail.errMsg,o.globalData.houseid,o.globalData.tonken||""),l=e.detail.encryptedData,r=o.globalData.sessionKey,g=o.globalData.appid;if(console.log("***token***",s),o.globalData.tmpPhone=!0,console.log("****getPhoneNumber****"),e.detail.errMsg.includes("fail"))"function"==typeof t.data.phoneFailFun&&t.data.phoneFailFun();else{var c={encryptedData:l,sessionKey:r,appId:g,customerId:o.globalData.single.id,houseId:i.houseId,shareParam:o.globalData.fromChannel,iv:n};wx.request({url:a.newUrl()+"elab-marketing-authentication/position/queryPositionPhone",method:"POST",data:c,header:{"content-type":"application/json",auth_token:s},success:function(e){console.log("解密后 data: ",e),e.data.success&&e.data.single&&(console.log(e.data.single),o.globalData.phone=e.data.single.phone,wx.setStorageSync("phone",e.data.single.phone),t.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof t.data.phoneFun&&t.data.phoneFun())},fail:function(e){"function"==typeof t.data.phoneFailFun&&t.data.phoneFailFun(),console.log(e,"解密手机号失败ggggggggggg")}})}},authorizeIndexPhone:function(e,t){var a=this;wx.getStorageSync("phone")?"function"==typeof e&&e():(o.globalData.phone=wx.getStorageSync("phone"),console.log("***authorizeIndexPhone***",o.globalData.phone,wx.getStorageSync("phone")),o.globalData.phone?(a.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof e&&e()):a.setData({showPhoneModel:!0,phoneFun:e||null,phoneFailFun:t||null}))},getUserInfo:function(e){g.call(this,e)},onUnload:function(){a.stopTrackEventTimeObj()},goAdviserList:function(e){var t={type:"CLK",pvPageStayTime:((new Date).getTime()-wx.getStorageSync("loadTime"))/1e3,imTalkType:"1",clkDesPage:"xuanzeguwenliebiao",clkName:"gengduoguwen",pvCurPageName:"xiaoxiliebiao",clkId:"clk_2cmina_26",clkParams:""};a.trackRequest(t,o),wx.navigateTo({url:"../counselorList/counselorList"})},initData:function(){console.log("准备登陆IM",(new Date).getTime()-d),this.setData({loading:!0});o.globalData.tonken;var e=o.globalData.identifier,t=(a.formatTime(new Date),this);s.init({accountMode:t.data.Config.accountMode,accountType:t.data.Config.accountType,sdkAppID:t.data.Config.sdkappid,selType:n.SESSION_TYPE.C2C,selSess:null});var i={sdkAppID:t.data.Config.sdkappid,appIDAt3rd:t.data.Config.sdkappid,accountType:t.data.Config.accountType,identifier:e,identifierNick:o.globalData.single&&o.globalData.single.nickname?o.globalData.single.nickname:"",userSig:o.globalData.userSig},l={onConnNotify:s.onConnNotify,onBigGroupMsgNotify:function(e){s.onBigGroupMsgNotify(e,function(e){})},onMsgNotify:function(e){s.onMsgNotify(e,function(e){console.log(e,"ppppppp");var o="【系统消息】该用户当前登录方式为微信小程序登录，无法使用此功能";return e.content&&102==e.content.type||512==e.content.type?(s.onSendMsg(o,{TYPE:n.SESSION_TYPE.C2C,myselToID:e.fromAccountNick}),void t.addNewMsg(e)):e.content&&502==e.content.type?e.content.param.isShowInvitation?(wx.setStorageSync("isGiveTel",!1),console.log(e.content,"ppp"),wx.getStorageSync("phone")?void t.addNewMsg(e):void s.onSendMsg("【系统消息】当前用户未授权手机号，暂时无法获取。请通过聊天方式索取客户手机号码！",{TYPE:n.SESSION_TYPE.C2C,myselToID:e.fromAccountNick})):void console.log("go"):void(e.content&&513==e.content.type||(e.content&&"string"==typeof e.content&&e.content.includes("onChangePlayAudio")?s.onSendMsg(o,{TYPE:n.SESSION_TYPE.C2C,myselToID:e.fromAccountNick}):t.addNewMsg(e)))})},onGroupSystemNotifys:s.onGroupSystemNotifys,onGroupInfoChangeNotify:s.onGroupInfoChangeNotify},r={isAccessFormalEnv:!0,isLogOn:!1};s.sdkLogin(i,l,r,function(){console.log("登录成功"),console.log("登陆Im完成，准备load本地列表",(new Date).getTime()-d),t.getHistoryMsgs()},function(e){console.error(e.ErrorInfo,"回调函数失败")})},addNewMsg:function(o){var n=o,i=this;console.log(n,"new",i.data.adviserList);for(var s=0;s<i.data.adviserList.length;s++)i.data.adviserList[s].id==o.fromAccountNick.substring(0,o.fromAccountNick.indexOf("_"))&&(n=Object.assign(i.data.adviserList[s],o),console.log(n,"加最新消息了"));console.log(i.data.isSentAdviserList,n,"iopkojo");for(var l=!1,r=0;r<i.data.isSentAdviserList.length;r++)if(n.id==i.data.isSentAdviserList[r].id){console.log("即将崛起",t(n.content)),l=!0;var g="isSentAdviserList["+r+"].hasNewMsg",c="isSentAdviserList["+r+"].MsgShow",d="isSentAdviserList["+r+"].MsgTimeStamp";return i.setData(e({},g,i.data.isSentAdviserList[r].hasNewMsg+1)),"object"==t(n.content)?i.setData(e({},c,i.textChange(JSON.stringify(n.content)))):i.setData(e({},c,i.textChange(n.content))),void i.setData(e({},d,a.formatTodayTime(new Date)))}l||i.data.isSentAdviserList.unshift(n)},getHistoryMsg:function(){o.globalData.tonken,a.formatTime(new Date);var e=this;n.getRecentContactList({Count:100},function(t){if(console.log(t,"yy"),!t.SessionItem||!t)return!1;if(t.SessionItem.length>0){for(var o=[],n=0;n<t.SessionItem.length;n++){console.log(t,"yyyyyy");for(var i=0;i<e.data.adviserList.length;i++){var s=t.SessionItem[n].To_Account;s.substring(0,s.indexOf("_"))==e.data.adviserList[i].id&&(t.SessionItem[n]=Object.assign(t.SessionItem[n],e.data.adviserList[i]),t.SessionItem[n].MsgTimeStamp=a.formatTodayTime(new Date(1e3*t.SessionItem[n].MsgTimeStamp)),console.log(t.SessionItem[n].MsgShow),t.SessionItem[n].MsgShow=e.textChange(t.SessionItem[n].MsgShow),o.push(t.SessionItem[n]))}}e.setData({isSentAdviserList:o})}else alert("暂无最新消息");console.log(e.data.isSentAdviserList),e.setData({moreFag:!0}),console.log("拿到IM列表",(new Date).getTime()-d),console.log("渲染数据",e.data.isSentAdviserList)},function(e){console.log(e,"gggg")})},proto_getLoginInfo:function(){wx.request({url:a.newUrl()+"elab-marketing-authentication/tencent/signature",method:"POST",data:{identifier:o.globalData.identifier,appId:i.sdkAppID},header:{"content-type":"application/json"},success:function(e){if(e.data.code)return console.log("获取登录信息失败，调试期间请点击右上角三个点按钮，选择打开调试"),void wx.showToast({title:e.data.message+"["+e.data.code+"]",icon:"warn",duration:1500});console.log("获取usersig登录信息成功",e),o.globalData.userSig=e.data.single.signature},fail:function(e){console.log("获取IM信息失败: ",e),"request:fail timeout"==e.errMsg?wx.showToast({title:"网络请求超时，请检查网络状态",icon:"warn",duration:1500}):wx.showToast({title:e.errMsg,icon:"warn",duration:1500})}})},getHistoryMsgs:function(){var e=this,t=(a.formatTime(new Date),o.globalData.tonken);e.setData({loading:!0}),wx.request({header:{token:t},url:a.newUrl()+"elab-marketing-authentication/adviser/text/queryImChatRecord",method:"POST",data:{houseId:i.houseId,customerId:o.globalData.single.id},success:function(t){e.data.adviserList=t.data.list||[],e.data.adviserList.forEach(function(e){e.hasNewMsg=0}),console.log(e.data.adviserList,"========="),setTimeout(function(){console.log("本地列表加载完成，准备获取im列表",(new Date).getTime()-d),e.getHistoryMsg()},200),e.setData({loading:!1})}})},onLoad:function(e){wx.showLoading({title:"正在加载"});u=JSON.stringify(e),d=(new Date).getTime()},goChat:function(e){var t=e.currentTarget.dataset.item;wx.setStorageSync("adviserInfo",JSON.stringify(t));var n={type:"CLK",pvPageStayTime:((new Date).getTime()-wx.getStorageSync("loadTime"))/1e3,adviserId:t.id,imTalkId:t.id+"_"+o.globalData.single.id+"_"+i.houseId,imTalkType:"1",clkDesPage:"liaotianchuangkou",clkName:"xuanzeguwenliaotian",clkId:"clk_2cmina_25",clkParams:""};a.trackRequest(n,o),wx.navigateTo({url:"../chat/chat"})}}); 
 			}); 	require("pages/messagesList/messagesList.js");
 		__wxRoute = 'pages/savephone/savephone';__wxRouteBegin = true; 	define("pages/savephone/savephone.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("../../utils/util.js"),t=getApp(),a=require("../../config.js");Page({data:{verifyText:"获取验证码",isSend:!1,tel:"",dialog:!1,verifyCode:"",serverUrl:"http://skyforest.static.elab-plus.com/",pathName:{},templateContentId:"",flag:!1,projectPhone:"(0574)5568 6666",projectId:"",sharerImage:"",channel:""},onLoad:function(e){wx.showLoading({title:"正在加载"})},onShow:function(){wx.setStorageSync("loadTime",(new Date).getTime());var o=this,n={ip:t.globalData.ip,type:"PV",pvId:"P_2cMINA_15",pvCurPageName:"querenliudianye",pvCurPageParams:"",pvLastPageName:getCurrentPages()[getCurrentPages().length-2]?getCurrentPages()[getCurrentPages().length-2].data.despage:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(n,"埋点*app.globalData.userInfo*",t.globalData.userInfo),e.trackRequest(n,t),wx.request({url:e.newUrl()+"elab-marketing-authentication/house/detail",method:"POST",data:{id:a.houseId},success:function(e){e.data.success&&o.setData({projectPhone:e.data.single.tel})}})},getVerifyCode:function(){var a=this;a.data.isSend||(/^1\d{10}$/.test(a.data.tel)?wx.request({url:e.newUrl()+"elab-marketing-authentication/vcode/verifyCodeForLeavePhone/send",method:"POST",data:{phoneNumber:a.data.tel},header:{"content-type":"application/json",tonken:t.globalData.tonken},success:function(){a.setData({isSend:!0,showAdmit:!0,toView:"empty-box"});var e=60,t=setInterval(function(){e>0?(e-=1,a.setData({verifyText:e+"秒后获取"})):(a.setData({verifyText:"获取验证码"}),a.setData({isSend:!1}),clearInterval(t))},1e3)},fail:function(){wx.showToast({title:"网络连接出现问题，请稍后再试！",icon:"none",duration:2e3})}}):wx.showToast({title:"输入的手机号不合法",icon:"none",duration:2e3}))},sendTel:function(){var o=this;if(!o.data.flag){if(o.setData({flag:!0}),!/^1\d{10}$/.test(o.data.tel))return wx.showToast({title:"请输入正确的手机号",icon:"none",duration:2e3}),void o.setData({flag:!1});if(console.log(o.data.verifyCode.length),o.data.verifyCode.length<1)return wx.showToast({title:"验证码不能为空",icon:"none",duration:2e3}),void o.setData({flag:!1});wx.request({url:e.newUrl()+"elab-marketing-authentication/contact/leavephone/miniapp/insert",method:"POST",data:{houseId:a.houseId,leavePhoneCustomerId:t.globalData.single.id,shareParam:t.globalData.fromChannel,mobile:o.data.tel,code:o.data.verifyCode,source:"3"},header:{"content-type":"application/json",token:t.globalData.tonken},success:function(e){console.log(e,"//////"),e.data.success?(o.telData(),o.setData({dialog:!0}),setTimeout(function(){o.setData({dialog:!1})},2e3)):(wx.showToast({title:e.data.message,icon:"none",duration:2e3}),o.setData({flag:!1}))},fail:function(e){wx.showToast({title:res.data.message,icon:"none",duration:2e3}),o.setData({flag:!1})}})}},telData:function(){var a=this,o=getCurrentPages(),n=o[o.length-1],i=n.route;console.log("当前页面链接",n.route),wx.request({url:e.url(),method:"POST",data:e.reformParam(e.savephone,{houseid:t.globalData.houseid,name:t.globalData.loginid,channel:t.globalData.fromChannel,mobile:a.data.tel,platform:"3",refer:i}),success:function(){var a={type:"CLK",pvPageStayTime:((new Date).getTime()-wx.getStorageSync("loadTime"))/1e3,clkDesPage:"",clkName:"querenliudian",clkId:"clk_2cmina_44",clkParams:""};e.trackRequest(a,t)},fail:function(e){}})},userPhone:function(e){console.log(e,"寂静欢喜"),this.setData({tel:e.detail.value})},verifyCode:function(e){console.log(e,"yuan"),this.setData({verifyCode:e.detail.value}),console.log(this.data.verifyCode,"===============")},goAdviserList:function(){wx.navigateTo({url:"../counselorList/counselorList"})},onReady:function(){wx.hideLoading()}}); 
 			}); 	require("pages/savephone/savephone.js");
 		__wxRoute = 'pages/webView/webView';__wxRouteBegin = true; 	define("pages/webView/webView.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("../../utils/util.js"),a=getApp(),t=require("../../config.js"),o=require("../../getlogininfo.js"),i=(o.authorizeInfo,o.getUserInfo,null);Page({data:{view:"",encodeView:"",loginid:"",linkUrl:"",despage:"",title:"",isMomentPage:!1,imgUrl:""},onShareAppMessage:function(t){var o={clkId:"clk_2cMINA_1",clkDesPage:"",clkName:"fenxiang",type:"CLK",pvCurPageName:a.globalData.currDespage||"",pvCurPageParams:i};return e.trackRequest(o,a),{imageUrl:a.globalData.shareImage||"",title:this.data.title||a.globalData.projectName,path:"/pages/webView/webView?shareToken="+a.globalData.shareToken+"&view="+this.data.encodeView+"&title="+this.data.title}},onLoad:function(e){wx.showLoading({title:"正在加载"}),i=JSON.stringify(e),e.shareToken&&(a.globalData.fromChannel=e.shareToken||""),e.title&&this.setData({title:e.title||a.globalData.projectName});var o="";if(e.momentId&&this.setData({isMoment:e.momentId}),e.q){var n=decodeURIComponent(e.q),l=n.substring(n.lastIndexOf("/")+1,n.length);o=l.startsWith("N")||l.startsWith("n")?t.newTemplateUrl+l.replace("N",""):t.templateUrl+l,console.log("======options.q******",e.q,n,o)}else o=decodeURIComponent(e.view),console.log(o,e.view,"转发的url");-1==o.indexOf("https")&&(o=o.replace("http","https")),o=o.includes("?fromProduce=xcx")?o:o.includes("?")?o.replace("?","?fromProduce=xcx&"):o+"?fromProduce=xcx",this.setData({view:o,encodeView:e.view||encodeURIComponent(o)||"",linkUrl:e.linkUrl||"",imgUrl:e.imgUrl||"",loginid:e.shareToken||a.globalData.shareToken||""}),console.log("***WebView Data***",this.data,e.shareToken,"***",a.globalData.shareToken)},onReady:function(){wx.hideLoading(),this.setData({despage:a.globalData.currDespage}),wx.setNavigationBarTitle({title:this.data.title})},onShow:function(){a.login(function(){console.log("***webview-onshow-app.login***")})},onHide:function(){a.globalData.currDespage=null},onUnload:function(){console.log(this.data.isMoment,"webview-onUnload-ppppp")}}); 
 			}); 	require("pages/webView/webView.js");
 		__wxRoute = 'pages/video/video';__wxRouteBegin = true; 	define("pages/video/video.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var t,o=require("../../utils/util.js"),a=require("../../config.js");getApp();Page({data:(t={source:"",videoLength:!0,dateTime:"",time:"",city:"",temperature:"",weather:"",videoContext:null,appFlag:!1,queit:!1,showInfoModel:!1,title:"",momentId:"",videoFlag:!0,videoList:[],touchDot:0},e(t,"time",0),e(t,"videoLeft",-12.5),e(t,"interval",""),e(t,"windowHeight",0),e(t,"currentFlag",0),e(t,"linkUrl",""),e(t,"id",""),e(t,"showInfo",!1),t),onLoad:function(e){wx.showLoading({title:"正在加载"});t=this;console.log("***Video onLoad***",e,"啦啦啦",e.shareToken,e.linkUrl,e.id),wx.getSystemInfo({success:function(e){"ios"==e.platform&&t.setData({appFlag:!0})}});var t=this;this.setData({linkUrl:e.linkUrl||"",id:e.id||"",dateTime:o.timesData((new Date).getTime()),time:o.timestampToTime((new Date).getTime())}),wx.request({url:o.newUrl()+"elab-marketing-content/moment/queryMomentCurrent",method:"POST",data:{houseId:a.houseId},success:function(e){console.log("获取视频信息",e),t.setData({source:e.data.single.videoUrl,title:e.data.single.title}),console.log(t.data.source,"标题设置"),wx.setNavigationBarTitle({title:t.data.title})}}),wx.request({url:o.newUrl()+"elab-marketing-authentication/house/detail",method:"POST",data:{id:a.houseId},success:function(e){console.log(e,"获取项目明细信息"),t.setData({city:e.data.single.city}),t.getWeather(),console.log("获取项目明细信息",t.data.city)}}),wx.getSystemInfo({success:function(e){"ios"==e.platform&&t.setData({currentFlag:-1}),t.setData({windowHeight:e.windowWidth}),console.log("可视区宽度",e.windowWidth),console.log("可视区高度",e.windowHeight)}})},getWeather:function(){var e=this;wx.request({url:o.newUrl()+"elab-marketing-content/module/queryWeather",method:"POST",data:{city:e.data.city},success:function(t){console.log(t,"列表返回");try{e.setData({city:t.data.single.data.city,temperature:t.data.single.data.forecast[0].low.substring(3),weather:t.data.single.data.forecast[0].type}),console.log(e.data.temperature,e.data.city,e.data.weather,"////////")}catch(t){e.setData({temperature:"",weather:""})}},fail:function(e){console.log(e,"获取天气信息失败ggggggggggg")}})},moveLeft:function(){var e=this,t=e.data.videoLeft,o=20*(e.data.videoList.length-1);47.5!=e.data.videoLeft?(t+=20,e.setData({videoLeft:t}),console.log("向左滑动",e.data.videoLeft,"==",o)):t=o},moveRight:function(){var e=this,t=e.data.videoLeft,o=20*(e.data.videoList.length-1);92.5!=Math.abs(e.data.videoLeft)?(t-=20,e.setData({videoLeft:t}),console.log("向右滑动",e.data.videoLeft,"=====",o)):t=o},switchVideo:function(e){var t=this;e.currentTarget.dataset.video;console.log(e.currentTarget),wx.getSystemInfo({success:function(o){console.log("手机判断",o),"ios"==o.platform?t.setData({currentFlag:-1}):"android"==o.platform&&(t.setData({currentFlag:e.currentTarget.dataset.id}),console.log("安卓手机",t.data.currentFlag))}}),t.setData({source:e.currentTarget.dataset.video.videoUrl}),console.log("索引",t.data.currentFlag,e.currentTarget.dataset.id)},onShow:function(e){console.log("***video.js-onShow***");this.videoContext=wx.createVideoContext("myVideo"),wx.hideShareMenu()},onUnload:function(){console.log("***video.js-onUnload***");var e=this;e.setData({momentId:wx.getStorageSync("momentId")}),wx.request({url:o.newUrl()+"elab-marketing-content/module/modifyMomentView",method:"POST",data:{id:e.data.momentId,viewNumber:-1},success:function(t){console.log(t,"返回首页",e.data.momentId),wx.navigateBack({url:"../index/index"})}})},goback:function(){console.log("返回首页",this.data.momentId),wx.navigateBack({url:"../index/index"})},moreVideo:function(){var e=this;wx.request({url:o.newUrl()+"elab-marketing-content/moment/queryMomentCurrentList",method:"POST",data:{houseId:a.houseId},success:function(t){console.log(t,"视频列表返回"),e.setData({videoList:t.data.list}),t.data.list.length<=4&&e.setData({videoLength:!1}),console.log("返回数据",e.data.videoLength,t.data.list.length)}}),this.setData({videoFlag:!1}),console.log(this.data.videoFlag,"下雪了")},hideVideo:function(){this.setData({videoFlag:!0})},play:function(){var e=this;setTimeout(function(){e.videoContext.requestFullScreen(90),e.setData({showInfo:!0})},1e3)},queitFull:function(e){e.detail.fullScreen?(this.setData({queit:!1}),console.log("进入全屏",this.data.queit)):(this.setData({queit:!0}),console.log("退出全屏",this.data.queit))},onReady:function(){wx.hideLoading()},onHide:function(){console.log("***video.js-onHide***")}}); 
 			}); 	require("pages/video/video.js");
 		__wxRoute = 'pages/shareFriend/shareFriend';__wxRouteBegin = true; 	define("pages/shareFriend/shareFriend.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("../../utils/util.js"),t=require("../../config.js"),a=getApp(),o=require("../../getlogininfo.js"),n=o.authorizeInfo,i=o.getUserInfo;Page({data:{serverUrl:"http://skyforest.static.elab-plus.com/wepy_pro/v1-2/",count:"0",jbColor1:" #6294A6",jbColor2:"#3B4B81",list:[],pageNo:1,total:"",showInfoModel:!1,showPhoneModel:!1,phoneFailFun:null,phoneFun:null,setInter:null},onShow:function(t){wx.setStorageSync("loadTime",(new Date).getTime());var o={type:"PV",pvId:"P_2cMINA_11",pvCurPageName:"wodetuijian",pvCurPageParams:"",pvLastPageName:getCurrentPages()[getCurrentPages().length-2]?getCurrentPages()[getCurrentPages().length-2].data.despage:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(o,"埋点"),e.trackRequest(o,a)},onUnload:function(){e.stopTrackEventTimeObj()},onHide:function(){e.stopTrackEventTimeObj()},transformTime:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+((t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())+" ")},getList:function(){var o=this;if(o.data.total&&o.data.pageNo>o.data.total)return wx.showToast({title:"无更多消息",icon:"warn",duration:1500}),!1;wx.showLoading({title:"加载中"}),wx.request({url:e.newUrl()+"elab-marketing-authentication/contact/recommend/list",method:"POST",data:{houseId:t.houseId,pageSize:10,pageNo:o.data.pageNo,customerId:a.globalData.single.id,shareType:"0"},header:{"content-type":"application/json"},success:function(e){if(console.log("解密后 data: ",e),wx.hideLoading(),e.data.success&&e.data.pageModel){o.data.total||o.setData({total:e.data.pageModel.total});var t=e.data.pageModel.resultSet;t.forEach(function(e,a){t[a].created=o.transformTime(e.created/1e3)}),o.setData({list:o.data.list.concat(t),pageNo:o.data.pageNo+1,count:e.data.pageModel.rowTotal})}},fail:function(e){console.log("获取信息失败: ",e),"request:fail timeout"==e.errMsg?wx.showToast({title:"网络请求超时，请检查网络状态",icon:"warn",duration:1500}):wx.showToast({title:e.errMsg,icon:"warn",duration:1500})}})},onReachBottom:function(){this.getList()},onReady:function(){wx.hideLoading()},onLoad:function(e){wx.showLoading({title:"正在加载"});var t=this;n.call(this,function(){t.authorizeIndexPhone(function(){t.getList()},function(){t.getList()})},function(){t.authorizeIndexPhone(function(){t.getList()},function(){t.getList()})})},authorizeIndexPhone:function(e,t){var o=this;wx.getStorageSync("phone")||a.globalData.isPhone?"function"==typeof e&&e():(a.globalData.phone=wx.getStorageSync("phone"),console.log("***authorizeIndexPhone***",a.globalData.phone,wx.getStorageSync("phone")),a.globalData.phone?(o.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof e&&e()):o.setData({showPhoneModel:!0,phoneFun:e||null,phoneFailFun:t||null}))},getPhoneNumber:function(e){var t=this;this.setData({showPhoneModel:!1}),a.globalData.isPhone=!0,wx.setStorageSync("ISauthorizePhone",!0);var o=e.detail.iv,n=(e.detail.errMsg,a.globalData.houseid,a.globalData.tonken||""),i=e.detail.encryptedData,s=a.globalData.sessionKey,l=a.globalData.appid;console.log("***token***",n),a.globalData.tmpPhone=!0,console.log("****getPhoneNumber****"),e.detail.errMsg.includes("fail")?"function"==typeof t.data.phoneFailFun&&t.data.phoneFailFun():(i&&s&&o||wx.showToast({title:"系统提示:授权信息错误",icon:"warn",duration:1500}),a.globalData.single?t.getPhone(i,s,l,o,n):t.data.setInter=setInterval(function(){a.globalData.single&&(t.getPhone(i,s,l,o,n),clearInterval(t.data.setInter))},200))},getPhone:function(o,n,i,s,l){var g=this,r={encryptedData:o,sessionKey:n,appId:i,customerId:a.globalData.single.id,houseId:t.houseId,shareParam:a.globalData.fromChannel,iv:s};wx.request({url:e.newUrl()+"elab-marketing-authentication/position/queryPositionPhone",method:"POST",data:r,header:{"content-type":"application/json",token:l},success:function(e){console.log("解密后 data: ",e),e.data.success&&e.data.single&&(console.log(e.data.single),a.globalData.phone=e.data.single.phone,wx.setStorageSync("phone",e.data.single.phone),g.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof g.data.phoneFun&&g.data.phoneFun())},fail:function(e){"function"==typeof g.data.phoneFailFun&&g.data.phoneFailFun(),console.log(e,"解密手机号失败ggggggggggg")}})},getUserInfo:function(e){i.call(this,e)}}); 
 			}); 	require("pages/shareFriend/shareFriend.js");
 		__wxRoute = 'pages/noticeList/noticeList';__wxRouteBegin = true; 	define("pages/noticeList/noticeList.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("../../utils/util.js"),t=getApp(),a=require("../../config.js"),o=require("../../getlogininfo.js"),n=o.authorizeInfo,i=o.getUserInfo,s="";Page({data:{serverUrl:"http://skyforest.static.elab-plus.com/wepy_pro/v1-2/",count:"",list:[],pageNo:1,total:"",showInfoModel:!1,showPhoneModel:!1,phoneFailFun:null,phoneFun:null,hasNotice:!1,setInter:null},onShow:function(a){wx.setStorageSync("loadTime",(new Date).getTime());var o={type:"PV",pvId:"P_2cMINA_12",pvCurPageName:"xiaoxitongzhi",pvCurPageParams:s,pvLastPageName:getCurrentPages()[getCurrentPages().length-2]?getCurrentPages()[getCurrentPages().length-2].data.despage:"",pvLastPageParams:"",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};console.log(o,"埋点"),e.trackRequest(o,t)},onReady:function(){wx.hideLoading(),wx.setNavigationBarTitle({title:"消息通知"})},onUnload:function(){},onHide:function(){},transformTime:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+((t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())+" ")},getList:function(){var o=this;if(o.data.total&&o.data.pageNo>o.data.total)return wx.showToast({title:"无更多消息",icon:"warn",duration:1500}),!1;wx.showLoading({title:"加载中"}),wx.request({url:e.newUrl()+"elab-marketing-notify/customer/pageList",method:"POST",header:{token:t.globalData.tonken,houseId:a.houseId,"content-type":"application/json"},data:{pageNo:o.data.pageNo,customerId:t.globalData.single.id},success:function(e){console.log("解密后 消息通知data: ",e),wx.hideLoading(),e.data.success&&e.data.pageModel.resultSet.length>0?(o.data.total||o.setData({total:e.data.pageModel.total}),(e=e.data.pageModel.resultSet).forEach(function(t,a){e[a].sendTime=o.transformTime(t.sendTime/1e3),e[a].mobile?(console.log(e[a].content.split(e[a].mobile)),e[a].array1=e[a].content.split(e[a].mobile)[0],e[a].array2=e[a].content.split(e[a].mobile)[1]):e[a].array1=e[a].content}),o.setData({list:o.data.list.concat(e),pageNo:o.data.pageNo+1,hasNotice:!0})):e.data.success||wx.showToast({title:e.data.message,icon:"warn",duration:1500})},fail:function(e){console.log("获取信息失败: ",e),wx.hideLoading(),"request:fail timeout"==e.errMsg?wx.showToast({title:"网络请求超时，请检查网络状态",icon:"warn",duration:1500}):wx.showToast({title:e.errMsg,icon:"warn",duration:1500})}})},callTel:function(a){var o={clkId:"clk_2cmina_33",clkDesPage:"",clkName:"dianjidianhuahaoma",type:"CLK",pvCurPageName:"xiaoxitongzhi",pvCurPageParams:s};e.trackRequest(o,t),wx.makePhoneCall({phoneNumber:a.currentTarget.dataset.tel})},onLoad:function(e){wx.showLoading({title:"正在加载"}),s=JSON.stringify(e);var t=this;n.call(this,function(){t.authorizeIndexPhone(function(){t.getList()},function(){t.getList()})},function(){t.authorizeIndexPhone(function(){t.getList()},function(){t.getList()})})},authorizeIndexPhone:function(e,a){var o=this;wx.getStorageSync("phone")||t.globalData.isPhone?"function"==typeof e&&e():(t.globalData.phone=wx.getStorageSync("phone"),console.log("***authorizeIndexPhone***",t.globalData.phone,wx.getStorageSync("phone")),t.globalData.phone?(o.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof e&&e()):o.setData({showPhoneModel:!0,phoneFun:e||null,phoneFailFun:a||null}))},getPhoneNumber:function(e){var a=this;this.setData({showPhoneModel:!1}),t.globalData.isPhone=!0,wx.setStorageSync("ISauthorizePhone",!0);var o=e.detail.iv,n=(e.detail.errMsg,t.globalData.houseid,t.globalData.tonken||""),i=e.detail.encryptedData,s=t.globalData.sessionKey,l=t.globalData.appid;console.log("***token***",n),t.globalData.tmpPhone=!0,console.log("****getPhoneNumber****"),e.detail.errMsg.includes("fail")?"function"==typeof a.data.phoneFailFun&&a.data.phoneFailFun():(i&&s&&o||wx.showToast({title:"系统提示:授权信息错误",icon:"warn",duration:1500}),t.globalData.single?a.getPhone(i,s,l,o,n):a.data.setInter=setInterval(function(){t.globalData.single&&(a.getPhone(i,s,l,o,n),clearInterval(a.data.setInter))},200))},getPhone:function(o,n,i,s,l){var g=this,r={encryptedData:o,sessionKey:n,appId:i,customerId:t.globalData.single.id,houseId:a.houseId,shareParam:t.globalData.fromChannel,iv:s};wx.request({url:e.newUrl()+"elab-marketing-authentication/position/queryPositionPhone",method:"POST",data:r,header:{"content-type":"application/json",token:l},success:function(e){console.log("解密后 data: ",e),e.data.success&&e.data.single&&(console.log(e.data.single),t.globalData.phone=e.data.single.phone,wx.setStorageSync("phone",e.data.single.phone),g.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof g.data.phoneFun&&g.data.phoneFun())},fail:function(e){"function"==typeof g.data.phoneFailFun&&g.data.phoneFailFun(),console.log(e,"解密手机号失败ggggggggggg")}})},getUserInfo:function(e){i.call(this,e)},onReachBottom:function(){this.getList()},goToDetail:function(e){console.log("asd");var t=e.target.dataset.url,a=e.target.dataset.type;if(t&&t.includes("m.elab-plus.com")&&1==a){var o=encodeURIComponent(t);wx.navigateTo({url:"../webView/webView?view="+encodeURIComponent(o)})}else t&&1==a&&wx.showToast({title:"请在APP中打开查看!",icon:"warn",duration:1500})}}); 
 			}); 	require("pages/noticeList/noticeList.js");
 		__wxRoute = 'pages/share/share';__wxRouteBegin = true; 	define("pages/share/share.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=require("../../utils/util.js"),t=getApp(),o=require("../../getlogininfo.js"),n=o.authorizeInfo,a=o.getUserInfo;Page({data:{serverUrl:"http://skyforest.static.elab-plus.com/wepy_pro/",list:[],note:"",showInfoModel:!1,showPhoneModel:!1,phoneFailFun:null,phoneFun:null},onShareAppMessage:function(e){var o;if("button"==e.from){var n=e.target.dataset.path,a=e.target.dataset.url;o={title:e.target.dataset.title,imageUrl:a,path:"/pages/webView/webView?loginid="+t.globalData.single.loginid+"&view="+encodeURIComponent(n)}}else o={title:"宁波WIII",imageUrl:"",path:"/pages/share/share?loginid="+t.globalData.single.loginid};return o},onShow:function(o){n={pageid:"10941010",keyvalue:"sfc.nb.xcx.w3.head.fenxiang.enter"};e.reqTrackEventObj(n,t);var n={pageid:"10941010",keyvalue:"sfc.nb.xcx.w3.head.fenxiang.statetime",usetime:"3000"};e.reqTrackEventTimeObj(n,t),wx.hideShareMenu()},onUnload:function(){e.stopTrackEventTimeObj()},onHide:function(){e.stopTrackEventTimeObj()},getList:function(){var o=this,n={houseid:t.globalData.houseid,mobile:t.globalData.phone,enumType:"0574"};wx.request({url:e.url(),method:"POST",data:e.reformParam(e.getRecommendInfoList,n),header:{"content-type":"application/json"},success:function(e){if(console.log("解密后 分享数据data: ",e),e.data.success&&e.data.list.length>0){var t=e.data.list;t.forEach(function(e,o){t[o].tag=e.tag.split(",")}),console.log(t),o.setData({list:t,note:e.data.single.note})}},fail:function(e){console.log("获取信息失败: ",e),"request:fail timeout"==e.errMsg?wx.showToast({title:"网络请求超时，请检查网络状态",icon:"warn",duration:1500}):wx.showToast({title:e.errMsg,icon:"warn",duration:1500})}})},goDetail:function(e){var t=e.target.dataset.path;wx.navigateTo({url:"/pages/webView/webView?loginid=&view="+encodeURIComponent(t)})},onReady:function(){wx.hideLoading(),wx.setNavigationBarTitle({title:"我要分享"})},onLoad:function(e){wx.showLoading({title:"正在加载"}),wx.hideShareMenu();var t=this;n.call(this,function(){t.authorizeIndexPhone(function(){t.getList()},function(){wx.redirectTo({url:"../index/index?loginid="+e.shareToken})})},function(){wx.redirectTo({url:"../index/index?loginid="+e.shareToken})})},authorizeIndexPhone:function(e,o){var n=this;wx.getStorageSync("phone")?"function"==typeof e&&e():(t.globalData.phone=wx.getStorageSync("phone"),console.log("***authorizeIndexPhone***",t.globalData.phone,wx.getStorageSync("phone")),t.globalData.phone?(n.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof e&&e()):n.setData({showPhoneModel:!0,phoneFun:e||null,phoneFailFun:o||null}))},getPhoneNumber:function(o){var n=this;this.setData({showPhoneModel:!1}),wx.setStorageSync("ISauthorizePhone",!0);var a=o.detail.iv,i=(o.detail.errMsg,t.globalData.houseid,t.globalData.tonken||""),l=o.detail.encryptedData,s=t.globalData.sessionKey,r=t.globalData.appid;if(console.log("***token***",i),console.log("****getPhoneNumber****"),o.detail.errMsg.includes("fail"))"function"==typeof n.data.phoneFailFun&&n.data.phoneFailFun();else{l&&s&&a||wx.showToast({title:"系统提示:授权信息错误",icon:"warn",duration:1500});var g={encryptedData:l,sessionKey:s,appId:r,iv:a};wx.request({url:e.newUrl()+"elab-marketing-content/module/queryPositionPhone",method:"POST",data:g,header:{"content-type":"application/json",token:i},success:function(e){console.log("解密后 data: ",e),e.data.success&&e.data.single&&(console.log(e.data.single),t.globalData.phone=e.data.single.phone,wx.setStorageSync("phone",e.data.single),n.setData({showPhoneModel:!1,showPhoneAuth:!0}),"function"==typeof n.data.phoneFun&&n.data.phoneFun())},fail:function(e){"function"==typeof n.data.phoneFailFun&&n.data.phoneFailFun(),console.log(e,"解密手机号失败ggggggggggg")}})}},getUserInfo:function(e){a.call(this,e)}}); 
 			}); 	require("pages/share/share.js");
 		__wxRoute = 'pages/houseType/houseType';__wxRouteBegin = true; 	define("pages/houseType/houseType.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e="",t=require("../../utils/util.js"),a=getApp(),s=require("../../config.js");Page({data:{serverUrl:"http://skyforest.static.elab-plus.com/wepy_pro/v1-2/",jbColor1:" #6294A6",jbColor2:"#3B4B81",shade1:"rgba(39,42,52,0.00)",despage:"huxingye",shade2:"#272A34",list:[],active:0,houseList:[],currentName:""},getList:function(){var e=this;wx.request({url:t.newUrl()+"elab-marketing-content/layout/listBuilding",method:"POST",data:{houseId:s.houseId},header:{"content-type":"application/json"},success:function(t){console.log("楼栋数据",t),200==t.statusCode&&(t.data.success?t.data.list&&t.data.list.length>0&&(e.setData({list:t.data.list||[]}),e.getHouseList(t.data.list[0].id,t.data.list[0].name)):wx.showToast({title:t.data.message+"["+t.data.errorCode+"]",icon:"warn",duration:1500})),wx.hideLoading()},fail:function(e){wx.showToast({title:e.errMsg,icon:"warn",duration:1500}),wx.hideLoading()}})},getHouseList:function(e,a){this.setData({currentName:a});var i=this;wx.request({url:t.newUrl()+"elab-marketing-content/layout/pageListLayoutByBuilding",method:"POST",data:{houseId:s.houseId,buildingId:e},header:{"content-type":"application/json"},success:function(e){console.log("楼栋户型数据",e),e.data.success&&e.data.pageModel.resultSet.length>0?i.setData({houseList:e.data.pageModel.resultSet}):(i.setData({houseList:[]}),wx.showToast({title:e.data.message+"["+e.data.errorCode+"]",icon:"warn",duration:1500}))},fail:function(e){wx.showToast({title:e.errMsg,icon:"warn",duration:1500})}})},checkOutHouse:function(s){var i={clkId:"clk_2cmina_29",clkDesPage:"",clkName:"loudongxuanze",type:"CLK",clkParams:{buildingId:s.currentTarget.dataset.name},pvCurPageName:"huxingye",pvCurPageParams:e};t.trackRequest(i,a),this.setData({active:s.target.id}),this.getHouseList(s.currentTarget.dataset.id,s.currentTarget.dataset.name)},goDetail:function(s){var i=s.currentTarget.dataset.id,o=s.currentTarget.dataset.index,n={houseList:this.data.houseList,currentName:this.data.currentName,id:i,index:o},r={clkId:"clk_2cmina_30",clkName:"huxingxuanze",clkDesPage:"huxingtupian",type:"CLK",clkParams:{houseType:i},pvCurPageName:"huxingye",pvCurPageParams:e};console.log(n,"detail"),t.trackRequest(r,a),a.globalData.houseTypeDetail=n,wx.navigateTo({url:"../houseTypeDetail/houseTypeDetail"})},goChatList:function(e){wx.getStorageSync("isSend"+s.houseId)?wx.navigateTo({url:"../messagesList/messagesList"}):wx.navigateTo({url:"../counselorList/counselorList"})},proto_getLoginInfo:function(){wx.request({url:t.newUrl()+"elab-marketing-authentication/tencent/signature",method:"POST",data:{identifier:a.globalData.identifier,appId:s.sdkAppID},header:{"content-type":"application/json"},success:function(e){if(e.data.code)return console.log("获取登录信息失败，调试期间请点击右上角三个点按钮，选择打开调试"),void wx.showToast({title:e.data.message+"["+e.data.code+"]",icon:"warn",duration:1500});console.log("获取usersig登录信息成功",e),a.globalData.userSig=e.data.single.signature},fail:function(e){console.log("获取IM信息失败: ",e),"request:fail timeout"==e.errMsg?wx.showToast({title:"网络请求超时，请检查网络状态",icon:"warn",duration:1500}):wx.showToast({title:e.errMsg,icon:"warn",duration:1500})}})},onShow:function(s){wx.setStorageSync("loadTime",(new Date).getTime());var i={pvId:"P_2cMINA_9",type:"PV",pvCurPageName:"huxingye",pvLastPageName:"zhuye",pvCurPageParams:e,pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};t.trackRequest(i,a)},onReady:function(){wx.setNavigationBarTitle({title:"户型"})},onUnload:function(){t.stopTrackEventTimeObj()},onHide:function(){t.stopTrackEventTimeObj()},onLoad:function(t){wx.showLoading({title:"正在加载"}),t&&t.shareToken&&"null"!=t.shareToken&&"undefined"!=t.shareToken&&(a.globalData.fromChannel=t.shareToken),e=JSON.stringify(t),this.getList()}}); 
 			}); 	require("pages/houseType/houseType.js");
 		__wxRoute = 'pages/houseTypeDetail/houseTypeDetail';__wxRouteBegin = true; 	define("pages/houseTypeDetail/houseTypeDetail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e="",a=require("../../utils/util.js"),t=getApp(),i=require("../../config.js");Page({data:{serverUrl:"http://skyforest.static.elab-plus.com/wepy_pro/v1-2/",jbColor1:" #6294A6",jbColor2:"#3B4B81",dataList:[],list:["123","123","123","123","123"],picList:[],houseType:"",despage:"huxingtupian",previewFlag:!1,houseDetail:"",active:0,current:0,detail:"",currentIndex:0,defaultImagePath:"../../image/wepy_pro/loading1.gif"},onShareAppMessage:function(i){var o={clkId:"clk_2cmina_31",clkDesPage:"huxingfenxiang",clkName:"huxingfenxiang",type:"CLK",pvCurPageName:"huxingtupian",clkParams:{houseType:this.data.active},expand:"",pvCurPageParams:e};return a.trackRequest(o,t),console.log("***houseTypeDetail-onShareAppMessage***",t.globalData.shareToken),{imageUrl:t.globalData.shareImage||"",title:this.data.title||t.globalData.projectName,path:"/pages/houseTypeDetail/houseTypeDetail?shareToken="+t.globalData.shareToken+"&detail="+JSON.stringify(this.data.detail)}},pre:function(){this.setData({current:this.data.current-1})},next:function(){this.setData({current:this.data.current+1})},checkOutHouse:function(i){var o={clkId:"clk_2cmina_30",clkName:"huxingxuanze",clkDesPage:"huxingtupian",type:"CLK",clkParams:{houseType:i.currentTarget.dataset.id},pvCurPageName:"huxingye",pvCurPageParams:e};a.trackRequest(o,t),this.setData({active:i.target.dataset.id,current:0});var s=i.target.dataset.index,n=this.data.dataList;this.data.currentIndex=s;for(var r=0;r<n[s].layoutImageResponseList.length;r++)null!==n[s].layoutImageResponseList[r].loadComplete&&void 0!==n[s].layoutImageResponseList[r].loadComplete||(n[s].layoutImageResponseList[r].loadComplete=!1);this.setData({houseType:(n[s].room?n[s].room+"室":"")+(n[s].hall?n[s].hall+"厅":"")+(n[s].kitchen?n[s].kitchen+"厨":"")+(n[s].toilet?n[s].toilet+"卫":""),houseDetail:n[s].propertyType+" | "+n[s].floorHeight+"M | "+n[s].orientation,picList:n[s].layoutImageResponseList})},bindchange:function(e){this.setData({current:e.detail.current})},priviewPic1:function(e){var a=this.data.picList[e.currentTarget.dataset.index].imageUrl,t=this.data.picList.map(function(e){return e.imageUrl});this.data.previewFlag=!0,console.log(t),wx.previewImage({current:a,urls:t})},goChatList:function(o){if(wx.getStorageSync("isSend"+i.houseId)){s={clkId:"clk_2cmina_32",clkDesPage:"xiaoxiliebiao",clkName:"huxingzaixianzixun",type:"CLK",pvCurPageName:"huxingtupian",pvCurPageParams:e};a.trackRequest(s,t),wx.navigateTo({url:"../messagesList/messagesList"})}else{var s={clkId:"clk_2cmina_32",clkDesPage:"xuanzeguwenliebiao",clkName:"huxingzaixianzixun",type:"CLK",pvCurPageName:"huxingtupian",pvCurPageParams:e};a.trackRequest(s,t),wx.navigateTo({url:"../counselorList/counselorList"})}},load:function(e){console.log("houseTypeDetail",e),this.data.picList[e.currentTarget.dataset.index].loadComplete=!0,this.data.dataList[this.data.currentIndex].layoutImageResponseList[e.currentTarget.dataset.index].loadComplete=!0,this.setData({picList:this.data.picList})},error:function(e){console.log("houseTypeDetail",e)},onShow:function(e){console.log("onshow");var i=this;wx.setStorageSync("loadTime",(new Date).getTime()),t.login(function(){if(i.data.previewFlag)i.data.previewFlag=!1;else{var e={pvId:"P_2cMINA_10",type:"PV",pvCurPageParams:{houseType:i.data.active},pvCurPageName:"huxingtupian",pvLastPageName:"huxingye",pvPageLoadTime:(new Date).getTime()-wx.getStorageSync("loadTime")};a.trackRequest(e,t),console.log("已发送埋点")}})},onReady:function(){wx.hideLoading()},onUnload:function(){a.stopTrackEventTimeObj()},onHide:function(){a.stopTrackEventTimeObj()},onLoad:function(a){wx.showLoading({title:"正在加载"}),e=JSON.stringify(a),console.log("****houseTypeDetail-onload**",e,a.detail);var i=t.globalData.houseTypeDetail||JSON.parse(a.detail),o=i.houseList,s=i.index;this.data.currentIndex=s,a&&a.shareToken&&"null"!=a.shareToken&&"undefined"!=a.shareToken&&(t.globalData.fromChannel=a.shareToken);for(var n=0;n<o[s].layoutImageResponseList.length;n++)o[s].layoutImageResponseList[n].loadComplete=!1;wx.setNavigationBarTitle({title:i.currentName}),this.setData({dataList:o,detail:i,active:i.id,houseType:(o[s].room?o[s].room+"室":"")+(o[s].hall?o[s].hall+"厅":"")+(o[s].kitchen?o[s].kitchen+"厨":"")+(o[s].toilet?o[s].toilet+"卫":""),houseDetail:o[s].propertyType+" | "+o[s].floorHeight+"M | "+o[s].orientation,picList:o[s].layoutImageResponseList})}}); 
 			}); 	require("pages/houseTypeDetail/houseTypeDetail.js");
 		__wxRoute = 'pages/shareProgram/shareProgram';__wxRouteBegin = true; 	define("pages/shareProgram/shareProgram.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";require("../../utils/util.js"),getApp();var e=require("../../getlogininfo.js");e.authorizeInfo,e.getUserInfo;Page({data:{serverUrl:"http://skyforest.static.elab-plus.com/wepy_pro/",list:[],note:"",showInfoModel:!1,showPhoneModel:!1,shareImg:"",phoneFailFun:null,phoneFun:null},onShow:function(e){wx.hideShareMenu()},onUnload:function(){},onHide:function(){},onReady:function(){wx.hideLoading(),wx.setNavigationBarTitle({title:"我要分享"})},onLoad:function(e){wx.showLoading({title:"正在加载"});this.setData({shareImg:wx.getStorageSync("shareProgram")})},save:function(){wx.getImageInfo({src:this.data.shareImg,success:function(e){var o=e.path;wx.saveImageToPhotosAlbum({filePath:o,success:function(e){wx.showToast({title:"保存成功！",icon:"success",duration:1500})}})}})}}); 
 			}); 	require("pages/shareProgram/shareProgram.js");
 		__wxRoute = 'pages/healthCenter/healthCenter';__wxRouteBegin = true; 	define("pages/healthCenter/healthCenter.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";require("../../utils/util.js"),getApp(),require("../../config.js");Page({data:{serverUrl:"http://skyforest.static.elab-plus.com/wepy_pro/v1-2/",serverNewUrl:"https://dm.static.elab-plus.com/tn/",jbColor1:" #6294A6",jbColor2:"#3B4B81",shade1:"rgba(39,42,52,0.00)",shade2:"#272A34",defaultImagePath:"../../image/wepy_pro/loading1.gif",defaultImagePath1:"https://dm.static.elab-plus.com/tn/12@2x.jpg",healthList:["国医预约","健康管理","度假康养","车辆服务","角色体验"],imgUrls:[{url:"qwe2.gif",loadComplete:!1},{url:"qwe3.gif",loadComplete:!1}],bannerUrls:[{url:"国医预约@2x.jpg",loadComplete:!1,imgheights:""},{url:"健康管理@2x.jpg",loadComplete:!1,imgheights:""},{url:"度假康养@2x1.jpg",loadComplete:!1,imgheights:""},{url:"车辆服务@2x.jpg",loadComplete:!1,imgheights:""},{url:"角色体验.jpg",loadComplete:!1,imgheights:""}],current:0,x:0},load:function(t){this.data.imgUrls[t.currentTarget.dataset.index].loadComplete=!0,this.setData({imgUrls:this.data.imgUrls})},load1:function(t){this.data.bannerUrls[t.currentTarget.dataset.index].loadComplete=!0,this.setData({bannerUrls:this.data.bannerUrls});var e=750/(t.detail.width/(e=t.detail.height));this.data.imgheights;this.data.bannerUrls[t.currentTarget.dataset.index].imgheights=e,this.setData({bannerUrls:this.data.bannerUrls})},change:function(t){if("touch"!=t.detail.source)return!1;var e=this.data.x;if(console.log(this.data.x,this.data.current,t.detail.current),this.data.current<t.detail.current)(r=(a=176*(t.detail.current+1))-750)>0&&(e=-r+"rpx");else if(this.data.current>t.detail.current){var a=176*t.detail.current,r=Math.abs(parseInt(e));a<r&&(e=-a+"rpx")}this.setData({current:t.detail.current,x:e})},goWebview:function(t){t.currentTarget.dataset.jump&&wx.navigateTo({url:"../webView/webView?view="+encodeURIComponent(t.currentTarget.dataset.jump)+"&title="+t.currentTarget.dataset.title,success:function(){},fail:function(t){console.log(t)}})},checkout:function(t){var e=this.data.x;if(console.log(this.data.x,this.data.current,t.detail.current),this.data.current<t.currentTarget.dataset.num)(r=(a=176*(t.currentTarget.dataset.num+1))-750)>0&&(e=-r+"rpx");else if(this.data.current>t.currentTarget.dataset.num){var a=176*t.currentTarget.dataset.num,r=Math.abs(parseInt(e));a<r&&(e=-a+"rpx")}this.setData({current:t.currentTarget.dataset.num,x:e})},onShow:function(t){},onReady:function(){wx.setNavigationBarTitle({title:"康养中心"})},onUnload:function(){},onHide:function(){},onLoad:function(t){wx.hideLoading()}}); 
 			}); 	require("pages/healthCenter/healthCenter.js");
 		__wxRoute = 'pages/dreamHabitat/dreamHabitat';__wxRouteBegin = true; 	define("pages/dreamHabitat/dreamHabitat.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";require("../../utils/util.js");var t=getApp();require("../../config.js");Page({data:{dreamList:["田居","禅居","林居","溪居","亲子中心","共享农庄"],imgList:[{url:"https://dm.static.elab-plus.com/tn/tj.jpg",cover:"https://dm.static.elab-plus.com/tn/tj_gif.gif",load:!1},{url:"https://dm.static.elab-plus.com/tn/cj.jpg",cover:"https://dm.static.elab-plus.com/tn/cj_gif.gif",load:!1},{url:"https://dm.static.elab-plus.com/tn/lj.jpg",cover:"https://dm.static.elab-plus.com/tn/lj_gif.gif",load:!1},{url:"https://dm.static.elab-plus.com/tn/xj.jpg",cover:"https://dm.static.elab-plus.com/tn/xj_gif.gif",load:!1},{url:"https://dm.static.elab-plus.com/tn/qzzx2.jpg",cover:"https://dm.static.elab-plus.com/tn/qzzx_gif.gif",load:!1},{url:"https://dm.static.elab-plus.com/tn/gxrz1.jpg",cover:"https://dm.static.elab-plus.com/tn/gxrz_gif.gif",load:!1}],serverUrl:"http://skyforest.static.elab-plus.com/wepy_pro/v1-2/",jbColor1:" #6294A6",jbColor2:"#3B4B81",shade1:"rgba(39,42,52,0.00)",shade2:"#272A34",current:0,imgheights:[],canRemove:!0,overflow:"auto"},onShareAppMessage:function(a){return{title:"泰宁养生现代村落",path:"/pages/dreamHabitat/houseType?shareToken="+t.globalData.shareToken}},switch:function(t){this.setData({current:t.currentTarget.dataset.index}),console.log(this.data.current)},catchTouchMove:function(t){console.log("***catchTouchMove***",this.data.canRemove,t)},switchImg:function(t){console.log(t.detail.source),"touch"==t.detail.source&&this.setData({current:t.detail.current}),console.log(this.data.current)},animationfinish:function(t){console.log(t),this.data.canRemove=!0},onShow:function(t){wx.hideLoading()},load:function(t){this.data.imgList[t.currentTarget.dataset.index].load=!0;var a=t.detail.width,e=a/(o=t.detail.height);console.log(a,o);var o=750/e,i=this.data.imgheights;i[t.currentTarget.dataset.index]=o,this.setData({imgheights:i}),console.log(this.data.imgheights)},onReady:function(){wx.setNavigationBarTitle({title:"现代村落"})},onUnload:function(){},onHide:function(){},onLoad:function(t){}}); 
 			}); 	require("pages/dreamHabitat/dreamHabitat.js");
 	