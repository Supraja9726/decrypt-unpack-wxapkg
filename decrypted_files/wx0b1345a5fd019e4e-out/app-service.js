	var __wxAppData = __wxAppData || {}; 	var __wxRoute = __wxRoute || ""; 	var __wxRouteBegin = __wxRouteBegin || ""; 	var __wxAppCode__ = __wxAppCode__ || {};	var global = global || {};	var __WXML_GLOBAL__=__WXML_GLOBAL__ || {};	var __wxAppCurrentFile__=__wxAppCurrentFile__||""; 	var Component = Component || function(){};	var definePlugin = definePlugin || function(){};	var requirePlugin = requirePlugin || function(){};	var Behavior = Behavior || function(){};
	
	define("data.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e={},a=require("./theme-config.js");e.styleConfig=a.pink,e.isPerson=!1,e.setting={name:"潮汕鲜花网",autoId:"56660",hasWxPay:!0,wxAppId:"wx0b1345a5fd019e4e",secret:"e29277cd2069d383fd3e261cc2f405aa",comUrl:"https://mg.vzmapp.com",payUrl:"https://pay-gw.vzmapp.com"},e.dataInfo={appId:"2c92cf3c63223bd101633e4f1e770683",theme:{name:"pink",mainColor:"#f78ea5",foregroundColor:"white",mainColorHighlight:"#e5b9ca",mainRGB:{r:226,g:114,b:167},tabSelectIconKey:"tab_pink",navigationBarTextStyle:"white",backgroundTextStyle:"dark",remark:"通用粉色风格"},projectType:"meirong",homePageLayout:"1",version:"1.0.0",versionDesc:"",ext:{},projectIcon:"http://img1.vzmapp.com/uploadPic/2018/05/27/20180527041256742.png",projectName:"潮汕鲜花网",PCStatus:"2",customizeTabsList:[{id:"2c92cf3c63223bd101633e4f1ec406a4",sysTabName:"Home-Page",sysTabNameTag:"LynxHomePage",pcModule:"Home-Page",iconURL:"http://img1.vzmapp.com/uploadPic/2016/12/05/20161205083400536.png",folder:"HomePage",tabTitle:"首页"},{id:"2c92cf3c63223bd101633e4f1eaf0698",sysTabName:"Product-Level3",sysTabNameTag:"LynxProductList",pcModule:"Product-Level3",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403113720162.jpg",folder:"ProductLevel3",tabTitle:"花名分类"},{id:"2c92cf3c63223bd101633e4f1eda06aa",sysTabName:"Branches-Enquiry",sysTabNameTag:"LynxAbout_Merchant",pcModule:"Branches-Enquiry",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403113839478.jpg",folder:"BranchesEnquiry",tabTitle:"商铺联盟"},{id:"2c92cf3c63223bd101633e4f1f7a06df",sysTabName:"Photo-Info-Tab-Level2",sysTabNameTag:"",pcModule:"Photo-Info-Tab-Level2",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114006629.jpg",folder:"PhotoInfoTabLevel2",tabTitle:"行业快讯"},{id:"2c92cf3c63223bd101633e4f1e810685",sysTabName:"Activity-Kill",sysTabNameTag:"",pcModule:"Activity-Kill",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114144300.jpg",folder:"ActivityKill",tabTitle:"限时秒杀"},{id:"c5f8b3d86fa811e8a17e00163e0e5d2b",sysTabName:"Activity-Group",sysTabNameTag:"",pcModule:"Activity-Group",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114258616.jpg",folder:"ActivityGroup",tabTitle:"拼团特卖"},{id:"fb971cff64a811e8a73500163e047a15",sysTabName:"Activity-Distribution",sysTabNameTag:"",pcModule:"Activity-Distribution",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114412719.jpg",folder:"ActivityDistribution",tabTitle:"全员分销"},{id:"2c92cf3c63223bd101633e4f1e790684",sysTabName:"CardNo",sysTabNameTag:"",pcModule:"",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114552548.jpg",folder:"CardNo",tabTitle:"VIP会员卡"},{id:"2c92cf3c63223bd101633e4f1ece06a8",sysTabName:"Photo-Info-Tab-Level2",sysTabNameTag:"LynxPhoto_H_Info_Tab_Level2",pcModule:"Photo-Info-Tab-Level2",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114258616.jpg",folder:"PhotoInfoTabLevel2",tabTitle:"送花宝典"},{id:"2c92cf3c63223bd101633e4f1f9206e8",sysTabName:"Activity",sysTabNameTag:"",pcModule:"Activity",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114412719.jpg",folder:"Activity",tabTitle:"领优惠券"},{id:"2c92cf3c63223bd101633e4f1eaa0695",sysTabName:"About-Merchant",sysTabNameTag:"LynxApplyFor_About_Merchant",pcModule:"About-Merchant",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114552548.jpg",folder:"AboutMerchant",tabTitle:"申请加盟"},{id:"2c92cf3c63223bd101633e4f1f9a06ea",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"PCAdevertising",pcModule:"HOMEPAGE_TOP",iconURL:"http://img1.vzmapp.com/TabIconLib/orange/icon-0021.png",folder:"PhotoInfoTabLevel1",tabTitle:"PC首页顶部广告"},{id:"2c92cf3c63223bd101633e4f1e820686",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"PCAdevertising",pcModule:"HOMEPAGE_MIDDLE",iconURL:"http://img1.vzmapp.com/TabIconLib/orange/icon-0021.png",folder:"PhotoInfoTabLevel1",tabTitle:"PC首页中部广告"},{id:"2c92cf3c63223bd101633e4f1f8d06e7",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"PCAdevertising",pcModule:"HOMEPAGE_BOTTOM",iconURL:"http://img1.vzmapp.com/TabIconLib/orange/icon-0021.png",folder:"PhotoInfoTabLevel1",tabTitle:"PC首页底部广告"},{id:"2c92cf3c63223bd101633e4f1eac0697",sysTabName:"Video-Gallery",sysTabNameTag:"Video_Gallery",pcModule:"Video-Gallery",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114659956.jpg",folder:"VideoGallery",tabTitle:"视频观看"},{id:"2c92cf3c63223bd101633e4f1f6506d0",sysTabName:"Flexi-Form",sysTabNameTag:"",pcModule:"Flexi-Form",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403113720162.jpg",folder:"FlexiForm",tabTitle:"DIY订制"},{id:"2c92cf3c63223bd101633e4f1e99068c",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"LynxPhoto_Info_Post_Tab",pcModule:"Photo-Info-Tab-Level1",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403113839478.jpg",folder:"PhotoInfoTabLevel1",tabTitle:"供/求发布"},{id:"2c92cf3c63223bd101633e4f1fa406ed",sysTabName:"Flexi-Form",sysTabNameTag:"Flexi-Form-Booking",pcModule:"Flexi-Form-Booking",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0010.png",folder:"FlexiForm",tabTitle:"自定义表格"},{id:"2c92cf3c63223bd101633e4f1f7306db",sysTabName:"Online-Chat",sysTabNameTag:"",pcModule:"Online-Chat",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114006629.jpg",folder:"OnlineChat",tabTitle:"在线客服"},{id:"2c92cf3c63223bd101633e4f1e95068a",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"LynxAdvertisingH_Photo_Info_Tab_Level1",pcModule:"Photo-Info-Tab-Level1",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114144300.jpg",folder:"PhotoInfoTabLevel1",tabTitle:"广告图"},{id:"2c92cf3c63223bd101633e4f1f5f06ce",sysTabName:"Member",sysTabNameTag:"",pcModule:"Member",iconURL:"http://img1.vzmapp.com/TabIconLib/orange/icon-0046.png",folder:"Member",tabTitle:"会员中心"},{id:"2c92cf3c63223bd101633e4f1f8b06e6",sysTabName:"taoShangChengFT",sysTabNameTag:"",pcModule:"taoShangChengFT",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0002.png",folder:"taoShangChengFT",tabTitle:"运费模板"},{id:"2c92cf3c63223bd101633e4f1ec206a3",sysTabName:"Product-Order",sysTabNameTag:"ZXMarketModuleOrder",pcModule:"Product-Order",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0028.png",folder:"ProductOrder",tabTitle:"订单列表"},{id:"2c92cf3c63223bd101633e4f1ea80693",sysTabName:"About-Merchant",sysTabNameTag:"",pcModule:"About-Merchant",iconURL:"http://img1.vzmapp.com/uploadPic/2018/04/03/20180403114258616.jpg",folder:"AboutMerchant",tabTitle:"关于我们"},{id:"2c92cf3c63223bd101633e4f1f9506e9",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"PCAdevertising_activity",pcModule:"Photo-Info-Tab-Level1",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0021.png",folder:"PhotoInfoTabLevel1",tabTitle:"优惠券广告"},{id:"2c92cf3c63223bd101633e4f1e870687",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"PCAdevertising_top",pcModule:"Photo-Info-Tab-Level1",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0021.png",folder:"PhotoInfoTabLevel1",tabTitle:"顶部广告"},{id:"2c92cf3c63223bd101633e4f1e8c0688",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"PCAdevertising_mid",pcModule:"Photo-Info-Tab-Level1",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0021.png",folder:"PhotoInfoTabLevel1",tabTitle:"中部广告"},{id:"2c92cf3c63223bd101633e4f1e900689",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"PCAdevertising_btm",pcModule:"Photo-Info-Tab-Level1",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0021.png",folder:"PhotoInfoTabLevel1",tabTitle:"底部广告"},{id:"2c92cf3c63223bd101633e4f1f6c06d7",sysTabName:"LongPush",sysTabNameTag:"",pcModule:"LongPush",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0029.png",folder:"LongPush",tabTitle:"信息中心"},{id:"2c92cf3c63223bd101633e4f1f6f06d9",sysTabName:"About-Team",sysTabNameTag:"",pcModule:"About-Team",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0034.png",folder:"AboutTeam",tabTitle:"联系我们"},{id:"2c92cf3c63223bd101633e4f1fa006eb",sysTabName:"About-Merchant",sysTabNameTag:"SQ_CallMe",pcModule:"PC",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0055.png",folder:"AboutMerchant",tabTitle:"PC配置"},{id:"2c92cf3c63223bd101633e4f1e9e068d",sysTabName:"User-Feedback",sysTabNameTag:"",pcModule:"User-Feedback",iconURL:"http://img1.vzmapp.com/uploadPic/20140811111421259.png",folder:"UserFeedback",tabTitle:"留言反馈"},{id:"2c92cf3c63223bd101633e4f1fa206ec",sysTabName:"About-Merchant",sysTabNameTag:"About-APP",pcModule:"About-APP",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0022.png",folder:"AboutMerchant",tabTitle:"应用描述"},{id:"2c92cf3c63223bd101633e4f1f8806e4",sysTabName:"Share",sysTabNameTag:"",pcModule:"Share",iconURL:"http://img1.vzmapp.com/uploadPic/20140811111350728.png",folder:"Share",tabTitle:"二维码分享"},{id:"2c92cf3c63223bd101633e4f1f8906e5",sysTabName:"Lynxforum",sysTabNameTag:"",pcModule:"Lynxforum",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0030.png",folder:"Lynxforum",tabTitle:"论坛"},{id:"2c92cf3c63223bd101633e4f1f6e06d8",sysTabName:"Circle",sysTabNameTag:"",pcModule:"Circle",iconURL:"http://img1.vzmapp.com/uploadPic/20140811111618414.png",folder:"Circle",tabTitle:"朋友圈"},{id:"2c92cf3c63223bd101633e4f1f8506e3",sysTabName:"Photo-Gallery",sysTabNameTag:"",pcModule:"Photo-Gallery",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0035.png",folder:"PhotoGallery",tabTitle:"中心认证"},{id:"2c92cf3c63223bd101633e4f1ea2068f",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"LynxcLink_Web_Info_Tab",pcModule:"Photo-Info-Tab-Level1",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0025.png",folder:"PhotoInfoTabLevel1",tabTitle:"便民服务"},{id:"2c92cf3c63223bd101633e4f1f7706de",sysTabName:"Roulette-Lottery",sysTabNameTag:"",pcModule:"Roulette-Lottery",iconURL:"http://img1.vzmapp.com/TabIconLib/icon-0024.png",folder:"RouletteLottery",tabTitle:"抽奖活动"},{id:"2c92cf3c63223bd101633e4f1ecc06a7",sysTabName:"More",sysTabNameTag:"",pcModule:"More",iconURL:"http://img1.vzmapp.com/uploadPic/2016/12/05/20161205083400520.png",folder:"More",tabTitle:"更多"}]},module.exports=e; 
 			}); 
		define("img/data.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e={},c={custom:{mainColor:"#3388FF",foregroundColor:"#FFFFFF",mainColorHighlight:"#1571FA",mainRGB:{r:51,g:136,b:255},tabSelectIconKey:"tab_blue"},orange:{mainColor:"#FF903C",foregroundColor:"white",mainColorHighlight:"#DD6408",mainRGB:{r:255,g:144,b:60},tabSelectIconKey:"tab_orange"},red:{mainColor:"#E50029",foregroundColor:"white",mainColorHighlight:"#AC3B39",mainRGB:{r:221,g:0,b:41},tabSelectIconKey:"tab_red"},blue:{mainColor:"#3388FF",foregroundColor:"white",mainColorHighlight:"#1571FA",mainRGB:{r:51,g:136,b:255},tabSelectIconKey:"tab_blue"},blue_new:{mainColor:"#80B8F9",foregroundColor:"white",mainColorHighlight:"#91C2F8",mainRGB:{r:128,g:184,b:249},tabSelectIconKey:"tab_blue_new"},pink:{mainColor:"#E272A7",foregroundColor:"white",mainColorHighlight:"#E58AB5",mainRGB:{r:226,g:114,b:167},tabSelectIconKey:"tab_pink"},green:{mainColor:"#73B448",foregroundColor:"white",mainColorHighlight:"#8BC267",mainRGB:{r:115,g:180,b:72},tabSelectIconKey:"tab_green"},brownLight:{mainColor:"#D8B98A",foregroundColor:"white",mainColorHighlight:"#8D6D54",mainRGB:{r:216,g:185,b:138},tabSelectIconKey:"tab_brown"},brownDark:{mainColor:"#503518",foregroundColor:"white",mainColorHighlight:"#8D6D54",mainRGB:{r:80,g:53,b:24},tabSelectIconKey:"tab_brown_dark"},white_in_red:{isWhite:!0,mainColor:"#E50029",foregroundColor:"white",mainColorHighlight:"#AC3B39",mainRGB:{r:221,g:0,b:41},tabSelectIconKey:"tab_red"}};e.styleConfig=c.brownLight,e.isPerson="false",e.setting={name:"皮肤保养中心888",autoId:"42752",hasWxPay:!1,wxAppId:"wxc29a5eb29192d13b",secret:"dd358f5550aa33bd0e5ce492c06bc89b",comUrl:"https://mg.vzmapp.com",payUrl:"https://pay-gw.vzmapp.com"},e.dataInfo={appId:"2c92cf3c5cb40f6d015cc38c36ad1d27",projectIcon:"http://img1.scspcn.com/TabIconLib/icon-wip-app-011.png",projectName:"皮肤保养中心888",PCStatus:"2",customizeTabsList:[{id:"2c92cf3c5cb40f6d015cc38c36db1d4c",sysTabName:"Home-Page",sysTabNameTag:"LynxHomePage",iconURL:"../../../images/icon/20170619110259831.png",folder:"HomePage",tabTitle:"首页"},{id:"2c92cf3c5cb40f6d015cc38c36d41d3e",sysTabName:"Product-Level3",sysTabNameTag:"LynxProductList",iconURL:"../../../images/icon/20170619110233468.png",folder:"ProductLevel3",tabTitle:"全部商品"},{id:"2c92cf3c5cb40f6d015cc38c37a61df4",sysTabName:"Photo-Info-Tab-Level2",sysTabNameTag:"",iconURL:"../../../images/icon/20170619110250541.png",folder:"PhotoInfoTabLevel2",tabTitle:"资讯中心"},{id:"2c92cf3c5cb40f6d015cc38c36e21d54",sysTabName:"Photo-Info-Tab-Level2",sysTabNameTag:"LynxPhoto_H_Info_Tab_Level2",iconURL:"../../../images/icon/20170619110250578.png",folder:"PhotoInfoTabLevel2",tabTitle:"创业资讯"},{id:"2c92cf3c5cb40f6d015cc38c36c11d31",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"LynxPhoto_Info_Post_Tab",iconURL:"../../../images/icon/20170619110250882.png",folder:"PhotoInfoTabLevel1",tabTitle:"供求关系"},{id:"2c92cf3c5cb40f6d015cc38c36eb1d67",sysTabName:"Branches-Enquiry",sysTabNameTag:"LynxAbout_Merchant",iconURL:"../../../images/icon/20170619110250870.png",folder:"BranchesEnquiry",tabTitle:"品牌店铺"},{id:"2c92cf3c5cb40f6d015cc38c36d21d3c",sysTabName:"Video-Gallery",sysTabNameTag:"Video_Gallery",iconURL:"../../../images/icon/20170619110250853.png",folder:"VideoGallery",tabTitle:"企业宣传"},{id:"2c92cf3c5cb40f6d015cc38c37911de3",sysTabName:"Flexi-Form",sysTabNameTag:"",iconURL:"../../../images/icon/20170619110250942.png",folder:"FlexiForm",tabTitle:"定制服务"},{id:"2c92cf3c5cb40f6d015cc38c379d1def",sysTabName:"Online-Chat",sysTabNameTag:"",iconURL:"../../../images/icon/20170619110259842.png",folder:"OnlineChat",tabTitle:"在线客服"},{id:"2c92cf3c5cb40f6d015cc38c378b1de1",sysTabName:"Member",sysTabNameTag:"",iconURL:"../../../images/icon/20140811103813342.png",folder:"Member",tabTitle:"会员"},{id:"2c92cf3c5cb40f6d015cc38c37b81e0d",sysTabName:"taoShangChengFT",sysTabNameTag:"",iconURL:"../../../images/icon/icon-0002.png",folder:"taoShangChengFT",tabTitle:"运费模板"},{id:"2c92cf3c5cb40f6d015cc38c36da1d4b",sysTabName:"Product-Order",sysTabNameTag:"ZXMarketModuleOrder",iconURL:"../../../images/icon/icon-0028.png",folder:"ProductOrder",tabTitle:"订单列表"},{id:"2c92cf3c5cb40f6d015cc38c37a01df2",sysTabName:"Roulette-Lottery",sysTabNameTag:"",iconURL:"../../../images/icon/icon-0014.png",folder:"RouletteLottery",tabTitle:"抽奖活动"},{id:"2c92cf3c5cb40f6d015cc38c36c81d36",sysTabName:"Photo-Info-Tab-Level1",sysTabNameTag:"LynxcLink_Web_Info_Tab",iconURL:"../../../images/icon/icon-0025.png",folder:"PhotoInfoTabLevel1",tabTitle:"便民服务"},{id:"2c92cf3c5cb40f6d015cc38c37b61e0c",sysTabName:"Lynxforum",sysTabNameTag:"",iconURL:"../../../images/icon/20150129120727702.png",folder:"Lynxforum",tabTitle:"论坛中心"},{id:"2c92cf3c5cb40f6d015cc38c37b51e0b",sysTabName:"Share",sysTabNameTag:"",iconURL:"../../../images/icon/20140811111350728.png",folder:"Share",tabTitle:"二维码分享"},{id:"2c92cf3c5cb40f6d015cc38c36c61d35",sysTabName:"User-Feedback",sysTabNameTag:"",iconURL:"../../../images/icon/20140811111421259.png",folder:"UserFeedback",tabTitle:"留言反馈"},{id:"2c92cf3c5cb40f6d015cc38c37961deb",sysTabName:"Circle",sysTabNameTag:"",iconURL:"../../../images/icon/20140811111618414.png",folder:"Circle",tabTitle:"朋友圈"},{id:"2c92cf3c5cb40f6d015cc38c37951dea",sysTabName:"LongPush",sysTabNameTag:"",iconURL:"../../../images/icon/icon-0029.png",folder:"LongPush",tabTitle:"信息中心"},{id:"2c92cf3c5cb40f6d015cc38c37b11e08",sysTabName:"Photo-Gallery",sysTabNameTag:"",iconURL:"../../../images/icon/icon-0003.png",folder:"PhotoGallery",tabTitle:"中心认证"},{id:"2c92cf3c5cb40f6d015cc38c36cd1d38",sysTabName:"About-Merchant",sysTabNameTag:"",iconURL:"../../../images/icon/icon-0022.png",folder:"AboutMerchant",tabTitle:"关于我们"},{id:"2c92cf3c5cb40f6d015cc38c37971dec",sysTabName:"About-Team",sysTabNameTag:"",iconURL:"../../../images/icon/icon-0034.png",folder:"AboutTeam",tabTitle:"联系我们"},{id:"2c92cf3c5cb40f6d015cc38c36e11d53",sysTabName:"More",sysTabNameTag:"",iconURL:"../../../images/icon/20160530023515537.png",folder:"More",tabTitle:"更多"}]},module.exports=e; 
 			}); 
		define("pages/product/layout-cm-lc/product.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="",e="";Page({data:{styleConfig:t.globalData.styleConfig,bigCateArr:[],smallCateArr:[],showItem:0,categoryCode:"",categoryId:0,code:"",bigCateId:"",windowHeight:"",searchFrameHeight:"",changeclass:""},onLoad:function(){this.setData({changeclass:t.globalData.changeClassify}),console.log(t.globalData.changeClassify),a=t.globalData.projectInfo,e=t.globalData.customizeTabId;var o=this;wx.getSystemInfo({success:function(t){console.log(t),o.setData({windowHeight:t.windowHeight})}}),o.getBigCateGory(),1==o.data.changeclass&&(o.getSearchFrameHeight(),o.getCateGoryList())},getBigCateGory:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{customizeTabId:e.LynxProductList},success:function(e){var o=t.getJsonData(e.data);a.setData({bigCateArr:o}),1==a.data.changeclass?a.bigCateTap():a.oldBigCateTap(),wx.hideToast()}})},getSearchFrameHeight:function(){var t=this,a=wx.createSelectorQuery();a.select("#top").boundingClientRect(),a.exec(function(a){t.setData({searchFrameHeight:a[0].height})})},getCateGoryList:function(){wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0});var a=this;wx.request({url:t.globalData.comUrl+"tabs_getAllCategoryListBycustomizeTab.action",data:{customizeTabId:e.LynxProductList,level:3},success:function(e){var o=t.getJsonData(e.data);console.log(o);for(var r=0;r<o.length;r++)o[r].categoryPicture=t.modifyPicSize(o[r].categoryPicture,"_r60x60p");a.setData({bigCateArr:o}),wx.hideToast(),wx.stopPullDownRefresh()}})},scroll:function(t){for(var a=0;a<this.data.bigCateArr.length;a++)this.queryMultipleNodes(a)},queryMultipleNodes:function(t){var a=this,e=wx.createSelectorQuery();e.select("#bigcate"+t).boundingClientRect(),e.selectViewport().scrollOffset(),e.exec(function(e){var o=e[0].top;0<=o&&o<=150&&a.setData({showItem:t})})},bigCateTap:function(t){var a=this;t?this.setData({showItem:t.target.dataset.index,categoryId:t.target.dataset.id,categoryCode:t.target.dataset.bigcode,bigCateId:"bigcate"+t.target.dataset.index}):this.setData({showItem:0,categoryId:a.data.bigCateArr[0].id,categoryCode:a.data.bigCateArr[0].code})},oldBigCateTap:function(a){console.log(a);var o=this;a?(console.log(a),this.setData({showItem:a.currentTarget.dataset.index,categoryId:a.currentTarget.dataset.id,categoryCode:a.currentTarget.dataset.bigcode})):this.setData({showItem:0,categoryId:o.data.bigCateArr[0].id,categoryCode:o.data.bigCateArr[0].code}),wx.request({url:t.globalData.comUrl+"tabs_getCategoryByParent.action",data:{customizeTabId:e.LynxProductList,parentId:o.data.categoryId},success:function(a){for(var e=t.getJsonData(a.data),r=0;r<e.length;r++)e[r].categoryPicture=t.modifyPicSize(e[r].categoryPicture,"_r160x160p");o.setData({smallCateArr:e}),wx.stopPullDownRefresh()}})},toSearch:function(t){wx.navigateTo({url:"../../search/search?type=0"})},onPullDownRefresh:function(){this.setData({showItem:0,categoryCode:"",categoryId:0,code:"",bigCateId:""}),this.getBigCateGory(),1==this.data.changeclass&&(this.getSearchFrameHeight(),this.getCateGoryList())},toProductList:function(t){var a=this;this.setData({code:t.currentTarget.dataset.code}),t.currentTarget.dataset.flag?wx.navigateTo({url:"../sub-category/sub-category?categoryId="+t.currentTarget.dataset.id+"&title="+t.currentTarget.dataset.title}):wx.navigateTo({url:"../pro-list/pro-list?categoryCode="+a.data.code+"&flag=1&title="+t.currentTarget.dataset.title})}}); 
 			}); 
		define("pages/self/acountInformation/qrCode/qrCode.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp();Page({data:{imgPath:"",sex:""},onLoad:function(){},onShow:function(){this.setData({imgPath:a.globalData.wxUserInfo.avatarUrl,sex:a.globalData.wxUserInfo.sex})},followtap:function(){wx.navigateTo({url:"../login/login"})}}); 
 			}); 
		define("pages/self/cart/layout-cm-lc/cart.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="",r="",e=t.globalData.projectInfo,o=t.globalData.customizeTabId,c=1,i=1;Page({data:{totalPrice:0,cartData:[],cartList:[],cartNull:!1,projectType:t.globalData.projectInfo.projectType,isPerson:t.globalData.isPerson,proList:[],hiddenMerchant:!0,bottomHint:!1,actDistribution:{},productList:[]},onLoad:function(a){e=t.globalData.projectInfo,o=t.globalData.customizeTabId,r=a.from,"o2o-shop"==this.data.projectType?this._productList1Init():"tmall"==this.data.projectType&&this._productList2Init()},onShow:function(){var a=this;if(a.data.totalPrice=0,this.setData({cartData:wx.getStorageSync("cartData"+t.globalData.autoId)||[]}),(wx.getStorageSync("cartData"+t.globalData.autoId)||[]).length>0){var r=wx.getStorageSync("cartData"+t.globalData.autoId);a.splitArr(r)}else wx.removeStorageSync("cartData"+t.globalData.autoId),wx.removeStorageSync("cartDataList"+t.globalData.autoId),a.setData({cartNull:!0})},splitArr:function(a){for(var r=0,e=function(t){for(var a,e=[],o={},c=0;null!=(a=t[c]);c++)o[a.branchInfoId]||(e.push(a.branchInfoId),o[a.branchInfoId]=!0),1==t[c].isSelected&&(r+=parseInt(t[c].count)*parseFloat(t[c].price));return e}(a),o=[],c=0;c<e.length;c++)for(var i=[],s={},d=0;d<a.length;d++)a[d].branchInfoId==e[c]&&(i.push(a[d]),s.branchInfoId=a[d].branchInfoId,s.branchName=a[d].branchName,s.pro=i,1==a[d].isSelected&&(s.isSelected=!0),o[c]=s);var n=(o=o.map(function(t,a,r){t.isSelected=!0;for(var e=0;e<t.pro.length;e++)t.pro[e].isSelected||(t.isSelected=!1);return t})).every(function(t){return t.isSelected});wx.setStorageSync("cartDataList"+t.globalData.autoId,o),this.setData({isSelectAll:n,totalPrice:r.toFixed(2),cartList:o,cartNull:!1})},arrowuptap:function(a){var r=this;if(r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count>1){r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count=r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count-1;for(var e=0;e<r.data.cartData.length;e++)r.data.cartData[e].moduleId==a.currentTarget.dataset.modleid&&(r.data.cartData[e].count=r.data.cartData[e].count-1);this.setData({cartList:r.data.cartList,cartData:r.data.cartData}),wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(this.data.cartData)}},arrowdowntap:function(a){var r=this;r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count=r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count+1;for(var e=0;e<r.data.cartData.length;e++)r.data.cartData[e].moduleId==a.currentTarget.dataset.modleid&&(r.data.cartData[e].count=r.data.cartData[e].count+1);this.setData({cartList:r.data.cartList,cartData:r.data.cartData}),wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(r.data.cartData)},bindCountInput:function(a){var r=this;parseInt(a.detail.value);if(parseInt(a.detail.value)>=1){r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count=parseInt(a.detail.value);for(var e=0;e<r.data.cartData.length;e++)r.data.cartData[e].moduleId==a.currentTarget.dataset.modleid&&(r.data.cartData[e].count=parseInt(a.detail.value));return this.setData({cartList:r.data.cartList,cartData:r.data.cartData}),wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(this.data.cartData),parseInt(a.detail.value)}return 1},delPro:function(a){var r=this;wx.showModal({title:"确定删除该商品？",success:function(e){if(e.confirm){for(var o=[],c=0;c<r.data.cartData.length;c++)r.data.cartData[c].moduleId!=a.currentTarget.dataset.modelid&&o.push(r.data.cartData[c]);r.setData({cartData:o}),wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(r.data.cartData)}else e.cancel;r.data.cartData.length<1&&r.setData({cartNull:!0})}})},toClearing:function(){if(""==(a=wx.getStorageSync("memberId"+t.globalData.autoId)||""))wx.navigateTo({url:"../../../login/login"});else{for(var r=0,e=0;e<this.data.cartData.length;e++)this.data.cartData[e].isSelected&&r++;if(0==r)return void t.hint("请选择产品");var o=this;t.globalData.isPerson?wx.redirectTo({url:"../../../order/order?proPrice="+o.data.totalPrice}):wx.navigateTo({url:"../../../order/order?proPrice="+o.data.totalPrice})}},checkboxTap:function(a){var r=this;console.log(a.currentTarget.dataset.proid);for(var e=0;e<r.data.cartData.length;e++)a.currentTarget.dataset.proid==r.data.cartData[e].productId&&(1==r.data.cartData[e].isSelected?r.data.cartData[e].isSelected=!1:r.data.cartData[e].isSelected=!0);wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(r.data.cartData)},selectStore:function(a){for(var r=this,e=0;e<r.data.cartData.length;e++)a.currentTarget.dataset.bid==r.data.cartData[e].branchInfoId&&(a.currentTarget.dataset.sel?r.data.cartData[e].isSelected=!1:r.data.cartData[e].isSelected=!0);wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(r.data.cartData)},selectAll:function(){for(var a=0;a<this.data.cartData.length;a++)this.data.isSelectAll?this.data.cartData[a].isSelected=!1:this.data.cartData[a].isSelected=!0;wx.setStorageSync("cartData"+t.globalData.autoId,this.data.cartData),this.splitArr(this.data.cartData)},toProList:function(){"enterprise"==this.data.projectType||this.data.isPerson?wx.navigateTo({url:t.globalData.pagesPath.proPath}):wx.switchTab({url:t.globalData.pagesPath.proPath})},toProDetail:function(t){wx.navigateTo({url:"../../../product/pro-detail/pro-detail?productId="+t.currentTarget.dataset.pid})},preventBubbling:function(){},getProCategory1:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getAppProductByCity.action",data:{appId:e.appId,customizeTabId:o.LynxProductList,count:4,current:c,jsoncallback:"",productName:"",sortName:"readTimes",sortType:"desc",isGroup:t.globalData.isGroup},success:function(t){var r=t.data.substring(1).slice(0,-1),e=JSON.parse(r);i=e.pages,a.setData({proList:a.data.proList.concat(e.pageList)})}})},onReachBottom:function(){c<i&&(c++,"o2o-shop"==this.data.projectType?this.getProCategory1():"tmall"==this.data.projectType&&this.getProductList())},_productList1Init:function(){var a=this;e=t.globalData.projectInfo,o=t.globalData.customizeTabId;var r=wx.getStorageSync("memberType"+t.globalData.autoId);this.setData({memberType:r}),t.globalData.actDistribution&&this.setData({actDistribution:t.globalData.actDistribution}),a.getProCategory1()},_productList2Init:function(){var a=this;e=t.globalData.projectInfo,o=t.globalData.customizeTabId;var r=wx.getStorageSync("memberType"+t.globalData.autoId);this.setData({memberType:r}),t.globalData.actDistribution&&this.setData({actDistribution:t.globalData.actDistribution}),a.getProCategory2()},getProCategory2:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{customizeTabId:o.LynxProductList},success:function(r){var e=t.getJsonData(r.data);console.log(e),a.setData({cateList:e}),a.titletap()}})},getProductList:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getZXProductListByCategory.action",data:{customizeTabId:o.LynxProductList,bigCateGoryCode:a.data.categoryCode,current:c,status:2,recommand:1,isBreif:1,isGroup:t.globalData.isGroup},success:function(r){var e=t.getJsonData(r.data);i=e.pages,a.setData({productList:a.data.productList.concat(e.pageList)}),e.pageList.length>0?a.setData({hasPro:!0}):a.setData({hasPro:!1})}})},titletap:function(t){c=1;var a=this;this.setData({productList:[]}),t&&void 0!=t?(a.setData({categoryCode:t.currentTarget.dataset.code,bottomHint:!0,hidden:!0,index:t.currentTarget.dataset.index}),a.getProductList(t.currentTarget.dataset.code)):(a.setData({categoryCode:a.data.cateList[0].code,bottomHint:!0,hidden:!0}),a.getProductList())}}); 
 			}); 
		define("pages/self/cart_bak/cart.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp(),t="",r="";Page({data:{totalPrice:0,cartData:[],cartList:[],cartNull:!1},onLoad:function(a){r=a.from},onShow:function(){var t=this;if(t.data.totalPrice=0,this.setData({cartData:wx.getStorageSync("cartData"+a.globalData.autoId)||[]}),(wx.getStorageSync("cartData"+a.globalData.autoId)||[]).length>0){var r=wx.getStorageSync("cartData"+a.globalData.autoId);t.splitArr(r)}else wx.removeStorageSync("cartData"+a.globalData.autoId),wx.removeStorageSync("cartDataList"+a.globalData.autoId),t.setData({cartNull:!0})},splitArr:function(t){for(var r=0,e=function(a){for(var t,e=[],c={},o=0;null!=(t=a[o]);o++)c[t.branchInfoId]||(e.push(t.branchInfoId),c[t.branchInfoId]=!0),1==a[o].isSelected&&(r+=parseInt(a[o].count)*parseFloat(a[o].price));return e}(t),c=[],o=0;o<e.length;o++)for(var d=[],n={},i=0;i<t.length;i++)t[i].branchInfoId==e[o]&&(d.push(t[i]),n.branchInfoId=t[i].branchInfoId,n.branchName=t[i].branchName,n.pro=d,1==t[i].isSelected&&(n.isSelected=!0),c[o]=n);wx.setStorageSync("cartDataList"+a.globalData.autoId,c),this.setData({totalPrice:r.toFixed(2),cartList:c,cartNull:!1})},arrowuptap:function(t){var r=this;if(r.data.cartList[t.currentTarget.dataset.index].pro[t.currentTarget.dataset.proindex].count>1){r.data.cartList[t.currentTarget.dataset.index].pro[t.currentTarget.dataset.proindex].count=r.data.cartList[t.currentTarget.dataset.index].pro[t.currentTarget.dataset.proindex].count-1;for(var e=0;e<r.data.cartData.length;e++)r.data.cartData[e].moduleId==t.currentTarget.dataset.modleid&&(r.data.cartData[e].count=r.data.cartData[e].count-1);this.setData({cartList:r.data.cartList,cartData:r.data.cartData}),wx.setStorageSync("cartData"+a.globalData.autoId,r.data.cartData),r.splitArr(this.data.cartData)}},arrowdowntap:function(t){var r=this;r.data.cartList[t.currentTarget.dataset.index].pro[t.currentTarget.dataset.proindex].count=r.data.cartList[t.currentTarget.dataset.index].pro[t.currentTarget.dataset.proindex].count+1;for(var e=0;e<r.data.cartData.length;e++)r.data.cartData[e].moduleId==t.currentTarget.dataset.modleid&&(r.data.cartData[e].count=r.data.cartData[e].count+1);this.setData({cartList:r.data.cartList,cartData:r.data.cartData}),wx.setStorageSync("cartData"+a.globalData.autoId,r.data.cartData),r.splitArr(r.data.cartData)},bindCountInput:function(t){var r=this;parseInt(t.detail.value);if(parseInt(t.detail.value)>=1){r.data.cartList[t.currentTarget.dataset.index].pro[t.currentTarget.dataset.proindex].count=parseInt(t.detail.value);for(var e=0;e<r.data.cartData.length;e++)r.data.cartData[e].moduleId==t.currentTarget.dataset.modleid&&(r.data.cartData[e].count=parseInt(t.detail.value));return this.setData({cartList:r.data.cartList,cartData:r.data.cartData}),wx.setStorageSync("cartData"+a.globalData.autoId,r.data.cartData),r.splitArr(this.data.cartData),parseInt(t.detail.value)}return 1},delPro:function(t){var r=this;wx.showModal({title:"确定删除该商品？",success:function(e){if(e.confirm){for(var c=[],o=0;o<r.data.cartData.length;o++)r.data.cartData[o].moduleId!=t.currentTarget.dataset.modelid&&c.push(r.data.cartData[o]);r.setData({cartData:c}),wx.setStorageSync("cartData"+a.globalData.autoId,r.data.cartData),r.splitArr(r.data.cartData)}else e.cancel}})},toClearing:function(){if(""==(t=wx.getStorageSync("memberId"+a.globalData.autoId)||""))wx.navigateTo({url:"../../login/login"});else{for(var r=0,e=0;e<this.data.cartData.length;e++)this.data.cartData[e].isSelected&&r++;if(0==r)return void a.hint("请选择产品");var c=this;a.globalData.isPerson?wx.redirectTo({url:"../../order/order?proPrice="+c.data.totalPrice}):wx.navigateTo({url:"../../order/order?proPrice="+c.data.totalPrice})}},checkboxTap:function(t){var r=this;console.log(t.currentTarget.dataset.proid);for(var e=0;e<r.data.cartData.length;e++)t.currentTarget.dataset.proid==r.data.cartData[e].productId&&(1==r.data.cartData[e].isSelected?r.data.cartData[e].isSelected=!1:r.data.cartData[e].isSelected=!0);wx.setStorageSync("cartData"+a.globalData.autoId,r.data.cartData),r.splitArr(r.data.cartData)},toProList:function(){wx.switchTab({url:"../../product/product"})},toProDetail:function(a){wx.navigateTo({url:"../../product/pro-detail/pro-detail?productId="+a.currentTarget.dataset.pid})}}); 
 			}); 
		define("pages/store/layout-cm-lc/store.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var a,e=getApp(),o="",r="",s=1,n=1;Page({data:(a={styleConfig:e.globalData.styleConfig,adArr:[],storeArr:[],show:!1,bCate_code:0,smCate_code:0,provinceId:-1,cityId:-1,categoryId:-1,level:0,bigCategory:[],showBigCate:!1,smallCategory:[],showSmallCate:!0,provinceArr:[],cityArr:[],showProvince:!1,showCity:!1},t(a,"show",!1),t(a,"noStore",!0),t(a,"bottomHint",!0),t(a,"homePageLayout",e.globalData.projectInfo.homePageLayout),t(a,"currentSwiper",0),t(a,"autoplay",!0),a),swiperChange:function(t){this.setData({currentSwiper:t.detail.current})},onLoad:function(){o=e.globalData.projectInfo,r=e.globalData.customizeTabId,wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),o=e.globalData.projectInfo,r=e.globalData.customizeTabId;var t=this;t.storeInfo(),t.getBigCategory()},toSearch:function(t){wx.navigateTo({url:"/pages/search/search?type=1"})},menutap:function(){this.setData({show:!this.data.show})},confirm:function(){this.setData({storeArr:[],adArr:[],noStore:!0,bottomHint:!0}),s=1,this.setData({show:!this.data.show}),this.storeInfo()},toStoreDetails:function(t){wx.navigateTo({url:"../store-detail/store-detail?tabContentId="+t.currentTarget.dataset.pid})},storeInfo:function(){var t=this,a={appId:o.appId,customizeTabId:r.LynxAbout_Merchant,advertisement:1,current:s};t.data.level>0&&(a.level=t.data.level),t.data.provinceId>0&&(a.provinceId=t.data.provinceId),t.data.cityId>0&&(a.cityId=t.data.cityId),t.data.categoryId&&(a.categoryId=t.data.categoryId);try{wx.request({url:e.globalData.comUrl+"mctab_searchBranchInfo.action",data:a,success:function(a){var o=e.getJsonData(a.data);n=o.pages;for(var r=0;r<o.pageList.length;r++)o.pageList[r].isAdvertisement&&t.data.adArr.push(o.pageList[r]),o.pageList[r].pic1=e.modifyPicSize(o.pageList[r].pic1,"_rx160p");t.setData({storeArr:t.data.storeArr.concat(o.pageList),bottomHint:!0}),1==s&&t.setData({adArr:t.data.adArr}),0==t.data.storeArr.length?t.setData({noStore:!1}):t.setData({noStore:!0}),wx.hideToast(),wx.stopPullDownRefresh()},fail:function(t){e.hint()}})}catch(t){e.hint(t)}},onReachBottom:function(){s<n?(s++,this.storeInfo()):s>1&&(this.data.storeArr.length>1?this.setData({bottomHint:!1}):this.setData({bottomHint:!0}))},onPullDownRefresh:function(){this.reset()},getBigCategory:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{appId:o.appId,customizeTabId:r.LynxAbout_Merchant},success:function(a){var o=e.getJsonData(a.data);t.setData({bigCategory:o})},fail:function(t){e.hint("获取大类失败")}})},bigCate_unfold:function(){this.setData({showBigCate:!this.data.showBigCate})},getSmallCategory:function(t){var a=this;a.setData({bCate_code:t.currentTarget.dataset.code,categoryId:t.currentTarget.dataset.code}),wx.request({url:e.globalData.comUrl+"tabs_getPhotoInfoTabCategoryFromL1toL2.action",data:{appId:o.appId,customizeTabId:r.LynxAbout_Merchant,categoryCode:t.currentTarget.dataset.code},success:function(t){var o=e.getJsonData(t.data);a.setData({smallCategory:o,showSmallCate:!1}),s=1,a.setData({level:1})},fail:function(t){e.hint()}})},smCateTap:function(t){0!=t.currentTarget.dataset.code?this.setData({level:"",smCate_code:t.currentTarget.dataset.code,categoryId:t.currentTarget.dataset.code}):this.setData({level:1,smCate_code:t.currentTarget.dataset.code,categoryId:this.data.bCate_code})},getProvinceInfo:function(){var t=this;wx.request({url:e.globalData.comUrl+"mctab_getBranchProvinces.action",data:{appId:o.appId,customizeTabId:r.LynxAbout_Merchant},success:function(a){var o=e.getJsonData(a.data);t.setData({provinceArr:o})},fail:function(t){e.hint()}})},getCityInfo:function(t){var a=this;a.setData({provinceId:t.currentTarget.dataset.proid}),"0"==t.currentTarget.dataset.proid?(s=1,a.setData({provinceId:"",cityId:"",showCity:!1})):wx.request({url:e.globalData.comUrl+"mctab_getBranchCitys.action",data:{appId:o.appId,customizeTabId:r.LynxAbout_Merchant,provinceId:t.currentTarget.dataset.proid},success:function(t){var o=e.getJsonData(t.data);a.setData({cityArr:o,showCity:!0})},fail:function(t){e.hint()}})},citytap:function(t){"0"==t.currentTarget.dataset.cityid?this.setData({cityId:""}):this.setData({cityId:t.currentTarget.dataset.cityid}),s=1},prov_unfold:function(){this.setData({showProvince:!this.data.showProvince}),this.getProvinceInfo()},reset:function(){s=1,n=1,this.setData({adArr:[],storeArr:[],showBigCate:!1,showSmallCate:!1,showProvince:!1,showCity:!1,bottomHint:!0,bCate_code:0,smCate_code:0,provinceId:-1,cityId:-1,categoryId:-1,level:0}),this.storeInfo()},onShareAppMessage:function(){return{title:"商铺",path:"/pages/store/layout-o2o/store",success:function(t){},fail:function(t){}}}}); 
 			}); 
		define("theme-config.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e={custom:{name:"custom",mainColor:"#3388FF",foregroundColor:"#FFFFFF",mainColorHighlight:"#1571FA",mainRGB:{r:51,g:136,b:255},tabbarTextColor:"grey",tabbarTextSelectedColor:"#c471e7",tabbarBackgroundColor:"#FFF",tabSelectIconKey:"tab_blue",navigationBarBackgroundColor:"#3388FF",navigationBarTextStyle:"white",backgroundTextStyle:"dark",isWhite:!0,remark:"自定义的风格"},rab_blue:{name:"rab_blue",mainColor:"#3388FF",foregroundColor:"white",mainColorHighlight:"#1571FA",mainRGB:{r:51,g:136,b:255},tabSelectIconKey:"tab_blue",navigationBarTextStyle:"white",remark:"通用蓝色风格"},blue_green:{name:"blue_green",mainColor:"#54B8AF",foregroundColor:"white",mainColorHighlight:"#1571FA",mainRGB:{r:84,g:174,b:175},tabSelectIconKey:"tab_blue_green",navigationBarTextStyle:"white",remark:"通用蓝绿色风格"},blue_new:{name:"blue_new",mainColor:"#80B8F9",foregroundColor:"white",mainColorHighlight:"#91C2F8",mainRGB:{r:128,g:184,b:249},tabSelectIconKey:"tab_blue_new",navigationBarTextStyle:"white",remark:"通用蓝色风格2"},brown:{name:"brown",mainColor:"#9A700C",foregroundColor:"white",mainColorHighlight:"#91C2F8",mainRGB:{r:154,g:112,b:12},tabSelectIconKey:"tab_brown",navigationBarTextStyle:"white",remark:"通用深棕色风格"},brownDark:{name:"brownDark",mainColor:"#503518",foregroundColor:"white",mainColorHighlight:"#8D6D54",mainRGB:{r:80,g:53,b:24},tabSelectIconKey:"tab_brownDark",navigationBarTextStyle:"white",remark:"通用棕色风格深色"},brownLight:{name:"brownLight",mainColor:"#D8B98A",foregroundColor:"white",mainColorHighlight:"#8D6D54",mainRGB:{r:216,g:185,b:138},tabSelectIconKey:"tab_brownLight",navigationBarTextStyle:"white",remark:"通用棕色风格浅色"},dark_blue:{name:"dark_blue",mainColor:"#151f52",foregroundColor:"white",mainColorHighlight:"#4a65bb",mainRGB:{r:21,g:31,b:82},tabSelectIconKey:"tab_dark_blue",navigationBarTextStyle:"white",remark:"通用蓝色风格深色"},green:{name:"green",mainColor:"#73B448",foregroundColor:"white",mainColorHighlight:"#8BC267",mainRGB:{r:115,g:180,b:72},tabSelectIconKey:"tab_green",navigationBarTextStyle:"white",remark:"通用绿色风格"},orange:{name:"orange",mainColor:"#FF903C",foregroundColor:"white",mainColorHighlight:"#DD6408",mainRGB:{r:255,g:144,b:60},tabSelectIconKey:"tab_orange",navigationBarTextStyle:"white",remark:"通用橙色风格"},rose:{name:"rose",mainColor:"#E272A7",foregroundColor:"white",mainColorHighlight:"#E58AB5",mainRGB:{r:226,g:114,b:167},tabSelectIconKey:"tab_pink",navigationBarTextStyle:"white",remark:"通用玫红色风格"},pink:{name:"pink",mainColor:"#f78ea5",foregroundColor:"white",mainColorHighlight:"#e5b9ca",mainRGB:{r:247,g:142,b:165},tabSelectIconKey:"tab_pink",navigationBarTextStyle:"white",remark:"通用粉色风格"},red:{name:"red",mainColor:"#E50029",foregroundColor:"white",mainColorHighlight:"#AC3B39",mainRGB:{r:221,g:0,b:41},tabSelectIconKey:"tab_red",navigationBarTextStyle:"white",remark:"通用红色风格"},violet:{name:"violet",mainColor:"#c492e6",foregroundColor:"white",mainColorHighlight:"#6D5CFA",mainRGB:{r:196,g:146,b:230},tabSelectIconKey:"tab_violet",navigationBarTextStyle:"white",remark:"通用紫色风格"},deeppurple:{name:"deeppurple",mainColor:"#981064",foregroundColor:"white",mainColorHighlight:"#E557AF",mainRGB:{r:152,g:16,b:100},tabSelectIconKey:"tab_deeppurple",navigationBarTextStyle:"white",remark:"通用深紫色风格"},yellow:{name:"yellow",mainColor:"#E9C330",foregroundColor:"white",mainColorHighlight:"#AC3B39",mainRGB:{r:233,g:195,b:48},tabSelectIconKey:"tab_yellow",navigationBarTextStyle:"white",remark:"通用黄色风格"},white_in_red:{name:"white_in_red",isWhite:!0,mainColor:"#E50029",foregroundColor:"white",mainColorHighlight:"#AC3B39",mainRGB:{r:221,g:0,b:41},tabSelectIconKey:"tab_red",navigationBarBackgroundColor:"#FFF",navigationBarTextStyle:"black",remark:"通用红白风格"},enterprise_purple:{name:"enterprise_purple",mainColor:"#5143a6",tabbarTextColor:"#a8a1d3",foregroundColor:"white",mainColorHighlight:"#9a8de0",mainRGB:{r:196,g:146,b:230},navigationBarTextStyle:"black",remark:"企业版专用蓝紫色风格"},enterprise_dark_blue:{name:"enterprise_dark_blue",mainColor:"#151f52",tabbarTextColor:"#8387a3",foregroundColor:"white",mainColorHighlight:"#4a65bb",mainRGB:{r:21,g:31,b:82},navigationBarTextStyle:"black",remark:"企业版专用深蓝色风格"},enterprise_grey:{name:"enterprise_grey",mainColor:"#222",tabbarTextColor:"#999",foregroundColor:"white",mainColorHighlight:"#666",mainRGB:{r:2,g:2,b:2},navigationBarTextStyle:"black",remark:"企业版专用高级灰风格"},enterprise_doderBlue:{name:"enterprise_doderBlue",mainColor:"#1E90FF",tabbarTextColor:"#89c2ff",foregroundColor:"white",mainColorHighlight:"#666",mainRGB:{r:30,g:144,b:255},navigationBarTextStyle:"black",remark:"企业版专用道奇蓝风格"},enterprise_dark_cyan:{name:"enterprise_dark_cyan",mainColor:"#008B8B",tabbarTextColor:"#78c2c0",foregroundColor:"white",mainColorHighlight:"#666",mainRGB:{r:0,g:139,b:139},navigationBarTextStyle:"black",remark:"企业版专用深青色风格"},enterprise_forest_green:{name:"enterprise_forest_green",mainColor:"#228B22",tabbarTextColor:"#8bc38a",foregroundColor:"white",mainColorHighlight:"#666",mainRGB:{r:34,g:139,b:34},navigationBarTextStyle:"black",remark:"企业版专用森林绿风格"},enterprise_tomato:{name:"enterprise_tomato",mainColor:"#FF6347",tabbarTextColor:"#fdaa9d",foregroundColor:"white",mainColorHighlight:"#666",mainRGB:{r:255,g:99,b:71},navigationBarTextStyle:"black",remark:"企业版专用番茄色风格"},enterprise_dark_voilet:{name:"enterprise_dark_voilet",mainColor:"#9400D3",tabbarTextColor:"#c471e7",foregroundColor:"white",mainColorHighlight:"#666",mainRGB:{r:148,g:0,b:211},navigationBarTextStyle:"black",remark:"企业版专用深紫色风格"}};module.exports=e; 
 			}); 
		define("utils/MD5.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function n(n,r){var t=(65535&n)+(65535&r);return(n>>16)+(r>>16)+(t>>16)<<16|65535&t}function r(n,r){return n<<r|n>>>32-r}function t(t,e,u,o,c,f){return n(r(n(n(e,t),n(o,f)),c),u)}function e(n,r,e,u,o,c,f){return t(r&e|~r&u,n,r,o,c,f)}function u(n,r,e,u,o,c,f){return t(r&u|e&~u,n,r,o,c,f)}function o(n,r,e,u,o,c,f){return t(r^e^u,n,r,o,c,f)}function c(n,r,e,u,o,c,f){return t(e^(r|~u),n,r,o,c,f)}function f(r){for(var t=1732584193,f=-271733879,i=-1732584194,a=271733878,h=0;h<r.length;h+=16){var l=t,g=f,v=i,d=a;f=c(f=c(f=c(f=c(f=o(f=o(f=o(f=o(f=u(f=u(f=u(f=u(f=e(f=e(f=e(f=e(f,i=e(i,a=e(a,t=e(t,f,i,a,r[h+0],7,-680876936),f,i,r[h+1],12,-389564586),t,f,r[h+2],17,606105819),a,t,r[h+3],22,-1044525330),i=e(i,a=e(a,t=e(t,f,i,a,r[h+4],7,-176418897),f,i,r[h+5],12,1200080426),t,f,r[h+6],17,-1473231341),a,t,r[h+7],22,-45705983),i=e(i,a=e(a,t=e(t,f,i,a,r[h+8],7,1770035416),f,i,r[h+9],12,-1958414417),t,f,r[h+10],17,-42063),a,t,r[h+11],22,-1990404162),i=e(i,a=e(a,t=e(t,f,i,a,r[h+12],7,1804603682),f,i,r[h+13],12,-40341101),t,f,r[h+14],17,-1502002290),a,t,r[h+15],22,1236535329),i=u(i,a=u(a,t=u(t,f,i,a,r[h+1],5,-165796510),f,i,r[h+6],9,-1069501632),t,f,r[h+11],14,643717713),a,t,r[h+0],20,-373897302),i=u(i,a=u(a,t=u(t,f,i,a,r[h+5],5,-701558691),f,i,r[h+10],9,38016083),t,f,r[h+15],14,-660478335),a,t,r[h+4],20,-405537848),i=u(i,a=u(a,t=u(t,f,i,a,r[h+9],5,568446438),f,i,r[h+14],9,-1019803690),t,f,r[h+3],14,-187363961),a,t,r[h+8],20,1163531501),i=u(i,a=u(a,t=u(t,f,i,a,r[h+13],5,-1444681467),f,i,r[h+2],9,-51403784),t,f,r[h+7],14,1735328473),a,t,r[h+12],20,-1926607734),i=o(i,a=o(a,t=o(t,f,i,a,r[h+5],4,-378558),f,i,r[h+8],11,-2022574463),t,f,r[h+11],16,1839030562),a,t,r[h+14],23,-35309556),i=o(i,a=o(a,t=o(t,f,i,a,r[h+1],4,-1530992060),f,i,r[h+4],11,1272893353),t,f,r[h+7],16,-155497632),a,t,r[h+10],23,-1094730640),i=o(i,a=o(a,t=o(t,f,i,a,r[h+13],4,681279174),f,i,r[h+0],11,-358537222),t,f,r[h+3],16,-722521979),a,t,r[h+6],23,76029189),i=o(i,a=o(a,t=o(t,f,i,a,r[h+9],4,-640364487),f,i,r[h+12],11,-421815835),t,f,r[h+15],16,530742520),a,t,r[h+2],23,-995338651),i=c(i,a=c(a,t=c(t,f,i,a,r[h+0],6,-198630844),f,i,r[h+7],10,1126891415),t,f,r[h+14],15,-1416354905),a,t,r[h+5],21,-57434055),i=c(i,a=c(a,t=c(t,f,i,a,r[h+12],6,1700485571),f,i,r[h+3],10,-1894986606),t,f,r[h+10],15,-1051523),a,t,r[h+1],21,-2054922799),i=c(i,a=c(a,t=c(t,f,i,a,r[h+8],6,1873313359),f,i,r[h+15],10,-30611744),t,f,r[h+6],15,-1560198380),a,t,r[h+13],21,1309151649),i=c(i,a=c(a,t=c(t,f,i,a,r[h+4],6,-145523070),f,i,r[h+11],10,-1120210379),t,f,r[h+2],15,718787259),a,t,r[h+9],21,-343485551),t=n(t,l),f=n(f,g),i=n(i,v),a=n(a,d)}return[t,f,i,a]}function i(n){for(var r="",t=0;t<4*n.length;t++)r+="0123456789abcdef".charAt(n[t>>2]>>t%4*8+4&15)+"0123456789abcdef".charAt(n[t>>2]>>t%4*8&15);return r}function a(n){for(var r=1+(n.length+8>>6),t=new Array(16*r),e=0;e<16*r;e++)t[e]=0;for(e=0;e<n.length;e++)t[e>>2]|=(255&n.charCodeAt(e))<<e%4*8;return t[e>>2]|=128<<e%4*8,t[16*r-2]=8*n.length,t}module.exports={hexMD5:function(n){return i(f(a(n)))}}; 
 			}); 
		define("utils/util.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t){return(t=t.toString())[1]?t:"0"+t}module.exports={formatTime:function(e){var n=e.getFullYear(),o=e.getMonth()+1,r=e.getDate(),u=e.getHours(),i=e.getMinutes(),g=e.getSeconds();return[n,o,r].map(t).join("/")+" "+[u,i,g].map(t).join(":")}}; 
 			}); 
		define("utils/wxParse/html2json.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){for(var t={},r=e.split(","),s=0;s<r.length;s++)t[r[s]]=!0;return t}function t(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<.*!doctype.*\>\n/,"").replace(/<.*!DOCTYPE.*\>\n/,"")}function r(e){var t=[];if(0==a.length||!n)return(d={}).node="text",d.text=e,s=[d];e=e.replace(/\[([^\[\]]+)\]/g,":$1:");for(var r=new RegExp("[:]"),s=e.split(r),i=0;i<s.length;i++){var l=s[i],d={};n[l]?(d.node="element",d.tag="emoji",d.text=n[l],d.baseSrc=o):(d.node="text",d.text=l),t.push(d)}return t}var s="https",a="",o="",n={},i=require("./wxDiscode.js"),l=require("./htmlparser.js"),d=(e("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),e("br,a,code,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video")),c=e("abbr,acronym,applet,b,basefont,bdo,big,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),u=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr");e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),e("wxxxcode-style,script,style,view,scroll-view,block");module.exports={html2json:function(e,a){e=t(e),e=i.strDiscode(e);var o=[],n={node:a,nodes:[],images:[],imageUrls:[]};return l(e,{start:function(e,t,r){var l={node:"element",tag:e};if(d[e]?l.tagType="block":c[e]?l.tagType="inline":u[e]&&(l.tagType="closeSelf"),0!==t.length&&(l.attr=t.reduce(function(e,t){var r=t.name,s=t.value;return"class"==r&&(l.classStr=s),"style"==r&&(l.styleStr=s),s.match(/ /)&&(s=s.split(" ")),e[r]?Array.isArray(e[r])?e[r].push(s):e[r]=[e[r],s]:e[r]=s,e},{})),"img"===l.tag){l.imgIndex=n.images.length;var p=l.attr.src;p=i.urlToHttpUrl(p,s),l.attr.src=p,l.from=a,n.images.push(l),n.imageUrls.push(p)}if("font"===l.tag){var m=["x-small","small","medium","large","x-large","xx-large","-webkit-xxx-large"],f={color:"color",face:"font-family",size:"font-size"};l.attr.style||(l.attr.style=[]),l.styleStr||(l.styleStr="");for(var h in f)if(l.attr[h]){var g="size"===h?m[l.attr[h]-1]:l.attr[h];l.attr.style.push(f[h]),l.attr.style.push(g),l.styleStr+=f[h]+": "+g+";"}}if("source"===l.tag&&(n.source=l.attr.src),r){var v=o[0]||n;void 0===v.nodes&&(v.nodes=[]),v.nodes.push(l)}else o.unshift(l)},end:function(e){var t=o.shift();if(t.tag!==e&&console.error("invalid state: mismatch end tag"),"video"===t.tag&&n.source&&(t.attr.src=n.source,delete result.source),0===o.length)n.nodes.push(t);else{var r=o[0];void 0===r.nodes&&(r.nodes=[]),r.nodes.push(t)}},chars:function(e){var t={node:"text",text:e,textArray:r(e)};if(0===o.length)n.nodes.push(t);else{var s=o[0];void 0===s.nodes&&(s.nodes=[]),s.nodes.push(t)}},comment:function(e){}}),n},emojisInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/wxParse/emojis/",r=arguments[2];a=e,o=t,n=r}}; 
 			}); 
		define("utils/wxParse/htmlparser.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){for(var t={},r=e.split(","),s=0;s<r.length;s++)t[r[s]]=!0;return t}var t=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,r=/^<\/([-A-Za-z0-9_]+)[^>]*>/,s=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,a=e("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),n=e("a,address,code,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,ins,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),i=e("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),o=e("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),l=e("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),c=e("wxxxcode-style,script,style,view,scroll-view,block");module.exports=function(e,d){function f(e,t){if(t)for(t=t.toLowerCase(),r=b.length-1;r>=0&&b[r]!=t;r--);else var r=0;if(r>=0){for(var s=b.length-1;s>=r;s--)d.end&&d.end(b[s]);b.length=r}}var p,u,h,b=[],m=e;for(b.last=function(){return this[this.length-1]};e;){if(u=!0,b.last()&&c[b.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+b.last()+"[^>]*>"),function(e,t){return t=t.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),d.chars&&d.chars(t),""}),f(0,b.last());else if(0==e.indexOf("\x3c!--")?(p=e.indexOf("--\x3e"))>=0&&(d.comment&&d.comment(e.substring(4,p)),e=e.substring(p+3),u=!1):0==e.indexOf("</")?(h=e.match(r))&&(e=e.substring(h[0].length),h[0].replace(r,f),u=!1):0==e.indexOf("<")&&(h=e.match(t))&&(e=e.substring(h[0].length),h[0].replace(t,function(e,t,r,c){if(t=t.toLowerCase(),n[t])for(;b.last()&&i[b.last()];)f(0,b.last());if(o[t]&&b.last()==t&&f(0,t),(c=a[t]||!!c)||b.push(t),d.start){var p=[];r.replace(s,function(e,t){var r=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:l[t]?t:"";p.push({name:t,value:r,escaped:r.replace(/(^|[^\\])"/g,'$1\\"')})}),d.start&&d.start(t,p,c)}}),u=!1),u){p=e.indexOf("<");for(var g="";0===p;)g+="<",p=(e=e.substring(1)).indexOf("<");g+=p<0?e:e.substring(0,p),e=p<0?"":e.substring(p),d.chars&&d.chars(g)}if(e==m)throw"Parse Error: "+e;m=e}f()}; 
 			}); 
		define("utils/wxParse/showdown.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){var r={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Specify a prefix to generated header ids",type:"string"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix identation in es6 strings",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(r));var t={};for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n].defaultValue);return t}function r(e,r){var t=r?"Error in "+r+" extension->":"Error in unnamed extension",a={valid:!0,error:""};s.helper.isArray(e)||(e=[e]);for(var o=0;o<e.length;++o){var i=t+" sub-extension "+o+": ",l=e[o];if("object"!==(void 0===l?"undefined":n(l)))return a.valid=!1,a.error=i+"must be an object, but "+(void 0===l?"undefined":n(l))+" given",a;if(!s.helper.isString(l.type))return a.valid=!1,a.error=i+'property "type" must be a string, but '+n(l.type)+" given",a;var c=l.type=l.type.toLowerCase();if("language"===c&&(c=l.type="lang"),"html"===c&&(c=l.type="output"),"lang"!==c&&"output"!==c&&"listener"!==c)return a.valid=!1,a.error=i+"type "+c+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',a;if("listener"===c){if(s.helper.isUndefined(l.listeners))return a.valid=!1,a.error=i+'. Extensions of type "listener" must have a property called "listeners"',a}else if(s.helper.isUndefined(l.filter)&&s.helper.isUndefined(l.regex))return a.valid=!1,a.error=i+c+' extensions must define either a "regex" property or a "filter" method',a;if(l.listeners){if("object"!==n(l.listeners))return a.valid=!1,a.error=i+'"listeners" property must be an object but '+n(l.listeners)+" given",a;for(var u in l.listeners)if(l.listeners.hasOwnProperty(u)&&"function"!=typeof l.listeners[u])return a.valid=!1,a.error=i+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+u+" must be a function but "+n(l.listeners[u])+" given",a}if(l.filter){if("function"!=typeof l.filter)return a.valid=!1,a.error=i+'"filter" must be a function, but '+n(l.filter)+" given",a}else if(l.regex){if(s.helper.isString(l.regex)&&(l.regex=new RegExp(l.regex,"g")),!l.regex instanceof RegExp)return a.valid=!1,a.error=i+'"regex" property must either be a string or a RegExp object, but '+n(l.regex)+" given",a;if(s.helper.isUndefined(l.replace))return a.valid=!1,a.error=i+'"regex" extensions must implement a replace string or function',a}}return a}function t(e,r){return"~E"+r.charCodeAt(0)+"E"}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s={},a={},o={},i=e(!0),l={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0},vanilla:e(!0)};s.helper={},s.extensions={},s.setOption=function(e,r){return i[e]=r,this},s.getOption=function(e){return i[e]},s.getOptions=function(){return i},s.resetOptions=function(){i=e(!0)},s.setFlavor=function(e){if(l.hasOwnProperty(e)){var r=l[e];for(var t in r)r.hasOwnProperty(t)&&(i[t]=r[t])}},s.getDefaultOptions=function(r){return e(r)},s.subParser=function(e,r){if(s.helper.isString(e)){if(void 0===r){if(a.hasOwnProperty(e))return a[e];throw Error("SubParser named "+e+" not registered!")}a[e]=r}},s.extension=function(e,t){if(!s.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=s.helper.stdExtName(e),s.helper.isUndefined(t)){if(!o.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return o[e]}"function"==typeof t&&(t=t()),s.helper.isArray(t)||(t=[t]);var n=r(t,e);if(!n.valid)throw Error(n.error);o[e]=t},s.getAllExtensions=function(){return o},s.removeExtension=function(e){delete o[e]},s.resetExtensions=function(){o={}},s.validateExtension=function(e){var t=r(e,null);return!!t.valid||(console.warn(t.error),!1)},s.hasOwnProperty("helper")||(s.helper={}),s.helper.isString=function(e){return"string"==typeof e||e instanceof String},s.helper.isFunction=function(e){var r={};return e&&"[object Function]"===r.toString.call(e)},s.helper.forEach=function(e,r){if("function"==typeof e.forEach)e.forEach(r);else for(var t=0;t<e.length;t++)r(e[t],t,e)},s.helper.isArray=function(e){return e.constructor===Array},s.helper.isUndefined=function(e){return void 0===e},s.helper.stdExtName=function(e){return e.replace(/[_-]||\s/g,"").toLowerCase()},s.helper.escapeCharactersCallback=t,s.helper.escapeCharacters=function(e,r,n){var s="(["+r.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(s="\\\\"+s);var a=new RegExp(s,"g");return e=e.replace(a,t)};var c=function(e,r,t,n){var s,a,o,i,l,c=n||"",u=c.indexOf("g")>-1,p=new RegExp(r+"|"+t,"g"+c.replace(/g/g,"")),h=new RegExp(r,c.replace(/g/g,"")),d=[];do{for(s=0;o=p.exec(e);)if(h.test(o[0]))s++||(i=(a=p.lastIndex)-o[0].length);else if(s&&!--s){l=o.index+o[0].length;var f={left:{start:i,end:a},match:{start:a,end:o.index},right:{start:o.index,end:l},wholeMatch:{start:i,end:l}};if(d.push(f),!u)return d}}while(s&&(p.lastIndex=a));return d};s.helper.matchRecursiveRegExp=function(e,r,t,n){for(var s=c(e,r,t,n),a=[],o=0;o<s.length;++o)a.push([e.slice(s[o].wholeMatch.start,s[o].wholeMatch.end),e.slice(s[o].match.start,s[o].match.end),e.slice(s[o].left.start,s[o].left.end),e.slice(s[o].right.start,s[o].right.end)]);return a},s.helper.replaceRecursiveRegExp=function(e,r,t,n,a){if(!s.helper.isFunction(r)){var o=r;r=function(){return o}}var i=c(e,t,n,a),l=e,u=i.length;if(u>0){var p=[];0!==i[0].wholeMatch.start&&p.push(e.slice(0,i[0].wholeMatch.start));for(var h=0;h<u;++h)p.push(r(e.slice(i[h].wholeMatch.start,i[h].wholeMatch.end),e.slice(i[h].match.start,i[h].match.end),e.slice(i[h].left.start,i[h].left.end),e.slice(i[h].right.start,i[h].right.end))),h<u-1&&p.push(e.slice(i[h].wholeMatch.end,i[h+1].wholeMatch.start));i[u-1].wholeMatch.end<e.length&&p.push(e.slice(i[u-1].wholeMatch.end)),l=p.join("")}return l},s.helper.isUndefined(console)&&(console={warn:function(e){alert(e)},log:function(e){alert(e)},error:function(e){throw e}}),s.Converter=function(e){function t(e,t){if(t=t||null,s.helper.isString(e)){if(e=s.helper.stdExtName(e),t=e,s.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void a(s.extensions[e],e);if(s.helper.isUndefined(o[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=o[e]}"function"==typeof e&&(e=e()),s.helper.isArray(e)||(e=[e]);var n=r(e,t);if(!n.valid)throw Error(n.error);for(var i=0;i<e.length;++i){switch(e[i].type){case"lang":h.push(e[i]);break;case"output":d.push(e[i])}if(e[i].hasOwnProperty(f))for(var l in e[i].listeners)e[i].listeners.hasOwnProperty(l)&&c(l,e[i].listeners[l])}}function a(e,t){"function"==typeof e&&(e=e(new s.Converter)),s.helper.isArray(e)||(e=[e]);var n=r(e,t);if(!n.valid)throw Error(n.error);for(var a=0;a<e.length;++a)switch(e[a].type){case"lang":h.push(e[a]);break;case"output":d.push(e[a]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function c(e,r){if(!s.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+(void 0===e?"undefined":n(e))+" given");if("function"!=typeof r)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+(void 0===r?"undefined":n(r))+" given");f.hasOwnProperty(e)||(f[e]=[]),f[e].push(r)}function u(e){var r=e.match(/^\s*/)[0].length,t=new RegExp("^\\s{0,"+r+"}","gm");return e.replace(t,"")}var p={},h=[],d=[],f={};!function(){e=e||{};for(var r in i)i.hasOwnProperty(r)&&(p[r]=i[r]);if("object"!==(void 0===e?"undefined":n(e)))throw Error("Converter expects the passed parameter to be an object, but "+(void 0===e?"undefined":n(e))+" was passed instead.");for(var a in e)e.hasOwnProperty(a)&&(p[a]=e[a]);p.extensions&&s.helper.forEach(p.extensions,t)}(),this._dispatch=function(e,r,t,n){if(f.hasOwnProperty(e))for(var s=0;s<f[e].length;++s){var a=f[e][s](e,r,this,t,n);a&&void 0!==a&&(r=a)}return r},this.listen=function(e,r){return c(e,r),this},this.makeHtml=function(e){if(!e)return e;var r={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:h,outputModifiers:d,converter:this,ghCodeBlocks:[]};return e=e.replace(/~/g,"~T"),e=e.replace(/\$/g,"~D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),p.smartIndentationFix&&(e=u(e)),e=e,e=s.subParser("detab")(e,p,r),e=s.subParser("stripBlankLines")(e,p,r),s.helper.forEach(h,function(t){e=s.subParser("runExtension")(t,e,p,r)}),e=s.subParser("hashPreCodeTags")(e,p,r),e=s.subParser("githubCodeBlocks")(e,p,r),e=s.subParser("hashHTMLBlocks")(e,p,r),e=s.subParser("hashHTMLSpans")(e,p,r),e=s.subParser("stripLinkDefinitions")(e,p,r),e=s.subParser("blockGamut")(e,p,r),e=s.subParser("unhashHTMLSpans")(e,p,r),e=s.subParser("unescapeSpecialChars")(e,p,r),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~"),s.helper.forEach(d,function(t){e=s.subParser("runExtension")(t,e,p,r)}),e},this.setOption=function(e,r){p[e]=r},this.getOption=function(e){return p[e]},this.getOptions=function(){return p},this.addExtension=function(e,r){t(e,r=r||null)},this.useExtension=function(e){t(e)},this.setFlavor=function(e){if(l.hasOwnProperty(e)){var r=l[e];for(var t in r)r.hasOwnProperty(t)&&(p[t]=r[t])}},this.removeExtension=function(e){s.helper.isArray(e)||(e=[e]);for(var r=0;r<e.length;++r){for(var t=e[r],n=0;n<h.length;++n)h[n]===t&&h[n].splice(n,1);for(;0<d.length;++n)d[0]===t&&d[0].splice(n,1)}},this.getAllExtensions=function(){return{language:h,output:d}}},s.subParser("anchors",function(e,r,t){var n=function(e,r,n,a,o,i,l,c){s.helper.isUndefined(c)&&(c=""),e=r;var u=n,p=a.toLowerCase(),h=o,d=c;if(!h)if(p||(p=u.toLowerCase().replace(/ ?\n/g," ")),h="#"+p,s.helper.isUndefined(t.gUrls[p])){if(!(e.search(/\(\s*\)$/m)>-1))return e;h=""}else h=t.gUrls[p],s.helper.isUndefined(t.gTitles[p])||(d=t.gTitles[p]);var f='<a href="'+(h=s.helper.escapeCharacters(h,"*_",!1))+'"';return""!==d&&null!==d&&(d=d.replace(/"/g,"&quot;"),f+=' title="'+(d=s.helper.escapeCharacters(d,"*_",!1))+'"'),f+=">"+u+"</a>"};return e=(e=t.converter._dispatch("anchors.before",e,r,t)).replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,n),e=e.replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n),e=e.replace(/(\[([^\[\]]+)])()()()()()/g,n),e=t.converter._dispatch("anchors.after",e,r,t)}),s.subParser("autoLinks",function(e,r,t){function n(e,r){var t=r;return/^www\./i.test(r)&&(r=r.replace(/^www\./i,"http://www.")),'<a href="'+r+'">'+t+"</a>"}function a(e,r){var t=s.subParser("unescapeSpecialChars")(r);return s.subParser("encodeEmailAddress")(t)}var o=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)(?=\s|$)(?!["<>])/gi,i=/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,l=/(?:^|[ \n\t])([A-Za-z0-9!#$%&'*+-/=?^_`\{|}~\.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?:$|[ \n\t])/gi,c=/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi;return e=(e=t.converter._dispatch("autoLinks.before",e,r,t)).replace(i,n),e=e.replace(c,a),r.simplifiedAutoLink&&(e=(e=e.replace(o,n)).replace(l,a)),e=t.converter._dispatch("autoLinks.after",e,r,t)}),s.subParser("blockGamut",function(e,r,t){e=t.converter._dispatch("blockGamut.before",e,r,t),e=s.subParser("blockQuotes")(e,r,t),e=s.subParser("headers")(e,r,t);var n=s.subParser("hashBlock")("<hr />",r,t);return e=e.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,n),e=e.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,n),e=e.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,n),e=s.subParser("lists")(e,r,t),e=s.subParser("codeBlocks")(e,r,t),e=s.subParser("tables")(e,r,t),e=s.subParser("hashHTMLBlocks")(e,r,t),e=s.subParser("paragraphs")(e,r,t),e=t.converter._dispatch("blockGamut.after",e,r,t)}),s.subParser("blockQuotes",function(e,r,t){return e=t.converter._dispatch("blockQuotes.before",e,r,t),e=e.replace(/((^[ \t]{0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,n){var a=n;return a=a.replace(/^[ \t]*>[ \t]?/gm,"~0"),a=a.replace(/~0/g,""),a=a.replace(/^[ \t]+$/gm,""),a=s.subParser("githubCodeBlocks")(a,r,t),a=s.subParser("blockGamut")(a,r,t),a=a.replace(/(^|\n)/g,"$1  "),a=a.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,r){var t=r;return t=t.replace(/^  /gm,"~0"),t=t.replace(/~0/g,"")}),s.subParser("hashBlock")("<blockquote>\n"+a+"\n</blockquote>",r,t)}),e=t.converter._dispatch("blockQuotes.after",e,r,t)}),s.subParser("codeBlocks",function(e,r,t){e=t.converter._dispatch("codeBlocks.before",e,r,t);var n=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g;return e=(e+="~0").replace(n,function(e,n,a){var o=n,i=a,l="\n";return o=s.subParser("outdent")(o),o=s.subParser("encodeCode")(o),o=s.subParser("detab")(o),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,""),r.omitExtraWLInCodeBlocks&&(l=""),o="<pre><code>"+o+l+"</code></pre>",s.subParser("hashBlock")(o,r,t)+i}),e=e.replace(/~0/,""),e=t.converter._dispatch("codeBlocks.after",e,r,t)}),s.subParser("codeSpans",function(e,r,t){return void 0===(e=t.converter._dispatch("codeSpans.before",e,r,t))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,r,t,n){var a=n;return a=a.replace(/^([ \t]*)/g,""),a=a.replace(/[ \t]*$/g,""),a=s.subParser("encodeCode")(a),r+"<code>"+a+"</code>"}),e=t.converter._dispatch("codeSpans.after",e,r,t)}),s.subParser("detab",function(e){return e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"~A~B"),e=e.replace(/~B(.+?)~A/g,function(e,r){for(var t=r,n=4-t.length%4,s=0;s<n;s++)t+=" ";return t}),e=e.replace(/~A/g,"    "),e=e.replace(/~B/g,"")}),s.subParser("encodeAmpsAndAngles",function(e){return e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?\$!])/gi,"&lt;")}),s.subParser("encodeBackslashEscapes",function(e){return e=e.replace(/\\(\\)/g,s.helper.escapeCharactersCallback),e=e.replace(/\\([`*_{}\[\]()>#+-.!])/g,s.helper.escapeCharactersCallback)}),s.subParser("encodeCode",function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=s.helper.escapeCharacters(e,"*_{}[]\\",!1)}),s.subParser("encodeEmailAddress",function(e){var r=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e="mailto:"+e,e=e.replace(/./g,function(e){if("@"===e)e=r[Math.floor(2*Math.random())](e);else if(":"!==e){var t=Math.random();e=t>.9?r[2](e):t>.45?r[1](e):r[0](e)}return e}),e='<a href="'+e+'">'+e+"</a>",e=e.replace(/">.+:/g,'">')}),s.subParser("escapeSpecialCharsWithinTagAttributes",function(e){var r=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(r,function(e){var r=e.replace(/(.)<\/?code>(?=.)/g,"$1`");return r=s.helper.escapeCharacters(r,"\\`*_",!1)})}),s.subParser("githubCodeBlocks",function(e,r,t){return r.ghCodeBlocks?(e=t.converter._dispatch("githubCodeBlocks.before",e,r,t),e+="~0",e=e.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,n,a){var o=r.omitExtraWLInCodeBlocks?"":"\n";return a=s.subParser("encodeCode")(a),a=s.subParser("detab")(a),a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,""),a="<pre><code"+(n?' class="'+n+" language-"+n+'"':"")+">"+a+o+"</code></pre>",a=s.subParser("hashBlock")(a,r,t),"\n\n~G"+(t.ghCodeBlocks.push({text:e,codeblock:a})-1)+"G\n\n"}),e=e.replace(/~0/,""),t.converter._dispatch("githubCodeBlocks.after",e,r,t)):e}),s.subParser("hashBlock",function(e,r,t){return e=e.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(t.gHtmlBlocks.push(e)-1)+"K\n\n"}),s.subParser("hashElement",function(e,r,t){return function(e,r){var n=r;return n=n.replace(/\n\n/g,"\n"),n=n.replace(/^\n/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(t.gHtmlBlocks.push(n)-1)+"K\n\n"}}),s.subParser("hashHTMLBlocks",function(e,r,t){for(var n=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],a=0;a<n.length;++a)e=s.helper.replaceRecursiveRegExp(e,function(e,r,n,s){var a=e;return-1!==n.search(/\bmarkdown\b/)&&(a=n+t.converter.makeHtml(r)+s),"\n\n~K"+(t.gHtmlBlocks.push(a)-1)+"K\n\n"},"^(?: |\\t){0,3}<"+n[a]+"\\b[^>]*>","</"+n[a]+">","gim");return e=e.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,s.subParser("hashElement")(e,r,t)),e=e.replace(/(<!--[\s\S]*?-->)/g,s.subParser("hashElement")(e,r,t)),e=e.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,s.subParser("hashElement")(e,r,t))}),s.subParser("hashHTMLSpans",function(e,r,t){for(var n=s.helper.matchRecursiveRegExp(e,"<code\\b[^>]*>","</code>","gi"),a=0;a<n.length;++a)e=e.replace(n[a][0],"~L"+(t.gHtmlSpans.push(n[a][0])-1)+"L");return e}),s.subParser("unhashHTMLSpans",function(e,r,t){for(var n=0;n<t.gHtmlSpans.length;++n)e=e.replace("~L"+n+"L",t.gHtmlSpans[n]);return e}),s.subParser("hashPreCodeTags",function(e,r,t){return e=s.helper.replaceRecursiveRegExp(e,function(e,r,n,a){var o=n+s.subParser("encodeCode")(r)+a;return"\n\n~G"+(t.ghCodeBlocks.push({text:e,codeblock:o})-1)+"G\n\n"},"^(?: |\\t){0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^(?: |\\t){0,3}</code>\\s*</pre>","gim")}),s.subParser("headers",function(e,r,t){function n(e){var r,n=e.replace(/[^\w]/g,"").toLowerCase();return t.hashLinkCounts[n]?r=n+"-"+t.hashLinkCounts[n]++:(r=n,t.hashLinkCounts[n]=1),!0===a&&(a="section"),s.helper.isString(a)?a+r:r}e=t.converter._dispatch("headers.before",e,r,t);var a=r.prefixHeaderId,o=isNaN(parseInt(r.headerLevelStart))?1:parseInt(r.headerLevelStart),i=r.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,l=r.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;return e=e.replace(i,function(e,a){var i=s.subParser("spanGamut")(a,r,t),l=r.noHeaderId?"":' id="'+n(a)+'"',c=o,u="<h"+c+l+">"+i+"</h"+c+">";return s.subParser("hashBlock")(u,r,t)}),e=e.replace(l,function(e,a){var i=s.subParser("spanGamut")(a,r,t),l=r.noHeaderId?"":' id="'+n(a)+'"',c=o+1,u="<h"+c+l+">"+i+"</h"+c+">";return s.subParser("hashBlock")(u,r,t)}),e=e.replace(/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm,function(e,a,i){var l=s.subParser("spanGamut")(i,r,t),c=r.noHeaderId?"":' id="'+n(i)+'"',u=o-1+a.length,p="<h"+u+c+">"+l+"</h"+u+">";return s.subParser("hashBlock")(p,r,t)}),e=t.converter._dispatch("headers.after",e,r,t)}),s.subParser("images",function(e,r,t){function n(e,r,n,a,o,i,l,c){var u=t.gUrls,p=t.gTitles,h=t.gDimensions;if(n=n.toLowerCase(),c||(c=""),""===a||null===a){if(""!==n&&null!==n||(n=r.toLowerCase().replace(/ ?\n/g," ")),a="#"+n,s.helper.isUndefined(u[n]))return e;a=u[n],s.helper.isUndefined(p[n])||(c=p[n]),s.helper.isUndefined(h[n])||(o=h[n].width,i=h[n].height)}r=r.replace(/"/g,"&quot;"),r=s.helper.escapeCharacters(r,"*_",!1);var d='<img src="'+(a=s.helper.escapeCharacters(a,"*_",!1))+'" alt="'+r+'"';return c&&(c=c.replace(/"/g,"&quot;"),d+=' title="'+(c=s.helper.escapeCharacters(c,"*_",!1))+'"'),o&&i&&(d+=' width="'+(o="*"===o?"auto":o)+'"',d+=' height="'+(i="*"===i?"auto":i)+'"'),d+=" />"}var a=/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,o=/!\[([^\]]*?)] ?(?:\n *)?\[(.*?)]()()()()()/g;return e=(e=t.converter._dispatch("images.before",e,r,t)).replace(o,n),e=e.replace(a,n),e=t.converter._dispatch("images.after",e,r,t)}),s.subParser("italicsAndBold",function(e,r,t){return e=t.converter._dispatch("italicsAndBold.before",e,r,t),e=r.literalMidWordUnderscores?(e=(e=(e=e.replace(/(^|\s|>|\b)__(?=\S)([\s\S]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>")).replace(/(^|\s|>|\b)_(?=\S)([\s\S]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>")).replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>")).replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"):(e=e.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>")).replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>"),e=t.converter._dispatch("italicsAndBold.after",e,r,t)}),s.subParser("lists",function(e,r,t){function n(e,n){t.gListLevel++,e=e.replace(/\n{2,}$/,"\n"),e+="~0";var a=/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,o=/\n[ \t]*\n(?!~0)/.test(e);return e=e.replace(a,function(e,n,a,i,l,c,u){u=u&&""!==u.trim();var p=s.subParser("outdent")(l,r,t),h="";return c&&r.tasklists&&(h=' class="task-list-item" style="list-style-type: none;"',p=p.replace(/^[ \t]*\[(x|X| )?]/m,function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return u&&(e+=" checked"),e+=">"})),n||p.search(/\n{2,}/)>-1?(p=s.subParser("githubCodeBlocks")(p,r,t),p=s.subParser("blockGamut")(p,r,t)):(p=(p=s.subParser("lists")(p,r,t)).replace(/\n$/,""),p=o?s.subParser("paragraphs")(p,r,t):s.subParser("spanGamut")(p,r,t)),p="\n<li"+h+">"+p+"</li>\n"}),e=e.replace(/~0/g,""),t.gListLevel--,n&&(e=e.replace(/\s+$/,"")),e}function a(e,r,t){var s="ul"===r?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,a=[],o="";if(-1!==e.search(s)){!function e(a){var i=a.search(s);-1!==i?(o+="\n\n<"+r+">"+n(a.slice(0,i),!!t)+"</"+r+">\n\n",s="ul"===(r="ul"===r?"ol":"ul")?/^ {0,2}\d+\.[ \t]/gm:/^ {0,2}[*+-][ \t]/gm,e(a.slice(i))):o+="\n\n<"+r+">"+n(a,!!t)+"</"+r+">\n\n"}(e);for(var i=0;i<a.length;++i);}else o="\n\n<"+r+">"+n(e,!!t)+"</"+r+">\n\n";return o}e=t.converter._dispatch("lists.before",e,r,t),e+="~0";var o=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return t.gListLevel?e=e.replace(o,function(e,r,t){return a(r,t.search(/[*+-]/g)>-1?"ul":"ol",!0)}):(o=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,e=e.replace(o,function(e,r,t,n){return a(t,n.search(/[*+-]/g)>-1?"ul":"ol")})),e=e.replace(/~0/,""),e=t.converter._dispatch("lists.after",e,r,t)}),s.subParser("outdent",function(e){return e=e.replace(/^(\t|[ ]{1,4})/gm,"~0"),e=e.replace(/~0/g,"")}),s.subParser("paragraphs",function(e,r,t){for(var n=(e=(e=(e=t.converter._dispatch("paragraphs.before",e,r,t)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),a=[],o=n.length,i=0;i<o;i++){var l=n[i];l.search(/~(K|G)(\d+)\1/g)>=0?a.push(l):(l=(l=s.subParser("spanGamut")(l,r,t)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",a.push(l))}for(o=a.length,i=0;i<o;i++){for(var c="",u=a[i],p=!1;u.search(/~(K|G)(\d+)\1/)>=0;){var h=RegExp.$1,d=RegExp.$2;c=(c="K"===h?t.gHtmlBlocks[d]:p?s.subParser("encodeCode")(t.ghCodeBlocks[d].text):t.ghCodeBlocks[d].codeblock).replace(/\$/g,"$$$$"),u=u.replace(/(\n\n)?~(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(u)&&(p=!0)}a[i]=u}return e=a.join("\n\n"),e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,""),t.converter._dispatch("paragraphs.after",e,r,t)}),s.subParser("runExtension",function(e,r,t,n){if(e.filter)r=e.filter(r,n.converter,t);else if(e.regex){var s=e.regex;!s instanceof RegExp&&(s=new RegExp(s,"g")),r=r.replace(s,e.replace)}return r}),s.subParser("spanGamut",function(e,r,t){return e=t.converter._dispatch("spanGamut.before",e,r,t),e=s.subParser("codeSpans")(e,r,t),e=s.subParser("escapeSpecialCharsWithinTagAttributes")(e,r,t),e=s.subParser("encodeBackslashEscapes")(e,r,t),e=s.subParser("images")(e,r,t),e=s.subParser("anchors")(e,r,t),e=s.subParser("autoLinks")(e,r,t),e=s.subParser("encodeAmpsAndAngles")(e,r,t),e=s.subParser("italicsAndBold")(e,r,t),e=s.subParser("strikethrough")(e,r,t),e=e.replace(/  +\n/g," <br />\n"),e=t.converter._dispatch("spanGamut.after",e,r,t)}),s.subParser("strikethrough",function(e,r,t){return r.strikethrough&&(e=(e=t.converter._dispatch("strikethrough.before",e,r,t)).replace(/(?:~T){2}([\s\S]+?)(?:~T){2}/g,"<del>$1</del>"),e=t.converter._dispatch("strikethrough.after",e,r,t)),e}),s.subParser("stripBlankLines",function(e){return e.replace(/^[ \t]+$/gm,"")}),s.subParser("stripLinkDefinitions",function(e,r,t){var n=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm;return e+="~0",e=e.replace(n,function(e,n,a,o,i,l,c){return n=n.toLowerCase(),t.gUrls[n]=s.subParser("encodeAmpsAndAngles")(a),l?l+c:(c&&(t.gTitles[n]=c.replace(/"|'/g,"&quot;")),r.parseImgDimensions&&o&&i&&(t.gDimensions[n]={width:o,height:i}),"")}),e=e.replace(/~0/,"")}),s.subParser("tables",function(e,r,t){function n(e){return/^:[ \t]*--*$/.test(e)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(e)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(e)?' style="text-align:center;"':""}function a(e,n){var a="";return e=e.trim(),r.tableHeaderId&&(a=' id="'+e.replace(/ /g,"_").toLowerCase()+'"'),e=s.subParser("spanGamut")(e,r,t),"<th"+a+n+">"+e+"</th>\n"}function o(e,n){return"<td"+n+">"+s.subParser("spanGamut")(e,r,t)+"</td>\n"}function i(e,r){for(var t="<table>\n<thead>\n<tr>\n",n=e.length,s=0;s<n;++s)t+=e[s];for(t+="</tr>\n</thead>\n<tbody>\n",s=0;s<r.length;++s){t+="<tr>\n";for(var a=0;a<n;++a)t+=r[s][a];t+="</tr>\n"}return t+="</tbody>\n</table>\n"}if(!r.tables)return e;var l=/^[ \t]{0,3}\|?.+\|.+\n[ \t]{0,3}\|?[ \t]*:?[ \t]*(?:-|=){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:-|=){2,}[\s\S]+?(?:\n\n|~0)/gm;return e=t.converter._dispatch("tables.before",e,r,t),e=e.replace(l,function(e){var r,t=e.split("\n");for(r=0;r<t.length;++r)/^[ \t]{0,3}\|/.test(t[r])&&(t[r]=t[r].replace(/^[ \t]{0,3}\|/,"")),/\|[ \t]*$/.test(t[r])&&(t[r]=t[r].replace(/\|[ \t]*$/,""));var l=t[0].split("|").map(function(e){return e.trim()}),c=t[1].split("|").map(function(e){return e.trim()}),u=[],p=[],h=[],d=[];for(t.shift(),t.shift(),r=0;r<t.length;++r)""!==t[r].trim()&&u.push(t[r].split("|").map(function(e){return e.trim()}));if(l.length<c.length)return e;for(r=0;r<c.length;++r)h.push(n(c[r]));for(r=0;r<l.length;++r)s.helper.isUndefined(h[r])&&(h[r]=""),p.push(a(l[r],h[r]));for(r=0;r<u.length;++r){for(var f=[],g=0;g<p.length;++g)s.helper.isUndefined(u[r][g]),f.push(o(u[r][g],h[g]));d.push(f)}return i(p,d)}),e=t.converter._dispatch("tables.after",e,r,t)}),s.subParser("unescapeSpecialChars",function(e){return e=e.replace(/~E(\d+)E/g,function(e,r){var t=parseInt(r);return String.fromCharCode(t)})}),module.exports=s; 
 			}); 
		define("utils/wxParse/wxDiscode.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e=e.replace(/&forall;/g,"∀"),e=e.replace(/&part;/g,"∂"),e=e.replace(/&exists;/g,"∃"),e=e.replace(/&empty;/g,"∅"),e=e.replace(/&nabla;/g,"∇"),e=e.replace(/&isin;/g,"∈"),e=e.replace(/&notin;/g,"∉"),e=e.replace(/&ni;/g,"∋"),e=e.replace(/&prod;/g,"∏"),e=e.replace(/&sum;/g,"∑"),e=e.replace(/&minus;/g,"−"),e=e.replace(/&lowast;/g,"∗"),e=e.replace(/&radic;/g,"√"),e=e.replace(/&prop;/g,"∝"),e=e.replace(/&infin;/g,"∞"),e=e.replace(/&ang;/g,"∠"),e=e.replace(/&and;/g,"∧"),e=e.replace(/&or;/g,"∨"),e=e.replace(/&cap;/g,"∩"),e=e.replace(/&cap;/g,"∪"),e=e.replace(/&int;/g,"∫"),e=e.replace(/&there4;/g,"∴"),e=e.replace(/&sim;/g,"∼"),e=e.replace(/&cong;/g,"≅"),e=e.replace(/&asymp;/g,"≈"),e=e.replace(/&ne;/g,"≠"),e=e.replace(/&le;/g,"≤"),e=e.replace(/&ge;/g,"≥"),e=e.replace(/&sub;/g,"⊂"),e=e.replace(/&sup;/g,"⊃"),e=e.replace(/&nsub;/g,"⊄"),e=e.replace(/&sube;/g,"⊆"),e=e.replace(/&supe;/g,"⊇"),e=e.replace(/&oplus;/g,"⊕"),e=e.replace(/&otimes;/g,"⊗"),e=e.replace(/&perp;/g,"⊥"),e=e.replace(/&sdot;/g,"⋅")}function a(e){return e=e.replace(/&Alpha;/g,"Α"),e=e.replace(/&Beta;/g,"Β"),e=e.replace(/&Gamma;/g,"Γ"),e=e.replace(/&Delta;/g,"Δ"),e=e.replace(/&Epsilon;/g,"Ε"),e=e.replace(/&Zeta;/g,"Ζ"),e=e.replace(/&Eta;/g,"Η"),e=e.replace(/&Theta;/g,"Θ"),e=e.replace(/&Iota;/g,"Ι"),e=e.replace(/&Kappa;/g,"Κ"),e=e.replace(/&Lambda;/g,"Λ"),e=e.replace(/&Mu;/g,"Μ"),e=e.replace(/&Nu;/g,"Ν"),e=e.replace(/&Xi;/g,"Ν"),e=e.replace(/&Omicron;/g,"Ο"),e=e.replace(/&Pi;/g,"Π"),e=e.replace(/&Rho;/g,"Ρ"),e=e.replace(/&Sigma;/g,"Σ"),e=e.replace(/&Tau;/g,"Τ"),e=e.replace(/&Upsilon;/g,"Υ"),e=e.replace(/&Phi;/g,"Φ"),e=e.replace(/&Chi;/g,"Χ"),e=e.replace(/&Psi;/g,"Ψ"),e=e.replace(/&Omega;/g,"Ω"),e=e.replace(/&alpha;/g,"α"),e=e.replace(/&beta;/g,"β"),e=e.replace(/&gamma;/g,"γ"),e=e.replace(/&delta;/g,"δ"),e=e.replace(/&epsilon;/g,"ε"),e=e.replace(/&zeta;/g,"ζ"),e=e.replace(/&eta;/g,"η"),e=e.replace(/&theta;/g,"θ"),e=e.replace(/&iota;/g,"ι"),e=e.replace(/&kappa;/g,"κ"),e=e.replace(/&lambda;/g,"λ"),e=e.replace(/&mu;/g,"μ"),e=e.replace(/&nu;/g,"ν"),e=e.replace(/&xi;/g,"ξ"),e=e.replace(/&omicron;/g,"ο"),e=e.replace(/&pi;/g,"π"),e=e.replace(/&rho;/g,"ρ"),e=e.replace(/&sigmaf;/g,"ς"),e=e.replace(/&sigma;/g,"σ"),e=e.replace(/&tau;/g,"τ"),e=e.replace(/&upsilon;/g,"υ"),e=e.replace(/&phi;/g,"φ"),e=e.replace(/&chi;/g,"χ"),e=e.replace(/&psi;/g,"ψ"),e=e.replace(/&omega;/g,"ω"),e=e.replace(/&thetasym;/g,"ϑ"),e=e.replace(/&upsih;/g,"ϒ"),e=e.replace(/&piv;/g,"ϖ"),e=e.replace(/&middot;/g,"·")}function r(e){return e=e.replace(/&nbsp;/g," "),e=e.replace(/&quot;/g,"'"),e=e.replace(/&amp;/g,"&"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&gt;/g,">")}function l(e){return e=e.replace(/&OElig;/g,"Œ"),e=e.replace(/&oelig;/g,"œ"),e=e.replace(/&Scaron;/g,"Š"),e=e.replace(/&scaron;/g,"š"),e=e.replace(/&Yuml;/g,"Ÿ"),e=e.replace(/&fnof;/g,"ƒ"),e=e.replace(/&circ;/g,"ˆ"),e=e.replace(/&tilde;/g,"˜"),e=e.replace(/&ensp;/g,""),e=e.replace(/&emsp;/g,""),e=e.replace(/&thinsp;/g,""),e=e.replace(/&zwnj;/g,""),e=e.replace(/&zwj;/g,""),e=e.replace(/&lrm;/g,""),e=e.replace(/&rlm;/g,""),e=e.replace(/&ndash;/g,"–"),e=e.replace(/&mdash;/g,"—"),e=e.replace(/&lsquo;/g,"‘"),e=e.replace(/&rsquo;/g,"’"),e=e.replace(/&sbquo;/g,"‚"),e=e.replace(/&ldquo;/g,"“"),e=e.replace(/&rdquo;/g,"”"),e=e.replace(/&bdquo;/g,"„"),e=e.replace(/&dagger;/g,"†"),e=e.replace(/&Dagger;/g,"‡"),e=e.replace(/&bull;/g,"•"),e=e.replace(/&hellip;/g,"…"),e=e.replace(/&permil;/g,"‰"),e=e.replace(/&prime;/g,"′"),e=e.replace(/&Prime;/g,"″"),e=e.replace(/&lsaquo;/g,"‹"),e=e.replace(/&rsaquo;/g,"›"),e=e.replace(/&oline;/g,"‾"),e=e.replace(/&euro;/g,"€"),e=e.replace(/&trade;/g,"™"),e=e.replace(/&larr;/g,"←"),e=e.replace(/&uarr;/g,"↑"),e=e.replace(/&rarr;/g,"→"),e=e.replace(/&darr;/g,"↓"),e=e.replace(/&harr;/g,"↔"),e=e.replace(/&crarr;/g,"↵"),e=e.replace(/&lceil;/g,"⌈"),e=e.replace(/&rceil;/g,"⌉"),e=e.replace(/&lfloor;/g,"⌊"),e=e.replace(/&rfloor;/g,"⌋"),e=e.replace(/&loz;/g,"◊"),e=e.replace(/&spades;/g,"♠"),e=e.replace(/&clubs;/g,"♣"),e=e.replace(/&hearts;/g,"♥"),e=e.replace(/&diams;/g,"♦")}function p(e){return e=e.replace(/\r\n/g,""),e=e.replace(/\n/g,""),e=e.replace(/code/g,"wxxxcode-style")}module.exports={strDiscode:function(c){return c=e(c),c=a(c),c=r(c),c=l(c),c=p(c)},urlToHttpUrl:function(e,a){return new RegExp("^//").test(e)&&(e=a+":"+e),e}}; 
 			}); 
		define("utils/wxParse/wxParse.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function e(e){return e&&e.__esModule?e:{default:e}}function t(e){var t=this,a=e.target.dataset.src,i=e.target.dataset.from;void 0!==i&&i.length>0&&wx.previewImage({current:a,urls:t.data[i].imageUrls})}function a(e){var t=this,a=e.target.dataset.from,r=e.target.dataset.idx;void 0!==a&&a.length>0&&i(e,r,t,a)}function i(e,t,a,i){var d=a.data[i];if(0!=d.images.length){var n=d.images,s=r(e.detail.width,e.detail.height,a,i);n[t].width=s.imageWidth,n[t].height=s.imageheight,d.images=n;var o={};o[i]=d,a.setData(o)}}function r(e,t,a,i){var r=0,d=0,n=0,s=0,o={};return wx.getSystemInfo({success:function(g){var h=a.data[i].view.imagePadding;r=g.windowWidth-2*h,d=g.windowHeight,e>r?(s=(n=r)*t/e,o.imageWidth=n,o.imageheight=s):(o.imageWidth=e,o.imageheight=t)}}),o}var d=e(require("./showdown.js")),n=e(require("./html2json.js"));module.exports={wxParse:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"wxParseData",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"html",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'<div class="color:red;">数据不能为空</div>',s=arguments[3],o=arguments[4],g=s,h={};if("html"==i)h=n.default.html2json(r,e);else if("md"==i||"markdown"==i){var m=(new d.default.Converter).makeHtml(r);h=n.default.html2json(m,e)}h.view={},h.view.imagePadding=0,void 0!==o&&(h.view.imagePadding=o);var l={};l[e]=h,g.setData(l),g.wxParseImgLoad=a,g.wxParseImgTap=t},wxParseTemArray:function(e,t,a,i){for(var r=[],d=i.data,n=null,s=0;s<a;s++){var o=d[t+s].nodes;r.push(o)}e=e||"wxParseTemArray",(n=JSON.parse('{"'+e+'":""}'))[e]=r,i.setData(n)},emojisInit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/wxParse/emojis/",a=arguments[2];n.default.emojisInit(e,t,a)}}; 
 			}); 
		define("utils/wxcharts.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),n=1;n<arguments.length;n++){var a=arguments[n];if(null!=a)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])}return i}function e(t,e,i){if(isNaN(t))throw new Error("[wxCharts] unvalid series data!");i=i||10,e=e||"upper";for(var n=1;i<1;)i*=10,n*=10;for(t="upper"===e?Math.ceil(t*n):Math.floor(t*n);t%i!=0;)"upper"===e?t++:t--;return t/n}function i(t,e,i,n){var a=n.width-i.padding-e.xAxisPoints[0],o=e.eachSpacing*n.categories.length,r=t;return t>=0?r=0:Math.abs(t)>=o-a&&(r=a-o),r}function n(t,e,i){function n(t){for(;t<0;)t+=2*Math.PI;for(;t>2*Math.PI;)t-=2*Math.PI;return t}return t=n(t),e=n(e),i=n(i),e>i&&(i+=2*Math.PI,t<e&&(t+=2*Math.PI)),t>=e&&t<=i}function a(t,e,i){var n=t,a=i-e,o=n+(i-a-n)/Math.sqrt(2);return{transX:o*=-1,transY:(i-a)*(Math.sqrt(2)-1)-(i-a-n)/Math.sqrt(2)}}function o(t,e){function i(t,e){return!(!t[e-1]||!t[e+1])&&(t[e].y>=Math.max(t[e-1].y,t[e+1].y)||t[e].y<=Math.min(t[e-1].y,t[e+1].y))}var n=null,a=null,o=null,r=null;if(e<1?(n=t[0].x+.2*(t[1].x-t[0].x),a=t[0].y+.2*(t[1].y-t[0].y)):(n=t[e].x+.2*(t[e+1].x-t[e-1].x),a=t[e].y+.2*(t[e+1].y-t[e-1].y)),e>t.length-3){var s=t.length-1;o=t[s].x-.2*(t[s].x-t[s-1].x),r=t[s].y-.2*(t[s].y-t[s-1].y)}else o=t[e+1].x-.2*(t[e+2].x-t[e].x),r=t[e+1].y-.2*(t[e+2].y-t[e].y);return i(t,e+1)&&(r=t[e+1].y),i(t,e)&&(a=t[e].y),{ctrA:{x:n,y:a},ctrB:{x:o,y:r}}}function r(t,e,i){return{x:i.x+t,y:i.y-e}}function s(t,e){if(e)for(;et.isCollision(t,e);)t.start.x>0?t.start.y--:t.start.x<0?t.start.y++:t.start.y>0?t.start.y++:t.start.y--;return t}function l(t,e){var i=0;return t.map(function(t){return t.color||(t.color=e.colors[i],i=(i+1)%e.colors.length),t})}function h(t,i){var n=0,a=i-t;return n=a>=1e4?1e3:a>=1e3?100:a>=100?10:a>=10?5:a>=1?1:a>=.1?.1:.01,{minRange:e(t,"lower",n),maxRange:e(i,"upper",n)}}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,i=0;return(t=(t=String(t)).split("")).forEach(function(t){/[a-zA-Z]/.test(t)?i+=7:/[0-9]/.test(t)?i+=5.5:/\./.test(t)?i+=2.7:/-/.test(t)?i+=3.25:/[\u4e00-\u9fa5]/.test(t)?i+=10:/\(|\)/.test(t)?i+=3.73:/\s/.test(t)?i+=2.5:/%/.test(t)?i+=8:i+=10}),i*e/10}function f(t){return t.reduce(function(t,e){return(t.data?t.data:t).concat(e.data)},[])}function d(t,e){var i=[];return t.forEach(function(t){if(null!==t.data[e]&&"undefinded"!=typeof t.data[e]){var n={};n.color=t.color,n.name=t.name,n.data=t.format?t.format(t.data[e]):t.data[e],i.push(n)}}),i}function x(t){var e=t.map(function(t){return c(t)});return Math.max.apply(null,e)}function u(t){for(var e=2*Math.PI/t,i=[],n=0;n<t;n++)i.push(e*n);return i.map(function(t){return-1*t+Math.PI/2})}function g(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=t.map(function(t){return{text:a.format?a.format(t,n[i]):t.name+": "+t.data,color:t.color}}),r=[],s={x:0,y:0};return e.forEach(function(t){"undefinded"!=typeof t[i]&&null!==t[i]&&r.push(t[i])}),r.forEach(function(t){s.x=Math.round(t.x),s.y+=t.y}),s.y/=r.length,{textList:o,offset:s}}function p(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=-1;return y(t,i,n)&&e.forEach(function(e,i){t.x+a>e&&(o=i)}),o}function y(t,e,i){return t.x<e.width-i.padding&&t.x>i.padding+i.yAxisWidth+i.yAxisTitleWidth&&t.y>i.padding&&t.y<e.height-i.legendHeight-i.xAxisHeight-i.padding}function v(t,e,i){var n=2*Math.PI/i,a=-1;if(m(t,e.center,e.radius)){var o=function(t){return t<0&&(t+=2*Math.PI),t>2*Math.PI&&(t-=2*Math.PI),t},r=Math.atan2(e.center.y-t.y,t.x-e.center.x);(r*=-1)<0&&(r+=2*Math.PI),e.angleList.map(function(t){return t=o(-1*t)}).forEach(function(t,e){var i=o(t-n/2),s=o(t+n/2);s<i&&(s+=2*Math.PI),(r>=i&&r<=s||r+2*Math.PI>=i&&r+2*Math.PI<=s)&&(a=e)})}return a}function P(t,e){var i=-1;if(m(t,e.center,e.radius)){var a=Math.atan2(e.center.y-t.y,t.x-e.center.x);a=-a;for(var o=0,r=e.series.length;o<r;o++){var s=e.series[o];if(n(a,s._start_,s._start_+2*s._proportion_*Math.PI)){i=o;break}}}return i}function m(t,e,i){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(i,2)}function S(t){var e=[],i=[];return t.forEach(function(t,n){null!==t?i.push(t):(i.length&&e.push(i),i=[])}),i.length&&e.push(i),e}function T(t,e,i){if(!1===e.legend)return{legendList:[],legendHeight:0};var n=[],a=0,o=[];return t.forEach(function(t){var i=30+c(t.name||"undefinded");a+i>e.width?(n.push(o),a=i,o=[t]):(a+=i,o.push(t))}),o.length&&n.push(o),{legendList:n,legendHeight:n.length*(i.fontSize+8)+5}}function A(t,e,i){var n={angle:0,xAxisHeight:i.xAxisHeight},a=F(t,e,i).eachSpacing,o=t.map(function(t){return c(t)}),r=Math.max.apply(this,o);return r+2*i.xAxisTextPadding>a&&(n.angle=45*Math.PI/180,n.xAxisHeight=2*i.xAxisTextPadding+r*Math.sin(n.angle)),n}function b(t,e,i,n,a){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=a.extra.radar||{};s.max=s.max||0;var l=Math.max(s.max,Math.max.apply(null,f(n))),h=[];return n.forEach(function(n){var a={};a.color=n.color,a.data=[],n.data.forEach(function(n,s){var h={};h.angle=t[s],h.proportion=n/l,h.position=r(i*h.proportion*o*Math.cos(h.angle),i*h.proportion*o*Math.sin(h.angle),e),a.data.push(h)}),h.push(a)}),h}function M(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=0,n=0;return t.forEach(function(t){t.data=null===t.data?0:t.data,i+=t.data}),t.forEach(function(t){t.data=null===t.data?0:t.data,t._proportion_=t.data/i*e}),t.forEach(function(t){t._start_=n,n+=2*t._proportion_*Math.PI}),t}function _(t){var e=0;return(t=M(t)).forEach(function(t){var i=t.format?t.format(+t._proportion_.toFixed(2)):et.toFixed(100*t._proportion_)+"%";e=Math.max(e,c(i))}),e}function E(t,e,i,n,a,o){return t.map(function(t){return null===t?null:(t.width=(e-2*a.columePadding)/i,o.extra.column&&o.extra.column.width&&+o.extra.column.width>0?t.width=Math.min(t.width,+o.extra.column.width):t.width=Math.min(t.width,25),t.x+=(n+.5-i/2)*t.width,t)})}function F(t,e,i){var n=i.yAxisWidth+i.yAxisTitleWidth,a=(e.width-2*i.padding-n)/(e.enableScroll?Math.min(5,t.length):t.length),o=[],r=i.padding+n,s=e.width-i.padding;return t.forEach(function(t,e){o.push(r+e*a)}),!0===e.enableScroll?o.push(r+t.length*a):o.push(s),{xAxisPoints:o,startX:r,endX:s,eachSpacing:a}}function w(t,e,i,n,a,o,r){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=[],h=o.height-2*r.padding-r.xAxisHeight-r.legendHeight;return t.forEach(function(t,c){if(null===t)l.push(null);else{var f={};f.x=n[c]+Math.round(a/2);var d=h*(t-e)/(i-e);d*=s,f.y=o.height-r.xAxisHeight-r.legendHeight-Math.round(d)-r.padding,l.push(f)}}),l}function L(t,e,i){var n=f(t);n=n.filter(function(t){return null!==t});var a=Math.min.apply(this,n),o=Math.max.apply(this,n);if("number"==typeof e.yAxis.min&&(a=Math.min(e.yAxis.min,a)),"number"==typeof e.yAxis.max&&(o=Math.max(e.yAxis.max,o)),a===o){var r=o||1;a-=r,o+=r}for(var s=h(a,o),l=s.minRange,c=[],d=(s.maxRange-l)/i.yAxisSplit,x=0;x<=i.yAxisSplit;x++)c.push(l+d*x);return c.reverse()}function k(t,e,i){var n=L(t,e,i),a=i.yAxisWidth,o=n.map(function(t){return t=et.toFixed(t,2),t=e.yAxis.format?e.yAxis.format(Number(t)):t,a=Math.max(a,c(t)+5),t});return!0===e.yAxis.disabled&&(a=0),{rangesFormat:o,ranges:n,yAxisWidth:a}}function C(t,e,i,n){n.beginPath(),n.setStrokeStyle("#ffffff"),n.setLineWidth(1),n.setFillStyle(e),"diamond"===i?t.forEach(function(t,e){null!==t&&(n.moveTo(t.x,t.y-4.5),n.lineTo(t.x-4.5,t.y),n.lineTo(t.x,t.y+4.5),n.lineTo(t.x+4.5,t.y),n.lineTo(t.x,t.y-4.5))}):"circle"===i?t.forEach(function(t,e){null!==t&&(n.moveTo(t.x+3.5,t.y),n.arc(t.x,t.y,4,0,2*Math.PI,!1))}):"rect"===i?t.forEach(function(t,e){null!==t&&(n.moveTo(t.x-3.5,t.y-3.5),n.rect(t.x-3.5,t.y-3.5,7,7))}):"triangle"===i&&t.forEach(function(t,e){null!==t&&(n.moveTo(t.x,t.y-4.5),n.lineTo(t.x-4.5,t.y+4.5),n.lineTo(t.x+4.5,t.y+4.5),n.lineTo(t.x,t.y-4.5))}),n.closePath(),n.fill(),n.stroke()}function H(t,e,i){var n=t.title.fontSize||e.titleFontSize,a=t.subtitle.fontSize||e.subtitleFontSize,o=t.title.name||"",r=t.subtitle.name||"",s=t.title.color||e.titleColor,l=t.subtitle.color||e.subtitleColor,h=o?n:0,f=r?a:0;if(r){var d=c(r,a),x=(t.width-d)/2+(t.subtitle.offsetX||0),u=(t.height-e.legendHeight+a)/2;o&&(u-=(h+5)/2),i.beginPath(),i.setFontSize(a),i.setFillStyle(l),i.fillText(r,x,u),i.stroke(),i.closePath()}if(o){var g=c(o,n),p=(t.width-g)/2+(t.title.offsetX||0),y=(t.height-e.legendHeight+n)/2;r&&(y+=(f+5)/2),i.beginPath(),i.setFontSize(n),i.setFillStyle(s),i.fillText(o,p,y),i.stroke(),i.closePath()}}function I(t,e,i,n){var a=e.data;n.beginPath(),n.setFontSize(i.fontSize),n.setFillStyle("#666666"),t.forEach(function(t,i){if(null!==t){var o=e.format?e.format(a[i]):a[i];n.fillText(o,t.x-c(o)/2,t.y-2)}}),n.closePath(),n.stroke()}function z(t,e,i,n,a,o){var s=n.extra.radar||{};e+=a.radarLabelTextMargin,o.beginPath(),o.setFontSize(a.fontSize),o.setFillStyle(s.labelColor||"#666666"),t.forEach(function(t,s){var l={x:e*Math.cos(t),y:e*Math.sin(t)},h=r(l.x,l.y,i),f=h.x,d=h.y;et.approximatelyEqual(l.x,0)?f-=c(n.categories[s]||"")/2:l.x<0&&(f-=c(n.categories[s]||"")),o.fillText(n.categories[s]||"",f,d+a.fontSize/2)}),o.stroke(),o.closePath()}function D(t,e,i,n,a,o){var l=a+i.pieChartLinePadding,h=[],f=null;t.map(function(t){return{arc:2*Math.PI-(t._start_+2*Math.PI*t._proportion_/2),text:t.format?t.format(+t._proportion_.toFixed(2)):et.toFixed(100*t._proportion_)+"%",color:t.color}}).forEach(function(t){var e=Math.cos(t.arc)*l,n=Math.sin(t.arc)*l,o=Math.cos(t.arc)*a,r=Math.sin(t.arc)*a,d=e>=0?e+i.pieChartTextPadding:e-i.pieChartTextPadding,x=n,u=c(t.text),g=x;f&&et.isSameXCoordinateArea(f.start,{x:d})&&(g=d>0?Math.min(x,f.start.y):e<0?Math.max(x,f.start.y):x>0?Math.max(x,f.start.y):Math.min(x,f.start.y)),d<0&&(d-=u);var p={lineStart:{x:o,y:r},lineEnd:{x:e,y:n},start:{x:d,y:g},width:u,height:i.fontSize,text:t.text,color:t.color};f=s(p,f),h.push(f)}),h.forEach(function(t){var e=r(t.lineStart.x,t.lineStart.y,o),a=r(t.lineEnd.x,t.lineEnd.y,o),s=r(t.start.x,t.start.y,o);n.setLineWidth(1),n.setFontSize(i.fontSize),n.beginPath(),n.setStrokeStyle(t.color),n.setFillStyle(t.color),n.moveTo(e.x,e.y);var l=t.start.x<0?s.x+t.width:s.x,h=t.start.x<0?s.x-5:s.x+5;n.quadraticCurveTo(a.x,a.y,l,s.y),n.moveTo(e.x,e.y),n.stroke(),n.closePath(),n.beginPath(),n.moveTo(s.x+t.width,s.y),n.arc(l,s.y,2,0,2*Math.PI),n.closePath(),n.fill(),n.beginPath(),n.setFillStyle("#666666"),n.fillText(t.text,h,s.y+3),n.closePath(),n.stroke(),n.closePath()})}function W(t,e,i,n){var a=i.padding,o=e.height-i.padding-i.xAxisHeight-i.legendHeight;n.beginPath(),n.setStrokeStyle("#cccccc"),n.setLineWidth(1),n.moveTo(t,a),n.lineTo(t,o),n.stroke(),n.closePath()}function O(e,i,n,a,o){var r=!1;(i=t({x:0,y:0},i)).y-=8;var s=e.map(function(t){return c(t.text)}),l=9+4*a.toolTipPadding+Math.max.apply(null,s),h=2*a.toolTipPadding+e.length*a.toolTipLineHeight;i.x-Math.abs(n._scrollDistance_)+8+l>n.width&&(r=!0),o.beginPath(),o.setFillStyle(n.tooltip.option.background||a.toolTipBackground),o.setGlobalAlpha(a.toolTipOpacity),r?(o.moveTo(i.x,i.y+10),o.lineTo(i.x-8,i.y+10-5),o.lineTo(i.x-8,i.y+10+5),o.moveTo(i.x,i.y+10),o.fillRect(i.x-l-8,i.y,l,h)):(o.moveTo(i.x,i.y+10),o.lineTo(i.x+8,i.y+10-5),o.lineTo(i.x+8,i.y+10+5),o.moveTo(i.x,i.y+10),o.fillRect(i.x+8,i.y,l,h)),o.closePath(),o.fill(),o.setGlobalAlpha(1),e.forEach(function(t,e){o.beginPath(),o.setFillStyle(t.color);var n=i.x+8+2*a.toolTipPadding,s=i.y+(a.toolTipLineHeight-a.fontSize)/2+a.toolTipLineHeight*e+a.toolTipPadding;r&&(n=i.x-l-8+2*a.toolTipPadding),o.fillRect(n,s,4,a.fontSize),o.closePath()}),o.beginPath(),o.setFontSize(a.fontSize),o.setFillStyle("#ffffff"),e.forEach(function(t,e){var n=i.x+8+2*a.toolTipPadding+4+5;r&&(n=i.x-l-8+2*a.toolTipPadding+4+5);var s=i.y+(a.toolTipLineHeight-a.fontSize)/2+a.toolTipLineHeight*e+a.toolTipPadding;o.fillText(t.text,n,s+a.fontSize)}),o.stroke(),o.closePath()}function X(t,e,i,n){var a=i.xAxisHeight+(e.height-i.xAxisHeight-c(t))/2;n.save(),n.beginPath(),n.setFontSize(i.fontSize),n.setFillStyle(e.yAxis.titleFontColor||"#333333"),n.translate(0,e.height),n.rotate(-90*Math.PI/180),n.fillText(t,a,i.padding+.5*i.fontSize),n.stroke(),n.closePath(),n.restore()}function G(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=k(t,e,i).ranges,r=F(e.categories,e,i),s=r.xAxisPoints,l=r.eachSpacing,h=o.pop(),c=o.shift();return n.save(),e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&n.translate(e._scrollDistance_,0),t.forEach(function(o,r){var f=w(o.data,h,c,s,l,e,i,a);f=E(f,l,t.length,r,i,e),n.beginPath(),n.setFillStyle(o.color),f.forEach(function(t,a){if(null!==t){var o=t.x-t.width/2+1,r=e.height-t.y-i.padding-i.xAxisHeight-i.legendHeight;n.moveTo(o,t.y),n.rect(o,t.y,t.width-2,r)}}),n.closePath(),n.fill()}),t.forEach(function(o,r){var f=w(o.data,h,c,s,l,e,i,a);f=E(f,l,t.length,r,i,e),!1!==e.dataLabel&&1===a&&I(f,o,i,n)}),n.restore(),{xAxisPoints:s,eachSpacing:l}}function R(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=k(t,e,i).ranges,s=F(e.categories,e,i),l=s.xAxisPoints,h=s.eachSpacing,c=r.pop(),f=r.shift(),d=e.height-i.padding-i.xAxisHeight-i.legendHeight,x=[];return n.save(),e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&n.translate(e._scrollDistance_,0),e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===a&&W(e.tooltip.offset.x,e,i,n),t.forEach(function(t,r){var s=w(t.data,c,f,l,h,e,i,a);if(x.push(s),S(s).forEach(function(i){if(n.beginPath(),n.setStrokeStyle(t.color),n.setFillStyle(t.color),n.setGlobalAlpha(.6),n.setLineWidth(2),i.length>1){var a=i[0],r=i[i.length-1];n.moveTo(a.x,a.y),"curve"===e.extra.lineStyle?i.forEach(function(t,e){if(e>0){var a=o(i,e-1);n.bezierCurveTo(a.ctrA.x,a.ctrA.y,a.ctrB.x,a.ctrB.y,t.x,t.y)}}):i.forEach(function(t,e){e>0&&n.lineTo(t.x,t.y)}),n.lineTo(r.x,d),n.lineTo(a.x,d),n.lineTo(a.x,a.y)}else{var s=i[0];n.moveTo(s.x-h/2,s.y),n.lineTo(s.x+h/2,s.y),n.lineTo(s.x+h/2,d),n.lineTo(s.x-h/2,d),n.moveTo(s.x-h/2,s.y)}n.closePath(),n.fill(),n.setGlobalAlpha(1)}),!1!==e.dataPointShape){var u=i.dataPointShape[r%i.dataPointShape.length];C(s,t.color,u,n)}}),!1!==e.dataLabel&&1===a&&t.forEach(function(t,o){I(w(t.data,c,f,l,h,e,i,a),t,i,n)}),n.restore(),{xAxisPoints:l,calPoints:x,eachSpacing:h}}function q(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=k(t,e,i).ranges,s=F(e.categories,e,i),l=s.xAxisPoints,h=s.eachSpacing,c=r.pop(),f=r.shift(),d=[];return n.save(),e._scrollDistance_&&0!==e._scrollDistance_&&!0===e.enableScroll&&n.translate(e._scrollDistance_,0),e.tooltip&&e.tooltip.textList&&e.tooltip.textList.length&&1===a&&W(e.tooltip.offset.x,e,i,n),t.forEach(function(t,r){var s=w(t.data,c,f,l,h,e,i,a);if(d.push(s),S(s).forEach(function(i,a){n.beginPath(),n.setStrokeStyle(t.color),n.setLineWidth(2),1===i.length?(n.moveTo(i[0].x,i[0].y),n.arc(i[0].x,i[0].y,1,0,2*Math.PI)):(n.moveTo(i[0].x,i[0].y),"curve"===e.extra.lineStyle?i.forEach(function(t,e){if(e>0){var a=o(i,e-1);n.bezierCurveTo(a.ctrA.x,a.ctrA.y,a.ctrB.x,a.ctrB.y,t.x,t.y)}}):i.forEach(function(t,e){e>0&&n.lineTo(t.x,t.y)}),n.moveTo(i[0].x,i[0].y)),n.closePath(),n.stroke()}),!1!==e.dataPointShape){var x=i.dataPointShape[r%i.dataPointShape.length];C(s,t.color,x,n)}}),!1!==e.dataLabel&&1===a&&t.forEach(function(t,o){I(w(t.data,c,f,l,h,e,i,a),t,i,n)}),n.restore(),{xAxisPoints:l,calPoints:d,eachSpacing:h}}function B(t,e,i,n){i.save(),t._scrollDistance_&&0!==t._scrollDistance_&&!0===t.enableScroll&&i.translate(t._scrollDistance_,0),t.tooltip&&t.tooltip.textList&&t.tooltip.textList.length&&1===n&&O(t.tooltip.textList,t.tooltip.offset,t,e,i),i.restore()}function j(t,e,i,n){var o=F(t,e,i),r=o.xAxisPoints,s=(o.startX,o.endX,o.eachSpacing),l=e.height-i.padding-i.xAxisHeight-i.legendHeight,h=l+i.xAxisLineHeight;n.save(),e._scrollDistance_&&0!==e._scrollDistance_&&n.translate(e._scrollDistance_,0),n.beginPath(),n.setStrokeStyle(e.xAxis.gridColor||"#cccccc"),!0!==e.xAxis.disableGrid&&("calibration"===e.xAxis.type?r.forEach(function(t,e){e>0&&(n.moveTo(t-s/2,l),n.lineTo(t-s/2,l+4))}):r.forEach(function(t,e){n.moveTo(t,l),n.lineTo(t,h)})),n.closePath(),n.stroke();var f=e.width-2*i.padding-i.yAxisWidth-i.yAxisTitleWidth,d=Math.min(t.length,Math.ceil(f/i.fontSize/4)),x=Math.ceil(t.length/d);t=t.map(function(t,e){return e%x!=0?"":t}),0===i._xAxisTextAngle_?(n.beginPath(),n.setFontSize(i.fontSize),n.setFillStyle(e.xAxis.fontColor||"#666666"),t.forEach(function(t,e){var a=s/2-c(t)/2;n.fillText(t,r[e]+a,l+i.fontSize+5)}),n.closePath(),n.stroke()):t.forEach(function(t,o){n.save(),n.beginPath(),n.setFontSize(i.fontSize),n.setFillStyle(e.xAxis.fontColor||"#666666");var h=c(t),f=s/2-h,d=a(r[o]+s/2,l+i.fontSize/2+5,e.height),x=d.transX,u=d.transY;n.rotate(-1*i._xAxisTextAngle_),n.translate(x,u),n.fillText(t,r[o]+f,l+i.fontSize+5),n.closePath(),n.stroke(),n.restore()}),n.restore()}function N(t,e,i){for(var n=t.height-2*e.padding-e.xAxisHeight-e.legendHeight,a=Math.floor(n/e.yAxisSplit),o=e.yAxisWidth+e.yAxisTitleWidth,r=e.padding+o,s=t.width-e.padding,l=[],h=0;h<e.yAxisSplit;h++)l.push(e.padding+a*h);l.push(e.padding+a*e.yAxisSplit+2),i.beginPath(),i.setStrokeStyle(t.yAxis.gridColor||"#cccccc"),i.setLineWidth(1),l.forEach(function(t,e){i.moveTo(r,t),i.lineTo(s,t)}),i.closePath(),i.stroke()}function Y(t,e,i,n){if(!0!==e.yAxis.disabled){var a=k(t,e,i).rangesFormat,o=i.yAxisWidth+i.yAxisTitleWidth,r=e.height-2*i.padding-i.xAxisHeight-i.legendHeight,s=Math.floor(r/i.yAxisSplit),l=i.padding+o,h=e.width-i.padding,c=e.height-i.padding-i.xAxisHeight-i.legendHeight;n.setFillStyle(e.background||"#ffffff"),e._scrollDistance_<0&&n.fillRect(0,0,l,c+i.xAxisHeight+5),n.fillRect(h,0,e.width,c+i.xAxisHeight+5);for(var f=[],d=0;d<=i.yAxisSplit;d++)f.push(i.padding+s*d);n.stroke(),n.beginPath(),n.setFontSize(i.fontSize),n.setFillStyle(e.yAxis.fontColor||"#666666"),a.forEach(function(t,e){var a=f[e]?f[e]:c;n.fillText(t,i.padding+i.yAxisTitleWidth,a+i.fontSize/2)}),n.closePath(),n.stroke(),e.yAxis.title&&X(e.yAxis.title,e,i,n)}}function Z(t,e,i,n){if(e.legend){T(t,e,i).legendList.forEach(function(t,a){t.forEach(function(t){});var o=(e.width-0)/2+5,r=e.height-i.padding-i.legendHeight+a*(i.fontSize+8)+5+8;n.setFontSize(i.fontSize),t.forEach(function(t){switch(e.type){case"line":n.beginPath(),n.setLineWidth(1),n.setStrokeStyle(t.color),n.moveTo(o-2,r+5),n.lineTo(o+17,r+5),n.stroke(),n.closePath(),n.beginPath(),n.setLineWidth(1),n.setStrokeStyle("#ffffff"),n.setFillStyle(t.color),n.moveTo(o+7.5,r+5),n.arc(o+7.5,r+5,4,0,2*Math.PI),n.fill(),n.stroke(),n.closePath();break;case"pie":case"ring":n.beginPath(),n.setFillStyle(t.color),n.moveTo(o+7.5,r+5),n.arc(o+7.5,r+5,7,0,2*Math.PI),n.closePath(),n.fill();break;default:n.beginPath(),n.setFillStyle(t.color),n.moveTo(o,r),n.rect(o,r,15,10),n.closePath(),n.fill()}o+=20,n.beginPath(),n.setFillStyle(e.extra.legendTextColor||"#333333"),n.fillText(t.name,o,r+9),n.closePath(),n.stroke(),o+=c(t.name)+10})})}}function J(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=e.extra.pie||{};t=M(t,a);var r={x:e.width/2,y:(e.height-i.legendHeight)/2},s=Math.min(r.x-i.pieChartLinePadding-i.pieChartTextPadding-i._pieTextMaxLength_,r.y-i.pieChartLinePadding-i.pieChartTextPadding);if(e.dataLabel?s-=10:s-=2*i.padding,(t=t.map(function(t){return t._start_+=(o.offsetAngle||0)*Math.PI/180,t})).forEach(function(t){n.beginPath(),n.setLineWidth(2),n.setStrokeStyle("#ffffff"),n.setFillStyle(t.color),n.moveTo(r.x,r.y),n.arc(r.x,r.y,s,t._start_,t._start_+2*t._proportion_*Math.PI),n.closePath(),n.fill(),!0!==e.disablePieStroke&&n.stroke()}),"ring"===e.type){var l=.6*s;"number"==typeof e.extra.ringWidth&&e.extra.ringWidth>0&&(l=Math.max(0,s-e.extra.ringWidth)),n.beginPath(),n.setFillStyle(e.background||"#ffffff"),n.moveTo(r.x,r.y),n.arc(r.x,r.y,l,0,2*Math.PI),n.closePath(),n.fill()}if(!1!==e.dataLabel&&1===a){for(var h=!1,c=0,f=t.length;c<f;c++)if(t[c].data>0){h=!0;break}h&&D(t,e,i,n,s,r)}return 1===a&&"ring"===e.type&&H(e,i,n),{center:r,radius:s,series:t}}function K(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=e.extra.radar||{},s=u(e.categories.length),l={x:e.width/2,y:(e.height-i.legendHeight)/2},h=Math.min(l.x-(x(e.categories)+i.radarLabelTextMargin),l.y-i.radarLabelTextMargin);h-=i.padding,n.beginPath(),n.setLineWidth(1),n.setStrokeStyle(o.gridColor||"#cccccc"),s.forEach(function(t){var e=r(h*Math.cos(t),h*Math.sin(t),l);n.moveTo(l.x,l.y),n.lineTo(e.x,e.y)}),n.stroke(),n.closePath();for(var c=1;c<=i.radarGridCount;c++)!function(t){var e={};n.beginPath(),n.setLineWidth(1),n.setStrokeStyle(o.gridColor||"#cccccc"),s.forEach(function(a,o){var s=r(h/i.radarGridCount*t*Math.cos(a),h/i.radarGridCount*t*Math.sin(a),l);0===o?(e=s,n.moveTo(s.x,s.y)):n.lineTo(s.x,s.y)}),n.lineTo(e.x,e.y),n.stroke(),n.closePath()}(c);return b(s,l,h,t,e,a).forEach(function(t,a){if(n.beginPath(),n.setFillStyle(t.color),n.setGlobalAlpha(.6),t.data.forEach(function(t,e){0===e?n.moveTo(t.position.x,t.position.y):n.lineTo(t.position.x,t.position.y)}),n.closePath(),n.fill(),n.setGlobalAlpha(1),!1!==e.dataPointShape){var o=i.dataPointShape[a%i.dataPointShape.length];C(t.data.map(function(t){return t.position}),t.color,o,n)}}),z(s,h,l,e,i,n),{center:l,radius:h,angleList:s}}function Q(t,e){e.draw()}function U(t){this.isStop=!1,t.duration=void 0===t.duration?1e3:t.duration,t.timing=t.timing||"linear";var e="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setTimeout?function(t,e){setTimeout(function(){var e=+new Date;t(e)},e)}:function(t){t(null)},i=null,n=function(a){if(null===a||!0===this.isStop)return t.onProcess&&t.onProcess(1),void(t.onAnimationFinish&&t.onAnimationFinish());if(null===i&&(i=a),a-i<t.duration){var o=(a-i)/t.duration;o=(0,it[t.timing])(o),t.onProcess&&t.onProcess(o),e(n,17)}else t.onProcess&&t.onProcess(1),t.onAnimationFinish&&t.onAnimationFinish()};n=n.bind(this),e(n,17)}function V(t,e,i,n){var a=this,o=e.series,r=e.categories,s=T(o=l(o,i),e,i).legendHeight;i.legendHeight=s;var h=k(o,e,i).yAxisWidth;if(i.yAxisWidth=h,r&&r.length){var c=A(r,e,i),f=c.xAxisHeight,d=c.angle;i.xAxisHeight=f,i._xAxisTextAngle_=d}"pie"!==t&&"ring"!==t||(i._pieTextMaxLength_=!1===e.dataLabel?0:_(o));var x=e.animation?1e3:0;switch(this.animationInstance&&this.animationInstance.stop(),t){case"line":this.animationInstance=new U({timing:"easeIn",duration:x,onProcess:function(t){N(e,i,n);var s=q(o,e,i,n,t),l=s.xAxisPoints,h=s.calPoints,c=s.eachSpacing;a.chartData.xAxisPoints=l,a.chartData.calPoints=h,a.chartData.eachSpacing=c,j(r,e,i,n),Z(e.series,e,i,n),Y(o,e,i,n),B(e,i,n,t),Q(e,n)},onAnimationFinish:function(){a.event.trigger("renderComplete")}});break;case"column":this.animationInstance=new U({timing:"easeIn",duration:x,onProcess:function(t){N(e,i,n);var s=G(o,e,i,n,t),l=s.xAxisPoints,h=s.eachSpacing;a.chartData.xAxisPoints=l,a.chartData.eachSpacing=h,j(r,e,i,n),Z(e.series,e,i,n),Y(o,e,i,n),Q(e,n)},onAnimationFinish:function(){a.event.trigger("renderComplete")}});break;case"area":this.animationInstance=new U({timing:"easeIn",duration:x,onProcess:function(t){N(e,i,n);var s=R(o,e,i,n,t),l=s.xAxisPoints,h=s.calPoints,c=s.eachSpacing;a.chartData.xAxisPoints=l,a.chartData.calPoints=h,a.chartData.eachSpacing=c,j(r,e,i,n),Z(e.series,e,i,n),Y(o,e,i,n),B(e,i,n,t),Q(e,n)},onAnimationFinish:function(){a.event.trigger("renderComplete")}});break;case"ring":case"pie":this.animationInstance=new U({timing:"easeInOut",duration:x,onProcess:function(t){a.chartData.pieData=J(o,e,i,n,t),Z(e.series,e,i,n),Q(e,n)},onAnimationFinish:function(){a.event.trigger("renderComplete")}});break;case"radar":this.animationInstance=new U({timing:"easeInOut",duration:x,onProcess:function(t){a.chartData.radarData=K(o,e,i,n,t),Z(e.series,e,i,n),Q(e,n)},onAnimationFinish:function(){a.event.trigger("renderComplete")}})}}function $(){this.events={}}var tt={yAxisWidth:15,yAxisSplit:5,xAxisHeight:40,xAxisLineHeight:40,legendHeight:40,yAxisTitleWidth:15,padding:12,columePadding:3,fontSize:10,dataPointShape:["diamond","circle","triangle","rect"],colors:["#7cb5ec","#f7a35c","#434348","#90ed7d","#f15c80","#8085e9"],pieChartLinePadding:25,pieChartTextPadding:15,xAxisTextPadding:3,titleColor:"#333333",titleFontSize:20,subtitleColor:"#999999",subtitleFontSize:15,toolTipPadding:3,toolTipBackground:"#000000",toolTipOpacity:.7,toolTipLineHeight:40,radarGridCount:3,radarLabelTextMargin:40},et={toFixed:function(t,e){return e=e||2,this.isFloat(t)&&(t=t.toFixed(e)),t},isFloat:function(t){return t%1!=0},approximatelyEqual:function(t,e){return Math.abs(t-e)<1e-10},isSameSign:function(t,e){return Math.abs(t)===t&&Math.abs(e)===e||Math.abs(t)!==t&&Math.abs(e)!==e},isSameXCoordinateArea:function(t,e){return this.isSameSign(t.x,e.x)},isCollision:function(t,e){return t.end={},t.end.x=t.start.x+t.width,t.end.y=t.start.y-t.height,e.end={},e.end.x=e.start.x+e.width,e.end.y=e.start.y-e.height,!(e.start.x>t.end.x||e.end.x<t.start.x||e.end.y>t.start.y||e.start.y<t.end.y)}},it={easeIn:function(t){return Math.pow(t,3)},easeOut:function(t){return Math.pow(t-1,3)+1},easeInOut:function(t){return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},linear:function(t){return t}};U.prototype.stop=function(){this.isStop=!0},$.prototype.addEventListener=function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},$.prototype.trigger=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];var n=e[0],a=e.slice(1);this.events[n]&&this.events[n].forEach(function(t){try{t.apply(null,a)}catch(t){console.error(t)}})};var nt=function(e){e.title=e.title||{},e.subtitle=e.subtitle||{},e.yAxis=e.yAxis||{},e.xAxis=e.xAxis||{},e.extra=e.extra||{},e.legend=!1!==e.legend,e.animation=!1!==e.animation;var i=t({},tt);i.yAxisTitleWidth=!0!==e.yAxis.disabled&&e.yAxis.title?i.yAxisTitleWidth:0,i.pieChartLinePadding=!1===e.dataLabel?0:i.pieChartLinePadding,i.pieChartTextPadding=!1===e.dataLabel?0:i.pieChartTextPadding,this.opts=e,this.config=i,this.context=wx.createCanvasContext(e.canvasId),this.chartData={},this.event=new $,this.scrollOption={currentOffset:0,startTouchX:0,distance:0},V.call(this,e.type,e,i,this.context)};nt.prototype.updateData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.opts.series=e.series||this.opts.series,this.opts.categories=e.categories||this.opts.categories,this.opts.title=t({},this.opts.title,e.title||{}),this.opts.subtitle=t({},this.opts.subtitle,e.subtitle||{}),V.call(this,this.opts.type,this.opts,this.config,this.context)},nt.prototype.stopAnimation=function(){this.animationInstance&&this.animationInstance.stop()},nt.prototype.addEventListener=function(t,e){this.event.addEventListener(t,e)},nt.prototype.getCurrentDataIndex=function(t){var e=t.touches&&t.touches.length?t.touches:t.changedTouches;if(e&&e.length){var i=e[0],n=i.x,a=i.y;return"pie"===this.opts.type||"ring"===this.opts.type?P({x:n,y:a},this.chartData.pieData):"radar"===this.opts.type?v({x:n,y:a},this.chartData.radarData,this.opts.categories.length):p({x:n,y:a},this.chartData.xAxisPoints,this.opts,this.config,Math.abs(this.scrollOption.currentOffset))}return-1},nt.prototype.showToolTip=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("line"===this.opts.type||"area"===this.opts.type){var n=this.getCurrentDataIndex(e),a=this.scrollOption.currentOffset,o=t({},this.opts,{_scrollDistance_:a,animation:!1});if(n>-1){var r=d(this.opts.series,n);if(0===r.length)V.call(this,o.type,o,this.config,this.context);else{var s=g(r,this.chartData.calPoints,n,this.opts.categories,i),l=s.textList,h=s.offset;o.tooltip={textList:l,offset:h,option:i},V.call(this,o.type,o,this.config,this.context)}}else V.call(this,o.type,o,this.config,this.context)}},nt.prototype.scrollStart=function(t){t.touches[0]&&!0===this.opts.enableScroll&&(this.scrollOption.startTouchX=t.touches[0].x)},nt.prototype.scroll=function(e){if(e.touches[0]&&!0===this.opts.enableScroll){var n=e.touches[0].x-this.scrollOption.startTouchX,a=this.scrollOption.currentOffset,o=i(a+n,this.chartData,this.config,this.opts);this.scrollOption.distance=n=o-a;var r=t({},this.opts,{_scrollDistance_:a+n,animation:!1});V.call(this,r.type,r,this.config,this.context)}},nt.prototype.scrollEnd=function(t){if(!0===this.opts.enableScroll){var e=this.scrollOption,i=e.currentOffset,n=e.distance;this.scrollOption.currentOffset=i+n,this.scrollOption.distance=0}},module.exports=nt; 
 			}); 
		define("app.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=require("data.js"),a=require("/utils/MD5.js");App({globalData:{md5:a,isWeb:!!window,wxAppId:"wxbc163aecb3210fcc",autoId:t.setting.autoId,comUrl:t.setting.comUrl+"/wc_mg/",paymentUrl:t.setting.payUrl,setting:t.setting,styleConfig:t.styleConfig,isPerson:t.isPerson,accountInfo:{},projectInfo:{appId:t.dataInfo.appId,projectIcon:t.dataInfo.projectIcon,projectName:t.dataInfo.projectName,PCStatus:t.dataInfo.PCStatus,projectType:t.dataInfo.projectType,homePageLayout:t.dataInfo.homePageLayout,hideInfoTabs:!0},ext:t.dataInfo.ext,customizeTabId:{},customizeTabsList:t.dataInfo.customizeTabsList,wxUserInfo:"",memberId:"",showHint:!0,g_location:{lat:0,lng:0},g_cityName:"",g_showAddress:"",isGroup:"",isQuery:!1,changeClassify:1,topayHidden:!1,moduleList:[],memberType:"",actDistribution:{}},onLaunch:function(t){console.log(" ------------ onLaunch ------------- ");var a=this;a.getProjectData(),a.initTabbarPath(a.globalData.projectInfo.projectType);var e="";"undefined"!=typeof sessionStorage&&(e=sessionStorage.getItem("globleThemeConfig")),e&&(a.globalData.styleConfig=JSON.parse(e))},onShow:function(t){console.log(" ------------ onShow ------------- ")},refreshProjectData:function(t){var a=this;return new Promise(function(e,o){wx.request({url:a.globalData.comUrl+"tabs_getDataByProjectId.action",data:{autoId:t},success:function(t){getCurrentPages();var o=a.getJsonData(t.data);e(o)}})})},initProjectData:function(a){a&&a.customizeTabsList&&(t.dataInfo.customizeTabsList=a.customizeTabsList,t.dataInfo.appId=a.appId,t.dataInfo.projectName=a.projectName,t.dataInfo.PCStatus=a.PCStatus,t.setting.name=a.projectName,t.setting.autoId=a.autoId,t.setting.comUrl=a.comUrl,t.setting.payUrl=a.payUrl,this.globalData.autoId=t.setting.autoId,this.globalData.setting=t.setting,this.globalData.projectInfo={appId:t.dataInfo.appId,projectIcon:t.dataInfo.projectIcon,projectName:t.dataInfo.projectName,PCStatus:t.dataInfo.PCStatus},this.globalData.customizeTabsList=t.dataInfo.customizeTabsList,this.getProjectData())},getProjectData:function(){var a=this,e={};(t.dataInfo.customizeTabsList||[]).forEach(function(t){e[t.sysTabNameTag||t.sysTabName]=t.customizeId||t.id}),a.globalData.customizeTabId=e},getCustomizeId:function(a){if(!a)return null;var e=this;if(e.globalData.customizeTabId[a]&&e.globalData.customizeTabId[a])return e.globalData.customizeTabId[a];for(var o=0;o<t.dataInfo.customizeTabsList.length;o++){var s=t.dataInfo.customizeTabsList[o];if(s.sysTabNameTag&&""!=s.sysTabNameTag&&s.sysTabNameTag==a)return s.customizeId;if(s.sysTabName&&""!=s.sysTabName&&s.sysTabName==a)return s.customizeId;if(s.data&&s.data.customizeTabsList&&s.data.customizeTabsList.length>0)for(var n=0;n<s.data.customizeTabsList.length;n++){var r=s.data.customizeTabsList[n];if(r.sysTabNameTag&&""!=r.sysTabNameTag&&r.sysTabNameTag==a)return r.customizeId||r.id;if(r.sysTabName&&""!=r.sysTabName&&r.sysTabName==a)return r.customizeId||r.id}}},getWxUserInfo:function(t){console.log("======start get wxUserInfo =====");var a=this;a.globalData.wxUserInfo?("function"==typeof t&&t(a.globalData.wxUserInfo),console.log("====== cb equals function =====")):wx.login({success:function(e){wx.getUserInfo({success:function(e){a.globalData.wxUserInfo=e.userInfo,"function"==typeof t&&t(a.globalData.wxUserInfo)}})}})},loginVzSystem:function(t){var a=this;if(wx.canIUse("login"))return new Promise(function(t,e){wx.login({success:function(e){var o=e.code,s=wx.getStorageSync("openId"+a.globalData.autoId);return s&&s.length>0?(console.log("======openId:"+s+" ====="),void t()):!o||o.length<1?(console.log("======getOpenId failed   wxCode="+o+" ====="),void t()):void wx.request({url:a.globalData.paymentUrl+"/WechatAlipay/GetOpenId",data:{projectId:a.globalData.projectInfo.appId,code:o},success:function(e){var o=a.getJsonData(e.data);console.log("====== openId:"+o.openId+" ====="),wx.setStorageSync("openId"+a.globalData.autoId,o.openId);var s=o.openId;if(!s||s.length<1)t();else{var n={appId:a.globalData.projectInfo.appId,openId:s},r=wx.getStorageSync("parentId"+a.globalData.autoId);r&&(n.parentId=r),wx.request({url:a.globalData.comUrl+"member_memberRegistration.action",data:n,success:function(e){console.log(e.data);var o=a.getJsonData(e.data);o.isDistributor&&"3"==o.type?wx.setStorageSync("memberType"+a.globalData.autoId,o.type):wx.setStorageSync("memberType"+a.globalData.autoId,"");var s="memberId"+a.globalData.autoId;wx.setStorageSync(s,o.memberId),a.globalData.memberId=o.memberId,console.log("====== memberId:"+o.memberId+" ====="),t()},fail:function(){console.log("login failed")}})}},fail:function(t){console.log(t)}})}})})},getOpenId:function(t){console.log("====== get openId start =====");var a=this;return new Promise(function(e,o){var s=wx.getStorageSync("openId"+a.globalData.autoId);if(s&&s.length>0)return console.log("======openId:"+s+" ====="),void e(s);!t||t.length<1?console.log("======getOpenId failed   wxCode="+t+" ====="):wx.request({url:a.globalData.paymentUrl+"/WechatAlipay/GetOpenId",data:{projectId:a.globalData.projectInfo.appId,code:t},success:function(t){var o=a.getJsonData(t.data);console.log("====== openId:"+o.openId+" ====="),wx.setStorageSync("openId"+a.globalData.autoId,o.openId),e(o.openId)},fail:function(t){console.log(t)}})})},getJsonData:function(t){var a=t.substring(5,t.length-1);return JSON.parse(a)},hint:function(t){t&&wx.showModal({title:t,showCancel:!1})},showToast:function(t){wx.showToast({title:t,icon:"none",duration:2e3})},uploadimg:function(t){var a=this,e=t.i?t.i:0,o=t.success?t.success:0,s=t.fail?t.fail:0;wx.uploadFile({url:t.url,filePath:t.path[e],name:"file",formData:null,success:function(t){o++,console.log(t),console.log(e)},fail:function(t){s++,console.log("fail:"+e+"fail:"+s)},complete:function(){console.log(e),++e==t.path.length?(console.log("执行完毕"),console.log("成功："+o+" 失败："+s)):(console.log(e),t.i=e,t.success=o,t.fail=s,a.uploadimg(t))}})},getMemberId:function(){return wx.getStorageSync("memberId"+this.globalData.autoId)},modifyPicSize:function(t,a){var e=t.lastIndexOf(".");return t=t.substr(0,e)+a+t.substr(e,t.length-e)},getWeek:function(t){var a,e=t.split("-");return a=new Date(e[0],parseInt(e[1]-1),e[2]),"星期"+"日一二三四五六".charAt(a.getDay())},calculatDateBydays:function(t,a){t=t.replace(/-/g,"/"),console.log(t);var e=new Date(t),o=new Date(e.getFullYear(),e.getMonth(),e.getDate()+a);e.getFullYear();console.log(e.getDate());e.getMonth(),e.getDate();return o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate()},DateDiff:function(t,a){t=t.replace(/-/g,"/"),a=a.replace(/-/g,"/");var e,o,s;return e=t.split("-"),o=new Date(e[1]+"-"+e[2]+"-"+e[0]),e=a.split("-"),s=new Date(e[1]+"-"+e[2]+"-"+e[0]),parseInt(Math.abs(o-s)/1e3/60/60/24)},request:function(t){if(t&&t.url){if(0!=t.cache){var a=t.url+JSON.stringify(t.data||{}),e=wx.getStorageSync(a);e&&t.success(e);var o=t.success;t.success=function(t){!t||e.data&&t.data==e.data||(wx.setStorageSync(a,t),o(t))}}wx.request(t)}else console.log("app.request:","request url cannot be null")},filterSpecialSymbol:function(t){return t=t.replace(/&ldquo;/g,"“"),t=t.replace(/&rdquo;/g,"”"),t=t.replace(/&mdash;/g,"—"),t=t.replace(/&middot;/g,"·"),t=t.replace(/&hellip;/g,"…"),t=t.replace(/&nbsp;/g,"　"),t=t.replace(/<img(?=.*?\/>)/gi,'<img style="width: 100%; height: auto;" ')},initTabbarPath:function(t){switch(this.globalData.pagesPath={proPath:"/pages/product/product",cartPath:"/pages/self/cart/cart",storePath:"/pages/store/layout-o2o/store"},t){case"enterprise":case"enterprise-show":return void(this.globalData.pagesPath.storePath="/pages/store/layout-enterprise/store-detail/store-detail");case"meirong":return void(this.globalData.pagesPath.storePath="/pages/store/layout-meirong/store");case"cm-lc":return this.globalData.pagesPath.proPath="/pages/product/layout-cm-lc/product",this.globalData.pagesPath.storePath="/pages/store/layout-cm-lc/store",void(this.globalData.pagesPath.cartPath="/pages/self/cart/layout-cm-lc/cart")}}}); 
 			}); 	require("app.js");
 		__wxRoute = 'pages/index/index';__wxRouteBegin = true; 	define("pages/index/index.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var a,e=getApp(),o=e.globalData.projectInfo,i=e.globalData.customizeTabId,s=1,n=1,r=!1,c="",u="";Page((a={data:{styleConfig:e.globalData.styleConfig,productArr:[],productClass:[],moreArr:[],hotSaleList:[],adBranchList:[],posCity:"",minaInfo:"",hasBranch:!0,styleStatus:1,hiddenMerchant:!0,joinPhone:"",activityInfo:"",isGroup:"",isPerson:e.globalData.isPerson,isQuery:1==e.globalData.isPerson,showAddress:"",location:{},lat:"",lng:"",couponAdImg:"",advertisements:[],topHeight:"",isLoading:!1,activitySeckill:{},activityStart:"",hasSeckill:"",hideBigImg:!0,adBigImage:"",hiddenAiImg:!0,videoList:{},disProList:[],actDistribution:{},memberType:"",hideShareCoupon:!0,currentSwipermoreArr:0},swiperChange_advertisemore:function(t){this.setData({currentSwipermoreArr:t.detail.current})},checkIfHasAutoId:function(t){var a=this;if("undefined"!=typeof sessionStorage&&(!sessionStorage.getItem("globalAutoId")||t&&t.autoId||(t={autoId:sessionStorage.getItem("globalAutoId")})),!t||!t.autoId)return a.initData(),void e.refreshProjectData(e.globalData.autoId).then(function(t){wx.setStorageSync("autoId"+e.globalData.autoId,t),wx.setNavigationBarTitle({title:t.projectName})});if(t.autoId){"undefined"!=typeof sessionStorage&&sessionStorage.setItem("globalAutoId",t.autoId);var o=t.autoId,i=wx.getStorageSync("data_js");i.autoId==o?(i.autoId=o,e.initProjectData(i),e.getProjectData(),e.refreshProjectData(o).then(function(t){wx.setStorageSync("data_js",t)}),a.initData()):e.refreshProjectData(o).then(function(t){t.autoId=o,wx.setStorageSync("data_js",t),e.initProjectData(t),e.getProjectData(),a.initData()})}},initData:function(){o=e.globalData.projectInfo,i=e.globalData.customizeTabId;var t=wx.getStorageSync("autoId"+e.globalData.autoId);t.projectName?wx.setNavigationBarTitle({title:t.projectName}):wx.setNavigationBarTitle({title:e.globalData.projectInfo.projectName});var a=this,s=wx.getStorageSync("memberType"+e.globalData.autoId);a.setData({memberType:s}),a.getCustAndCateList(),a.getHomepageBaseInfo().then(function(){a.getHomePageTop(),a.getCustomizeTabList().then(function(){"1"==e.globalData.isGroup&&a.getActivity(),"1"==a.data.hasSeckill&&a.getSeckillActivity(),"1"==a.data.hasDistribution&&"3"==a.data.memberType?(a.checkDistribuction().then(function(){a.getHomepageProduct(),a.getReommendProducts()}),a.getDistributeProduct()):(a.getHomepageProduct(),a.getReommendProducts())})}),a.getHomepageAdvertise(),a.getLocation().then(function(){a.getBranchInfo()}),a.getMerchantHidden()},onLoad:function(t){console.log(" ------------ index:onLoad ------------- ");var a=this,o=decodeURIComponent(t.scene);o&&"undefined"!=o&&wx.setStorageSync("parentId"+e.globalData.autoId,o),e.loginVzSystem(),wx.getNetworkType({success:function(t){a.setData({netWorkType:t.networkType})}}),this.checkIfHasAutoId(t)},getHomePageTop:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getHomepageTop.action",data:{advertisementsCId:i.LynxHomePage,informationsCId:i.LynxPhoto_H_Info_Tab_Level2,productCId:i.LynxProductList},success:function(a){for(var o=e.getJsonData(a.data),i=0;i<o.advertisements.length;i++)o.advertisements[i].image=e.modifyPicSize(o.advertisements[i].image,"_r750x400p");if("O2O_V2"==t.data.minaInfo.subVersion){for(var s=Math.ceil(o.productClass.length/8),n=[],r=0;r<s;r++)n[r]=[],n[r].push(o.productClass.slice(8*r,8*(r+1)));t.setData({advertisements:o.advertisements,productClass:n})}else{for(var c=Math.ceil(o.productClass.length/4),u=[],l=0;l<c;l++)u[l]=[],u[l].push(o.productClass.slice(4*l,4*(l+1)));t.setData({advertisements:o.advertisements,productClass:u})}wx.stopPullDownRefresh()}})},getHomepageBaseInfo:function(){var t=this;return new Promise(function(a,i){wx.request({url:e.globalData.comUrl+"tabs_getHomepageBaseInfo.action",data:{projectId:o.appId},success:function(o){var i=e.getJsonData(o.data);e.globalData.changeClassify=i.minaInfo.productCategory,e.globalData.topayHidden=i.minaInfo.showCashOnDelivery,e.globalData.showComment=i.minaInfo.showComment,e.globalData.isQuery=i.minaInfo.allHidden,i.minaInfo.defShowAI&&!t.hasGoAI&&(t.hasGoAI=!0,wx.navigateTo({url:"/pages/packages/AI/index/index"})),t.setData({minaInfo:i.minaInfo,isQuery:i.minaInfo.allHidden,isLoading:!0}),i.minaInfo.videoHidden||t.getVideoList(),a(i)}})})},getDistributeProduct:function(){var t=this;e.request({url:e.globalData.comUrl+"activityProduct_findGroupsProduceList.action",data:{appId:e.globalData.projectInfo.appId,groupsId:"distribution",current:1,isHomePage:1},success:function(a){console.log(a.data);var e=a.data;t.setData({disProList:e.pageList})}})},checkDistribuction:function(){var t=this;return new Promise(function(a,o){wx.request({url:e.globalData.comUrl+"dis_checkDistribuction.action",data:{appId:e.globalData.projectInfo.appId,memberId:e.getMemberId()},success:function(o){var i=e.getJsonData(o.data);e.globalData.actDistribution=i.activityDistribution,t.setData({actDistribution:i.activityDistribution}),a()},fail:function(){e.hint(),a()}})})},getVideoList:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getVideoGalleryList.action",data:{appId:e.globalData.projectInfo.appId,customizeTabId:e.globalData.customizeTabId.Video_Gallery,isNeedHttps:0},success:function(a){console.log(a);var o=e.getJsonData(a.data);t.setData({videoList:o})}})},getBranchInfo:function(t){var a=this,s={appId:o.appId,projectId:o.appId,adLBSBranchCId:i.LynxAbout_Merchant,adProdCount:4,isAdvertisement:1,latitude:a.data.lat,longitude:a.data.lng,checkDistributionScope:1};t&&(s.latitude="23.131687",s.longitude="113.36391",s.checkDistributionScope=""),wx.request({url:e.globalData.comUrl+"tabs_getHomepageBranch.action",data:s,success:function(t){for(var o=e.getJsonData(t.data),i=[],s=0;s<o.adLBSBranchInfoList.pageList.length;s++){var n=o.adLBSBranchInfoList.pageList[s];n.pic1=e.modifyPicSize(n.pic1,"_r150x100p"),n.distance>=1e3?n.distance=n.distance/1e3+"km":n.distance=n.distance+"m";for(var r=0;r<n.productList.length;r++)n.productList[r].image=e.modifyPicSize(n.productList[r].image,"_r125x125p");i.push(n)}a.setData({adBranchList:i,hasBranch:0!=o.adLBSBranchInfoList.pageList.length})}})},getCustAndCateList:function(){var t=this;e.request({url:e.globalData.comUrl+"tabs_getCustAndCateList.action",data:{projectId:o.appId},success:function(a){console.log(a.data);var e=a.data.content,o=e.pageList;if(0!=o.length){var i=[],s=void 0,n=0==e.lineNum?2:e.lineNum,r=0==e.lineLimit?5:e.lineLimit,c=r*n;console.log(c),s=Math.ceil(o.length/c);for(var u=0;u<s;u++)i[u]=[],i[u].push(o.slice(c*u,c*(u+1)));var l=0,d=400;i.length>0&&(d=(l=170*Math.ceil(i[0][0].length/r)-20)+420),t.setData({HidePlaceImage:!0,moreArr:i,label:e,customHeight:l,topHeight:d})}}})},getHomepageProduct:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getHomepageProduct.action",data:{advertise:"",cityId:"",hotSale:"hotSale",isGroup:"1",productCId:i.LynxProductList,scroll:""},success:function(a){for(var o=e.getJsonData(a.data),i=0;i<o.hotSaleList.length;i++)o.hotSaleList[i].hotSaleImage=e.modifyPicSize(o.hotSaleList[i].hotSaleImage,"_r220x220p"),"5"==o.hotSaleList[i].actType||"3"==o.hotSaleList[i].actType||"6"==o.hotSaleList[i].actType&&"3"==t.data.memberType&&t.data.actDistribution.enable?o.hotSaleList[i].curPrice=o.hotSaleList[i].groupsPrice:1!=o.hotSaleList[i].purpose&&3!=o.hotSaleList[i].purpose||(o.hotSaleList[i].curPrice=o.hotSaleList[i].price);t.setData({hotSaleList:o.hotSaleList}),t.getJoinPhone()}})},getHomepageAdvertise:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getHomepageAdvertising.action",data:{projectId:o.appId},success:function(a){var o=e.getJsonData(a.data);o.PCAdevertising_activity[0]&&t.setData({couponAdImg:o.PCAdevertising_activity[0].picture1}),o.PCAdevertising_mid.length>0&&(o.PCAdevertising_mid[0]&&t.setData({PCAdevertising_mid:o.PCAdevertising_mid[0].picture1}),""==o.PCAdevertising_mid[0].picture1||void 0==o.PCAdevertising_mid[0].picture1?t.setData({hiddenAiImg:!0}):t.setData({hiddenAiImg:!1}))}})},getActivity:function(){var t=this;wx.request({url:e.globalData.comUrl+"activityProduct_groupsIndex.action",data:{appId:e.globalData.projectInfo.appId},success:function(a){clearInterval(c);var e=new Date(a.data.beginTime),o=new Date(a.data.nowTime),i=parseInt((e-o)/1e3);if(i>0)a.data.activityStart=!1,a.data.countDown=t.secondToTime(i),c=setInterval(function(){i--,a.data.countDown=t.secondToTime(i),t.setData({activityInfo:a.data}),i<1&&(clearInterval(c),t.refresh())},1e3);else{if(a.data.activityTime<=0)return;a.data.activityStart=!0,console.log(a.data),a.data.countDown=t.secondToTime(a.data.activityTime),c=setInterval(function(){a.data.activityTime--,a.data.countDown=t.secondToTime(a.data.activityTime),t.setData({activityInfo:a.data}),a.data.activityTime<=0&&(clearInterval(c),t.refresh())},1e3)}}})},getSeckillActivity:function(){var t=this;wx.request({url:e.globalData.comUrl+"activityProduct_groupsIndex.action",data:{appId:e.globalData.projectInfo.appId,actType:"3"},success:function(a){clearInterval(u);var e=new Date(a.data.beginTime),o=new Date(a.data.nowTime),i=parseInt((e-o)/1e3);if(i>0)a.data.activityStart=!1,a.data.countDown=t.secondToTime(i),u=setInterval(function(){i--,a.data.countDown=t.secondToTime(i),t.setData({activitySeckill:a.data}),i<1&&(clearInterval(u),t.refresh())},1e3);else{if(a.data.activityTime<=0)return;a.data.activityStart=!0,a.data.countDown=t.secondToTime(a.data.activityTime),u=setInterval(function(){a.data.activityTime--,a.data.countDown=t.secondToTime(a.data.activityTime),t.setData({activitySeckill:a.data}),a.data.activityTime<=0&&(clearInterval(u),t.refresh())},1e3)}}})},secondToTime:function(t){var a=Math.floor(t/3600/24),e=Math.floor(t/3600%24),o=Math.floor(t/60%60),i=Math.floor(t%60);return e<10&&(e="0"+e),o<10&&(o="0"+o),i<10&&(i="0"+i),{d:a,h:e,m:o,s:i}},getMerchantHidden:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getCustomizeTabsById.action",data:{appId:o.appId,customizeTabId:i.LynxAbout_Merchant},success:function(a){var o=e.getJsonData(a.data);t.setData({hiddenMerchant:o.isDeleted})}})},getLocation:function(t){var a=this;return new Promise(function(t,o){wx.getLocation({type:"wgs84",success:function(o){console.log(o),wx.request({url:"https://api.map.baidu.com/geocoder/v2/",data:{ak:"RPmvxqIQFLLaG05xh1nEWhCCevcfR4oF",coordtype:"wgs84ll",location:o.latitude+","+o.longitude,output:"json",pois:1,latest_admin:1},jsonp:!0,success:function(o){console.log("百度接口",o);var i=o.data.result.addressComponent.city+o.data.result.addressComponent.district+o.data.result.addressComponent.street+o.data.result.addressComponent.street_number;a.setData({address:o.data.result.addressComponent,showAddress:i,location:o.data.result.location,lat:o.data.result.location.lat,lng:o.data.result.location.lng}),e.globalData.g_location=o.data.result.location,e.globalData.g_showAddress=o.data.result.addressComponent.city,t()}})},fail:function(){a.getBranchInfo(!0),a.setData({address:"全国",showAddress:"全国"})}})})},getCouponInfo:function(t){var a=this;e.getMemberId();wx.request({url:e.globalData.comUrl+"act_getActivityList.action",data:{branchInfoId:-1,customizetabId:e.getCustomizeId("Activity")},success:function(t){var o=e.getJsonData(t.data);console.log(o),a.setData({couponList:validCoupon})},fail:function(t){e.hint(t)}})},getJoinPhone:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getAboutMerchant.action",data:{customizetabId:i.LynxApplyFor_About_Merchant},success:function(a){var o=e.getJsonData(a.data);t.setData({joinPhone:o.phone})}})},getCategory:function(){return new Promise(function(t,a){wx.request({url:e.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{appId:o.appId,customizeTabId:i["Photo-Info-Tab-Level2"]},success:function(a){var o=e.getJsonData(a.data);t(o)}})})},getCustomizeTabList:function(){var t=this;return new Promise(function(a,i){wx.request({url:e.globalData.comUrl+"tabs_getCustomizeTabList.action",data:{appId:o.appId},success:function(o){for(var i=e.getJsonData(o.data),s=0;s<i.length;s++)"Activity-Group"==i[s].sysTabName&&(e.globalData.isGroup="1",t.setData({isGroup:"1"})),"Activity-Kill"==i[s].sysTabName&&(e.globalData.isGroup="1",t.setData({hasSeckill:"1"})),"Activity-Distribution"==i[s].sysTabName&&(e.globalData.isGroup="1",t.setData({hasDistribution:"1"})),"CardNo"!=i[s].sysTabNameTag&&"CardNo"!=i[s].sysTabName||(e.globalData.isShowPrePay="1"),"Online-Chat"==i[s].sysTabName&&t.setData({hiddenService:!0});a(i)}})})},getProCategory:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getAppCategoryProductByCity.action",data:{appId:o.appId,customizeTabId:i.LynxProductList,count:6,jsoncallback:"",productName:"",isGroup:1},success:function(a){for(var o=a.data.substring(1).slice(0,-1),i=JSON.parse(o),s=0;s<i.length;s++)for(var n=0;n<i[s].productList.length;n++)i[s].productList[n].productImageList[0].imageURL&&(i[s].productList[n].productImageList[0].imageURL=e.modifyPicSize(i[s].productList[n].productImageList[0].imageURL,"_r300x300p"));t.setData({productArr:i})}})},getReommendProducts:function(){if(!r){r=!0;var t=this;wx.request({url:e.globalData.comUrl+"tabs_getAppProductByCity.action",data:{appId:o.appId,customizeTabId:i.LynxProductList,proId:"",disId:"",productName:"",current:s,cityId:"",isGroup:1},success:function(a){var o=e.getJsonData(a.data);n=o.pages;for(var i=0;i<o.pageList.length;i++)3==o.pageList[i].actType||5==o.pageList[i].actType||6==o.pageList[i].actType&&3==t.data.memberType&&t.data.actDistribution.enable?o.pageList[i].curPrice=o.pageList[i].groupsPrice:1!=o.pageList[i].purpose&&3!=o.pageList[i].purpose||(o.pageList[i].curPrice=o.pageList[i].price),o.pageList[i].productModelList[0]&&String(o.pageList[i].productModelList[0].stock).length>3&&(o.pageList[i].productModelList[0].stock=String(o.pageList[i].productModelList[0].stock).substring(0,3)),String(Math.abs(o.pageList[i].quantity)).length>3&&(o.pageList[i].quantity=String(Math.abs(o.pageList[i].quantity)).substring(0,3)),String(o.pageList[i].readTimes).length>3&&(o.pageList[i].readTimes=String(o.pageList[i].readTimes).substring(0,3)),o.pageList[i].productImageVOList[0].imageURL=e.modifyPicSize(o.pageList[i].productImageVOList[0].imageURL,"_r200x200p");t.setData({productArr:t.data.productArr.concat(o.pageList)}),r=!1}})}},toMoreFunction:function(t){switch(console.log(t.currentTarget.dataset.title),t.currentTarget.dataset.location){case"LynxProductList":1==this.data.isPerson?wx.navigateTo({url:"/pages/product/product"}):wx.switchTab({url:"/pages/product/product"}),this.setData({hideShareCoupon:!0});break;case"LynxAbout_Merchant":1==this.data.isPerson?wx.navigateTo({url:"/pages/store/layout-meirong/store"}):wx.switchTab({url:"/pages/store/layout-meirong/store"});break;case"LynxPhoto_Info_Post_Tab":wx.navigateTo({url:"/pages/supply/supply"});break;case"LynxPhoto_H_Info_Tab_Level2":wx.navigateTo({url:"/pages/news/news"});break;case"Photo-Info-Tab-Level2":wx.navigateTo({url:"/pages/news/layout-o2o/news?sysTabName=Photo-Info-Tab-Level2&title="+t.currentTarget.dataset.title});break;case"Video_Gallery":wx.navigateTo({url:"/pages/publicity/publicity"});break;case"Flexi-Form":wx.navigateTo({url:"/pages/store/custom/custom"});break;case"Activity":wx.navigateTo({url:"/pages/self/mycoupon/mycoupon"});break;case"LynxApplyFor_About_Merchant":e.getMemberId()?wx.navigateTo({url:"/pages/join/join"}):wx.navigateTo({url:"/pages/login/login"});break;case"About-Merchant":1==this.data.isPerson?wx.switchTab({url:"/pages/about-us/about-us"}):wx.navigateTo({url:"/pages/about-us/about-us"});break;case"Activity-Group":wx.navigateTo({url:"/pages/packages/group/group-prolist/group-prolist"});break;case"Activity-Kill":wx.navigateTo({url:"/pages/seckill/seckill"});break;case"CardNo":e.getMemberId()?wx.navigateTo({url:"/pages/self/card/card"}):wx.navigateTo({url:"/pages/login/login"});break;case"Activity-Distribution":e.getMemberId()?wx.navigateTo({url:"/pages/packages/distribute/distribute"}):wx.navigateTo({url:"/pages/login/login"});break;case"AI":wx.navigateTo({url:"/pages/packages/AI/index/index"})}}},t(a,"toMoreFunction",function(t){switch(console.log(t.currentTarget.dataset.location),t.currentTarget.dataset.location){case"LynxProductList":e.globalData.isPerson?wx.navigateTo({url:e.globalData.pagesPath.proPath}):wx.switchTab({url:e.globalData.pagesPath.proPath}),this.setData({hideShareCoupon:!0});break;case"LynxAbout_Merchant":1==this.data.isPerson?wx.navigateTo({url:e.globalData.pagesPath.storePath}):wx.switchTab({url:e.globalData.pagesPath.storePath});break;case"LynxPhoto_Info_Post_Tab":wx.navigateTo({url:"/pages/supply/supply"});break;case"LynxPhoto_H_Info_Tab_Level2":wx.navigateTo({url:"/pages/news/news?sysTabName=LynxPhoto_H_Info_Tab_Level2&title="+t.currentTarget.dataset.title});break;case"Photo-Info-Tab-Level2":wx.navigateTo({url:"/pages/news/news?sysTabName=Photo-Info-Tab-Level2&title="+t.currentTarget.dataset.title});break;case"Video_Gallery":wx.navigateTo({url:"/pages/publicity/publicity"});break;case"Flexi-Form":wx.navigateTo({url:"/pages/store/custom/custom"});break;case"Activity":wx.navigateTo({url:"/pages/self/mycoupon/mycoupon"});break;case"LynxApplyFor_About_Merchant":e.getMemberId()?wx.navigateTo({url:"/pages/join/join"}):wx.navigateTo({url:"/pages/login/login"});break;case"Activity-Group":wx.navigateTo({url:"/pages/packages/group/group-prolist/group-prolist"});break;case"About-Merchant":1==this.data.isPerson?wx.switchTab({url:"/pages/about-us/about-us"}):wx.navigateTo({url:"/pages/about-us/about-us"});break;case"Activity-Kill":wx.navigateTo({url:"/pages/seckill/seckill"});break;case"CardNo":e.getMemberId()?wx.navigateTo({url:"/pages/self/card/card"}):wx.navigateTo({url:"/pages/login/login"});break;case"Activity-Distribution":e.getMemberId()?wx.navigateTo({url:"/pages/packages/distribute/distribute"}):wx.navigateTo({url:"/pages/login/login"});break;case"AI":wx.navigateTo({url:"/pages/packages/AI/index/index"})}}),t(a,"getBranchList",function(){var t=this,a={appId:o.appId,customizeTabId:i.LynxAbout_Merchant,advertisement:1,current:1,level:0};wx.request({url:e.globalData.comUrl+"mctab_searchBranchInfo.action",data:a,success:function(a){var o=e.getJsonData(a.data);if(o.pageList.length>0){for(var i=0;i<o.pageList.length;i++)o.pageList[i].pic1=e.modifyPicSize(o.pageList[i].pic1,"_r192x90p");t.setData({branchInfo:o.pageList,hasBranch:!0})}else t.setData({hasBranch:!1})},fail:function(t){e.hint()}})}),t(a,"adtap",function(t){var a=this.data.advertisements[t.target.dataset.idx];switch(a.type){case"1":break;case"2":wx.navigateTo({url:"rich-text/rich-text?index="+t.target.dataset.idx});break;case"3":this.setData({adBigImage:a.image,hideBigImg:!1});break;case"4":wx.navigateTo({url:"/pages/store/store-detail/store-detail?tabContentId="+a.branchInfoId});break;case"5":wx.navigateTo({url:"/pages/product/pro-detail/pro-detail?productId="+a.productId})}}),t(a,"exitBigImage",function(){this.setData({hideBigImg:!0})}),t(a,"toSearch",function(t){wx.navigateTo({url:"/pages/search/search?type=0"})}),t(a,"toPosition",function(){var t=this;wx.chooseLocation({success:function(a){console.log(a),e.globalData.g_cityName=a.address,t.setData({showAddress:a.address,lat:a.latitude,lng:a.longitude});var o={lat:a.latitude,lng:a.longitude};e.globalData.g_location=o,t.getBranchInfo()}})}),t(a,"toProductList",function(t){console.log(t),""!=t.currentTarget.dataset.idx?wx.navigateTo({url:"/pages/product/pro-list/pro-list?bigCateCode="+t.currentTarget.dataset.idx+"&title="+t.currentTarget.dataset.title}):this.toMoreFunction(t)}),t(a,"toProductDetail",function(t){wx.navigateTo({url:"/pages/product/pro-detail/pro-detail?productId="+t.currentTarget.dataset.pid})}),t(a,"toStore",function(){1==this.data.isPerson?wx.navigateTo({url:"/pages/store/layout-meirong/store"}):wx.switchTab({url:"/pages/store/layout-meirong/store"})}),t(a,"toStoreDetail",function(t){wx.navigateTo({url:"/pages/store/store-detail/store-detail?tabContentId="+t.currentTarget.dataset.sid})}),t(a,"toDistributePro",function(){wx.navigateTo({url:"/pages/packages/distribute/distribute-product/distribute-product"})}),t(a,"toNewsList",function(){wx.navigateTo({url:"/pages/news/news?sysTabName=Photo-Info-Tab-Level2"})}),t(a,"toNewsDetail",function(t){wx.navigateTo({url:"/pages/news/news-detail/news-detail?tabContentId="+t.currentTarget.dataset.nid+"&type=4"})}),t(a,"toGroupActivity",function(){wx.navigateTo({url:"/pages/packages/group/group-prolist/group-prolist"})}),t(a,"toSeckillActivity",function(){wx.navigateTo({url:"/pages/seckill/seckill"})}),t(a,"toAIRecognize",function(){wx.navigateTo({url:"/pages/packages/AI/index/index"})}),t(a,"joinPhoneCall",function(){var t=this;t.data.joinPhone&&wx.makePhoneCall({phoneNumber:t.data.joinPhone})}),t(a,"toMyCoupon",function(){wx.navigateTo({url:"/pages/self/mycoupon/mycoupon"})}),t(a,"onPullDownRefresh",function(){var t=this;s=1,t.setData({productArr:[]}),t.getCustAndCateList(),t.getHomepageBaseInfo().then(function(){t.getHomePageTop(),t.getCustomizeTabList().then(function(){"1"==e.globalData.isGroup&&t.getActivity(),"1"==t.data.hasSeckill&&t.getSeckillActivity(),"1"==t.data.hasDistribution&&"3"==t.data.memberType?(t.checkDistribuction().then(function(){t.getHomepageProduct(),t.getReommendProducts()}),t.getDistributeProduct()):(t.getHomepageProduct(),t.getReommendProducts())})}),t.getHomepageAdvertise(),t.getBranchInfo(),t.getMerchantHidden()}),t(a,"formSubmit",function(t){""!=t.detail.value.branchName?""!=t.detail.value.mainProject?""!=t.detail.value.phone?""!=t.detail.value.textCon?""!=t.detail.value.email?""!=t.detail.value.project?""!=t.detail.value.beizhu?(wx.showToast({title:"正在提交...",icon:"loading",duration:2e3,mask:!0}),setTimeout(function(){wx.showToast({title:"提交成功",icon:"success",duration:2e3,mask:!0,success:function(){}})},2e3)):this.warn("备注不能为空"):this.warn("预约不能为空"):this.warn("邮箱不能为空"):this.warn("请输入您的问题描述!"):this.warn("请输入您的联系方式!!"):this.warn("请输入您的年龄!"):this.warn("请输入您的名字!")}),t(a,"bindDateChange",function(t){this.setData({date:t.detail.value})}),t(a,"warn",function(t){wx.showModal({title:"提示",content:t,showCancel:!1})}),t(a,"onReachBottom",function(){s<n&&(s++,this.getReommendProducts())}),t(a,"refresh",function(){var t=this;s=1,t.setData({productArr:[]}),t.getCustAndCateList(),t.getHomepageBaseInfo().then(function(){t.getHomePageTop(),t.getCustomizeTabList().then(function(){"1"==e.globalData.isGroup&&t.getActivity(),"1"==t.data.hasSeckill&&t.getSeckillActivity(),t.getHomepageProduct(),t.getReommendProducts(),t.getHomepageAdvertise()})}),t.getBranchInfo()}),t(a,"onShareAppMessage",function(){var t=this;return{title:o.productName,path:"/pages/index/index",success:function(a){wx.request({url:e.globalData.comUrl+"act_addShareMemberActivity.action",data:{memberId:e.getMemberId(),customizetabId:i.Activity},success:function(a){var o=e.getJsonData(a.data);1==o.code&&(o.endTime=o.endTime.substring(0,10),t.setData({hideShareCoupon:!1,shareActivity:o}))}})},fail:function(t){}}}),a)); 
 			}); 	require("pages/index/index.js");
 		__wxRoute = 'pages/rich-text/rich-text';__wxRouteBegin = true; 	define("pages/rich-text/rich-text.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="",e="";Page({data:{txt:""},onLoad:function(o){a=t.globalData.projectInfo,e=t.globalData.customizeTabId,this.getHomePageTop(o.index)},getHomePageTop:function(a){var o=this;wx.request({url:t.globalData.comUrl+"tabs_getHomepageTop.action",data:{advertisementsCId:e.LynxHomePage},success:function(e){var s=t.getJsonData(e.data);o.setData({txt:s.advertisements[a].text})}})}}); 
 			}); 	require("pages/rich-text/rich-text.js");
 		__wxRoute = 'pages/recommproducts/recommproducts';__wxRouteBegin = true; 	define("pages/recommproducts/recommproducts.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="",e="",i=1,o=1,s="";Page({data:{titles:[],cateList:[],productList:[],index:0,categoryCode:"",news_type:3,titleLeft:0,titleKey:1,hidden:!0,bottomHint:!0,leftHidden:!0,rightHidden:!0,scrolltop:0},onLoad:function(i){a=t.globalData.projectInfo,e=t.globalData.customizeTabId;var o=this;o.getProCategory(),"LynxPhoto_H_Info_Tab_Level2"==(s=i.sysTabName)?(o.getAdList(),o.setData({news_type:3})):o.setData({news_type:4})},getProCategory:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{customizeTabId:e.LynxProductList},success:function(e){var i=t.getJsonData(e.data);console.log(i),a.setData({cateList:i}),a.titletap()}})},getProductList:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getZXProductListByCategory.action",data:{customizeTabId:e.LynxProductList,bigCateGoryCode:a.data.categoryCode,current:i,status:2,recommand:1,isBreif:1,isGroup:t.globalData.isGroup},success:function(e){var i=t.getJsonData(e.data);o=i.pages,a.setData({productList:a.data.productList.concat(i.pageList)}),i.pageList.length>0?a.setData({hasPro:!0}):a.setData({hasPro:!1})}})},titletap:function(t){i=1;var a=this;this.setData({productList:[]}),t&&void 0!=t?(a.setData({categoryCode:t.currentTarget.dataset.code,bottomHint:!0,hidden:!0,index:t.currentTarget.dataset.index}),a.getProductList(t.currentTarget.dataset.code)):(a.setData({categoryCode:a.data.cateList[0].code,bottomHint:!0,hidden:!0}),a.getProductList())},onReachBottom:function(){i<o?(i++,this.getProductList()):i>1&&(this.data.pageList.length>1?this.setData({bottomHint:!1}):this.setData({bottomHint:!0}))},onPullDownRefresh:function(){i=1,this.setData({productList:[]}),wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),this.getProductList()},turnLeft:function(){console.log(this.data.titleKey),this.data.titleKey>1&&(this.setData({titleLeft:this.data.titleLeft+200,titleKey:this.data.titleKey-1}),1==this.data.titleKey&&this.setData({leftHidden:!0,rightHidden:!1}))},turnRight:function(){console.log(this.data.titleKey),this.data.titleKey<this.data.titles.length-2&&(this.setData({titleLeft:this.data.titleLeft-200,titleKey:this.data.titleKey+1}),this.data.titleKey==this.data.titles.length-2&&this.setData({rightHidden:!0,leftHidden:!1}))},toProductDetail:function(t){wx.navigateTo({url:"../product/pro-detail/pro-detail?productId="+t.currentTarget.dataset.pid})}}); 
 			}); 	require("pages/recommproducts/recommproducts.js");
 		__wxRoute = 'pages/store/store';__wxRouteBegin = true; 	define("pages/store/store.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var o=getApp();Page({data:{projectType:o.globalData.projectInfo.projectType,isPerson:o.globalData.isPerson},onLoad:function(){var o={education:"layout-o2o",meirong:"layout-meirong",o2o:"layout-o2o","o2o-shop":"layout-o2o",restaurant:"","restaurant-multi":"layout-meirong",tmall:"layout-o2o"}[this.data.projectType]||"layout-o2o";"tmall"==this.data.projectType||this.data.isPerson?wx.redirectTo({url:o+"/store"}):wx.switchTab({url:o+"/store",fail:function(){wx.redirectTo({url:o+"/store"})}})}}); 
 			}); 	require("pages/store/store.js");
 		__wxRoute = 'pages/store/layout-o2o/store';__wxRouteBegin = true; 	define("pages/store/layout-o2o/store.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var a,e=getApp(),o="",r="",s=1,n=1;Page({data:(a={styleConfig:e.globalData.styleConfig,adArr:[],storeArr:[],show:!1,bCate_code:0,smCate_code:0,provinceId:-1,cityId:-1,categoryId:-1,level:0,bigCategory:[],showBigCate:!1,smallCategory:[],showSmallCate:!0,provinceArr:[],cityArr:[],showProvince:!1,showCity:!1},t(a,"show",!1),t(a,"noStore",!0),t(a,"bottomHint",!0),t(a,"homePageLayout",e.globalData.projectInfo.homePageLayout),a),onLoad:function(){o=e.globalData.projectInfo,r=e.globalData.customizeTabId,wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),o=e.globalData.projectInfo,r=e.globalData.customizeTabId;var t=this;t.storeInfo(),t.getBigCategory()},toSearch:function(t){wx.navigateTo({url:"/pages/search/search?type=1"})},menutap:function(){this.setData({show:!this.data.show})},confirm:function(){this.setData({storeArr:[],adArr:[],noStore:!0,bottomHint:!0}),s=1,this.setData({show:!this.data.show}),this.storeInfo()},toStoreDetails:function(t){wx.navigateTo({url:"../store-detail/store-detail?tabContentId="+t.currentTarget.dataset.pid})},storeInfo:function(){var t=this,a={appId:o.appId,customizeTabId:r.LynxAbout_Merchant,advertisement:1,current:s};t.data.level>0&&(a.level=t.data.level),t.data.provinceId>0&&(a.provinceId=t.data.provinceId),t.data.cityId>0&&(a.cityId=t.data.cityId),t.data.categoryId&&(a.categoryId=t.data.categoryId);try{wx.request({url:e.globalData.comUrl+"mctab_searchBranchInfo.action",data:a,success:function(a){var o=e.getJsonData(a.data);n=o.pages;for(var r=0;r<o.pageList.length;r++)o.pageList[r].isAdvertisement&&t.data.adArr.push(o.pageList[r]),o.pageList[r].pic1=e.modifyPicSize(o.pageList[r].pic1,"_rx160p");t.setData({storeArr:t.data.storeArr.concat(o.pageList),bottomHint:!0}),1==s&&t.setData({adArr:t.data.adArr}),0==t.data.storeArr.length?t.setData({noStore:!1}):t.setData({noStore:!0}),wx.hideToast(),wx.stopPullDownRefresh()},fail:function(t){e.hint()}})}catch(t){e.hint(t)}},onReachBottom:function(){s<n?(s++,this.storeInfo()):s>1&&(this.data.storeArr.length>1?this.setData({bottomHint:!1}):this.setData({bottomHint:!0}))},onPullDownRefresh:function(){this.reset()},getBigCategory:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{appId:o.appId,customizeTabId:r.LynxAbout_Merchant},success:function(a){var o=e.getJsonData(a.data);t.setData({bigCategory:o})},fail:function(t){e.hint("获取大类失败")}})},bigCate_unfold:function(){this.setData({showBigCate:!this.data.showBigCate})},getSmallCategory:function(t){var a=this;a.setData({bCate_code:t.currentTarget.dataset.code,categoryId:t.currentTarget.dataset.code}),wx.request({url:e.globalData.comUrl+"tabs_getPhotoInfoTabCategoryFromL1toL2.action",data:{appId:o.appId,customizeTabId:r.LynxAbout_Merchant,categoryCode:t.currentTarget.dataset.code},success:function(t){var o=e.getJsonData(t.data);a.setData({smallCategory:o,showSmallCate:!1}),s=1,a.setData({level:1})},fail:function(t){e.hint()}})},smCateTap:function(t){0!=t.currentTarget.dataset.code?this.setData({level:"",smCate_code:t.currentTarget.dataset.code,categoryId:t.currentTarget.dataset.code}):this.setData({level:1,smCate_code:t.currentTarget.dataset.code,categoryId:this.data.bCate_code})},getProvinceInfo:function(){var t=this;wx.request({url:e.globalData.comUrl+"mctab_getBranchProvinces.action",data:{appId:o.appId,customizeTabId:r.LynxAbout_Merchant},success:function(a){var o=e.getJsonData(a.data);t.setData({provinceArr:o})},fail:function(t){e.hint()}})},getCityInfo:function(t){var a=this;a.setData({provinceId:t.currentTarget.dataset.proid}),"0"==t.currentTarget.dataset.proid?(s=1,a.setData({provinceId:"",cityId:"",showCity:!1})):wx.request({url:e.globalData.comUrl+"mctab_getBranchCitys.action",data:{appId:o.appId,customizeTabId:r.LynxAbout_Merchant,provinceId:t.currentTarget.dataset.proid},success:function(t){var o=e.getJsonData(t.data);a.setData({cityArr:o,showCity:!0})},fail:function(t){e.hint()}})},citytap:function(t){"0"==t.currentTarget.dataset.cityid?this.setData({cityId:""}):this.setData({cityId:t.currentTarget.dataset.cityid}),s=1},prov_unfold:function(){this.setData({showProvince:!this.data.showProvince}),this.getProvinceInfo()},reset:function(){s=1,n=1,this.setData({adArr:[],storeArr:[],showBigCate:!1,showSmallCate:!1,showProvince:!1,showCity:!1,bottomHint:!0,bCate_code:0,smCate_code:0,provinceId:-1,cityId:-1,categoryId:-1,level:0}),this.storeInfo()},onShareAppMessage:function(){return{title:"商铺",path:"/pages/store/layout-o2o/store",success:function(t){},fail:function(t){}}}}); 
 			}); 	require("pages/store/layout-o2o/store.js");
 		__wxRoute = 'pages/store/store-detail/store-detail';__wxRouteBegin = true; 	define("pages/store/store-detail/store-detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,e=t.globalData.customizeTabId,o="",i="",n={},s=!0,r=!0,c=1,d=1;Page({data:{styleConfig:t.globalData.styleConfig,storeInfo:{},productArr:[],collectStatus:"0",tapIndex:1,bottomHint:!0,isGroup:t.globalData.isGroup,storeImgArr:[],actDistribution:{},hideBox:!0},onLoad:function(i){var n=decodeURIComponent(i.scene);o=n&&"undefined"!=n?n:i.tabContentId,console.log(n),t.loginVzSystem(),a=t.globalData.projectInfo,e=t.globalData.customizeTabId;var s=wx.getStorageSync("memberType"+t.globalData.autoId);this.setData({memberType:s}),t.globalData.actDistribution&&this.setData({actDistribution:t.globalData.actDistribution});var r=this;c=1,r.getStoreInfo(),r.getCollectStatus(),r.getQRCode()},nav_tap:function(t){var a=0;"1"==t.currentTarget.dataset.index?(a=1,this.getProductList()):a="2"==t.currentTarget.dataset.index?2:3,this.setData({tapIndex:a})},getStoreInfo:function(){var e=this;wx.request({url:t.globalData.comUrl+"tabs_getSingleBranchInfo.action",data:{appId:a.appId,tabContentId:o},success:function(a){n=t.getJsonData(a.data),console.log(n);for(var o=[n.pic1,n.pic2,n.pic3,n.pic4,n.pic5],i=[],s=0;s<o.length;s++)o[s]&&(o[s]=t.modifyPicSize(o[s],"_r375x175p"),i.push(o[s]));n.shortDescription=t.filterSpecialSymbol(n.shortDescription),n.longDescription=t.filterSpecialSymbol(n.longDescription),e.setData({storeInfo:n,storeImgArr:i}),wx.setNavigationBarTitle({title:n.branchName}),e.getProductList()},fail:function(a){t.hint()}})},getProductList:function(){var o=this,i=o.data.storeInfo.id;wx.request({url:t.globalData.comUrl+"tabs_getZXProductListByCategory.action",data:{appId:a.appId,customizeTabId:e.LynxProductList,current:"1",status:"2",branchInfoId:i,isGroup:t.globalData.isGroup,sortName:"prodSequence"},success:function(a){var e=t.getJsonData(a.data);d=e.pages,o.setData({productArr:e.pageList}),wx.hideToast()},fail:function(a){t.hint()}})},getQRCode:function(){var a=this;wx.request({url:t.globalData.paymentUrl+"/WechatAlipay/getWXAcode",data:{page:"pages/store/store-detail/store-detail",projectId:t.globalData.projectInfo.appId,scene:o},success:function(t){console.log(t.data),a.setData({QRCodeImage:t.data.content.miniQRCode})},fail:function(){t.hint()}})},getMoreProduct:function(){var o=this,i=o.data.storeInfo.id;wx.request({url:t.globalData.comUrl+"tabs_getZXProductListByCategory.action",data:{appId:a.appId,customizeTabId:e.LynxProductList,current:c,status:"2",branchInfoId:i,isGroup:t.globalData.isGroup,sortName:"prodSequence"},success:function(a){var e=t.getJsonData(a.data);o.setData({productArr:o.data.productArr.concat(e.pageList)})},fail:function(a){t.hint()}})},toProDetail:function(t){wx.navigateTo({url:"/pages/product/pro-detail/pro-detail?productId="+t.currentTarget.dataset.pid})},collect:function(){if(0!=s){s=!1;var e=this;(i=t.getMemberId())?wx.request({url:t.globalData.comUrl+"tabs_addCollection.action",data:{appId:a.appId,memberId:i,type:2,objId:n.id,name:n.branchName,address:n.address,tell:n.tel,pic_url:n.pic1},success:function(t){e.getCollectStatus()},fail:function(a){t.hint("收藏失败")}}):(s=!0,wx.navigateTo({url:"/pages/login/login"}))}},cancelCollect:function(){if(0!=r){r=!1;var a=this;(i=t.getMemberId())?wx.request({url:t.globalData.comUrl+"tabs_delCollectionByObjId.action",data:{id:o,memberId:i},success:function(t){a.getCollectStatus()},fail:function(a){t.hint("取消收藏失败")}}):(r=!0,wx.navigateTo({url:"/pages/login/login"}))}},getCollectStatus:function(){if(i=t.getMemberId()){var e=this;wx.request({url:t.globalData.comUrl+"tabs_checkCollection.action",data:{appId:a.appId,memberId:i,id:o},success:function(a){var o=t.getJsonData(a.data);e.setData({collectStatus:o.isExisted})},fail:function(a){t.hint()},complete:function(){r=!0,s=!0}})}},phonecall:function(){var t=this.data.storeInfo.phone;wx.makePhoneCall({phoneNumber:t})},locationtap:function(){var t=this,a=t.data.storeInfo.gdLatitude;a=(1*a).toFixed(6);var e=t.data.storeInfo.gdLongitude;e=(1*e).toFixed(6),wx.openLocation({latitude:parseFloat(a),longitude:parseFloat(e),name:t.data.storeInfo.branchName,address:t.data.storeInfo.address,scale:28})},customtap:function(){wx.navigateTo({url:"/pages/store/custom/custom?branchId="+this.data.storeInfo.id})},showBox:function(){this.setData({hideBox:!this.data.hideBox})},saveIamge:function(){this.setData({hideBox:!0});var t=this;wx.previewImage({current:t.data.QRCodeImage,urls:[t.data.QRCodeImage]})},onReachBottom:function(){c<d?(c++,this.getMoreProduct()):c>1&&(this.data.productArr.length>1?this.setData({bottomHint:!1}):this.setData({bottomHint:!0}))},onShareAppMessage:function(){var t=this;return t.setData({hideBox:!0}),{title:t.data.storeInfo.branchName,path:"/pages/store/store-detail/store-detail?tabContentId="+t.data.storeInfo.id,success:function(t){},fail:function(t){}}}}); 
 			}); 	require("pages/store/store-detail/store-detail.js");
 		__wxRoute = 'pages/store/layout-meirong/store';__wxRouteBegin = true; 	define("pages/store/layout-meirong/store.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var a,e=getApp(),o=e.globalData.projectInfo,i=e.globalData.customizeTabId,s=1,n=1;Page((a={data:{hiddenCate:!0,merchantList:[],curIdx:"0",sortName:"",bigcategory:"",smallCategory:"",searchKey:"",bigCateList:[],smallCateList:[],hiddenSCAll:!0,latitude:"",longitude:"",ignoreScope:e.globalData.ignoreScope,styleConfig:e.globalData.styleConfig},checkIfHasAutoId:function(t){!sessionStorage.getItem("globalAutoId")||t&&t.autoId||(t={autoId:sessionStorage.getItem("globalAutoId")}),t&&t.autoId&&t.autoId&&(this.setData({ignoreScope:!0}),this.getMerchantList())},onLoad:function(t){o=e.globalData.projectInfo,i=e.globalData.customizeTabId,this.checkIfHasAutoId(),wx.showLoading({title:"努力加载中",duration:1500}),t.bigcategory&&this.setData({bigcategory:t.bigcategory}),t.itemName&&wx.setNavigationBarTitle({title:t.itemName});var a=this;0==e.globalData.g_location.lat?wx.getLocation({type:"wgs84",success:function(t){a.setData({latitude:t.latitude,longitude:t.longitude}),a.getMerchantList()}}):(a.setData({latitude:e.globalData.g_location.lat,longitude:e.globalData.g_location.lng}),a.getMerchantList()),this.getBigCategory()},onShow:function(){s=1},getMerchantList:function(){var t=this,a={appId:o.appId,customizeTabId:i.LynxAbout_Merchant,current:s,latitude:t.data.latitude,longitude:t.data.longitude,searchKey:t.data.searchKey,sortName:t.data.sortName,smallCategory:t.data.smallCategory,bigcategory:t.data.bigcategory,sortType:""};t.data.ignoreScope&&(a.checkDistributionScope="",a.latitude=23.131687,a.longitude=113.36391),wx.request({url:e.globalData.comUrl+"mctab_searchFoodBranchInfo.action",data:a,success:function(a){var o=e.getJsonData(a.data);console.log(o),n=o.pages;for(var i=0;i<o.pageList.length;i++){var s=o.pageList[i].productList.slice(0,2);o.pageList[i].newProductList=s,o.pageList[i].isShowMorePro=!1,o.pageList[i].distance>=1e3&&(o.pageList[i].disUnit="km",o.pageList[i].distance=(o.pageList[i].distance/1e3).toFixed(1))}var r=t.data.merchantList.concat(o.pageList);t.setData({merchantList:r}),wx.hideLoading()}})},getBigCategory:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{appId:o.appId,customizeTabId:i.LynxAbout_Merchant},success:function(a){var o=e.getJsonData(a.data);t.setData({bigCateList:o})},fail:function(t){e.hint("获取大类失败")}})},getSmallCategory:function(t){var a=this;a.setData({bigcategory:t.currentTarget.dataset.code,hiddenSCAll:!1,smallCategory:""}),wx.request({url:e.globalData.comUrl+"tabs_getPhotoInfoTabCategoryFromL1toL2.action",data:{appId:o.appId,customizeTabId:i.LynxAbout_Merchant,categoryCode:t.currentTarget.dataset.code},success:function(t){var o=e.getJsonData(t.data);a.setData({smallCateList:o}),s=1},fail:function(t){e.hint()}})},isShowCategory:function(){if(this.setData({hiddenCate:!this.data.hiddenCate,curIdx:"0"}),!this.hiddenCate){var t=this;wx.request({url:e.globalData.comUrl+"/tabs_getPhotoInfoTabCategory.action",data:{appId:o.appId,branchInfoId:t.data.branchInfoId,customizeTabId:i.LynxAbout_Merchant},success:function(t){var a=e.getJsonData(t.data);console.log(a)}})}},navtap:function(t){wx.showLoading({title:"努力加载中",duration:1500});var a=t.target.dataset.idx;this.setData({curIdx:a,sortName:1==a?"":"distance",hiddenCate:!0,merchantList:[]}),s=1,this.getMerchantList()},searchTap:function(t){this.setData({searchKey:t.detail.value,merchantList:[]}),this.getMerchantList()},showMoreProduct:function(t){console.log(t.target.dataset.idx),this.data.merchantList[t.target.dataset.idx].isShowMorePro=!this.data.merchantList[t.target.dataset.idx].isShowMorePro,this.setData({merchantList:this.data.merchantList})},toProduct:function(t){wx.navigateTo({url:"../product/product?merchantId="+t.currentTarget.dataset.mid})},toProduct1:function(t){wx.navigateTo({url:"../product/product?merchantId="+t.currentTarget.dataset.mid+"&bigCode="+t.currentTarget.dataset.cid})},bigCateAllTap:function(){wx.showLoading({title:"努力加载中",duration:1500}),s=1,this.setData({hiddenCate:!0,merchantList:[],sortName:"",bigcategory:"",smallCategory:"",smallCateList:"",searchKey:"",hiddenSCAll:!0}),this.getMerchantList()},toStoreDetail:function(t){wx.navigateTo({url:"../store-detail/store-detail?tabContentId="+t.currentTarget.dataset.mid})}},t(a,"toProduct",function(t){wx.navigateTo({url:"../../product/pro-detail/pro-detail?productId="+t.currentTarget.dataset.pid})}),t(a,"smallCataTap",function(t){wx.showLoading({title:"努力加载中",duration:1500}),s=1,this.setData({smallCategory:t.currentTarget.dataset.scode,hiddenCate:!0,merchantList:[],searchKey:""}),this.getMerchantList()}),t(a,"onPullDownRefresh",function(){}),t(a,"onReachBottom",function(){s<n&&(s++,this.getMerchantList())}),a)); 
 			}); 	require("pages/store/layout-meirong/store.js");
 		__wxRoute = 'pages/store/layout-enterprise/store-detail/store-detail';__wxRouteBegin = true; 	define("pages/store/layout-enterprise/store-detail/store-detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,e=t.globalData.customizeTabId,o={},n=!0;Page({data:{styleConfig:t.globalData.styleConfig,storeInfo:{},storeImg:[],productArr:[],tapIndex:2,bottomHint:!0},onLoad:function(){a=t.globalData.projectInfo,e=t.globalData.customizeTabId,t.loginVzSystem();var o=this;o.getStoreId().then(function(t){o.getStoreInfo(t)})},nav_tap:function(t){var a=0;a="1"==t.currentTarget.dataset.index?1:"2"==t.currentTarget.dataset.index?2:3,this.setData({tapIndex:a})},getStoreId:function(){return new Promise(function(o,n){wx.request({url:t.globalData.comUrl+"mctab_searchBranchInfo.action",data:{appId:a.appId,customizeTabId:e.LynxAbout_Merchant,advertisement:1,current:1},success:function(a){var e=t.getJsonData(a.data);console.log(e.pageList[0]),o(e.pageList[0].id)}})})},formSubmit:function(a){if(n){n=!1;var e=/^1[3|4|5|8|7][0-9]\d{4,8}$/;if(""==a.detail.value.name)return n=!0,void this.warn("姓名不能为空!");if(""==a.detail.value.phone)return n=!0,void this.warn("请输入电话号码!");if(!e.test(a.detail.value.phone))return n=!0,void this.warn("请输入正确的电话号码");if(""==a.detail.value.detail)return n=!0,void this.warn("请输入\b反馈内容");wx.showToast({title:"正在提交...",icon:"loading",duration:1e4,mask:!0});var o=new Date,i=t.globalData.projectInfo.projectName+","+a.detail.value.name+","+a.detail.value.phone+","+a.detail.value.detail,r={storeName:a.detail.value.storeName,name:a.detail.value.name,phone:a.detail.value.phone,detail:a.detail.value.detail,imagePath:"",date:o.toLocaleDateString()},s=wx.getStorageSync("customArr"+t.globalData.autoId)||[];s.push(r),wx.setStorageSync("customArr"+t.globalData.autoId,s),i+=",null",wx.request({url:t.globalData.comUrl+"tabs_saveFlexiForm",data:{projectId:t.globalData.projectInfo.appId,customizeTabId:t.globalData.customizeTabId["Flexi-Form"],token:"html5",fieldKey:"店铺,姓名,电话,描述,附图说明",fieldValue:i},success:function(t){wx.showToast({title:"提交成功",icon:"success",duration:2e3})},fail:function(a){t.hint("提交失败"),wx.hideToast()},complete:function(){n=!0}})}},getStoreInfo:function(e){var n=this;wx.request({url:t.globalData.comUrl+"tabs_getSingleBranchInfo.action",data:{appId:a.appId,tabContentId:e},success:function(a){(o=t.getJsonData(a.data)).advertisingImage=t.modifyPicSize(o.advertisingImage,"_r750xp");for(var e=[o.pic1,o.pic2,o.pic3,o.pic4,o.pic5],i=[],r=0;r<e.length;r++)e[r]&&i.push(e[r]);o.shortDescription=t.filterSpecialSymbol(o.shortDescription),n.setData({storeInfo:o,storeImg:i}),wx.setNavigationBarTitle({title:o.branchName})},fail:function(a){t.hint()}})},phonecall:function(){var t=this.data.storeInfo.phone;wx.makePhoneCall({phoneNumber:t})},locationtap:function(){var t=this,a=t.data.storeInfo.gdLatitude;a=(1*a).toFixed(6);var e=t.data.storeInfo.gdLongitude;e=(1*e).toFixed(6),wx.openLocation({latitude:parseFloat(a),longitude:parseFloat(e),name:t.data.storeInfo.branchName,address:t.data.storeInfo.address,scale:28})},customtap:function(){wx.navigateTo({url:"/pages/store/custom/custom"})},onShareAppMessage:function(){var t=this;return{title:t.data.storeInfo.branchName,path:"/pages/store/layout-enterprise/store-detail/store-detail?tabContentId="+t.data.storeInfo.id,success:function(t){},fail:function(t){}}},warn:function(t){wx.showToast({title:t,image:"../../img/warn.png",duration:2e3})}}); 
 			}); 	require("pages/store/layout-enterprise/store-detail/store-detail.js");
 		__wxRoute = 'pages/store/custom/custom';__wxRouteBegin = true; 	define("pages/store/custom/custom.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp(),t="",e="",i="",o=!0;Page({data:{styleConfig:a.globalData.styleConfig,imagePath:"",storeName:"",name:"",phone:"",detail:"",branchId:""},takephoto:function(){var t=this;wx.chooseImage({count:1,success:function(a){var e=a.tempFilePaths[0];t.setData({imagePath:e})},fail:function(t){a.hint("上传失败")}})},onLoad:function(a){a.branchId&&this.setData({branchId:a.branchId})},formSubmit:function(n){if(o){o=!1;var l=this,s=/^1[3|4|5|8|7][0-9]\d{4,8}$/;if(""==n.detail.value.storeName)return o=!0,void this.warn("店铺不能为空!");if(""==n.detail.value.name)return o=!0,void this.warn("姓名不能为空!");if(""==n.detail.value.phone)return o=!0,void this.warn("请输入电话号码!");if(!s.test(n.detail.value.phone))return o=!0,void this.warn("请输入正确的电话号码");wx.showToast({title:"正在提交...",icon:"loading",duration:1e4,mask:!0});var r=new Date;t="店铺,姓名,电话,描述,附图说明",e=n.detail.value.storeName+","+n.detail.value.name+","+n.detail.value.phone+","+n.detail.value.detail;var c={storeName:n.detail.value.storeName,name:n.detail.value.name,phone:n.detail.value.phone,detail:n.detail.value.detail,imagePath:this.data.imagePath,date:r.toLocaleDateString()},u=wx.getStorageSync("customArr"+a.globalData.autoId)||[];u.push(c),wx.setStorageSync("customArr"+a.globalData.autoId,u),l.data.imagePath?wx.uploadFile({url:a.globalData.comUrl+"tabs_uploadPicMina.action",filePath:l.data.imagePath,name:"file",success:function(a){var t=JSON.parse(a.data);console.log(t),"1"==t.isSuccess&&(i=t.path)},fail:function(t){a.hint("图片上传失败")},complete:function(){i?e=e+","+i:e+=",null",wx.request({url:a.globalData.comUrl+"tabs_saveFlexiForm",data:{projectId:a.globalData.projectInfo.appId,customizeTabId:a.globalData.customizeTabId["Flexi-Form"],token:"html5",branchId:l.data.branchId,fieldKey:t,fieldValue:e},success:function(a){l.setData({imagePath:"",storeName:"",name:"",phone:"",detail:""}),wx.showToast({title:"提交成功",icon:"success",duration:2e3})},fail:function(t){a.hint("提交失败"),wx.hideToast()},complete:function(){o=!0}})}}):(e+=",null",wx.request({url:a.globalData.comUrl+"tabs_saveFlexiForm",data:{projectId:a.globalData.projectInfo.appId,customizeTabId:a.globalData.customizeTabId["Flexi-Form"],branchId:l.data.branchId,token:"html5",fieldKey:t,fieldValue:e},success:function(a){l.setData({imagePath:"",storeName:"",name:"",phone:"",detail:""}),wx.showToast({title:"提交成功",icon:"success",duration:2e3})},fail:function(t){a.hint("提交失败"),wx.hideToast()},complete:function(){o=!0}}))}},formReset:function(){this.setData({imagePath:""})},warn:function(a){wx.showToast({title:a,image:"../../../../img/warn.png",duration:2e3})}}); 
 			}); 	require("pages/store/custom/custom.js");
 		__wxRoute = 'pages/self/card/card';__wxRouteBegin = true; 	define("pages/self/card/card.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp(),e="",t="";Page({data:{isShowGetCard:!0,cardImage:"",cardNo:"",preMoney:"",isloading:!0},onLoad:function(o){e=a.globalData.projectInfo,t=a.globalData.customizeTabId,this.getRechargeDetail();var r=this;wx.request({url:a.globalData.comUrl+"mctab_getElectronicsCard.action",data:{appId:e.appId,webApp:"1"},success:function(e){var t=a.getJsonData(e.data);r.setData({cardImage:t.background})}})},onShow:function(){t=a.globalData.customizeTabId,this.getUserInfo()},getRechargeDetail:function(){wx.request({url:a.globalData.comUrl+"mctab_getMoneyRecord.action",data:{memberId:a.getMemberId(),type:"1",current:"1"},success:function(a){console.log(a.data)}})},getUserInfo:function(){var e=this;wx.request({url:a.globalData.comUrl+"tabs_getMember.action",data:{memberId:a.getMemberId(),customizetabId:t.LynxApplyFor_About_Merchant},success:function(t){var o=a.getJsonData(t.data);e.setData({preMoney:o.preMoney,isloading:!1}),o.cardNo&&e.setData({isShowGetCard:!1,cardNo:o.cardNo}),wx.hideToast()},fail:function(){a.hint()}})},toPrestoreMoney:function(){wx.navigateTo({url:"prestore-money/prestore-money"})},toPrestoreRule:function(){wx.navigateTo({url:"prestore-rule/prestore-rule"})},getCard:function(){var e=this;wx.request({url:a.globalData.comUrl+"mctab_regElectronicsMember.action",data:{memberId:a.getMemberId()},success:function(t){var o=a.getJsonData(t.data);wx.showToast({title:"领取成功",icon:"success"}),e.setData({cardNo:o.cardNo,isShowGetCard:!1})}})}}); 
 			}); 	require("pages/self/card/card.js");
 		__wxRoute = 'pages/self/card/prestore-rule/prestore-rule';__wxRouteBegin = true; 	define("pages/self/card/prestore-rule/prestore-rule.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp(),t="";Page({data:{rule:""},onShow:function(){},onLoad:function(){t=a.globalData.projectInfo;var e=this;wx.request({url:a.globalData.comUrl+"mctab_getPreExisting.action",data:{appId:t.appId,webApp:1},success:function(t){var o=a.getJsonData(t.data);e.setData({rule:o.preMoneyRule})}})}}); 
 			}); 	require("pages/self/card/prestore-rule/prestore-rule.js");
 		__wxRoute = 'pages/self/card/prestore-money/prestore-money';__wxRouteBegin = true; 	define("pages/self/card/prestore-money/prestore-money.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=getApp(),t="",a="";Page({data:{preMoney:0},onShow:function(){a=e.globalData.customizeTabId,t=e.globalData.projectInfo,this.getUserInfo()},onLoad:function(){},getUserInfo:function(){var t=this;wx.request({url:e.globalData.comUrl+"tabs_getMember.action",data:{memberId:e.getMemberId(),customizetabId:a.LynxApplyFor_About_Merchant},success:function(a){var o=e.getJsonData(a.data);t.setData({preMoney:o.preMoney}),wx.hideToast()},fail:function(){e.hint()}})},toRecharge:function(){wx.navigateTo({url:"../recharge/recharge"})},toDetail:function(){wx.navigateTo({url:"../prestore-detail/prestore-detail"})}}); 
 			}); 	require("pages/self/card/prestore-money/prestore-money.js");
 		__wxRoute = 'pages/self/card/prestore-detail/prestore-detail';__wxRouteBegin = true; 	define("pages/self/card/prestore-detail/prestore-detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp();Page({data:{detailList:[],detailNull:!1},onShow:function(){},onLoad:function(){var e=this;wx.request({url:t.globalData.comUrl+"mctab_getMoneyRecord.action",data:{memberId:t.getMemberId(),type:"1",current:"1"},success:function(a){console.log(a.data);for(var i=t.getJsonData(a.data),n=0;n<i.pageList.length;n++)1==i.pageList[n].kind?i.pageList[n].money="+ "+i.pageList[n].money:4==i.pageList[n].kind&&(i.pageList[n].money="- "+i.pageList[n].money);i.pageList.length,e.setData({detailList:i.pageList})}})}}); 
 			}); 	require("pages/self/card/prestore-detail/prestore-detail.js");
 		__wxRoute = 'pages/self/card/recharge/recharge';__wxRouteBegin = true; 	define("pages/self/card/recharge/recharge.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=getApp(),t="";Page({data:{rechargeList:[],rule:"",rechargeMoney:""},onShow:function(){},onLoad:function(){t=e.globalData.projectInfo,wx.showLoading({title:"加载中..."});var a=this;wx.request({url:e.globalData.comUrl+"mctab_getPreExisting.action",data:{appId:t.appId,webApp:1},success:function(t){wx.hideLoading();var n=e.getJsonData(t.data);a.setData({rechargeList:n.preMoneys,rule:n.preMoneyRule})},fail:function(){wx.hideLoading(),e.hint()}})},radioChange:function(e){this.setData({rechargeMoney:e.detail.value})},recharge:function(){var a=this,n=this.getNowFormatDate();console.log(n),wx.login({success:function(o){o.code&&wx.request({url:e.globalData.paymentUrl+"/WechatAlipay/MiniPayService2?jsoncallback=?",data:{projectId:t.appId,nonce_str:"lfksf"+Math.round(1e5*Math.random()),body:"在线充值",attach:e.getMemberId()+"_"+t.appId+"_1",out_trade_no:n,total_fee:(100*a.data.rechargeMoney).toFixed(0),trade_type:"JSAPI",device_info:"888",code:o.code,payType:"1"},success:function(e){if(wx.hideToast(),""!=e.data){var t=a.getJsonData(e.data);wx.requestPayment({timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:"prepay_id="+t.prepay_id,signType:"MD5",paySign:t.sign,success:function(e){wx.showToast({title:"支付成功",icon:"success",duration:2e3,mask:!0}),setTimeout(function(){wx.navigateBack({delta:1})},2e3)},fail:function(e){wx.showModal({title:"支付失败",showCancel:!1})}})}else wx.showModal({title:"支付失败",showCancel:!1})}})}})},getJsonData:function(e){return JSON.parse(e.substring(1,e.length-1))},getNowFormatDate:function(){var e=new Date,t=e.getMonth()+1,a=e.getDate();return t>=1&&t<=9&&(t="0"+t),a>=0&&a<=9&&(a="0"+a),e.getFullYear()+""+t+a+e.getHours()+e.getMinutes()+e.getSeconds()}}); 
 			}); 	require("pages/self/card/recharge/recharge.js");
 		__wxRoute = 'pages/product/pro-detail/pro-detail';__wxRouteBegin = true; 	define("pages/product/pro-detail/pro-detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=require("../../../utils/wxParse/wxParse.js"),a=getApp(),e="",o="",i="",r=[],n=!0,d=!0,c=!1,s="",l=a.globalData.md5,u=0,p=0,h=0,g=0,m=0,I=0,f=[],y=[],v="",b="",D="",T="",w="",x="",P="";Page({data:{likeProductList:[],styleConfig:a.globalData.styleConfig,productId:"",proInfoDetail:{},price:0,proImageNavIdx:0,originalPrice:0,activityPrice:0,stock:0,quantity:0,showProAttr:!1,active:[],count:1,modelName:"",modelImage:"",pic_url:"",showCurAttr:!0,collectStatus:0,showCartPoint:!0,isPerson:a.globalData.isPerson,couponList:[],hiddenCouponList:!0,isStoreHidden:!0,activityType:"",groupList:[],groupOrderNo:"",hasVideo:!1,video:"",group:"",navIdx:0,netWorkType:!1,commentList:[],totalPrice:"",currentPrice:"",seckillCount:{},seckillStart:"",memberType:"",loadCount:1,attrBtnStatus:"1",buyType:"",projectType:a.globalData.projectInfo.projectType,showComment:a.globalData.showComment,hiddenMulType:!1,hideBox:!0,hidden:!0},onLoad:function(t){var i=this,r=decodeURIComponent(t.scene);if(r&&"undefined"!=r?i.setData({productId:r}):i.setData({productId:t.productId}),e=a.globalData.projectInfo,o=a.globalData.customizeTabId,this.setData({showComment:!0}),t.parentId)wx.setStorageSync("parentId"+a.globalData.autoId,t.parentId),i.loginVzSystem(t.parentId);else{var n=wx.getStorageSync("memberType"+a.globalData.autoId);this.setData({memberType:n}),i.loginVzSystem(t.parentId),i.initData()}wx.getNetworkType({success:function(t){i.setData({netWorkType:t.networkType})}}),this.getStoreHidden(),this.getPointsSet()},getPointsSet:function(){var t=this;a.request({url:a.globalData.comUrl+"tabs_getPointsSet.action",data:{projectId:e.appId},cache:!0,success:function(a){var e=a.data,o={pointsSwitch:e.content.pointsSwitch,autoAllocatePoints:e.content.autoAllocatePoints,shopRateMoney:e.content.shopRateMoney,shopRatePoint:e.content.shopRatePoint};t.pointsSet=a.data.content,t.setData({pointsSet:o})}})},onShow:function(){c?c=!1:1!=this.data.loadCount?(clearInterval(s),this.initData()):this.setData({loadCount:this.data.loadCount+1})},onReady:function(){c?c=!1:1!=this.data.loadCount?(clearInterval(s),this.initData()):this.setData({loadCount:this.data.loadCount+1})},initData:function(){var t=this;t.getProDetail().then(function(a){t.getCollectStatus(),t.getCommentList(),t.getCouponInfo(a.branchInfoId),t.getGroupList(a.id),console.log(a.mulType),2==a.mulType?t.setData({hiddenMulType:!0}):t.setData({hiddenMulType:!1})})},loginVzSystem:function(t){if(wx.canIUse("login")){var e=this;wx.login({success:function(o){var i=o.code;a.getOpenId(i).then(function(o){if(o&&!(o.length<1)){var i={appId:a.globalData.projectInfo.appId,openId:o};t&&(i.parentId=t),wx.request({url:a.globalData.comUrl+"member_memberRegistration.action",data:i,success:function(o){console.log(o.data);var i=a.getJsonData(o.data);i.parentId==t?(wx.setStorageSync("parentId"+a.globalData.autoId,t),e.setData({parentId:t})):wx.removeStorageSync("parentId"+a.globalData.autoId),wx.setStorageSync("memberId"+a.globalData.autoId,i.memberId),i.isDistributor&&"3"==i.type?(wx.setStorageSync("memberType"+a.globalData.autoId,i.type),e.setData({memberType:i.type})):wx.setStorageSync("memberType"+a.globalData.autoId,""),e.initData()},fail:function(){console.log("login failed")}})}})}})}},getCartData:function(){var t=this,e=wx.getStorageSync("cartData"+a.globalData.autoId);e&&e.length>0?t.setData({showCartPoint:!1}):t.setData({showCartPoint:!0})},proImageNavTap:function(t){this.setData({proImageNavIdx:t.currentTarget.dataset.idx})},getGroupList:function(t){var o=this;wx.request({url:a.globalData.comUrl+"activityOrder_getGroupList.action",data:{appId:e.appId,produceId:t},success:function(t){var e=a.getJsonData(t.data);"0"!=e.code&&(o.setData({groupList:e}),s=setInterval(function(){for(var t=!1,a=0;a<o.data.groupList.length;a++)o.data.groupList[a].remainTime>0&&(t=!0,o.data.groupList[a].remainTime--,o.data.groupList[a].timeFormat=o.secondToTime(o.data.groupList[a].remainTime));o.setData({groupList:o.data.groupList}),t||o.onShow()},1e3))}})},secondToTime:function(t){var a=Math.floor(t/3600),e=Math.floor(t/60%60),o=Math.floor(t%60);return a<10&&(a="0"+a),e<10&&(e="0"+e),o<10&&(o="0"+o),t=a+":"+e+":"+o},seckillToTime:function(t){var a=Math.floor(t/3600/24),e=Math.floor(t/3600%24),o=Math.floor(t/60%60),i=Math.floor(t%60);return e<10&&(e="0"+e),o<10&&(o="0"+o),i<10&&(i="0"+i),{day:a,hours:e,minute:o,second:i}},getCouponInfo:function(t){var e=this,o=a.getMemberId()||"";wx.request({url:a.globalData.comUrl+"act_getActivityList.action",data:{branchInfoId:t,customizetabId:a.getCustomizeId("Activity"),memberId:o},success:function(t){var o=a.getJsonData(t.data);console.log(o);for(var i=[],r=0;r<o.length;r++){var n=o[r];n.beginTime=n.beginTime.replace(" ","-"),n.endTime=n.endTime.replace(" ","-");var d=n.beginTime.split("-"),c=n.endTime.split("-");d.length>3&&c.length>3&&(n.validDate=d[1]+"月"+d[2]+"日-"+c[1]+"月"+c[2]+"日"),void 0!=n.getCoupon&&1!=n.getCoupon||i.push(n)}e.setData({couponList:i})},fail:function(t){a.hint(t)}})},getProDetail:function(){var o=this;return r=[],f=[],y=[],v="",b="",D="",T="",o.setData({moduleId:b,modelName:T}),o.getCartData(),new Promise(function(i,r){wx.request({url:a.globalData.comUrl+"tabs_getZXProductDetail.action",data:{appId:e.appId,productId:o.data.productId,type:1},success:function(e){var r=a.getJsonData(e.data);if(console.log(r),1==r.status)wx.hideToast(),wx.showModal({title:"该商品已下架！",showCancel:!1,success:function(t){t.confirm&&wx.navigateBack({delta:1})}});else{t.wxParse("remark_detail","html",r.remark,o,10),r.productModelList[0]&&(u=r.productModelList[0].price,p=r.productModelList[0].originalprice,h=r.productModelList[0].activityPrice,g=r.productModelList[0].stock),m=Math.abs(r.quantity);for(var n=0;n<r.attributeKeyVOList.length;n++){y[n]=[];for(var d=0;d<r.attributeKeyVOList[n].valueList.length;d++)y[n][d]=!1}var c=new Date,l=Date.parse(new Date(r.activityBeginTime)),I=Date.parse(new Date(r.activityEndTime));if(parseInt((l-c)/1e3)>0){var f=parseInt((l-c)/1e3);s=setInterval(function(){f--,o.setData({seckillCount:o.seckillToTime(f),seckillStart:!1}),f<1&&(clearInterval(s),o.refresh())},1e3)}else{var v=parseInt((I-c)/1e3);s=setInterval(function(){v--,o.setData({seckillCount:o.seckillToTime(v),seckillStart:!0}),v<1&&(clearInterval(s),o.refresh())},1e3)}r.video&&o.setData({hasVideo:!0,video:r.video});a.filterSpecialSymbol(r.remark);r.productModelList.length>0&&o.setData({maxPoints:r.productModelList[0].maxPoints,gotPoint:r.productModelList[0].gotPoint}),o.setData({proInfoDetail:r,price:u,originalPrice:p,stock:g,quantity:m,active:y,activityType:r.activityType,activityPrice:h}),o.getLikeProduct(r.bigCateGoryCode),i(o.data.proInfoDetail),wx.hideToast()}}})})},getLikeProduct:function(t){var e=this;wx.request({url:a.globalData.comUrl+"tabs_getLikeProductByPage.action",data:{customizeTabId:o.LynxProductList,bigCateGoryCode:t,status:2,actType:"",current:1},success:function(t){var o=a.getJsonData(t.data);console.log(o),e.setData({likeProductList:o.pageList})}})},addCart:function(t){console.log(t);var e=this;if(e.setData({buyType:t}),""==b)return I="51"==e.data.buyType||"52"==e.data.buyType||"3"==e.data.buyType||"6"==e.data.buyType&&("3"==e.data.memberType||e.data.parentId)?this.data.activityPrice*this.data.count:""!=e.data.buyType||"5"!=e.data.activityType&&("6"!=e.data.activityType||"3"!=e.data.memberType&&!e.data.parentId)?this.data.price*this.data.count:this.data.activityPrice*this.data.count,void e.setData({totalPrice:I,showProAttr:!0});if(e.data.stock<=0||e.data.count>e.data.stock)this.setData({showProAttr:!0}),a.hint("该商品库存不足");else{console.log(w);var o={productId:e.data.proInfoDetail.id,productName:e.data.proInfoDetail.productName,productCode:e.data.proInfoDetail.productCode,count:e.data.count,pic_url:e.data.pic_url,price:e.data.price,moduleId:b,proAttrName:D,modelName:e.data.modelName,gotPoints:w,maxPoints:P,pricePerPoint:x,branchInfoId:e.data.proInfoDetail.branchInfoId,branchName:e.data.proInfoDetail.branchName,isSelected:!0};if(console.log(o),"3"==e.data.proInfoDetail.purpose){var n=[],c=[],s={};n.push(o),s.branchInfoId=o.branchInfoId,s.isSelected=!0,s.branchName=o.branchName,s.pro=n,c.push(s),wx.setStorageSync("bookingDataList"+a.globalData.autoId,c),wx.setStorageSync("bookingData"+a.globalData.autoId,n),i?wx.navigateTo({url:"../../order/order?proPrice="+e.data.price*e.data.count+"&status=booking&roomType="+e.data.proInfoDetail.roomType}):(d=!0,wx.navigateTo({url:"../../login/login"}))}else if("51"==t||"52"==t||"3"==t||"6"==t){o.price=e.data.activityPrice;var l=[],u=[],p={};l.push(o),p.branchInfoId=o.branchInfoId,p.isSelected=!0,p.branchName=o.branchName,p.groupOrderNo="51"==t?"0":e.data.groupOrderNo,p.pro=l,u.push(p),wx.setStorageSync("groupProDataList"+a.globalData.autoId,u),wx.setStorageSync("groupProData"+a.globalData.autoId,l),i?3==e.data.proInfoDetail.activityType?e.checkSeckillCount().then(function(o){console.log(o),0==o.data.code?a.hint("活动已经结束"):2==o.data.code?a.hint("产品已经退出该活动"):e.data.count+o.data.buyCount<=o.data.limitCount?wx.navigateTo({url:"../../order/order?proPrice="+e.data.activityPrice*e.data.count+"&status="+t+"&activityId="+e.data.proInfoDetail.activityId}):wx.showModal({title:"",content:"当前活动最多可购买"+o.data.limitCount+"件，您已超出购买数量，是否以原价购买",success:function(t){t.confirm?e.originalPriceBuy():t.cancel}})}):wx.navigateTo({url:"../../order/order?proPrice="+e.data.activityPrice*e.data.count+"&status="+t+"&activityId="+e.data.proInfoDetail.activityId}):(d=!0,wx.navigateTo({url:"../../login/login"}))}else{var h=wx.getStorageSync("cartData"+a.globalData.autoId);if(h){r=h;for(var g=!1,m=0;m<r.length;m++)if(r[m].moduleId==b)return g=!0,void wx.showModal({title:"提示",content:"该商品已在购物车中！",confirmText:"去购物车",success:function(t){t.confirm&&(e.data.isPerson||"meirong"==e.data.projectType||"education"==e.data.projectType||"enterprise"==e.data.projectType?wx.navigateTo({url:a.globalData.pagesPath.cartPath}):wx.switchTab({url:a.globalData.pagesPath.cartPath}))}});if(g&&(r.push(o),"1"==t))return void(e.data.isPerson||"meirong"==e.data.projectType||"education"==e.data.projectType||"enterprise"==e.data.projectType?wx.navigateTo({url:a.globalData.pagesPath.cartPath}):wx.switchTab({url:a.globalData.pagesPath.cartPath}))}else r=[];r.push(o),e.setData({showCartPoint:!1});try{wx.setStorageSync("cartData"+a.globalData.autoId,r),"1"==t?setTimeout(function(){e.data.isPerson||"meirong"==e.data.projectType||"education"==e.data.projectType||"enterprise"==e.data.projectType?wx.navigateTo({url:a.globalData.pagesPath.cartPath}):wx.switchTab({url:a.globalData.pagesPath.cartPath})},500):(e.setData({showProAttr:!1}),wx.showToast({title:"添加成功",icon:"success",duration:2e3}))}catch(t){a.hint("添加购物车失败")}}}},toBuy:function(){this.setData({attrBtnStatus:"1"}),"6"!=this.data.activityType||"3"!=this.data.memberType&&!this.data.parentId?this.addCart("1"):this.addCart("6")},toBuy1:function(){""!=b?"6"!=this.data.activityType||"3"!=this.data.memberType&&!this.data.parentId?this.addCart("1"):this.addCart("6"):a.hint("请选择商品属性")},carttap:function(){var t=this;t.data.isPerson||"meirong"==t.data.projectType||"education"==t.data.projectType||"enterprise"==t.data.projectType?wx.navigateTo({url:a.globalData.pagesPath.cartPath}):wx.switchTab({url:a.globalData.pagesPath.cartPath})},toSeckill:function(){this.addCart("3")},checkSeckillCount:function(){var t=this;return new Promise(function(o,i){wx.request({url:a.globalData.comUrl+"activityProduct_checkActivityStatus.action",data:{appId:e.appId,productId:t.data.productId,activityId:t.data.proInfoDetail.activityId,memberId:a.getMemberId()},success:function(t){o(t)}})})},originalPriceBuy:function(){var t=this,e={productId:t.data.proInfoDetail.id,productName:t.data.proInfoDetail.productName,productCode:t.data.proInfoDetail.productCode,count:t.data.count,pic_url:t.data.pic_url,price:t.data.price,moduleId:b,proAttrName:D,modelName:t.data.modelName,branchInfoId:t.data.proInfoDetail.branchInfoId,branchName:t.data.proInfoDetail.branchName,isSelected:!0},o=wx.getStorageSync("cartData"+a.globalData.autoId);if(console.log(o),0!=o){r=o,console.log(b);for(var i=!1,n=0;n<r.length;n++)if(r[n].moduleId==b)return i=!0,void wx.showModal({title:"提示",content:"该商品已在购物车中！",confirmText:"去购物车",success:function(e){e.confirm&&(t.data.isPerson||"meirong"==t.data.projectType||"education"==t.data.projectType||"enterprise"==t.data.projectType?wx.navigateTo({url:a.globalData.pagesPath.cartPath}):wx.switchTab({url:a.globalData.pagesPath.cartPath}))}});if(!i)return r.push(e),wx.setStorageSync("cartData"+a.globalData.autoId,r),void(t.data.isPerson||"meirong"==t.data.projectType||"education"==t.data.projectType||"enterprise"==t.data.projectType?wx.navigateTo({url:a.globalData.pagesPath.cartPath}):wx.switchTab({url:a.globalData.pagesPath.cartPath}))}else(r=[]).push(e),wx.setStorageSync("cartData"+a.globalData.autoId,r),setTimeout(function(){t.data.isPerson||"meirong"==t.data.projectType||"education"==t.data.projectType||"enterprise"==t.data.projectType?wx.navigateTo({url:a.globalData.pagesPath.cartPath}):wx.switchTab({url:a.globalData.pagesPath.cartPath})},500)},toCreateGroup:function(){var t=this;wx.request({url:a.globalData.comUrl+"activityProduct_checkActivityStatus.action",data:{appId:e.appId,productId:t.data.productId,activityId:t.data.proInfoDetail.activityId},success:function(e){0==e.data.code?a.hint("活动已经结束"):2==e.data.code?a.hint("产品已经退出该活动"):t.addCart("51")}})},addcarttap:function(){var t=this;console.log(t.data.hiddenMulType),this.setData({attrBtnStatus:"1"}),this.addCart("2")},addcarttap1:function(){""!=b?this.addCart("2"):a.hint("请选择商品属性")},joinGroup:function(t){this.setData({groupOrderNo:t.currentTarget.dataset.no}),this.addCart("52")},navtap:function(t){this.setData({navIdx:t.currentTarget.dataset.idx})},commenttap:function(){if(a.getMemberId()){var t=this;wx.navigateTo({url:"../comment/publish-comment/publish-comment?productId="+t.data.productId})}else wx.navigateTo({url:"../../login/login"})},getModelInfo:function(t){var a=this;if(!y[t.currentTarget.dataset.index][t.currentTarget.dataset.attrindex]){for(var e=0;e<y[t.currentTarget.dataset.index].length;e++)f[t.currentTarget.dataset.index]=[],y[t.currentTarget.dataset.index][e]=!1;y[t.currentTarget.dataset.index][t.currentTarget.dataset.attrindex]=!t.currentTarget.dataset.status,f[t.currentTarget.dataset.index]=t.currentTarget.dataset.typeid,v=f.join(";"),""!=(b=a.getModuleId(v))&&a.setData({showCurAttr:!1}),a.setData({active:y})}},getModuleId:function(t){for(var a=this,e=t.split(";"),o=a.data.proInfoDetail.productModelList,i=e[1]+";"+e[0],r=0;r<o.length;r++)if(o[r].valueIds==t||o[r].valueIds==i){b=o[r].id,D=o[r].originalAttr,T=o[r].modelName,w=o[r].gotPoint,P=o[r].maxPoints,x=o[r].pricePerPoint,a.setData({stock:o[r].stock,price:o[r].price,activityPrice:o[r].activityPrice,originalPrice:o[r].originalprice,modelName:o[r].modelName,modelImage:o[r].modelImage}),I="3"==a.data.buyType||"51"==a.data.buyType||"52"==a.data.buyType||"6"==a.data.buyType&&("3"==a.data.memberType||a.data.parentId)?this.data.activityPrice*this.data.count:""!=a.data.buyType||"5"!=a.data.activityType&&("6"!=a.data.activityType||"3"!=a.data.memberType&&!a.data.parentId)?this.data.price*this.data.count:this.data.activityPrice*this.data.count,this.setData({totalPrice:Number(I.toFixed(2))}),a.data.proInfoDetail.productImageVOList.length>0&&a.setData({pic_url:a.data.proInfoDetail.productImageVOList[0].imageURL});break}return b},countAdd:function(){var t=this;this.data.count++,I="3"==t.data.buyType||"51"==t.data.buyType||"52"==t.data.buyType||"6"==t.data.buyType&&("3"==t.data.memberType||t.data.parentId)?this.data.activityPrice*this.data.count:""!=t.data.buyType||"5"!=t.data.activityType&&("6"!=t.data.activityType||"3"!=t.data.memberType&&!t.data.parentId)?this.data.price*this.data.count:this.data.activityPrice*this.data.count,this.setData({totalPrice:Number(I.toFixed(2)),count:this.data.count})},countSubtract:function(){var t=this;this.data.count>1&&(this.data.count--,I="3"==t.data.buyType||"51"==t.data.buyType||"52"==t.data.buyType||"6"==t.data.buyType&&("3"==t.data.memberType||t.data.parentId)?this.data.activityPrice*this.data.count:""!=t.data.buyType||"5"!=t.data.activityType&&("6"!=t.data.activityType||"3"!=t.data.memberType&&!t.data.parentId)?this.data.price*this.data.count:this.data.activityPrice*this.data.count,this.setData({totalPrice:Number(I.toFixed(2)),count:this.data.count}))},bindCountInput:function(t){var a=this;this.setData({count:t.detail.value}),I="3"==a.data.buyType||"51"==a.data.buyType||"52"==a.data.buyType||"6"==a.data.buyType&&("3"==a.data.memberType||a.data.parentId)?this.data.activityPrice*this.data.count:""!=a.data.buyType||"5"!=a.data.activityType&&("6"!=a.data.activityType||"3"!=a.data.memberType&&!a.data.parentId)?this.data.price*this.data.count:this.data.activityPrice*this.data.count,this.setData({totalPrice:Number(I.toFixed(2))})},changeProAttrFrame:function(){""!=b?(this.setData({showProAttr:!this.data.showProAttr}),""!=this.data.buyType&&this.addCart(this.data.buyType)):a.hint("请选择商品属性")},toggleProAttrFrame:function(){I=6==this.data.activityType&&3!=this.data.memberType?this.data.price:0==this.data.activityPrice?this.data.price:this.data.activityPrice,this.setData({totalPrice:I*this.data.count,showProAttr:!this.data.showProAttr,buyType:""}),0==this.data.activityType&&1==this.data.proInfoDetail.purpose&&this.setData({attrBtnStatus:2})},getCollectStatus:function(){if(i=a.getMemberId()){var t=this;wx.request({url:a.globalData.comUrl+"tabs_checkCollection.action",data:{appId:e.appId,memberId:i,id:t.data.proInfoDetail.id},success:function(e){var o=a.getJsonData(e.data);t.setData({collectStatus:o.isExisted})},fail:function(t){a.hint()},complete:function(){n=!0,d=!0}})}},collect:function(){if(0!=n){n=!1;var t=this;(i=a.getMemberId())?wx.request({url:a.globalData.comUrl+"tabs_addCollection.action",data:{appId:e.appId,type:1,name:t.data.proInfoDetail.productName,objId:t.data.proInfoDetail.id,memberId:i,pic_url:t.data.proInfoDetail.productImageVOList[0].imageURL||"",price:t.data.proInfoDetail.price},success:function(a){wx.showToast({title:"收藏成功",icon:"success",duration:2e3}),t.getCollectStatus()},fail:function(t){a.hint("收藏失败")}}):(n=!0,wx.navigateTo({url:"../../login/login"}))}},cancelCollect:function(){if(0!=d){d=!1;var t=this;(i=a.getMemberId())?wx.request({url:a.globalData.comUrl+"tabs_delCollectionByObjId.action",data:{id:t.data.proInfoDetail.id,memberId:i},success:function(a){wx.showToast({title:"已取消收藏",icon:"success",duration:2e3}),t.getCollectStatus()},fail:function(t){a.hint("取消收藏失败")}}):(d=!0,wx.navigateTo({url:"../../login/login"}))}},makeCall:function(){var t=this.data.proInfoDetail.telNum;t&&t.length>1?wx.makePhoneCall({phoneNumber:t}):a.hint("客服电话无效！")},getStoreHidden:function(){var t=this;wx.request({url:a.globalData.comUrl+"tabs_getCustomizeTabsById.action",data:{appId:e.appId,customizeTabId:o.LynxAbout_Merchant},success:function(e){var o=a.getJsonData(e.data);t.setData({isStoreHidden:o.isDeleted})}})},toProDetail:function(t){wx.navigateTo({url:"pro-detail?productId="+t.currentTarget.dataset.pid})},beforehand:function(){var t=this;i?wx.navigateTo({url:"../beforehand/beforehand?productName="+t.data.proInfoDetail.productName+t.data.modelName+"&branchName="+t.data.proInfoDetail.branchName+"&branchId="+t.data.proInfoDetail.merchantId+"&roomType="+t.data.proInfoDetail.roomType}):(d=!0,wx.navigateTo({url:"../../login/login"}))},getPoint:function(t){var e=(new Date).valueOf(),o="action=ShareProd&appId="+a.globalData.projectInfo.appId+"&memberId="+a.getMemberId()+"&time="+e+"&key=DOTI#!81a335op77CYlo541f6eb5555m",i=l.hexMD5(o);wx.request({url:a.globalData.comUrl+"wallet_addMemberMPointRecord.action",data:{action:"ShareProd",appId:a.globalData.projectInfo.appId,memberId:a.getMemberId(),time:e,sign:i.toLocaleUpperCase()}})},onShareAppMessage:function(){var t=this;t.setData({showShareBox:!1});var e="";return e="3"==t.data.memberType&&"6"==t.data.activityType?"/pages/product/pro-detail/pro-detail?productId="+t.data.proInfoDetail.id+"&parentId="+a.getMemberId():"/pages/product/pro-detail/pro-detail?productId="+t.data.proInfoDetail.id,t.pointsSet.pointsSwitch&&t.getPoint(),{title:t.data.proInfoDetail.productName,path:e,success:function(t){},fail:function(t){}}},onShowShareBox:function(){var t=this;t.setData({showShareBox:!t.data.showShareBox})},showCouponList:function(){this.setData({hiddenCouponList:!this.data.hiddenCouponList})},getCoupon:function(t){var e=this,o=a.getMemberId()||"";""!=o?0!=t.currentTarget.dataset.getcoupon&&wx.request({url:a.globalData.comUrl+"act_addMemberActivity.action",data:{activityId:t.currentTarget.dataset.id,memberId:o,customizetabId:a.getCustomizeId("Activity")},success:function(t){"0"!=a.getJsonData(t.data).code?(a.hint("领取成功"),e.setData({hiddenCouponList:!0}),e.getCouponInfo(e.data.proInfoDetail.branchInfoId)):a.hint("领取失败")},fail:function(t){a.hint()}}):wx.navigateTo({url:"../../login/login"})},getCommentList:function(){console.log(a.globalData.wxUserInfo);var t=this;wx.request({url:a.globalData.comUrl+"tabs_getCommentList.action",data:{current:1,productId:t.data.productId},success:function(e){var o=a.getJsonData(e.data);t.setData({commentList:o.pageList})}})},hometap:function(){wx.switchTab({url:"../../index/index"})},refresh:function(){var t=this;wx.showLoading({title:"加载中..."}),t.setData({showShareBox:!1}),t.getProDetail().then(function(a){wx.hideLoading(),t.getCollectStatus(),t.getCommentList(),t.getCouponInfo(a.branchInfoId),t.getGroupList(a.id)})},seeAllComment:function(){var t=this;wx.navigateTo({url:"../comment/comment?productId="+t.data.productId})},previewImage:function(){var t=this,a=[];if(t.data.modelImage.length>0)for(var e=0;e<t.data.proInfoDetail.productModelList.length;e++){var o=t.data.proInfoDetail.productModelList[e];o.modelImage&&o.modelImage.length>0&&a.push(o.modelImage)}else a.push(t.data.proInfoDetail.productImageVOList[0].imageURL);c=!0,wx.previewImage({current:t.data.modelImage,urls:a})},showBox:function(){var t=this;this.setData({hideBox:!this.data.hideBox}),wx.getSystemInfo({success:function(a){t.setData({canvasWidth:a.windowWidth,canvasHeight:a.windowHeight+64})}});var a=t.data.proInfoDetail.productImageVOList[0].imageURL.replace("http","https");wx.getImageInfo({src:a,success:function(a){var e=a.path;t.getQRCode().then(function(a){t.data.proInfoDetail.productName.length>11&&(t.data.proInfoDetail.productName=t.data.proInfoDetail.productName.slice(0,11)+"...");var o=wx.createCanvasContext("shareImg");if(o.setFillStyle("#fff"),o.fillRect(0,0,t.data.canvasWidth,t.data.canvasHeight),o.drawImage(e,(t.data.canvasWidth-270)/2,30,270,270),o.setTextAlign("center"),o.setFillStyle("#000"),o.setFontSize(22),o.fillText(t.data.proInfoDetail.productName,t.data.canvasWidth/2,340),1==t.data.proInfoDetail.purpose||3==t.data.proInfoDetail.purpose){o.setTextAlign("center"),o.setFillStyle("#FF3939"),o.setFontSize(18);var i=0==t.data.activityPrice?t.data.price:t.data.activityPrice;o.fillText("￥"+i,t.data.canvasWidth/2,376)}o.setTextAlign("center"),o.setFillStyle("#a4a4a4"),o.setFontSize(14),o.fillText("长按保存图片识别二维码",t.data.canvasWidth/2,410),o.drawImage(t.data.localQrCodeUrl,(t.data.canvasWidth-190)/2,430,190,190),o.stroke(),o.draw(),setTimeout(function(){wx.canvasToTempFilePath({x:0,y:0,width:t.data.canvasWidth,height:t.data.canvasHeight,destWidth:t.data.canvasWidth,destHeight:t.data.canvasHeight,canvasId:"shareImg",success:function(a){console.log(a.tempFilePath),t.setData({prurl:a.tempFilePath}),wx.hideLoading()},fail:function(t){console.log(t)}})},500)})},fail:function(t){}})},getQRCode:function(){var t=this;return new Promise(function(e,o){wx.request({url:a.globalData.paymentUrl+"/WechatAlipay/getWXAcode",data:{page:"pages/product/pro-detail/pro-detail",projectId:a.globalData.projectInfo.appId,scene:t.data.productId},success:function(a){console.log(a),wx.getImageInfo({src:a.data.content.miniQRCode,success:function(a){var o=a.path;t.setData({localQrCodeUrl:o}),e(t.data.localQrCodeUrl)},fail:function(t){}})},fail:function(){a.hint()}})})},generateImage:function(){var t=this;""==t.data.prurl||void 0==t.data.prurl?(wx.showLoading({title:"努力生成中..."}),setTimeout(function(){""!=t.data.prurl&&void 0!=t.data.prurl&&wx.previewImage({current:t.data.prurl,urls:[t.data.prurl]})},3e3)):wx.previewImage({current:t.data.prurl,urls:[t.data.prurl]}),t.setData({hideBox:!t.data.hideBox})}}); 
 			}); 	require("pages/product/pro-detail/pro-detail.js");
 		__wxRoute = 'pages/product/pro-list/pro-list';__wxRouteBegin = true; 	define("pages/product/pro-list/pro-list.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=1,e=1,i=!1,o=void 0,s=void 0,r=void 0,c=void 0,n=void 0,d=void 0,u=t.globalData.projectInfo;Page({data:{productList:[],hasPro:!0,bottomHint:!0,listStyle:!1,isGroup:t.globalData.isGroup,actDistribution:{},hideComboBox:!0,showVal:"综合",hiddenTo:!0,styleConfig:t.globalData.styleConfig,back:!1,MinMoneyVal:"",MaxMoneyVal:"",sort:"comprehensive",ThePrice:"",merchantId:"",trademark:"",carryOut:!1,currentIdx:"0"},onLoad:function(a){r=a,c=a.flag,d=a.name,this.getProductList(r),t.globalData.actDistribution&&this.setData({actDistribution:t.globalData.actDistribution});var e=wx.getStorageSync("memberType"+t.globalData.autoId);this.setData({memberType:e}),a.title&&wx.setNavigationBarTitle({title:a.title})},navtap:function(t){var a=t.currentTarget.dataset.idx;"0"==a?this.setData({hideComboBox:!this.data.hideComboBox,currentIdx:a}):"1"==a?(this.setData({productList:[],sort:"buyCount",ThePrice:"desc",currentIdx:a}),this.getProductList(r)):this.setData({hiddenTo:!this.data.hiddenTo,currentIdx:a})},blanktap:function(){this.setData({hideComboBox:!0})},navItemtap:function(t){console.log(t);var a="";0==t.currentTarget.dataset.idx?(a="综合",this.setData({sort:"comprehensive",ThePrice:"asc"})):1==t.currentTarget.dataset.idx?(a="新品",this.setData({sort:"createDate",ThePrice:"desc"})):2==t.currentTarget.dataset.idx?(a="价格降序",this.setData({sort:"price",ThePrice:"desc"})):(a="价格升序",this.setData({sort:"price",ThePrice:"asc"})),this.setData({productList:[],showVal:a,onHover:!0}),this.getProductList(r)},hiddenTo:function(){this.setData({hiddenTo:!0})},onselect:function(t){console.log(t);var a=t.currentTarget.dataset.idx;this.setData({back:!0,active:a}),console.log(this.data.active,this.data.back),this.setData({merchantId:t.currentTarget.dataset.bid})},MinMoney:function(t){this.setData({MinMoneyVal:t.detail.value})},MaxMoney:function(t){this.setData({MaxMoneyVal:t.detail.value})},moneyWay:function(){this.data.MinMoneyVal>this.data.MaxMoneyVal&&this.setData({MinMoneyVal:this.data.MaxMoneyVal,MaxMoneyVal:this.data.MinMoneyVal})},reset:function(){this.setData({productList:[],merchantId:"",MinMoneyVal:"",MaxMoneyVal:"",back:!1}),this.getProductList(r)},confirm:function(){this.moneyWay(),this.setData({productList:[],hiddenTo:!0}),this.getProductList(r)},encapsulation:function(){var t=this.data.productList;console.log(t);var a=[],e={};t.forEach(function(t){if(!e[t.branchName]){var i={branchName:t.branchName,branchInfoId:t.branchInfoId};a.push(i),e[t.branchName]=1}}),this.setData({trademark:a})},packaging:function(a){var i=t.getJsonData(a.data);e=i.pages,i.pageList.forEach(function(a){if(void 0!=a.productImageVOList&&a.productImageVOList.length>0){var e=a.productImageVOList[0].imageURL;a.productImageVOList[0].imageURL=t.modifyPicSize(e,"_r220x220p")}else if(void 0!=a.productImageList&&a.productImageList.length>0){var i=a.productImageList[0].imageURL;a.productImageList[0].imageURL=t.modifyPicSize(i,"_r220x220p")}}),this.setData({productList:this.data.productList.concat(i.pageList)}),this.setData({hasPro:!!this.data.productList.length}),this.encapsulation()},getProductList:function(r){var g=this;e=1;var l=this,h={customizeTabId:t.globalData.customizeTabId.LynxProductList,sortName:l.data.sort,sortType:l.data.ThePrice,current:a,status:2,isGroup:t.globalData.isGroup,branchInfoId:l.data.merchantId,minimumPrice:l.data.MinMoneyVal,maximumPrice:l.data.MaxMoneyVal};null!=l.data.merchantId&&""!=l.data.merchantId||delete h.branchInfoId,n=h,r.bigCateCode?(console.log(r),console.log(2),i=!0,o=r.bigCateCode,void 0==n.bigCateGoryCode&&(n.bigCateGoryCode=o),d&&(delete n.bigCateGoryCode,n.appId=u.appId,n.productName=d),wx.request({url:t.globalData.comUrl+"tabs_getZXProductListByCategory.action",data:n,success:function(a){var i=t.getJsonData(a.data);e=i.pages,i.pageList.forEach(function(a){if(void 0!=a.productImageVOList&&a.productImageVOList.length>0){var e=a.productImageVOList[0].imageURL;a.productImageVOList[0].imageURL=t.modifyPicSize(e,"_r220x220p")}else if(void 0!=a.productImageList&&a.productImageList.length>0){var i=a.productImageList[0].imageURL;a.productImageList[0].imageURL=t.modifyPicSize(i,"_r220x220p")}}),g.setData({productList:i.pageList}),g.encapsulation()}})):(s=r.categoryCode,c?h.categoryCode=r.categoryCode:h.subdivideCategoryCode=r.categoryCode,wx.request({url:t.globalData.comUrl+"tabs_getProductListByAttribute.action",data:h,success:function(a){var i=t.getJsonData(a.data);e=i.pages,i.pageList.forEach(function(a){if(void 0!=a.productImageVOList&&a.productImageVOList.length>0){var e=a.productImageVOList[0].imageURL;a.productImageVOList[0].imageURL=t.modifyPicSize(e,"_r220x220p")}else if(void 0!=a.productImageList&&a.productImageList.length>0){var i=a.productImageList[0].imageURL;a.productImageList[0].imageURL=t.modifyPicSize(i,"_r220x220p")}}),g.setData({productList:i.pageList}),g.encapsulation()}})),wx.stopPullDownRefresh()},changeclum:function(){this.setData({listStyle:!this.data.listStyle,bottomHint:!0})},toSearch:function(t){wx.navigateTo({url:"../../search/search?type=0&ids=0"})},toProDetail:function(t){wx.navigateTo({url:"../pro-detail/pro-detail?productId="+t.currentTarget.dataset.pid})},onReachBottom:function(){var a=this,o=n;console.log(o),o.current<e?(o.current++,i?wx.request({url:t.globalData.comUrl+"tabs_getZXProductListByCategory.action",data:o,success:function(t){a.setData({carryOut:!0}),a.packaging(t)}}):wx.request({url:t.globalData.comUrl+"tabs_getProductListByAttribute.action",data:o,success:function(t){a.setData({carryOut:!0}),a.packaging(t)}})):a.setData({bottomHint:!1})},onPullDownRefresh:function(){a=1,this.setData({productList:[],hasPro:!0,bottomHint:!0}),i=!1,this.getProductList(r)}}); 
 			}); 	require("pages/product/pro-list/pro-list.js");
 		__wxRoute = 'pages/product/product';__wxRouteBegin = true; 	define("pages/product/product.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="",e="";Page({data:{styleConfig:t.globalData.styleConfig,bigCateArr:[],smallCateArr:[],showItem:0,categoryCode:"",categoryId:0,code:"",bigCateId:"",windowHeight:"",searchFrameHeight:"",changeclass:""},onLoad:function(){this.setData({changeclass:t.globalData.changeClassify}),console.log(t.globalData.changeClassify),a=t.globalData.projectInfo,e=t.globalData.customizeTabId;var o=this;wx.getSystemInfo({success:function(t){console.log(t),o.setData({windowHeight:t.windowHeight})}}),o.getBigCateGory(),1==o.data.changeclass&&(o.getSearchFrameHeight(),o.getCateGoryList())},getBigCateGory:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{customizeTabId:e.LynxProductList},success:function(e){var o=t.getJsonData(e.data);a.setData({bigCateArr:o}),1==a.data.changeclass?a.bigCateTap():a.oldBigCateTap(),wx.hideToast()}})},getSearchFrameHeight:function(){var t=this,a=wx.createSelectorQuery();a.select("#top").boundingClientRect(),a.exec(function(a){t.setData({searchFrameHeight:a[0].height})})},getCateGoryList:function(){wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0});var a=this;wx.request({url:t.globalData.comUrl+"tabs_getAllCategoryListBycustomizeTab.action",data:{customizeTabId:e.LynxProductList,level:3},success:function(e){var o=t.getJsonData(e.data);console.log(o);for(var r=0;r<o.length;r++)o[r].categoryPicture=t.modifyPicSize(o[r].categoryPicture,"_r60x60p");a.setData({bigCateArr:o}),wx.hideToast(),wx.stopPullDownRefresh()}})},scroll:function(t){for(var a=0;a<this.data.bigCateArr.length;a++)this.queryMultipleNodes(a)},queryMultipleNodes:function(t){var a=this,e=wx.createSelectorQuery();e.select("#bigcate"+t).boundingClientRect(),e.selectViewport().scrollOffset(),e.exec(function(e){var o=e[0].top;0<=o&&o<=150&&a.setData({showItem:t})})},bigCateTap:function(t){var a=this;t?this.setData({showItem:t.target.dataset.index,categoryId:t.target.dataset.id,categoryCode:t.target.dataset.bigcode,bigCateId:"bigcate"+t.target.dataset.index}):this.setData({showItem:0,categoryId:a.data.bigCateArr[0].id,categoryCode:a.data.bigCateArr[0].code})},oldBigCateTap:function(a){console.log(a);var o=this;a?(console.log(a),this.setData({showItem:a.currentTarget.dataset.index,categoryId:a.currentTarget.dataset.id,categoryCode:a.currentTarget.dataset.bigcode})):this.setData({showItem:0,categoryId:o.data.bigCateArr[0].id,categoryCode:o.data.bigCateArr[0].code}),wx.request({url:t.globalData.comUrl+"tabs_getCategoryByParent.action",data:{customizeTabId:e.LynxProductList,parentId:o.data.categoryId},success:function(a){for(var e=t.getJsonData(a.data),r=0;r<e.length;r++)e[r].categoryPicture=t.modifyPicSize(e[r].categoryPicture,"_r160x160p");o.setData({smallCateArr:e}),wx.stopPullDownRefresh()}})},toSearch:function(t){wx.navigateTo({url:"../search/search?type=0"})},onPullDownRefresh:function(){this.setData({showItem:0,categoryCode:"",categoryId:0,code:"",bigCateId:""}),this.getBigCateGory(),1==this.data.changeclass&&(this.getSearchFrameHeight(),this.getCateGoryList())},toProductList:function(t){var a=this;this.setData({code:t.currentTarget.dataset.code}),t.currentTarget.dataset.flag?wx.navigateTo({url:"sub-category/sub-category?categoryId="+t.currentTarget.dataset.id+"&title="+t.currentTarget.dataset.title}):wx.navigateTo({url:"pro-list/pro-list?categoryCode="+a.data.code+"&flag=1&title="+t.currentTarget.dataset.title})}}); 
 			}); 	require("pages/product/product.js");
 		__wxRoute = 'pages/product/sub-category/sub-category';__wxRouteBegin = true; 	define("pages/product/sub-category/sub-category.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,e=t.globalData.customizeTabId;Page({data:{categoryList:[],hasDataFlag:!0},onLoad:function(o){a=t.globalData.projectInfo,e=t.globalData.customizeTabId,wx.setNavigationBarTitle({title:o.title}),wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0});var r=this;wx.request({url:t.globalData.comUrl+"tabs_getCategoryByParent.action",data:{customizeTabId:e.LynxProductList,parentId:o.categoryId},success:function(a){var e=t.getJsonData(a.data);r.setData({categoryList:e,hasDataFlag:e.length>0}),wx.hideToast()}})},toProList:function(t){t.currentTarget.dataset.flag?wx.navigateTo({url:"sub-category?categoryId="+t.currentTarget.dataset.id+"&title="+t.currentTarget.dataset.title}):wx.navigateTo({url:"../pro-list/pro-list?categoryCode="+t.currentTarget.dataset.code})}}); 
 			}); 	require("pages/product/sub-category/sub-category.js");
 		__wxRoute = 'pages/product/beforehand/beforehand';__wxRouteBegin = true; 	define("pages/product/beforehand/beforehand.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=getApp();Page({data:{date:"",time:"",productName:"",branchName:"",branchId:"",mtype:e.globalData.ext.hotel,totalDays:1,nowDate:"",comeDateInfo:"",leaveDateInfo:"",styleConfig:e.globalData.styleConfig},onLoad:function(e){this.getNowFormatDate(),this.getFlexiForm(),this.setData({productName:e.productName,branchName:e.branchName,branchId:e.branchId,roomType:e.roomType})},onShow:function(){this.getComeAndGoTime()},onUnload:function(){wx.removeStorageSync("comeDate"+e.globalData.autoId),wx.removeStorageSync("comeDate"+e.globalData.autoId)},getComeAndGoTime:function(){if(1==this.data.mtype&&2==this.data.roomType){var a=wx.getStorageSync("comeDate"+e.globalData.autoId),t=wx.getStorageSync("leaveDate"+e.globalData.autoId),o=new Date;if(a&&t)this.setData({nowDate:o.getMonth()+1+"月"+o.getDate()+"日",comeDateInfo:a,leaveDateInfo:t,totalDays:e.DateDiff(t.re,a.re)});else{var l=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),n=e.calculatDateBydays(l,1),i=n.split("-");a={date:o.getMonth()+1+"月"+o.getDate()+"日",week:e.getWeek(l),re:l},t={date:i[1]+"月"+i[2]+"日",week:e.getWeek(n),re:n},this.setData({nowDate:o.getMonth()+1+"月"+o.getDate()+"日",comeDateInfo:a,leaveDateInfo:t})}}},selectBookingTime:function(){wx.navigateTo({url:"../../order/calendar/calendar"})},getFlexiForm:function(){wx.request({url:e.globalData.comUrl+"tabs_getFlexiForm.action",data:{customizeTabId:e.globalData.customizeTabId["Flexi-Form-Booking"]},success:function(a){var t=e.getJsonData(a.data);console.log(t)}})},getNowFormatDate:function(){var e=new Date,a=e.getMonth()+1,t=e.getDate(),o=e.getHours(),l=e.getMinutes();a>=1&&a<=9&&(a="0"+a),t>=0&&t<=9&&(t="0"+t),o>=1&&o<=9&&(o="0"+o),l>=1&&l<=9&&(l="0"+l);var n=e.getFullYear()+"-"+a+"-"+t,i=o+":"+l;console.log(n),console.log(i),this.setData({date:n,time:i})},bindDateChange:function(e){console.log("picker发送选择改变，携带值为",e.detail.value),this.setData({date:e.detail.value})},bindTimeChange:function(e){console.log("picker发送选择改变，携带值为",e.detail.value),this.setData({time:e.detail.value})},formSubmit:function(a){var t=this;console.log(a.detail.value);var o=/^1[34578]\d{9}$/;if(""!=a.detail.value.name&&0!==a.detail.value.name.trim().length)if(""!=a.detail.value.phone)if(o.test(a.detail.value.phone)){var l="",n="";1==t.data.mtype&&2==t.data.roomType?""==a.detail.value.remarks?(l="姓名,电话,入住日期,离店日期",n=a.detail.value.name+","+a.detail.value.phone+","+t.data.comeDateInfo.re+","+t.data.leaveDateInfo.re):(l="姓名,电话,入住日期,离店日期,留言",n=a.detail.value.name+","+a.detail.value.phone+","+t.data.comeDateInfo.re+","+t.data.leaveDateInfo.re+","+a.detail.value.remarks):""==a.detail.value.remarks?(l="姓名,电话,预约日期,预约时间",n=a.detail.value.name+","+a.detail.value.phone+","+a.detail.value.date+","+a.detail.value.time):(l="姓名,电话,预约日期,预约时间,留言",n=a.detail.value.name+","+a.detail.value.phone+","+a.detail.value.date+","+a.detail.value.time+","+a.detail.value.remarks),wx.showToast({title:"预约中...",icon:"loading",duration:1e4,mask:!0}),wx.request({url:e.globalData.comUrl+"tabs_saveFlexiForm",data:{projectId:e.globalData.projectInfo.appId,customizeTabId:e.globalData.customizeTabId["Flexi-Form-Booking"],token:"html5",fieldKey:l,fieldValue:n,productName:t.data.productName,branchName:t.data.branchName,branchId:t.data.branchId,memberId:e.getMemberId()},success:function(a){wx.hideToast();var t=e.getJsonData(a.data);wx.redirectTo({url:"bh-detail/bh-detail?id="+t.id})},fail:function(){wx.hideToast(),e.hint("预约失败")}})}else this.warn("请输入正确的电话号码");else this.warn("请输入电话号码!");else this.warn("姓名不能为空!")},warn:function(e){wx.showToast({title:e,image:"../../../img/warn.png",duration:2e3})}}); 
 			}); 	require("pages/product/beforehand/beforehand.js");
 		__wxRoute = 'pages/product/beforehand/bh-detail/bh-detail';__wxRouteBegin = true; 	define("pages/product/beforehand/bh-detail/bh-detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp();Page({data:{detailList:[],styleConfig:t.globalData.styleConfig},onLoad:function(t){this.getBookingDetail(t.id)},getBookingDetail:function(a){var i=this;wx.request({url:t.globalData.comUrl+"tabs_getFlexiFormDetail.action",data:{id:a,current:1},success:function(a){var e=t.getJsonData(a.data);console.log(e),i.setData({detailList:e.flexiFormVoList})}})},toHome:function(){wx.switchTab({url:"../../../index/index"})}}); 
 			}); 	require("pages/product/beforehand/bh-detail/bh-detail.js");
 		__wxRoute = 'pages/product/comment/comment';__wxRouteBegin = true; 	define("pages/product/comment/comment.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=1,e=1;Page({data:{commentList:[],productId:"",bigImage:"",hideBigImg:!0},onLoad:function(t){this.setData({productId:t.productId}),this.getCommentList()},getCommentList:function(){var i=this;wx.request({url:t.globalData.comUrl+"tabs_getCommentList.action",data:{current:a,productId:i.data.productId},success:function(a){var o=t.getJsonData(a.data);e=o.pages,i.setData({commentList:i.data.commentList.concat(o.pageList)})}})},pictap:function(t){this.setData({bigImage:t.currentTarget.dataset.pic,hideBigImg:!1})},exitBigImg:function(){this.setData({hideBigImg:!0})},onReachBottom:function(){a<e&&(a++,this.getCommentList())}}); 
 			}); 	require("pages/product/comment/comment.js");
 		__wxRoute = 'pages/product/comment/publish-comment/publish-comment';__wxRouteBegin = true; 	define("pages/product/comment/publish-comment/publish-comment.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=!0,e=t.globalData.md5;Page({data:{discussList:[],comment:"",imagePath:"",productOrderId:""},onLoad:function(t){this.setData({productOrderId:t.productOrderId}),wx.getLocation({type:"wgs84",success:function(t){}})},takephoto:function(){var t=this;wx.chooseImage({count:1,success:function(a){var e=a.tempFilePaths[0];t.setData({imagePath:e})}})},submit:function(){if(0!=a){a=!1;var e=this,o="";""!=e.data.comment?e.data.imagePath?wx.uploadFile({url:t.globalData.comUrl+"tabs_uploadPicMina.action",filePath:e.data.imagePath,name:"file",success:function(t){var a=JSON.parse(t.data);console.log(a),"1"==a.isSuccess&&(o=a.path,e.addAppComment(o))},fail:function(e){t.hint("图片上传失败"),a=!0}}):e.addAppComment(o):this.warn("\b内容不能为空!")}},addAppComment:function(e){var o=this;wx.request({url:t.globalData.comUrl+"tabs_addAppProductComment.action",data:{address:"",comment:o.data.comment,latitude:t.globalData.g_location.lat,longitude:t.globalData.g_location.lng,memberId:t.getMemberId(),pic:e,productOrderId:o.data.productOrderId,token:"browser"},success:function(e){a=!0,wx.showToast({title:"发布成功",icon:"success",duration:2e3}),t.globalData.pointsSet&&t.globalData.pointsSet.pointsSwitch&&o.getPoint(),setTimeout(function(){wx.navigateBack({delta:1})},2e3)},fail:function(){t.hint("提交失败"),a=!0}})},getPoint:function(a){var o=(new Date).valueOf(),n="action=Comment&appId="+t.globalData.projectInfo.appId+"&memberId="+t.getMemberId()+"&time="+o+"&key=DOTI#!81a335op77CYlo541f6eb5555m",i=e.hexMD5(n);wx.request({url:t.globalData.comUrl+"wallet_addMemberMPointRecord.action",data:{action:"Comment",appId:t.globalData.projectInfo.appId,memberId:t.getMemberId(),time:o,sign:i.toLocaleUpperCase()}})},deleteImage:function(){this.setData({imagePath:""})},bindInput:function(t){this.setData({comment:t.detail.value})},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},onPullDownRefresh:function(){},onReachBottom:function(){},warn:function(t){wx.showToast({title:t,image:"../../../../img/warn.png",duration:2e3})}}); 
 			}); 	require("pages/product/comment/publish-comment/publish-comment.js");
 		__wxRoute = 'pages/self/self/self';__wxRouteBegin = true; 	define("pages/self/self/self.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp(),t=a.globalData.projectInfo,e=a.globalData.customizeTabId,o="";Page({data:{showCustomizeTabId:{},styleConfig:a.globalData.styleConfig,userInfo:{},memberId:"",iconPath:"",nickName:"",cartHasPro:!1,hideInfoTabs:!0,isPerson:a.globalData.isPerson,isShowMemRights:!1,phone:"",orderCount:{}},onLoad:function(){t=a.globalData.projectInfo,e=a.globalData.customizeTabId,wx.showLoading({title:"加载中..."}),a.loginVzSystem();var o=this;a.globalData.isWeb||wx.getSetting({success:function(t){console.log(t),t.authSetting["scope.userInfo"]&&wx.getUserInfo({success:function(t){console.log(t),a.globalData.wxUserInfo=t.userInfo,o.setData({iconPath:t.userInfo.avatarUrl,nickName:t.userInfo.nickName}),wx.request({url:a.globalData.comUrl+"tabs_updateMember.action",data:{appId:a.globalData.projectInfo.appId,memberId:a.getMemberId(),headPortrait:t.userInfo.avatarUrl,surname:t.userInfo.nickName}})}})}}),o.setData({hideInfoTabs:a.globalData.projectInfo.hideInfoTabs,isQuery:a.globalData.isQuery}),o.getCustomizeTabList()},animal:function(){clearInterval(o);var a=this,t=wx.createAnimation({duration:18e3,timingFunction:"linear"}),e=wx.createAnimation({duration:18e3,timingFunction:"linear"});this.animation=t,t.translateY(-200).step(),this.setData({animationData:t.export()}),setTimeout(function(){e.translateY(0).step(),this.setData({animationData:e.export()})}.bind(this),18e3),o=setInterval(function(){t.translateY(-200).step(),a.setData({animationData:t.export()}),setTimeout(function(){e.translateY(0).step(),a.setData({animationData:e.export()})}.bind(this),18e3)},36e3)},onShow:function(){var t=this;t.animal();var e=wx.getStorageSync("mobilePhone"+a.globalData.autoId);t.setData({phone:e}),a.globalData.wxUserInfo&&a.globalData.wxUserInfo.avatarUrl?this.setData({iconPath:a.globalData.wxUserInfo.avatarUrl,nickName:a.globalData.wxUserInfo.nickName}):this.setData({iconPath:"/img/head.png"});var o=wx.getStorageSync("cartData"+a.globalData.autoId);o&&o.length>0?t.setData({cartHasPro:!0}):t.setData({cartHasPro:!1});var n=a.getMemberId();t.getOrderCount(),n?(t.setData({memberId:n}),t.getUserInfo()):wx.hideToast()},getOrderCount:function(){var e=this;wx.request({url:a.globalData.comUrl+"tabs_getAppOrderCount.action",data:{projectId:t.appId,memberId:a.getMemberId()},success:function(a){console.log(a.data.content),e.setData({orderCount:a.data.content})}})},getCustomizeTabList:function(){var e=this;wx.request({url:a.globalData.comUrl+"tabs_getCustomizeTabList.action",data:{appId:t.appId},success:function(t){for(var o=a.getJsonData(t.data),n=0;n<o.length;n++){o[n];switch(o[n].sysTabNameTag?o[n].sysTabNameTag:o[n].sysTabName){case"ZXMarketModuleOrder":e.data.showCustomizeTabId.ZXMarketModuleOrder=!0;break;case"LynxAbout_Merchant":e.data.showCustomizeTabId.LynxAbout_Merchant=!0;break;case"LynxPhoto_Info_Post_Tab":e.data.showCustomizeTabId.LynxPhoto_Info_Post_Tab=!0;break;case"Activity":e.data.showCustomizeTabId.Activity=!0;break;case"LynxApplyFor_About_Merchant":e.data.showCustomizeTabId.LynxApplyFor_About_Merchant=!0;break;case"Flexi-Form":e.data.showCustomizeTabId["Flexi-Form"]=!0;break;case"Activity-Group":e.data.showCustomizeTabId["Activity-Group"]=!0;break;case"CardNo":e.data.showCustomizeTabId.CardNo=!0;break;case"Activity-Distribution":e.data.showCustomizeTabId["Activity-Distribution"]=!0,e.setData({actDistribution:a.globalData.actDistribution})}}e.setData({showCustomizeTabId:e.data.showCustomizeTabId,isShowMemRights:!e.data.showCustomizeTabId["Activity-Group"]}),wx.hideLoading()}})},getUserInfo:function(){var t=this;wx.request({url:a.globalData.comUrl+"tabs_getMember.action",data:{memberId:t.data.memberId,customizetabId:e.LynxApplyFor_About_Merchant,checkBranch:1},success:function(e){var o=a.getJsonData(e.data);o.userName.length<1&&(o.userName=a.globalData.wxUserInfo.nickName),wx.setStorageSync("scoreRule"+a.globalData.autoId,o.scoreRule),wx.setStorageSync("memberId"+a.globalData.autoId,o.id),wx.setStorageSync("mobilePhone",o.mobilePhone),wx.setStorageSync("nickname",o.userName),t.setData({userInfo:o,phone:o.mobilePhone}),wx.hideToast()},fail:function(){a.hint()}})},headtap:function(){wx.navigateTo({url:"/pages/self/acountInformation/acountInformation"})},toOrderList:function(t){a.getMemberId()?wx.navigateTo({url:"/pages/self/myOrder/myOrder?index="+t.currentTarget.dataset.index}):wx.navigateTo({url:"/pages/login/login"})},catetap:function(){1==this.data.isPerson?wx.navigateTo({url:"/pages/product/product"}):wx.switchTab({url:"/pages/product/product"})},toCart:function(){wx.navigateTo({url:"/pages/self/cart/cart?from=self"})},toMyCustom:function(){a.getMemberId()?wx.navigateTo({url:"/pages/self/myCustom/myCustom"}):wx.navigateTo({url:"/pages/login/login"})},toCollect:function(){a.getMemberId()?wx.navigateTo({url:"/pages/self/collect/collect"}):wx.navigateTo({url:"/pages/login/login"})},cardtap:function(){a.getMemberId()?wx.navigateTo({url:"/pages/self/card/card?cardNo="+this.data.userInfo.cardNo}):wx.navigateTo({url:"/pages/login/login"})},toSupply:function(){a.getMemberId()?wx.navigateTo({url:"/pages/self/mySupply/mySupply"}):wx.navigateTo({url:"/pages/login/login"})},toMyBeforehand:function(){a.getMemberId()?wx.navigateTo({url:"/pages/self/myBeforehand/myBeforehand"}):wx.navigateTo({url:"/pages/login/login"})},memRigtap:function(){a.getMemberId()?wx.navigateTo({url:"/pages/self/memRights/memRights"}):wx.navigateTo({url:"/pages/login/login"})},toStore:function(){wx.navigateTo({url:"/pages/store/store"})},jointap:function(){a.getMemberId()?this.data.userInfo.activated?wx.showModal({title:"提示",content:"商家入驻认证成功",showCancel:!1}):1==this.data.userInfo.isApply?wx.showModal({title:"提示",content:"正在申请中...",showCancel:!1}):wx.navigateTo({url:"/pages/join/join"}):wx.navigateTo({url:"/pages/login/login"})},abouttap:function(){wx.navigateTo({url:"/pages/about-us/about-us"})},toMyGroup:function(){a.getMemberId()?wx.navigateTo({url:"/pages/packages/group/my-group/my-group"}):wx.navigateTo({url:"/pages/login/login"})},coupontap:function(){a.getMemberId()?wx.navigateTo({url:"/pages/self/mycoupon/mycoupon"}):wx.navigateTo({url:"/pages/login/login"})},bindphone:function(){wx.navigateTo({url:"/pages/self/bindPhone/bindPhone"})},bindGetUserInfo:function(t){this.setData({iconPath:t.detail.userInfo.avatarUrl,nickName:t.detail.userInfo.nickName}),a.globalData.wxUserInfo=t.detail.userInfo,wx.request({url:a.globalData.comUrl+"tabs_updateMember.action",data:{appId:a.globalData.projectInfo.appId,memberId:a.getMemberId(),headPortrait:t.detail.userInfo.avatarUrl,surname:t.detail.userInfo.nickName}})},updataUserInfo:function(){var e=this;wx.request({url:a.globalData.comUrl+"tabs_updateMember.actionL",data:{appId:t.appId,memberId:e.data.memberId,headPortrait:""},success:function(a){e.success("头像上传成功")},fail:function(a){e.warn("头像上传失败")}})},toDistribute:function(){a.getMemberId()?wx.navigateTo({url:"/pages/packages/distribute/distribute?type="+this.data.userInfo.type}):wx.navigateTo({url:"/pages/login/login"})},getPhoneNumber:function(t){var e=this;wx.login({success:function(o){wx.request({url:a.globalData.paymentUrl+"/WechatAlipay/GetOpenId",data:{projectId:a.globalData.projectInfo.appId,code:o.code,iv:t.detail.iv,encryptedData:t.detail.encryptedData},success:function(t){if(t.data.length>0){var o=a.getJsonData(t.data);e.setData({phone:o.mobilePhone}),wx.setStorageSync("mobilePhone"+a.globalData.autoId,t.data.mobilePhone),wx.request({url:a.globalData.comUrl+"member_bindMobilePhone.action",data:{appId:a.globalData.projectInfo.appId,mobilePhone:o.mobilePhone,memberId:a.getMemberId()},success:function(t){"1"==t.code&&wx.setStorageSync("mobilePhone"+a.globalData.autoId,o.mobilePhone)}})}},fail:function(a){}})}})},cancelAuth:function(){wx.switchTab({url:"/pages/index/index"})},deleteCache:function(){wx.removeStorage({key:"memberId"+a.globalData.autoId}),wx.removeStorage({key:"openId"+a.globalData.autoId,success:function(a){wx.showModal({title:"清除成功"})}})},exit:function(){var t=this;wx.showModal({title:"确定退出登录？",success:function(e){e.confirm&&(t.setData({userInfo:{},memberId:""}),wx.setStorageSync("memberId"+a.globalData.autoId,""))}})},warn:function(a){wx.showToast({title:a,image:"../../../../img/warn.png",duration:2e3})},success:function(a){wx.showToast({title:a,icon:"success",duration:2e3})}}); 
 			}); 	require("pages/self/self/self.js");
 		__wxRoute = 'pages/self/myOrder/myOrder';__wxRouteBegin = true; 	define("pages/self/myOrder/myOrder.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),e=t.globalData.projectInfo,a=[],o=1,r=1;Page({data:{showTabIndex:0,statueList:[],noOrder:!1,orderList:[],orderType:"",rightTypeList:[]},onLoad:function(o){e=t.globalData.projectInfo,a=t.globalData.customizeTabId;var r=this,n=0;o.index&&(n=o.index),r.setData({statueList:["待付款","待发货","待收货","待评价","退款/售后","全部"],showTabIndex:n}),r.getOrderInfo(n)},selectTab:function(t){var e=this,a=t.currentTarget.dataset;e.setData({showTabIndex:Number(a.selectindex),noOrder:!1,orderList:[]}),o=1,e.getOrderInfo(e.data.showTabIndex)},onShow:function(){},deleteOrder:function(a){var o=this;wx.showModal({title:"",content:"确认删除订单",success:function(r){r.confirm&&wx.request({url:t.globalData.comUrl+"tabs_delAppOrderWithParent",data:{appId:e.appId,orderId:a.currentTarget.dataset.oid},success:function(t){o.setData({noOrder:!1,orderList:[]}),o.getOrderInfo(o.data.showTabIndex)}})}})},getOrderInfo:function(e){var a=this,n=t.getMemberId(),s="",d="";0==e?(s=0,d=1):1==e?(s=1,d=2):2==e?(s=1,d=3):3==e?(s=1,d=4):4==e?(s=1,d=6):(d="",s=""),wx.request({url:t.globalData.comUrl+"tabs_getZXOrderList.action",data:{appId:t.globalData.projectInfo.appId,projectId:t.globalData.projectInfo.appId,memberId:n,current:o,payStatus:s,status:d},success:function(e){var o=t.getJsonData(e.data);r=o.pages,a.setData({orderList:a.data.orderList.concat(o.pageList)}),console.log(a.data.orderList),a.setData({noOrder:0==a.data.orderList.length})},fail:function(){t.hint()}})},orderDetailtap:function(t){var e=t.currentTarget.dataset;wx.navigateTo({url:"../myOrder/myOrder-detail/myOrder-detail?id="+e.orderid+"&orderNO"+e.orderno})},cancelOrder:function(e){var a=e.currentTarget.dataset;console.log(a);var o=this;wx.showModal({title:"是否确认取消订单？",success:function(e){e.confirm&&wx.request({url:t.globalData.comUrl+"tabs_updateZXOrderStatus.action",data:{appId:t.globalData.projectInfo.appId,orderId:a.orderid,status:5},success:function(){wx.showToast({title:"订单已取消",icon:"success",duration:2e3}),setTimeout(function(){o.setData({orderList:[]}),o.getOrderInfo(o.data.showTabIndex)},2e3)},fail:function(){t.hint()}})}})},sureReceive:function(e){var a=this;wx.showModal({title:"提示",content:"是否确认收货",success:function(o){o.confirm&&wx.request({url:t.globalData.comUrl+"tabs_signForOrder.action",data:{orderId:e.currentTarget.dataset.oid},success:function(e){1==e.data?(a.setData({noOrder:!1,orderList:[]}),a.getOrderInfo(a.data.showTabIndex)):t.showToast("收货失败")}})}})},goComment:function(t){console.log(t.currentTarget),wx.navigateTo({url:"../../product/comment/publish-comment/publish-comment?productOrderId="+t.currentTarget.dataset.id})},onReachBottom:function(){o<r&&(o++,this.getOrderInfo(this.data.showTabIndex))},toPay:function(a){var o=a.currentTarget.dataset.orderinfo;wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0});var r=this;wx.request({url:t.globalData.comUrl+"tabs_getZXOrderDetail.action",data:{appId:t.globalData.projectInfo.appId,orderId:o.id},success:function(a){"9"==t.getJsonData(a.data).status?t.hint("该产品已下架"):wx.login({success:function(a){a.code?wx.request({url:t.globalData.paymentUrl+"/WechatAlipay/MiniPayService?jsoncallback=?",data:{projectId:e.appId,nonce_str:"lfksf"+Math.round(1e5*Math.random()),body:o.children[0].productOrderVOList[0].productName,attach:o.orderNO+"_"+o.id+"%2B",out_trade_no:o.orderNO+(new Date).valueOf(),total_fee:(100*o.totalMoney).toFixed(0),trade_type:"JSAPI",device_info:"838792",code:a.code},success:function(t){wx.hideToast();var e=r.getJsonData(t.data);wx.requestPayment({timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:"prepay_id="+e.prepay_id,signType:"MD5",paySign:e.sign,success:function(t){wx.showToast({title:"支付成功",icon:"success",duration:2e3,mask:!0}),setTimeout(function(){r.onShow()},2e3)},fail:function(t){wx.showModal({title:"支付失败",showCancel:!1,success:function(t){t.confirm&&r.onShow()}})}})}}):t.hint("获取用户登录态失败！"+a.errMsg)}})},fail:function(){t.hint()}})},getJsonData:function(t){return JSON.parse(t.substring(1,t.length-1))}}); 
 			}); 	require("pages/self/myOrder/myOrder.js");
 		__wxRoute = 'pages/self/myOrder/myOrder-detail/myOrder-detail';__wxRouteBegin = true; 	define("pages/self/myOrder/myOrder-detail/myOrder-detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,e="",o="",r="";Page({data:{orderDetail:{},payStatus:"",payStatusStr:"",payType:"",orderNO:"",createDate:"",expressNO:"",showStatus:!1,isGroupOrder:!1,tel:"",isShowPrePay:!1,cardNo:"",memberId:"",preMoney:"",isWeb:t.globalData.isWeb},onLoad:function(s){var n=this;a=t.globalData.projectInfo,r=t.globalData.customizeTabId,n.getUserInfo(),console.log(s),e=s.orderNO,o=s.id,n.setData({orderNO:e})},onShow:function(){this.getOrderDetail()},getOrderDetail:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getZXOrderDetail.action",data:{appId:t.globalData.projectInfo.appId,orderId:o},success:function(e){var o=t.getJsonData(e.data);console.log(o);var r=new Date(o.createDate.time);if(a.getStoreInfo(o.branchInfoId),wx.setStorageSync("orderDetail"+t.globalData.autoId,o),3==o.payType)a.setData({showStatus:!1});else if(a.setData({showStatus:!0}),1==o.payStatus)switch(o.status){case 1:a.data.payStatusStr="待发货";break;case 2:a.data.payStatusStr="\b处理中";break;case 3:a.data.payStatusStr="\b已发货";break;case 4:a.data.payStatusStr="\b待评价";break;case 5:a.data.payStatusStr="\b已取消";break;case 6:a.data.payStatusStr="申请退款中...";break;case 7:a.data.payStatusStr="退款被拒绝";break;case 8:a.data.payStatusStr="\b退款成功";break;case 9:a.data.payStatusStr="\b交易成功"}else"5"==o.status?a.data.payStatusStr="\b已取消":a.data.payStatusStr="未支付";a.setData({orderDetail:o,status:o.status,payType:o.payType,payStatusStr:a.data.payStatusStr,payStatus:o.payStatus,expressNO:o.expressNO,createDate:r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate(),isGroupOrder:void 0!=r.groupOrderNo}),wx.hideToast()},fail:function(){t.hint()}})},isShowPay:function(){"1"==t.globalData.isShowPrePay&&""!=this.data.cardNo&&this.setData({isShowPrePay:!0})},getUserInfo:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getMember.action",data:{memberId:t.getMemberId(),customizetabId:r.LynxApplyFor_About_Merchant,checkBranch:1},success:function(e){var o=t.getJsonData(e.data);console.log(o),a.setData({cardNo:o.cardNo,preMoney:o.preMoney}),a.isShowPay()},fail:function(){t.hint()}})},getStoreInfo:function(e){var o=this;wx.request({url:t.globalData.comUrl+"tabs_getSingleBranchInfo.action",data:{appId:a.appId,tabContentId:e},success:function(a){var e=t.getJsonData(a.data);console.log(e),o.setData({tel:""==e.tel?e.phone:e.tel})},fail:function(a){t.hint()}})},cancelOrder:function(){var a=this;wx.showModal({title:"是否确认取消订单？",success:function(e){e.confirm&&wx.request({url:t.globalData.comUrl+"tabs_updateZXOrderStatus.action",data:{appId:t.globalData.projectInfo.appId,orderId:a.data.orderDetail.id,status:5},success:function(){wx.showToast({title:"订单已取消",icon:"success",duration:2e3}),setTimeout(function(){wx.navigateBack({delta:1})},2e3)},fail:function(){t.hint()}})}})},toPay:function(e){var o=this,r=e.currentTarget.dataset;""!=o.data.orderDetail.activityIds&&void 0!=o.data.orderDetail.activityIds?wx.request({url:t.globalData.comUrl+"activityProduct_checkActivityStatus.action",data:{appId:a.appId,productId:o.data.orderDetail.productOrderVOList[0].productId,activityId:o.data.orderDetail.activityIds},success:function(a){0==a.data.code?(isSubmit=!0,t.hint("活动已经结束")):2==a.data.code?(isSubmit=!0,t.hint("产品已经退出该活动")):"1"==r.type?o.startPay():o.prePay()}}):"1"==r.type?o.startPay():o.prePay()},refund:function(){wx.navigateTo({url:"../refund/refund"})},prePay:function(){var e=this;e.data.preMoney<e.data.orderDetail.totalMoney?wx.showToast({title:"余额不足！",icon:"none",duration:2e3,mask:!0}):(wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),wx.request({url:t.globalData.paymentUrl+"/WechatAlipay/PrePayNotifcation",data:{memberId:t.getMemberId(),projectId:a.appId,nonce_str:"lfksf"+Math.round(1e5*Math.random()),body:e.data.orderDetail.productOrderVOList[0].productName,attach:e.data.orderNO+"_"+e.data.orderDetail.id+"%2B",out_trade_no:e.data.orderDetail.orderNO+(new Date).valueOf(),total_fee:(100*e.data.orderDetail.totalMoney).toFixed(0),trade_type:"",device_info:"156151"},success:function(t){console.log(t.data),wx.hideToast(),"success"==t.data?wx.showToast({title:"支付成功",icon:"success",duration:2e3,mask:!0,success:function(t){setTimeout(function(){wx.redirectTo({url:"/pages/self/myOrder/myOrder?index=1"})},2e3)}}):wx.showModal({title:"支付失败",showCancel:!1,success:function(t){t.confirm&&e.onShow()}})}}))},startPay:function(){var r=this;wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),wx.request({url:t.globalData.comUrl+"tabs_getZXOrderDetail.action",data:{appId:t.globalData.projectInfo.appId,orderId:o},success:function(o){"9"==t.getJsonData(o.data).status?t.hint("该产品已下架"):r.data.isWeb?r.onLinePay({orderNO:e}):wx.login({success:function(o){o.code?wx.request({url:t.globalData.paymentUrl+"/WechatAlipay/MiniPayService2?jsoncallback=?",data:{projectId:a.appId,nonce_str:"lfksf"+Math.round(1e5*Math.random()),body:r.data.orderDetail.productOrderVOList[0].productName,attach:e+"_"+r.data.orderDetail.id+"%2B",out_trade_no:e+(new Date).valueOf(),total_fee:(100*r.data.orderDetail.totalMoney).toFixed(0),trade_type:"JSAPI",device_info:"838792",code:o.code},success:function(t){wx.hideToast();var a=r.getJsonData(t.data);wx.requestPayment({timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:"prepay_id="+a.prepay_id,signType:"MD5",paySign:a.sign,success:function(t){wx.showToast({title:"支付成功",icon:"success",duration:2e3,mask:!0}),setTimeout(function(){r.onShow()},2e3)},fail:function(t){wx.showModal({title:"支付失败",showCancel:!1,success:function(t){t.confirm&&r.onShow()}})}})}}):t.hint("获取用户登录态失败！"+o.errMsg)}})},fail:function(){t.hint()}})},goComment:function(t){console.log(t.currentTarget.dataset.id),wx.navigateTo({url:"../../../product/comment/publish-comment/publish-comment?productOrderId="+t.currentTarget.dataset.id})},sureReceive:function(){var a=this;wx.showModal({title:"提示",content:"是否确认收货",success:function(e){e.confirm&&wx.request({url:t.globalData.comUrl+"tabs_signForOrder.action",data:{orderId:a.data.orderDetail.id},success:function(e){console.log(e),1==e.data?a.onShow():t.hint("收货失败")}})}})},gotoLogistics:function(){this.data.orderDetail.expressNO?wx.navigateTo({url:"logistics/logistics?appOrderId="+this.data.orderDetail.id}):t.hint("商家暂未填写物流单号")},getJsonData:function(t){return JSON.parse(t.substring(1,t.length-1))},makePhoneCall:function(){var t=this;wx.makePhoneCall({phoneNumber:t.data.tel})},onLinePay:function(e){var o=this,r={myOrderInfo:e,projectInfo:a,productNames:o.data.orderDetail.productOrderVOList[0].productName,totalPrice:o.data.orderDetail.totalMoney,paymentUrl:t.globalData.paymentUrl};window.localStorage.setItem("payInfos",JSON.stringify(r));var s=-1!=window.navigator.userAgent.toLowerCase().indexOf("micromessenger"),n=window.location.href.split("#")[0]+"paymament.html";s&&(n="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t.globalData.wxAppId+"&redirect_uri="+encodeURIComponent(n)+"&response_type=code&scope=snsapi_userinfo&state=12345#wechat_redirect"),window.location.href=n}}); 
 			}); 	require("pages/self/myOrder/myOrder-detail/myOrder-detail.js");
 		__wxRoute = 'pages/self/myOrder/myOrder-detail/logistics/logistics';__wxRouteBegin = true; 	define("pages/self/myOrder/myOrder-detail/logistics/logistics.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),o="",a="";Page({data:{logInfo:{},logList:[]},onLoad:function(t){wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),o=t.appOrderId,a=t.orderTime,this.getlogInfo()},getlogInfo:function(){var a=this;wx.request({url:t.globalData.comUrl+"printer_getParcelInfo",data:{orderId:o},success:function(o){wx.hideToast();var e=o.data.content;1==o.data.code?1==e.success?a.setData({logInfo:e,logList:e.route}):t.hint(e.message):t.hint(e.reason)}})}}); 
 			}); 	require("pages/self/myOrder/myOrder-detail/logistics/logistics.js");
 		__wxRoute = 'pages/self/myOrder/refund/refund';__wxRouteBegin = true; 	define("pages/self/myOrder/refund/refund.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp(),t={};Page({data:{reasons:[{value:"退运费"},{value:"大小/尺寸与商品描述不符"},{value:"颜色/图案/款式与商品描述不符"},{value:"做工粗糙/有瑕疵"},{value:"褪色/掉色/缩水/填充物少"},{value:"材质/面料与商品描述不符"},{value:"少件/漏发"},{value:"包装/商品破损/污渍/变形"},{value:"假冒品牌"},{value:"未按约定时间发货"},{value:"发票问题"},{value:"卖家发错货"},{value:"其它原因"}],isHideReason:!0,isHideGoodsStatus:!0,refundReason:"",goodsStatus:"",images:[],imageUrls:[],productList:[],money:"",refundMoney:"",remarks:"",transportCost:""},onLoad:function(e){t=wx.getStorageSync("orderDetail"+a.globalData.autoId),console.log(t),this.setData({productList:t.productOrderVOList,money:t.totalMoney,transportCost:t.transportCost,refundMoney:t.totalMoney})},onShow:function(){},reasonChange:function(a){this.setData({refundReason:a.detail.value,isHideReason:!this.data.isHideReason})},statusChange:function(a){this.setData({goodsStatus:0==a.detail.value?"未收到货":"已收到货",isHideGoodsStatus:!this.data.isHideGoodsStatus})},hideReasonFrame:function(){this.setData({isHideReason:!this.data.isHideReason})},hideGoodsStatus:function(){this.setData({isHideGoodsStatus:!this.data.isHideGoodsStatus})},chooseImage:function(){var t=this;wx.chooseImage({count:1,success:function(e){console.log(e);var s=t.data.images.length+e.tempFilePaths.length;t.setData({images:t.data.images.concat(e.tempFilePaths)}),s>3?a.showToast("最多传3张"):wx.uploadFile({url:a.globalData.comUrl+"tabs_uploadPicMina.action",filePath:e.tempFilePaths[0],name:"file",success:function(a){var e=JSON.parse(a.data);"1"==e.isSuccess&&(t.data.imageUrls.push(e.path),t.setData({imageUrls:t.data.imageUrls}))}})}})},moneyInput:function(a){var t=this,e=a.detail.value;return t.setData({refundMoney:e>t.data.money?t.data.money:e}),{value:e>t.data.money?t.data.money:e}},remarksInput:function(a){this.setData({remarks:a.detail.value})},delPic:function(a){var t=a.currentTarget.dataset.idx;this.data.images.splice(t,1),this.data.imageUrls.splice(t,1),this.setData({images:this.data.images,imageUrls:this.data.imageUrls})},submit:function(){var e=this;if(""!=e.data.goodsStatus)if(""!=e.data.refundReason)if(e.data.refundMoney<=0)a.showToast("退款金额必须大于0");else{for(var s="",o=0;o<e.data.imageUrls.length;o++)0==o?s+=e.data.imageUrls[o]:s=s+","+e.data.imageUrls[o];wx.request({url:a.globalData.comUrl+"tabs_applyRefund",data:{orderId:t.id,billreason:e.data.refundReason,refundMoney:e.data.refundMoney,isReceive:"未收到货"==e.data.goodsStatus?0:1,refundDesc:e.data.remarks,refundProofImage:s},success:function(a){console.log(a),1==a.data?(wx.showLoading({title:"提交成功",icon:"success",duration:1500}),setTimeout(function(){wx.navigateBack({deta:1})},1500)):wx.showLoading({title:"提交失败",icon:"success",duration:1500})}})}else a.showToast("请选择退款原因");else a.showToast("请选择货物状态")},onUnload:function(){}}); 
 			}); 	require("pages/self/myOrder/refund/refund.js");
 		__wxRoute = 'pages/self/mySupply/mySupply';__wxRouteBegin = true; 	define("pages/self/mySupply/mySupply.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=1,o=0;Page({data:{pageList:[],bottomHint:!0,noSupply:!0,times:0},onLoad:function(){this.getSupplyList()},getSupplyList:function(){var s=this,e=t.getMemberId();wx.request({url:t.globalData.comUrl+"mctab_searchPhotoInfo.action",data:{appId:t.globalData.projectInfo.appId,current:a,memberId:e,customizeTabId:t.globalData.customizeTabId.LynxPhoto_Info_Post_Tab},success:function(a){var e=t.getJsonData(a.data);o=e.pages,s.setData({pageList:s.data.pageList.concat(e.pageList)}),0==s.data.pageList.length?s.setData({noSupply:!1}):s.setData({noSupply:!0})},fail:function(){t.hint()}})},onShow:function(){var t=this.data.times+1;a=1,this.setData({times:t}),1!=this.data.times&&(this.setData({pageList:[],bottomHint:!0,noSupply:!0}),this.onLoad())},onReachBottom:function(){a<o?(a++,this.onLoad()):this.setData({bottomHint:!1})}}); 
 			}); 	require("pages/self/mySupply/mySupply.js");
 		__wxRoute = 'pages/self/acountInformation/acountInformation';__wxRouteBegin = true; 	define("pages/self/acountInformation/acountInformation.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp();Page({data:{imgPath:"",nickname:"",sex:""},onLoad:function(){},onShow:function(){switch(this.setData({imgPath:a.globalData.wxUserInfo.avatarUrl,sex:a.globalData.wxUserInfo.sex,nickname:a.globalData.wxUserInfo.nickName}),a.globalData.wxUserInfo.gender){case 0:this.setData({sex:"未知"});break;case 1:this.setData({sex:"男"});break;case 2:this.setData({sex:"女"})}},followtap:function(){wx.navigateTo({url:"qrCode/qrCode"})}}); 
 			}); 	require("pages/self/acountInformation/acountInformation.js");
 		__wxRoute = 'pages/self/cart/cart';__wxRouteBegin = true; 	define("pages/self/cart/cart.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="",r="",e=t.globalData.projectInfo,o=t.globalData.customizeTabId,c=1,i=1;Page({data:{totalPrice:0,cartData:[],cartList:[],cartNull:!1,projectType:t.globalData.projectInfo.projectType,isPerson:t.globalData.isPerson,proList:[],hiddenMerchant:!0,bottomHint:!1,actDistribution:{},productList:[]},onLoad:function(a){e=t.globalData.projectInfo,o=t.globalData.customizeTabId,r=a.from,"o2o-shop"==this.data.projectType?this._productList1Init():"tmall"==this.data.projectType&&this._productList2Init()},onShow:function(){var a=this;if(a.data.totalPrice=0,this.setData({cartData:wx.getStorageSync("cartData"+t.globalData.autoId)||[]}),(wx.getStorageSync("cartData"+t.globalData.autoId)||[]).length>0){var r=wx.getStorageSync("cartData"+t.globalData.autoId);a.splitArr(r)}else wx.removeStorageSync("cartData"+t.globalData.autoId),wx.removeStorageSync("cartDataList"+t.globalData.autoId),a.setData({cartNull:!0})},splitArr:function(a){for(var r=0,e=function(t){for(var a,e=[],o={},c=0;null!=(a=t[c]);c++)o[a.branchInfoId]||(e.push(a.branchInfoId),o[a.branchInfoId]=!0),1==t[c].isSelected&&(r+=parseInt(t[c].count)*parseFloat(t[c].price));return e}(a),o=[],c=0;c<e.length;c++)for(var i=[],s={},d=0;d<a.length;d++)a[d].branchInfoId==e[c]&&(i.push(a[d]),s.branchInfoId=a[d].branchInfoId,s.branchName=a[d].branchName,s.pro=i,1==a[d].isSelected&&(s.isSelected=!0),o[c]=s);wx.setStorageSync("cartDataList"+t.globalData.autoId,o),this.setData({totalPrice:r.toFixed(2),cartList:o,cartNull:!1})},arrowuptap:function(a){var r=this;if(r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count>1){r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count=r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count-1;for(var e=0;e<r.data.cartData.length;e++)r.data.cartData[e].moduleId==a.currentTarget.dataset.modleid&&(r.data.cartData[e].count=r.data.cartData[e].count-1);this.setData({cartList:r.data.cartList,cartData:r.data.cartData}),wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(this.data.cartData)}},arrowdowntap:function(a){var r=this;r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count=r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count+1;for(var e=0;e<r.data.cartData.length;e++)r.data.cartData[e].moduleId==a.currentTarget.dataset.modleid&&(r.data.cartData[e].count=r.data.cartData[e].count+1);this.setData({cartList:r.data.cartList,cartData:r.data.cartData}),wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(r.data.cartData)},bindCountInput:function(a){var r=this;parseInt(a.detail.value);if(parseInt(a.detail.value)>=1){r.data.cartList[a.currentTarget.dataset.index].pro[a.currentTarget.dataset.proindex].count=parseInt(a.detail.value);for(var e=0;e<r.data.cartData.length;e++)r.data.cartData[e].moduleId==a.currentTarget.dataset.modleid&&(r.data.cartData[e].count=parseInt(a.detail.value));return this.setData({cartList:r.data.cartList,cartData:r.data.cartData}),wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(this.data.cartData),parseInt(a.detail.value)}return 1},delPro:function(a){var r=this;wx.showModal({title:"确定删除该商品？",success:function(e){if(e.confirm){for(var o=[],c=0;c<r.data.cartData.length;c++)r.data.cartData[c].moduleId!=a.currentTarget.dataset.modelid&&o.push(r.data.cartData[c]);r.setData({cartData:o}),wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(r.data.cartData)}else e.cancel;r.data.cartData.length<1&&r.setData({cartNull:!0})}})},toClearing:function(){if(""==(a=wx.getStorageSync("memberId"+t.globalData.autoId)||""))wx.navigateTo({url:"../../login/login"});else{for(var r=0,e=0;e<this.data.cartData.length;e++)this.data.cartData[e].isSelected&&r++;if(0==r)return void t.hint("请选择产品");var o=this;t.globalData.isPerson?wx.redirectTo({url:"../../order/order?proPrice="+o.data.totalPrice}):wx.navigateTo({url:"../../order/order?proPrice="+o.data.totalPrice})}},checkboxTap:function(a){var r=this;console.log(a.currentTarget.dataset.proid);for(var e=0;e<r.data.cartData.length;e++)a.currentTarget.dataset.proid==r.data.cartData[e].productId&&(1==r.data.cartData[e].isSelected?r.data.cartData[e].isSelected=!1:r.data.cartData[e].isSelected=!0);wx.setStorageSync("cartData"+t.globalData.autoId,r.data.cartData),r.splitArr(r.data.cartData)},toProList:function(){"enterprise"==this.data.projectType||this.data.isPerson?wx.navigateTo({url:"../../product/product"}):wx.switchTab({url:"../../product/product"})},toProDetail:function(t){wx.navigateTo({url:"../../product/pro-detail/pro-detail?productId="+t.currentTarget.dataset.pid})},preventBubbling:function(){},getProCategory1:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getAppProductByCity.action",data:{appId:e.appId,customizeTabId:o.LynxProductList,count:4,current:c,jsoncallback:"",productName:"",sortName:"readTimes",sortType:"desc",isGroup:t.globalData.isGroup},success:function(t){var r=t.data.substring(1).slice(0,-1),e=JSON.parse(r);i=e.pages,a.setData({proList:a.data.proList.concat(e.pageList)})}})},onReachBottom:function(){c<i&&(c++,"o2o-shop"==this.data.projectType?this.getProCategory1():"tmall"==this.data.projectType&&this.getProductList())},_productList1Init:function(){var a=this;e=t.globalData.projectInfo,o=t.globalData.customizeTabId;var r=wx.getStorageSync("memberType"+t.globalData.autoId);this.setData({memberType:r}),t.globalData.actDistribution&&this.setData({actDistribution:t.globalData.actDistribution}),a.getProCategory1()},_productList2Init:function(){var a=this;e=t.globalData.projectInfo,o=t.globalData.customizeTabId;var r=wx.getStorageSync("memberType"+t.globalData.autoId);this.setData({memberType:r}),t.globalData.actDistribution&&this.setData({actDistribution:t.globalData.actDistribution}),a.getProCategory2()},getProCategory2:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{customizeTabId:o.LynxProductList},success:function(r){var e=t.getJsonData(r.data);console.log(e),a.setData({cateList:e}),a.titletap()}})},getProductList:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getZXProductListByCategory.action",data:{customizeTabId:o.LynxProductList,bigCateGoryCode:a.data.categoryCode,current:c,status:2,recommand:1,isBreif:1,isGroup:t.globalData.isGroup},success:function(r){var e=t.getJsonData(r.data);i=e.pages,a.setData({productList:a.data.productList.concat(e.pageList)}),e.pageList.length>0?a.setData({hasPro:!0}):a.setData({hasPro:!1})}})},titletap:function(t){c=1;var a=this;this.setData({productList:[]}),t&&void 0!=t?(a.setData({categoryCode:t.currentTarget.dataset.code,bottomHint:!0,hidden:!0,index:t.currentTarget.dataset.index}),a.getProductList(t.currentTarget.dataset.code)):(a.setData({categoryCode:a.data.cateList[0].code,bottomHint:!0,hidden:!0}),a.getProductList())}}); 
 			}); 	require("pages/self/cart/cart.js");
 		__wxRoute = 'pages/self/collect/collect';__wxRouteBegin = true; 	define("pages/self/collect/collect.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="",e=1,n=0,o=1,s="";Page({data:{currentIdx:1,pageList:[],collectNull:!0,bottomHint:!0,times:0,hideInfoTabs:!1,navArr:[{navName:"\b产品",navIdx:1,isShow:!0},{navName:"今日看点",navIdx:3,isShow:!1},{navName:"\b商家",navIdx:2,isShow:!1},{navName:"\b资讯动态",navIdx:4,isShow:!1},{navName:"\b供求",navIdx:5,isShow:!1}]},onLoad:function(){s=t.globalData.projectInfo;var a=this;a.getCollectPage(),a.setData({hideInfoTabs:t.globalData.projectInfo.hideInfoTabs}),a.getCustomizeTabList()},onShow:function(){var t=this.data.times+1;e=1,this.setData({times:t}),1!=this.data.times&&(this.setData({pageList:[],collectNull:!0,bottomHint:!0}),this.onLoad())},getCustomizeTabList:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getCustomizeTabList.action",data:{appId:s.appId},success:function(e){for(var n=t.getJsonData(e.data),o=0;o<n.length;o++){var s=n[o];switch(n[o].sysTabNameTag?n[o].sysTabNameTag:n[o].sysTabName){case"LynxAbout_Merchant":a.data.navArr[2]={navName:s.tabTitle,navIdx:2,isShow:!0};break;case"LynxPhoto_Info_Post_Tab":a.data.navArr[4]={navName:s.tabTitle,navIdx:5,isShow:!0};break;case"LynxPhoto_H_Info_Tab_Level2":a.data.navArr[1]={navName:s.tabTitle,navIdx:3,isShow:!0};break;case"Photo-Info-Tab-Level2":a.data.navArr[3]={navName:s.tabTitle,navIdx:4,isShow:!0}}}a.setData({navArr:a.data.navArr})}})},getCollectPage:function(){var e=this;a=t.getMemberId(),wx.request({url:t.globalData.comUrl+"tabs_getCollectionPage.action",data:{appId:t.globalData.projectInfo.appId,current:1,type:e.data.currentIdx,memberId:a},success:function(a){var o=t.getJsonData(a.data);n=o.pages,o.pageList.length?e.setData({pageList:o.pageList,collectNull:!0}):e.setData({collectNull:!1})},fail:function(a){t.hint()}})},getMoreCollectPage:function(){var o=this;a=t.getMemberId(),wx.request({url:t.globalData.comUrl+"tabs_getCollectionPage.action",data:{appId:t.globalData.projectInfo.appId,current:e,type:o.data.currentIdx,memberId:a},success:function(a){var e=t.getJsonData(a.data);n=e.pages,console.log(e),e.pageList.length?o.setData({pageList:o.data.pageList.concat(e.pageList),collectNull:!0}):o.setData({collectNull:!1})},fail:function(a){t.hint()}})},navtap:function(t){switch(t.currentTarget.dataset.index){case 3:o=3;break;case 4:o=4;break;case 2:o=2;break;case 1:o=1;break;case 5:o=5}e=1,this.setData({currentIdx:o,collectNull:!0,bottomHint:!0,pageList:[]}),this.getCollectPage()},toNewsDetail:function(a){var e=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTab.action",data:{appId:t.globalData.projectInfo.appId,tabContentId:a.currentTarget.dataset.tabid},success:function(n){t.getJsonData(n.data).id?wx.navigateTo({url:"/pages/news/news-detail/news-detail?tabContentId="+a.currentTarget.dataset.tabid}):e.warn("该资讯已删除！")},fail:function(){t.hint()}})},toStoreDetail:function(a){var e=this;wx.request({url:t.globalData.comUrl+"tabs_getSingleBranchInfo.action",data:{appId:t.globalData.projectInfo.appId,tabContentId:a.currentTarget.dataset.tabid},success:function(n){t.getJsonData(n.data).id?wx.navigateTo({url:"../../store/store-detail/store-detail?tabContentId="+a.currentTarget.dataset.tabid}):e.warn("该商铺已下架！")},fail:function(){t.hint()}})},toNewsCenter:function(a){var e=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTab.action",data:{appId:t.globalData.projectInfo.appId,tabContentId:a.currentTarget.dataset.tabid},success:function(n){t.getJsonData(n.data).id?wx.navigateTo({url:"/pages/news/news-detail/news-detail?tabContentId="+a.currentTarget.dataset.tabid}):e.warn("该资讯已删除！")},fail:function(){t.hint()}})},toProDetail:function(a){var e=this;wx.request({url:t.globalData.comUrl+"tabs_getZXProductDetail.action",data:{appId:t.globalData.projectInfo.appId,productId:a.currentTarget.dataset.tabid},success:function(n){2!=t.getJsonData(n.data).status?e.warn("该商品不存在或已下架！"):wx.navigateTo({url:"../../product/pro-detail/pro-detail?productId="+a.currentTarget.dataset.tabid})},fail:function(){t.hint()}})},toSupplyDetail:function(a){var e=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTab.action",data:{appId:t.globalData.projectInfo.appId,tabContentId:a.currentTarget.dataset.tabid,customizetabId:t.globalData.customizeTabId.LynxPhoto_Info_Post_Tab},success:function(n){t.getJsonData(n.data).id?wx.navigateTo({url:"../../supply/supply-detail/supply-detail?tabContentId="+a.currentTarget.dataset.tabid}):e.warn("该资讯已删除！")},fail:function(){t.hint()}})},onReachBottom:function(){e<n?(e++,this.getMoreCollectPage()):e>1&&(this.data.pageList.length>1?this.setData({bottomHint:!1}):this.setData({bottomHint:!0}))},warn:function(t){wx.showToast({title:t,image:"../../../img/warn.png",duration:2e3})}}); 
 			}); 	require("pages/self/collect/collect.js");
 		__wxRoute = 'pages/self/memRights/memRights';__wxRouteBegin = true; 	define("pages/self/memRights/memRights.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp();Page({data:{rule:""},onLoad:function(t){var e=wx.getStorageSync("scoreRule"+a.globalData.autoId);e=a.filterSpecialSymbol(e),this.setData({rule:e})}}); 
 			}); 	require("pages/self/memRights/memRights.js");
 		__wxRoute = 'pages/self/bindPhone/bindPhone';__wxRouteBegin = true; 	define("pages/self/bindPhone/bindPhone.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a="",t=getApp(),e=t.globalData.projectInfo;Page({data:{valueCode:"",valuePhone:"",counter:-1},onLoad:function(a){e=t.globalData.projectInfo},phoneInput:function(a){this.setData({valuePhone:a.detail.value})},codeInput:function(a){this.setData({valueCode:a.detail.value})},getSmsCode:function(){var a=this;a.data.counter>0||(a.data.valuePhone.length<1?t.hint("请输入手机号"):wx.request({url:t.globalData.comUrl+"member_getSMSCaptcha2.action",data:{appId:t.globalData.projectInfo.appId,flag:1,phoneNumber:a.data.valuePhone},success:function(e){var o=t.getJsonData(e.data);1==o.status?(console.log(o.SMSCaptcha),wx.showToast({title:"获取成功",icon:"success",duration:1500,mask:!0}),a.startTimer()):t.hint("获取失败")}}))},startTimer:function(){var t=this;t.setData({counter:60}),a=setInterval(function(){t.data.counter<0?clearInterval(a):t.setData({counter:t.data.counter-1})},1e3)},doBinding:function(){var a=this;if(11==a.data.valuePhone.length)if(a.data.valueCode.length<4||a.data.valueCode.length>6)t.hint("请输入正确的验证码");else{var e=t.getMemberId();wx.request({url:t.globalData.comUrl+"member_memberBindOpenId.action",data:{appId:t.globalData.projectInfo.appId,SMSCaptcha:a.data.valueCode,mobilePhone:a.data.valuePhone,memberId:e},success:function(e){var o=t.getJsonData(e.data);1==o.status?(console.log(o.SMSCaptcha),wx.setStorageSync("mobilePhone"+t.globalData.autoId,a.data.valuePhone),wx.showToast({title:"绑定成功",icon:"success",duration:1500,mask:!0}),setTimeout(function(){wx.navigateBack()},1500)):t.hint("绑定失败:"+o.reason)}})}else t.hint("请输入正确的手机号")}}); 
 			}); 	require("pages/self/bindPhone/bindPhone.js");
 		__wxRoute = 'pages/self/myBeforehand/myBeforehand';__wxRouteBegin = true; 	define("pages/self/myBeforehand/myBeforehand.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=1,e=1;Page({data:{bookingList:[],styleConfig:t.globalData.styleConfig},onLoad:function(t){this.getBookingList()},onShow:function(){},getBookingList:function(){var i=this;wx.request({url:t.globalData.comUrl+"tabs_getFlexiFormValueList.action",data:{customizeTabId:t.globalData.customizeTabId["Flexi-Form-Booking"],current:e,memberId:t.getMemberId()},success:function(e){var o=t.getJsonData(e.data);a=o.pages;var s=i.search(o.pageList[0],"branchName"),r=i.search(o.pageList[0],"status"),n=i.search(o.pageList[0],"productName"),c=i.search(o.pageList[0],"就餐日期"),g=i.search(o.pageList[0],"就餐时间"),l=i.search(o.pageList[0],"入住日期"),u=i.search(o.pageList[0],"离店日期"),h=i.search(o.pageList[0],"预约日期"),d=i.search(o.pageList[0],"预约时间");o.pageList.shift();var p=[],L=!0,b=!1,f=void 0;try{for(var m,v=o.pageList[Symbol.iterator]();!(L=(m=v.next()).done);L=!0){var k=m.value,y={branchName:k[s],status:k[r],productName:k[n],id:k[0]},x="";x=null!=k[c]&&k[c]?x+k[c]+" ":x,x=null!=k[g]&&k[g]?x+k[g]+" ":x,x=null!=k[l]&&k[l]?x+k[l]+"至":x,x=null!=k[u]&&k[u]?x+k[u]+" ":x,x=null!=k[h]&&k[h]?x+k[h]+" ":x,x=null!=k[d]&&k[d]?x+k[d]+" ":x,y.date=x,p.push(y)}}catch(t){b=!0,f=t}finally{try{!L&&v.return&&v.return()}finally{if(b)throw f}}i.setData({bookingList:i.data.bookingList.concat(p)})}})},search:function(t,a){for(var e=0;e<t.length;e++)if(t[e]==a)return e},bhtap:function(t){wx.navigateTo({url:"../../product/beforehand/bh-detail/bh-detail?id="+t.currentTarget.dataset.id})},onReachBottom:function(){e<a&&(e++,this.getBookingList())}}); 
 			}); 	require("pages/self/myBeforehand/myBeforehand.js");
 		__wxRoute = 'pages/self/myCustom/myCustom';__wxRouteBegin = true; 	define("pages/self/myCustom/myCustom.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp();Page({data:{customArr:[]},onLoad:function(){var a=wx.getStorageSync("customArr"+t.globalData.autoId);a.length>0&&(a=a.reverse()),this.setData({customArr:a})}}); 
 			}); 	require("pages/self/myCustom/myCustom.js");
 		__wxRoute = 'pages/self/mycoupon/mycoupon';__wxRouteBegin = true; 	define("pages/self/mycoupon/mycoupon.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp();Page({data:{couponInfo:{},showtab:0,showtabtype:"",tabnav:{},unusedata:{},useddata:{},expiredata:{},startx:0,endx:0,critical:20,marginleft:0,unusesize:0,usedsize:0,expiredsize:0,isShowNullMask:!1,imgArr_bg:["coupon_valid.png","coupon_invalid.png","coupon_invalid.png"],imgArr_icon:["coupon-unuse.png","coupon-used.png","coupon-expired.png"]},onLoad:function(){this.setData({tabnav:{tabnum:3,tabitem:[{id:1,text:"未使用"},{id:2,text:"已使用"},{id:3,text:"已过期"}]}}),this.fetchTabData(0)},fetchData:function(a){var e=this;wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),wx.request({url:t.globalData.comUrl+"act_getMemberActivityList.action",data:{memberId:t.getMemberId(),customizetabId:t.getCustomizeId("Activity"),memberStatus:a,status:a},success:function(a){wx.hideToast();var s=t.getJsonData(a.data);if(s.length){for(var i=[],n=0;n<s.length;n++){var o=s[n];o.typeName=e.getCouponTypeName(o.type),"1"==o.type?(o.amountReachedName="满"+o.amountReached+"元可用",o.tipName="满"+o.amountReached+"减"+o.discountAmount):o.tipName="优惠"+o.discountAmount+"元",o.tip=o.instructure&&""!=o.instructure&&"null"!=o.instructure?o.instructure:"",parseFloat(o.amountReached)>parseFloat(e.data.allPrice)?o.isEffect=!1:o.isEffect=!0,o.beginTime=o.beginTime.substring(0,10),o.endTime=o.endTime.substring(0,10),i.push(o)}e.setData({couponInfo:i,isShowNullMask:!1})}else e.setData({isShowNullMask:!0})},fail:function(){t.hint()}})},getCouponTypeName:function(t){switch(Number(t)){case 1:return"满减优惠";case 2:return"满包邮";case 3:return"限时秒杀";case 4:return"现金红包";case 5:return"拼团";default:return""}},fetchTabData:function(t){switch(this.setData({couponInfo:{},isShowNullMask:!1}),console.log(Number(t)),Number(t)){case 0:this.fetchData("0");break;case 1:this.fetchData("1");break;case 2:this.fetchData("3");break;default:return}},setTab:function(t){var a=t.currentTarget.dataset;this.setData({showtab:Number(a.tabindex),showtabtype:a.type}),this.fetchTabData(a.tabindex)},scrollTouchstart:function(t){var a=t.touches[0].pageX;this.setData({startx:a})},scrollTouchmove:function(t){var a=t.touches[0].pageX,e=this.data;this.setData({endx:a}),a-e.startx<e.critical&&a-e.startx>-e.critical&&this.setData({marginleft:a-e.startx})},scrollTouchend:function(t){var a=this.data;a.endx-a.startx>a.critical&&a.showtab>0?this.setData({showtab:a.showtab-1}):a.endx-a.startx<-a.critical&&a.showtab<this.data.tabnav.tabnum-1&&this.setData({showtab:a.showtab+1}),this.fetchTabData(a.showtab),this.setData({startx:0,endx:0,marginleft:0})},useCoupon:function(t){wx.redirectTo({url:"../../store/store-detail/store-detail?tabContentId="+t.currentTarget.dataset.id})}}); 
 			}); 	require("pages/self/mycoupon/mycoupon.js");
 		__wxRoute = 'pages/supply/supply';__wxRouteBegin = true; 	define("pages/supply/supply.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,e=t.globalData.customizeTabId,o=1,n=1;Page({data:{styleConfig:t.globalData.styleConfig,supplyAndDemand:2,pageList:[],notNull:!0,bottomHint:!0},onLoad:function(){a=t.globalData.projectInfo,e=t.globalData.customizeTabId,this.navtap()},toSearch:function(){wx.navigateTo({url:"../search/search"})},navtap:function(t){o=1,this.setData({notNull:!0,bottomHint:!0,pageList:[]}),t&&this.setData({supplyAndDemand:t.currentTarget.dataset.index}),this.getSupplyList(this.data.supplyAndDemand,o)},getSupplyList:function(o,s){var i=this;wx.request({url:t.globalData.comUrl+"mctab_searchPhotoInfo.action",data:{appId:a.appId,customizeTabId:e.LynxPhoto_Info_Post_Tab,current:1,supplyAndDemand:o},success:function(a){var e=t.getJsonData(a.data);n=e.pages;for(var o=0;o<e.pageList.length;o++)e.pageList[o].picture1=t.modifyPicSize(e.pageList[o].picture1,"_r160x160p");i.setData({pageList:e.pageList}),0==i.data.pageList.length?i.setData({notNull:!1}):i.setData({notNull:!0}),wx.hideToast(),wx.stopPullDownRefresh()},fail:function(a){t.hint()}})},getMoreSupplyList:function(o,n){var s=this;wx.request({url:t.globalData.comUrl+"mctab_searchPhotoInfo.action",data:{appId:a.appId,customizeTabId:e.LynxPhoto_Info_Post_Tab,current:n,supplyAndDemand:o},success:function(a){for(var e=t.getJsonData(a.data),o=0;o<e.pageList.length;o++)e.pageList[o].picture1=t.modifyPicSize(e.pageList[o].picture1,"_r160x160p");s.setData({pageList:s.data.pageList.concat(e.pageList)})},fail:function(a){t.hint()}})},publishtap:function(){t.getMemberId()?wx.navigateTo({url:"supply-publish/supply-publish"}):wx.navigateTo({url:"../login/login"})},onReachBottom:function(){o<n?(o++,this.getMoreSupplyList(this.data.supplyAndDemand,o)):o>1&&(this.data.pageList.length>1?this.setData({bottomHint:!1}):this.setData({bottomHint:!0}))},onPullDownRefresh:function(){this.setData({supplyAndDemand:2,pageList:[],notNull:!0,bottomHint:!0}),o=1,n=1,this.onLoad()}}); 
 			}); 	require("pages/supply/supply.js");
 		__wxRoute = 'pages/supply/supply-publish/supply-publish';__wxRouteBegin = true; 	define("pages/supply/supply-publish/supply-publish.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=!0;Page({data:{styleConfig:t.globalData.styleConfig,imagePath:"",navIndex:2,title:"",phone:"",describe:""},onLoad:function(){},navtap:function(t){this.setData({navIndex:t.currentTarget.dataset.index})},takephoto:function(){var a=this;wx.chooseImage({count:1,success:function(t){var e=t.tempFilePaths[0];a.setData({imagePath:e})},fail:function(a){t.hint("上传失败")}})},formSubmit:function(e){if(a){a=!1;var i=this,o=t.getMemberId(),n=/^1[3|4|5|8|7][0-9]\d{4,8}$/;if(!e.detail.value.title)return a=!0,void this.warn("标题不能为空!");if(!e.detail.value.phone)return a=!0,void this.warn("请输入电话号码!");if(!n.test(e.detail.value.phone))return a=!0,void this.warn("请输入正确的电话号码");if(!e.detail.value.describe)return a=!0,void this.warn("请输入描述内容!");var l=wx.getStorageSync("merchantId"+t.globalData.comUrl);i.data.imagePath?wx.uploadFile({url:t.globalData.comUrl+"mctab_addPhotoInfoTabWeb.action",filePath:i.data.imagePath,name:"file",formData:{appId:t.globalData.projectInfo.appId,title:e.detail.value.title,phone:e.detail.value.phone,detailDescription:e.detail.value.describe,memberId:o,merchantId:l,customizeTabId:t.globalData.customizeTabId.LynxPhoto_Info_Post_Tab,type:i.data.navIndex,mina:"true"},success:function(t){i.setData({imagePath:"",title:"",phone:"",describe:""}),wx.showToast({title:"提交成功",icon:"success",duration:2e3})},fail:function(a){t.hint("提交失败")},complete:function(){a=!0}}):wx.request({url:t.globalData.comUrl+"mctab_addPhotoInfoTabWeb.action",data:{appId:t.globalData.projectInfo.appId,title:e.detail.value.title,phone:e.detail.value.phone,detailDescription:e.detail.value.describe,memberId:o,merchantId:l,customizeTabId:t.globalData.customizeTabId.LynxPhoto_Info_Post_Tab,type:i.data.navIndex,mina:"true"},success:function(t){i.setData({imagePath:"",title:"",phone:"",describe:""}),wx.showToast({title:"提交成功",icon:"success",duration:2e3})},fail:function(a){console.log(a),t.hint()},complete:function(){a=!0}})}},formReset:function(){this.setData({imagePath:""})},warn:function(t){wx.showToast({title:t,image:"../../../img/warn.png",duration:2e3})}}); 
 			}); 	require("pages/supply/supply-publish/supply-publish.js");
 		__wxRoute = 'pages/supply/supply-detail/supply-detail';__wxRouteBegin = true; 	define("pages/supply/supply-detail/supply-detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,e=t.globalData.customizeTabId,o="",l="",i={},c=!0,n=!0;Page({data:{supplyDetail:{},collectStatus:"0",content:""},onLoad:function(l){a=t.globalData.projectInfo,e=t.globalData.customizeTabId;var i=this;o=l.tabContentId,i.getSupplyDetail(),i.getCollectStatus()},getSupplyDetail:function(){var l=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTab",data:{appId:a.appId,tabContentId:o,customizetabId:e.LynxPhoto_Info_Post_Tab},success:function(a){(i=t.getJsonData(a.data)).detailDescription=t.filterSpecialSymbol(i.detailDescription),l.setData({supplyDetail:i}),wx.hideToast()},fail:function(){t.hint()}})},getCollectStatus:function(){var e=this;(l=t.getMemberId())&&wx.request({url:t.globalData.comUrl+"tabs_checkCollection.action",data:{appId:a.appId,memberId:l,id:o},success:function(a){var o=t.getJsonData(a.data);e.setData({collectStatus:o.isExisted})},fail:function(a){t.hint()},complete:function(){c=!0,n=!0}})},collect:function(){if(0!=c){c=!1;var e=this;(l=t.getMemberId())?wx.request({url:t.globalData.comUrl+"tabs_addCollection.action",data:{appId:a.appId,type:5,name:e.data.supplyDetail.title,objId:e.data.supplyDetail.id,memberId:l,pic_url:e.data.supplyDetail.picture1,detailDescription:e.data.supplyDetail.briefDescription},success:function(t){wx.showToast({title:"收藏成功",icon:"success",duration:2e3}),e.getCollectStatus()},fail:function(a){t.hint("收藏失败")}}):(c=!0,wx.navigateTo({url:"../../login/login"}))}},cancelCollect:function(){if(0!=n){n=!1;var a=this;(l=t.getMemberId())?wx.request({url:t.globalData.comUrl+"tabs_delCollectionByObjId.action",data:{id:o,memberId:l},success:function(t){wx.showToast({title:"已取消收藏",icon:"success",duration:2e3}),a.getCollectStatus()},fail:function(a){t.hint("取消收藏失败")}}):(n=!0,wx.navigateTo({url:"../../login/login"}))}}}); 
 			}); 	require("pages/supply/supply-detail/supply-detail.js");
 		__wxRoute = 'pages/search/search';__wxRouteBegin = true; 	define("pages/search/search.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";function t(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var a,e=getApp(),i=e.globalData.projectInfo,o=e.globalData.customizeTabId,n=1,s=0,r="",c=!0;Page({data:(a={bottomHint:!0,hidden:!0,search_type:"0",noSearch:!0,pageList:[],hideComboBox:!0},t(a,"hideComboBox",!0),t(a,"showVal","综合"),t(a,"hiddenTo",!0),t(a,"styleConfig",e.globalData.styleConfig),t(a,"back",!1),t(a,"MinMoneyVal",""),t(a,"MaxMoneyVal",""),t(a,"sort","comprehensive"),t(a,"ThePrice","asc"),t(a,"merchantId",""),t(a,"trademark",""),t(a,"carryOut",!1),t(a,"currentIdx","0"),t(a,"isPerson",e.globalData.isPerson),a),onLoad:function(t){console.log(t),t.keyword&&(r=t.keyword,this.setData({inputVal:t.keyword})),i=e.globalData.projectInfo,o=e.globalData.customizeTabId,t.type&&this.setData({search_type:t.type}),"1"==t.type?this.getStoreInfo():this.getProductInfo()},proNavTap:function(t){var a=t.currentTarget.dataset.idx;"0"==a?this.setData({pageList:[],hideComboBox:!this.data.hideComboBox,currentIdx:a}):"1"==a?(n=1,this.setData({sort:"buyCount",ThePrice:"desc",pageList:[],currentIdx:a}),this.getProductInfo()):this.setData({hiddenTo:!this.data.hiddenTo,currentIdx:a})},itemSelect:function(t){n=1;var a="";0==t.currentTarget.dataset.idx?(a="综合",this.setData({sort:"comprehensive",ThePrice:"asc"})):1==t.currentTarget.dataset.idx?(a="新品",this.setData({sort:"createDate",ThePrice:"desc"})):2==t.currentTarget.dataset.idx?(a="价格降序",this.setData({sort:"price",ThePrice:"desc"})):(a="价格升序",this.setData({sort:"price",ThePrice:"asc"})),this.setData({showVal:a,pageList:[],hideComboBox:!0}),this.getProductInfo()},hiddenTo:function(){this.setData({hiddenTo:!0})},onselect:function(t){console.log(t);var a=t.currentTarget.dataset.idx;this.setData({back:!0,active:a}),this.setData({merchantId:t.currentTarget.dataset.bid})},MinMoney:function(t){this.setData({MinMoneyVal:t.detail.value})},MaxMoney:function(t){this.setData({MaxMoneyVal:t.detail.value})},moneyWay:function(){this.data.MinMoneyVal>this.data.MaxMoneyVal&&this.setData({MinMoneyVal:this.data.MaxMoneyVal,MaxMoneyVal:this.data.MinMoneyVal})},reset:function(){n=1,this.setData({pageList:[],merchantId:"",MinMoneyVal:"",MaxMoneyVal:"",back:!1}),this.getProductInfo()},confirm:function(){n=1,this.moneyWay(),this.setData({pageList:[],hiddenTo:!0}),this.getProductInfo()},encapsulation:function(){var t=this.data.pageList;console.log(t);var a=[],e={};t.forEach(function(t){if(!e[t.branchName]){var i={branchName:t.branchName,branchInfoId:t.branchInfoId};a.push(i),e[t.branchName]=1}}),this.setData({trademark:a})},getNewsInfo:function(){var t=this;c&&(c=!1,wx.request({url:e.globalData.comUrl+"tabs_getPhotoInfoTabFromL2ToL1.action",data:{appId:i.appId,customizeTabId:o.LynxPhoto_H_Info_Tab_Level2,current:n,searchKey:r},success:function(a){var i=e.getJsonData(a.data);s=i.pages,t.setData({pageList:t.data.pageList.concat(i.pageList)});var o=!!t.data.pageList.length;t.setData({noSearch:o}),c=!0},fail:function(){e.hint(),c=!0}}))},getStoreInfo:function(){var t=this;c&&(c=!1,wx.request({url:e.globalData.comUrl+"mctab_searchBranchInfo.action",data:{appId:i.appId,customizeTabId:o.LynxAbout_Merchant,advertisement:1,current:n,level:0,provinceId:"",cityId:"",categoryId:"",branchName:r},success:function(a){var i=e.getJsonData(a.data);s=i.pages,t.setData({pageList:t.data.pageList.concat(i.pageList)});var o=!!t.data.pageList.length;t.setData({noSearch:o}),c=!0},fail:function(){e.hint(),c=!0}}))},getProductInfo:function(){var t=this,a={appId:i.appId,customizeTabId:o.LynxProductList,current:n,status:2,productName:r,sortName:t.data.sort,sortType:t.data.ThePrice,isGroup:1,branchInfoId:t.data.merchantId,minimumPrice:t.data.MinMoneyVal,maximumPrice:t.data.MaxMoneyVal};c&&(c=!1,wx.request({url:e.globalData.comUrl+"tabs_getZXProductListByCategory.action",data:a,success:function(a){var i=e.getJsonData(a.data);s=i.pages,i.pageList.forEach(function(t){if(void 0!=t.productImageVOList&&t.productImageVOList.length>0){var a=t.productImageVOList[0].imageURL;t.productImageVOList[0].imageURL=a?e.modifyPicSize(a,"_r220x220p"):"/img/img-default.png"}}),t.setData({pageList:t.data.pageList.concat(i.pageList)});var o=!!t.data.pageList.length;t.setData({noSearch:o}),t.encapsulation(),c=!0},fail:function(){e.hint(),c=!0}}))},toProDetail:function(t){wx.navigateTo({url:"../product/pro-detail/pro-detail?productId="+t.currentTarget.dataset.pid})},toStoreDetail:function(t){wx.navigateTo({url:"../store/store-detail/store-detail?tabContentId="+t.currentTarget.dataset.id})},toNewsDetail:function(t){wx.navigateTo({url:"../news/news-detail/news-detail?tabContentId="+t.currentTarget.dataset.id+"&type=3"})},navtap:function(){this.setData({hidden:!this.data.hidden})},navItemtap:function(t){"0"==t.currentTarget.dataset.idx?this.setData({search_type:"0"}):"1"==t.currentTarget.dataset.idx?this.setData({search_type:"1"}):this.setData({search_type:"2"}),this.search(),this.setData({hidden:!1})},search:function(){this.setData({pageList:[],bottomHint:!0,hidden:!0,noSearch:!0}),n=1,"0"==this.data.search_type?this.getProductInfo():"1"==this.data.search_type?this.getStoreInfo():this.getNewsInfo()},searchInput:function(t){r=t.detail.value},blanktap:function(){this.setData({hidden:!0})},scrolltolower:function(){n<s?(n++,0==this.data.search_type?this.getProductInfo():1==this.data.search_type?this.getStoreInfo():this.getNewsInfo()):n>1&&(this.data.pageList.length>1?this.setData({bottomHint:!1}):this.setData({bottomHint:!0}))}}); 
 			}); 	require("pages/search/search.js");
 		__wxRoute = 'pages/news/news';__wxRouteBegin = true; 	define("pages/news/news.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var e=getApp();Page({data:{projectType:e.globalData.projectInfo.projectType},onLoad:function(e){var o={enterprise:"layout-meirong",meirong:"layout-meirong"}[this.data.projectType]||"layout-o2o",r=[];for(var t in e)r.push(t+"="+e[t]);"layout-meirong"==o?wx.switchTab({url:o+"/news",fail:function(){wx.redirectTo({url:o+"/news"})}}):wx.redirectTo({url:o+"/news?"+r.join("&")})}}); 
 			}); 	require("pages/news/news.js");
 		__wxRoute = 'pages/news/layout-o2o/news';__wxRouteBegin = true; 	define("pages/news/layout-o2o/news.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="",e="",i=1,s=1,o="";Page({data:{titles:[],pageList:[],adList:[],categoryId:"",news_type:3,titleLeft:0,titleKey:1,hidden:!0,bottomHint:!0,leftHidden:!0,rightHidden:!0,scrolltop:0},onLoad:function(i){a=t.globalData.projectInfo,e=t.globalData.customizeTabId,console.log(t.globalData),console.log(e);var s=this;"LynxPhoto_H_Info_Tab_Level2"==(o=i.sysTabName)?(s.getAdList(),s.setData({news_type:3})):s.setData({news_type:4}),i.title&&wx.setNavigationBarTitle({title:i.title}),s.newsTitleInfo().then(function(t){s.titletap()})},newsTitleInfo:function(){var i=this;return new Promise(function(s,n){wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{appId:a.appId,customizeTabId:e[o]},success:function(a){var e=t.getJsonData(a.data);i.setData({titles:e}),e.length>3&&i.setData({rightHidden:!1}),s(i.titles)},fail:function(){t.hint()}})})},getNewsInfo:function(){var i=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabFromL2ToL1.action",data:{appId:a.appId,customizeTabId:e[o],categoryId:i.data.categoryId,current:1},success:function(a){var e=t.getJsonData(a.data);s=e.pages;for(var o=0;o<e.pageList.length;o++)e.pageList[o].picture1=t.modifyPicSize(e.pageList[o].picture1,"_r160x160p");i.setData({pageList:e.pageList}),i.data.pageList.length<1&&i.setData({hidden:!1}),wx.hideToast(),wx.stopPullDownRefresh()},fail:function(){t.hint()}})},getMoreNewsInfo:function(){var n=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabFromL2ToL1.action",data:{appId:a.appId,customizeTabId:e[o],categoryId:n.data.categoryId,current:i},success:function(a){var e=t.getJsonData(a.data);s=e.pages;for(var i=0;i<e.pageList.length;i++)e.pageList[i].picture1=t.modifyPicSize(e.pageList[i].picture1,"_r160x160p");n.data.pageList=n.data.pageList.concat(e.pageList),n.setData({pageList:n.data.pageList})},fail:function(){t.hint()}})},getAdList:function(){var i=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabFromL2ToL1.action",data:{appId:a.appId,customizeTabId:e.LynxAdvertisingH_Photo_Info_Tab_Level1,current:1},success:function(a){var e=t.getJsonData(a.data);i.setData({adList:e.pageList})},fail:function(){t.hint()}})},titletap:function(t){var a=this;this.setData({pageList:[]}),t?a.setData({categoryId:t.currentTarget.dataset.code,bottomHint:!0,hidden:!0}):a.setData({categoryId:a.data.titles[0].code,bottomHint:!0,hidden:!0}),i=1,this.getNewsInfo()},onReachBottom:function(){i<s?(i++,this.getMoreNewsInfo()):i>1&&(this.data.pageList.length>1?this.setData({bottomHint:!1}):this.setData({bottomHint:!0}))},onPullDownRefresh:function(){i=1,this.setData({pageList:[]}),wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),this.getNewsInfo()},turnLeft:function(){console.log(this.data.titleKey),this.data.titleKey>1&&(this.setData({titleLeft:this.data.titleLeft+200,titleKey:this.data.titleKey-1}),1==this.data.titleKey&&this.setData({leftHidden:!0,rightHidden:!1}))},turnRight:function(){console.log(this.data.titleKey),this.data.titleKey<this.data.titles.length-2&&(this.setData({titleLeft:this.data.titleLeft-200,titleKey:this.data.titleKey+1}),this.data.titleKey==this.data.titles.length-2&&this.setData({rightHidden:!0,leftHidden:!1}))}}); 
 			}); 	require("pages/news/layout-o2o/news.js");
 		__wxRoute = 'pages/news/news-detail/news-detail';__wxRouteBegin = true; 	define("pages/news/news-detail/news-detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,e=t.globalData.customizeTabId,o=t.globalData.md5,i="",l={},n="",c=0,s=!0,d=!0;Page({data:{detailInfo:{},collectStatus:"0"},onLoad:function(o){a=t.globalData.projectInfo,e=t.globalData.customizeTabId,t.loginVzSystem();var l=this;c=o.type,i=o.tabContentId,l.newsDetailInfo(),l.getCollectStatus()},newsDetailInfo:function(){var e=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTab.action",data:{appId:a.appId,tabContentId:i},success:function(a){(l=t.getJsonData(a.data)).detailDescription=t.filterSpecialSymbol(l.detailDescription),e.setData({detailInfo:l}),wx.hideToast()},fail:function(a){t.hint()}})},getCollectStatus:function(){if(n=t.getMemberId()){var e=this;wx.request({url:t.globalData.comUrl+"tabs_checkCollection.action",data:{appId:a.appId,memberId:n,id:i},success:function(a){var o=t.getJsonData(a.data);e.setData({collectStatus:o.isExisted})},fail:function(a){t.hint()},complete:function(){s=!0,d=!0}})}},collect:function(){if(0!=s){s=!1;var e=this;(n=t.getMemberId())?wx.request({url:t.globalData.comUrl+"tabs_addCollection.action",data:{appId:a.appId,type:c,name:l.title,objId:l.id,memberId:n,pic_url:l.picture1,detailDescription:l.briefDescription},success:function(t){wx.showToast({title:"收藏成功",icon:"success",duration:2e3}),e.getCollectStatus()},fail:function(a){t.hint("收藏失败")}}):(s=!0,wx.navigateTo({url:"../../login/login"}))}},cancelCollect:function(){if(0!=d){d=!1;var a=this;(n=t.getMemberId())?wx.request({url:t.globalData.comUrl+"tabs_delCollectionByObjId.action",data:{id:i,memberId:n},success:function(t){wx.showToast({title:"已取消收藏",icon:"success",duration:2e3}),a.getCollectStatus()},fail:function(a){t.hint("取消收藏失败")}}):(d=!0,wx.switchTab({url:"../../self/self"}))}},onShareAppMessage:function(){var a=this;if(t.globalData.pointsSet&&t.globalData.pointsSet.pointsSwitch){var e=(new Date).valueOf(),i="action=ShareInfo&appId="+t.globalData.projectInfo.appId+"&memberId="+t.getMemberId()+"&time="+e+"&key=DOTI#!81a335op77CYlo541f6eb5555m",l=o.hexMD5(i);wx.request({url:t.globalData.comUrl+"wallet_addMemberMPointRecord.action",data:{action:"ShareInfo",appId:t.globalData.projectInfo.appId,memberId:t.getMemberId(),time:e,sign:l.toLocaleUpperCase()}})}return{title:a.data.detailInfo.title,path:"/pages/news/news-detail/news-detail?tabContentId="+a.data.detailInfo.id,success:function(t){},fail:function(t){}}}}); 
 			}); 	require("pages/news/news-detail/news-detail.js");
 		__wxRoute = 'pages/news/news-list/news-list';__wxRouteBegin = true; 	define("pages/news/news-list/news-list.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,o=t.globalData.customizeTabId,e=1,i=1;Page({data:{styleConfig:t.globalData.styleConfig,pageList:[],categoryId:"",bottomHint:!0,title:""},onLoad:function(e){a=t.globalData.projectInfo,o=t.globalData.customizeTabId,this.setData({categoryId:e.categoryId,title:e.title}),this.getNewsList()},onShow:function(){},getNewsList:function(){var s=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabFromL2ToL1.action",data:{appId:a.appId,customizeTabId:o.LynxPhoto_H_Info_Tab_Level2,categoryId:s.data.categoryId,current:e},success:function(a){var o=t.getJsonData(a.data);i=o.pages;for(var e=0;e<o.pageList.length;e++)o.pageList[e].picture1=t.modifyPicSize(o.pageList[e].picture1,"_r160x160p");s.setData({pageList:s.data.pageList.concat(o.pageList)}),wx.hideToast(),wx.stopPullDownRefresh()},fail:function(){t.hint()}})},onPullDownRefresh:function(){},onReachBottom:function(){e<i?(e++,this.getNewsList()):this.setData({bottomHint:!1})}}); 
 			}); 	require("pages/news/news-list/news-list.js");
 		__wxRoute = 'pages/news/layout-meirong/news';__wxRouteBegin = true; 	define("pages/news/layout-meirong/news.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,e=t.globalData.customizeTabId,i=1,s=1,o="";Page({data:{titles:[],pageList:[],adList:[],categoryId:"",news_type:3,titleLeft:0,titleKey:1,hidden:!0,bottomHint:!0,leftHidden:!0,rightHidden:!0,scrolltop:0},onLoad:function(i){a=t.globalData.projectInfo,e=t.globalData.customizeTabId;var s=this;"LynxPhoto_H_Info_Tab_Level2"==(o=i.sysTabName?i.sysTabName:"LynxPhoto_H_Info_Tab_Level2")?(s.getAdList(),s.setData({news_type:3})):s.setData({news_type:4}),i.title&&wx.setNavigationBarTitle({title:i.title}),s.newsTitleInfo().then(function(t){s.titletap()})},newsTitleInfo:function(){var i=this;return new Promise(function(s,n){wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabCategory.action",data:{appId:a.appId,customizeTabId:e[o]},success:function(a){var e=t.getJsonData(a.data);i.setData({titles:e}),e.length>3&&i.setData({rightHidden:!1}),s(i.titles)},fail:function(){t.hint()}})})},getNewsInfo:function(){var i=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabFromL2ToL1.action",data:{appId:a.appId,customizeTabId:e[o],categoryId:i.data.categoryId,current:1},success:function(a){var e=t.getJsonData(a.data);s=e.pages;for(var o=0;o<e.pageList.length;o++)e.pageList[o].picture1=t.modifyPicSize(e.pageList[o].picture1,"_r160x160p");i.setData({pageList:e.pageList}),i.data.pageList.length<1&&i.setData({hidden:!1}),wx.hideToast(),wx.stopPullDownRefresh()},fail:function(){t.hint()}})},getMoreNewsInfo:function(){var n=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabFromL2ToL1.action",data:{appId:a.appId,customizeTabId:e[o],categoryId:n.data.categoryId,current:i},success:function(a){var e=t.getJsonData(a.data);s=e.pages;for(var i=0;i<e.pageList.length;i++)e.pageList[i].picture1=t.modifyPicSize(e.pageList[i].picture1,"_r160x160p");n.data.pageList=n.data.pageList.concat(e.pageList),n.setData({pageList:n.data.pageList})},fail:function(){t.hint()}})},getAdList:function(){var i=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabFromL2ToL1.action",data:{appId:a.appId,customizeTabId:e.LynxAdvertisingH_Photo_Info_Tab_Level1,current:1},success:function(a){var e=t.getJsonData(a.data);i.setData({adList:e.pageList})},fail:function(){t.hint()}})},toNewsList:function(t){wx.navigateTo({url:"news-list/news-list?categoryId="+t.currentTarget.dataset.code+"&title="+t.currentTarget.dataset.title})},titletap:function(t){var a=this;this.setData({pageList:[]}),t?a.setData({categoryId:t.currentTarget.dataset.code,bottomHint:!0,hidden:!0}):a.setData({categoryId:a.data.titles[0].code,bottomHint:!0,hidden:!0}),i=1,this.getNewsInfo()},onReachBottom:function(){i<s?(i++,this.getMoreNewsInfo()):i>1&&(this.data.pageList.length>1?this.setData({bottomHint:!1}):this.setData({bottomHint:!0}))},onPullDownRefresh:function(){i=1,this.setData({pageList:[]}),wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),this.getNewsInfo()},turnLeft:function(){console.log(this.data.titleKey),this.data.titleKey>1&&(this.setData({titleLeft:this.data.titleLeft+200,titleKey:this.data.titleKey-1}),1==this.data.titleKey&&this.setData({leftHidden:!0,rightHidden:!1}))},turnRight:function(){console.log(this.data.titleKey),this.data.titleKey<this.data.titles.length-2&&(this.setData({titleLeft:this.data.titleLeft-200,titleKey:this.data.titleKey+1}),this.data.titleKey==this.data.titles.length-2&&this.setData({rightHidden:!0,leftHidden:!1}))}}); 
 			}); 	require("pages/news/layout-meirong/news.js");
 		__wxRoute = 'pages/news/layout-meirong/news-list/news-list';__wxRouteBegin = true; 	define("pages/news/layout-meirong/news-list/news-list.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,o=t.globalData.customizeTabId,e=1,i=1;Page({data:{styleConfig:t.globalData.styleConfig,pageList:[],categoryId:"",bottomHint:!0,title:""},onLoad:function(e){a=t.globalData.projectInfo,o=t.globalData.customizeTabId,this.setData({categoryId:e.categoryId,title:e.title}),this.getNewsList()},onShow:function(){},getNewsList:function(){var s=this;wx.request({url:t.globalData.comUrl+"tabs_getPhotoInfoTabFromL2ToL1.action",data:{appId:a.appId,customizeTabId:o.LynxPhoto_H_Info_Tab_Level2,categoryId:s.data.categoryId,current:e},success:function(a){var o=t.getJsonData(a.data);i=o.pages;for(var e=0;e<o.pageList.length;e++)o.pageList[e].picture1=t.modifyPicSize(o.pageList[e].picture1,"_r160x160p");s.setData({pageList:s.data.pageList.concat(o.pageList)}),wx.hideToast(),wx.stopPullDownRefresh()},fail:function(){t.hint()}})},onPullDownRefresh:function(){},onReachBottom:function(){e<i?(e++,this.getNewsList()):this.setData({bottomHint:!1})}}); 
 			}); 	require("pages/news/layout-meirong/news-list/news-list.js");
 		__wxRoute = 'pages/order/order';__wxRouteBegin = true; 	define("pages/order/order.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.projectInfo,e=t.globalData.customizeTabId,o="",r=!0,s=!1,i=0,n=0;Page({data:{addressInfo:"",orderList:[],proPrice:[],transportFee:[],totalPrice:0,tempTotalPrice:0,payType:"",myOrderInfo:{},productNames:"",remark:"",bill:"",openid:"",failReason:[],isSupport:!1,hasWxPay:!1,status:"",date:"",time:"",bookingInfo:{},branchCouponList:[],platformCouponList:[],hiddenCouponList:!0,isSelectBraCou:!1,curBranchCouponIdx:0,platformCouponInfo:{},coupontype:1,memberActivityId:"",branchInfoIds:"",activityId:"",mtype:t.globalData.ext.hotel,totalDays:1,nowDate:"",comeDateInfo:"",leaveDateInfo:"",offlinePayHidden:"",loadCount:1,onShowPrePay:t.globalData.isShowPrePay,cardNo:"",preMoney:"",totalMoney:"",orderInfo:{},hasPointsGoods:!1,usePoints:!1,isWeb:t.globalData.isWeb},testHKPay:function(){var a=wx.getStorageSync("openId"+t.globalData.autoId),e=t.globalData.md5,o=(new Date).valueOf();console.log("timestamp",o);var r="body=test&mch_create_ip=120.79.66.147&mch_id=157530000224&nonce_str="+o+"&notify_url=https://pay-gw.vzmapp.com/WechatAlipay/PayNotifcation/&out_trade_no=20180918123456&service=pay.weixin.jspay&sub_appid=wxbe47fadb2814cb7d&sub_openid="+a+"&total_fee=1000&key=ecbd7841db526b76eb008c3fa115ebfb";console.log("md5str",r);var s="<xml><service>pay.weixin.jspay</service><mch_id>157530000224</mch_id><out_trade_no>20180918123456</out_trade_no><sub_openid>"+a+"</sub_openid><body>test</body><sub_appid>wxbe47fadb2814cb7d</sub_appid><total_fee>1000</total_fee><mch_create_ip>120.79.66.147</mch_create_ip><notify_url>https://pay-gw.vzmapp.com/WechatAlipay/PayNotifcation/</notify_url><nonce_str>"+o+"</nonce_str><sign>"+e.hexMD5(r).toLocaleUpperCase()+"</sign></xml>";console.log(s),wx.request({url:"https://pay.wepayez.com/pay/gateway",data:s,method:"POST",header:{"content-type":"text/xml; charset=utf-8"},success:function(t){console.log(t);var a=xmlParser.parseFromString(t.data),e=a.getElementsByTagName("nonce_str")[0].firstChild.nodeValue,o=a.getElementsByTagName("sign")[0].firstChild.nodeValue;console.log(status),wx.requestPayment({timeStamp:data.timeStamp,nonceStr:e,package:"prepay_id="+data.prepay_id,signType:"MD5",paySign:o,success:function(t){}})}})},onLoad:function(o){this.setData({offlinePayHidden:t.globalData.topayHidden}),console.log(this.data.offlinePayHidden),a=t.globalData.projectInfo,e=t.globalData.customizeTabId,i=o.proPrice,console.log(t.globalData.moduleList),o.status&&this.setData({status:o.status}),o.roomType&&this.setData({roomType:o.roomType}),o.activityId&&this.setData({activityId:o.activityId}),t.globalData.setting.hasWxPay?this.setData({hasWxPay:!0}):this.setData({hasWxPay:!1}),this.setData({totalPrice:0});var r=this;"1"==t.globalData.isShowPrePay&&r.getUserInfo();var s=[];s="booking"==o.status?wx.getStorageSync("bookingDataList"+t.globalData.autoId):"51"==o.status||"52"==o.status||"3"==o.status||"6"==o.status?wx.getStorageSync("groupProDataList"+t.globalData.autoId):wx.getStorageSync("cartDataList"+t.globalData.autoId);for(var n=[],d=!1,c=0;c<s.length;c++)if(s[c].isSelected){var l=s[c];r.data.transportFee[c]=(0).toFixed(2);for(var u=[],p=0,m=0;m<l.pro.length;m++)s[c].pro[m].isSelected&&(p+=Number((parseFloat(s[c].pro[m].price)*parseInt(s[c].pro[m].count)).toFixed(2)),u.push(s[c].pro[m]),s[c].pro[m].maxPoints>0&&(d=!0));r.data.proPrice=r.data.proPrice.concat(p),s[c].pro=u,n.push(s[c]),r.data.totalPrice+=r.data.transportFee[c],r.data.branchInfoIds+=s[c].branchInfoId+","}r.data.branchInfoIds=r.data.branchInfoIds+"-1,-2",s=n,r.setData({hasPointsGoods:d,branchInfoIds:r.data.branchInfoIds,orderList:s,transportFee:r.data.transportFee,proPrice:r.data.proPrice,totalPrice:(parseFloat(r.data.totalPrice)+parseFloat(i)).toFixed(2),tempTotalPrice:(parseFloat(r.data.totalPrice)+parseFloat(i)).toFixed(2)}),r.getAddressInfo().then(function(){r.data.addressInfo.contactPerson?r.getTransportFee():"51"!=r.data.status&&"52"!=r.data.status&&"3"!=r.data.status&&"6"!=r.data.status?r.getCouponInfo(r.data.orderList):r.getPointsSet()})},onShow:function(){var a=this;a.setData({onShowPrePay:t.globalData.isShowPrePay}),a.getComeAndGoTime(),1!=a.data.loadCount?a.getAddressInfo().then(function(t){if(a.setData({tempTotalPrice:i,totalPrice:i,usePoints:!1}),1==a.data.mtype&&2==a.data.roomType&&a.setData({tempTotalPrice:a.data.tempTotalPrice*a.data.totalDays}),t.id)a.getTransportFee();else{for(var e=0;e<a.data.transportFee.length;e++)a.data.transportFee[e]=0;a.setData({transportFee:a.data.transportFee}),"51"!=a.data.status&&"52"!=a.data.status&&"3"!=a.data.status&&"6"!=a.data.status?a.getCouponInfo(a.data.orderList):a.getPointsSet()}}):a.setData({loadCount:a.data.loadCount+1})},onUnload:function(){wx.removeStorageSync("comeDate"+t.globalData.autoId),wx.removeStorageSync("leaveDate"+t.globalData.autoId)},getPointsSet:function(){var e=this;wx.request({url:t.globalData.comUrl+"tabs_getPointsSet.action",data:{projectId:a.appId},cache:!0,success:function(t){wx.hideLoading();for(var a=t.data.content,o=0,r=[],s=0;s<e.data.orderList.length;s++){for(var i=e.data.orderList[s],n=0;n<i.pro.length;n++)i.pro[n].maxPoints>0&&(o+=i.pro[n].price*i.pro[n].count);r=r.concat(i.pro.filter(function(t){return t.maxPoints>0}))}e.newArr=r;var d=0;d=a.autoAllocatePoints?o*a.shopRatePoint/a.shopRateMoney:parseInt(o/a.shopRateMoney)*a.shopRatePoint,e.setData({totalGotPoints:d});var c=e;e.getUserInfo().then(function(){c.pointsDeduction()})}})},pointsDeduction:function(){var t=this.bPoints,a=this.newArr;a=a.sort(this.compare("pricePerPoint"));for(var e=function(t){return t.reduce(function(t,a,e,o){return parseFloat(t)+parseFloat(a)})}(this.data.transportFee),o=[],r=[],s=this.data.totalPrice-e,i=t,n=0;n<a.length;n++){var d=a[n],c=d.maxPoints<i?d.maxPoints:i,l=c*d.pricePerPoint;l<s?l<d.price?(i-=c,s-=l,o.push(d.moduleId),r.push(c.toFixed(2))):(i-=d.price/d.pricePerPoint,s-=d.price,o.push(d.moduleId),r.push((d.price/d.pricePerPoint).toFixed(2))):s<d.price?(s=0,i-=i/d.pricePerPoint,o.push(d.moduleId),r.push((i/d.pricePerPoint).toFixed(2))):(s-=d.price,i-=d.price/d.pricePerPoint,o.push(d.moduleId),r.push((d.price/d.pricePerPoint).toFixed(2)))}this.canUsePointProMId=o,this.canUsePointProPs=r;var u=Number((t-i).toFixed(2)),p=Number((this.data.totalPrice-e-s).toFixed(2));this.setData({dcPoints:u,dcMoney:p})},compare:function(t){return function(a,e){var o=a[t];return e[t]-o}},getUserInfo:function(){var a=this;return new Promise(function(o,r){wx.request({url:t.globalData.comUrl+"tabs_getMember.action",data:{memberId:t.getMemberId(),customizetabId:e.LynxApplyFor_About_Merchant,checkBranch:1},success:function(e){var r=t.getJsonData(e.data);console.log(r),a.setData({cardNo:r.cardNo,preMoney:r.preMoney}),a.bPoints=r.bPoints,console.log(a.data.cardNo),o()},fail:function(){t.hint()}})})},getComeAndGoTime:function(){if(1==this.data.mtype&&2==this.data.roomType){var a=wx.getStorageSync("comeDate"+t.globalData.autoId),e=wx.getStorageSync("leaveDate"+t.globalData.autoId),o=new Date;if(a&&e)this.setData({nowDate:o.getMonth()+1+"月"+o.getDate()+"日",comeDateInfo:a,leaveDateInfo:e,totalDays:t.DateDiff(e.re,a.re)});else{var r=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),s=t.calculatDateBydays(r,1),i=s.split("-");a={date:o.getMonth()+1+"月"+o.getDate()+"日",week:t.getWeek(r),re:r},e={date:i[1]+"月"+i[2]+"日",week:t.getWeek(s),re:s},this.setData({nowDate:o.getMonth()+1+"月"+o.getDate()+"日",comeDateInfo:a,leaveDateInfo:e})}}},getAddressInfo:function(){var a=this;return wx.showLoading({title:"加载中..."}),new Promise(function(e,o){wx.request({url:t.globalData.comUrl+"tabs_getCustomerAddressList.action",data:{current:1,memberId:t.getMemberId()},success:function(o){var r=t.getJsonData(o.data);if(r.pageList.length>0){for(var s=0;s<r.pageList.length;s++)if(1==r.pageList[s].isdefault){a.setData({addressInfo:r.pageList[s]}),e(r.pageList[s]);break}}else a.setData({addressInfo:""}),e("")}})})},remarkInput:function(t){this.setData({remark:t.detail.value})},usePoints:function(){this.data.totalPrice=this.data.usePoints?parseFloat(this.data.totalPrice)+parseFloat(this.data.dcMoney):parseFloat(this.data.totalPrice)-parseFloat(this.data.dcMoney),this.setData({usePoints:!this.data.usePoints,totalPrice:this.data.totalPrice.toFixed(2)})},billInput:function(t){this.setData({bill:t.detail.value})},getCouponInfo:function(a){var e=this;wx.showLoading({title:"加载中..."}),wx.request({url:t.globalData.comUrl+"act_getMemberActivityListByBranch.action",data:{memberId:t.getMemberId(),customizetabId:t.getCustomizeId("Activity"),memberStatus:0,status:0,branchInfoIds:e.data.branchInfoIds},success:function(o){e.data.platformCouponList=[];var r=t.getJsonData(o.data);console.log(r);for(var s=0;s<a.length;s++)a[s].couponList=[];if(r.length){for(var i=0;i<r.length;i++){var n=r[i];"1"==n.type?(n.amountReachedName="满"+n.amountReached+"元可用",n.tipName="满"+n.amountReached+"减"+n.discountAmount):n.tipName="优惠"+n.discountAmount+"元",n.tip=n.instructure&&""!=n.instructure&&"null"!=n.instructure?n.instructure:"",n.beginTime=n.beginTime.substring(0,10),n.endTime=n.endTime.substring(0,10);for(var d=0;d<a.length;d++){for(var c=0,l=0;l<a[d].pro.length;l++)c+=a[d].pro[l].price*a[d].pro[l].count;a[d].branchInfoId==n.branchInfoId&&c>=n.amountReached&&(a[d].couponList=a[d].couponList.concat(n))}if(-1==n.branchInfoId||-2==n.branchInfoId)for(var u=0;u<e.data.proPrice.length;u++)if(n.amountReached<=e.data.proPrice[u]){e.data.platformCouponList=e.data.platformCouponList.concat(n);break}}var p=e.data.tempTotalPrice,m="";if(a.length>0)for(var h=0;h<a.length;h++){var f=0,g=0;if(a[h].couponList.length>0){for(var I=0;I<a[h].couponList.length;I++){a[h].couponList[I].isSelected=!1;var y=a[h].couponList[I].discountAmount;y>g&&(f=I,g=y)}var b=a[h].couponList[f].memberActivityId.split(",");m+=b[0]+",",a[h].couponList[f].isSelected=!0,a[h].couponInfo=a[h].couponList[f].tipName,a[h].memberActivityId=b[0],a[h].couponPrice=a[h].couponList[f].discountAmount}else m+=",",a[h].couponPrice=0,a[h].memberActivityId="";a[h].couponPrice>0&&e.setData({isSelectBraCou:!0}),p-=a[h].couponPrice}if(!e.data.isSelectBraCou){for(var v=0,P=0,D=0;D<e.data.platformCouponList.length;D++)if(e.data.platformCouponList[D].isSelected=!1,e.data.platformCouponList[D].discountAmount>P)for(var w=0;w<e.data.proPrice.length;w++)v=D,P=e.data.platformCouponList[D].discountAmount;if(e.data.platformCouponList.length>0){if("-2"==e.data.platformCouponList[v].branchInfoId){var x=e.data.platformCouponList[v].memberActivityId.split(",");e.data.platformCouponList[v].memberActivityId=x[0]}m=e.data.platformCouponList[v].branchInfoId+e.data.platformCouponList[v].memberActivityId+",",e.data.platformCouponList[v].isSelected=!0,p-=e.data.platformCouponList[v].discountAmount,e.setData({platformCouponInfo:{tipName:e.data.platformCouponList[v].tipName,couponPrice:e.data.platformCouponList[v].discountAmount}})}}e.setData({totalPrice:parseFloat(p).toFixed(2),orderList:a,platformCouponList:e.data.platformCouponList,memberActivityId:m.substring(0,m.length-1)}),console.log(e.data.memberActivityId)}else e.setData({totalPrice:e.data.tempTotalPrice});e.data.hasPointsGoods?e.getPointsSet():wx.hideLoading()},fail:function(){t.hint()}})},branchCoupontap:function(t){n=t.currentTarget.dataset.index,this.setData({coupontype:1,curBranchCouponIdx:n,hiddenCouponList:!1,branchCouponList:this.data.orderList[n].couponList})},closebranchCoupon:function(){this.setData({hiddenCouponList:!0})},selectCoupon:function(t){var a="";if(1==this.data.coupontype){for(var e=this.data.orderList[n],o=this.data.tempTotalPrice,r=0;r<e.couponList.length;r++)e.couponList[r].isSelected=!1;if(""===t.currentTarget.dataset.cidx)e.couponInfo="不使用优惠",e.couponPrice=0,e.memberActivityId="";else{var s=e.couponList[t.currentTarget.dataset.cidx].memberActivityId.split(",");e.couponList[t.currentTarget.dataset.cidx].isSelected=!0,e.couponInfo=e.couponList[t.currentTarget.dataset.cidx].tipName,e.couponPrice=e.couponList[t.currentTarget.dataset.cidx].discountAmount,e.memberActivityId=s[0]}this.data.orderList[n]=e,this.data.isSelectBraCou=!1;for(var i=0;i<this.data.orderList.length;i++)o-=this.data.orderList[i].couponPrice,this.data.orderList[i].couponPrice>0&&(this.data.isSelectBraCou=!0),a+=this.data.orderList[i].memberActivityId+",";if(!this.data.isSelectBraCou){for(var d=0,c=0,l=0;l<this.data.platformCouponList.length;l++){var u=this.data.platformCouponList[l];this.data.platformCouponList[l].isSelected=!1;var p=u.discountAmount;p>c&&(d=l,c=p)}this.data.platformCouponList.length>0?(a=this.data.platformCouponList[d].branchInfoId+this.data.platformCouponList[d].memberActivityId+",",this.data.platformCouponList[d].isSelected=!0,o-=this.data.platformCouponList[d].discountAmount,this.setData({platformCouponList:this.data.platformCouponList,platformCouponInfo:{tipName:this.data.platformCouponList[d].tipName,couponPrice:this.data.platformCouponList[d].discountAmount}})):a=","}this.setData({orderList:this.data.orderList,branchCouponList:this.data.orderList[n].couponList,totalPrice:o,isSelectBraCou:this.data.isSelectBraCou,memberActivityId:a.substring(0,a.length-1)})}else{for(var m=t.currentTarget.dataset.cidx,h=0;h<this.data.platformCouponList.length;h++)this.data.platformCouponList[h].isSelected=!1;if(""===m)this.setData({memberActivityId:"",platformCouponList:this.data.platformCouponList,totalPrice:this.data.tempTotalPrice,platformCouponInfo:{tipName:"不使用优惠",couponPrice:0,memberActivityId:""}});else{this.data.platformCouponList[m].isSelected=!0;var f=this.data.platformCouponList[m],g=parseFloat(this.data.tempTotalPrice)-parseFloat(f.discountAmount);console.log(f),this.setData({totalPrice:g.toFixed(2),platformCouponList:this.data.platformCouponList,memberActivityId:f.branchInfoId+f.memberActivityId,platformCouponInfo:{tipName:f.tipName,couponPrice:f.discountAmount}})}}this.setData({hiddenCouponList:!0}),this.data.hasPointsGoods&&(this.pointsDeduction(),this.setData({totalPrice:this.data.usePoints?this.data.totalPrice-this.data.dcMoney:this.data.totalPrice})),console.log(this.data.memberActivityId)},platformCouTap:function(){this.data.isSelectBraCou?wx.showModal({title:"",content:"商家和平台优惠券不可同时用，请先取消商家优惠券"}):this.setData({coupontype:2,hiddenCouponList:!1})},selectBookingTime:function(){wx.navigateTo({url:"calendar/calendar"})},getTransportFee:function(){var e=this;if(!s&&""!=e.data.addressInfo.contactPerson){for(var o="",r="",i="",n=0;n<e.data.orderList.length;n++)for(var d=0;d<e.data.orderList[n].pro.length;d++)o+=e.data.orderList[n].pro[d].productId+"=",r+=e.data.orderList[n].pro[d].moduleId+"=",i+=e.data.orderList[n].pro[d].count+"=";o=o.substring(0,o.length-1),r=r.substring(0,r.length-1),i=i.substring(0,i.length-1),wx.request({url:t.globalData.comUrl+"tabs_culculateTransportFee.action",data:{appId:a.appId,productIds:o,cityId:e.data.addressInfo.city,modelIds:r,amounts:i},success:function(a){for(var o=t.getJsonData(a.data),r=[],i=0;i<o.data.length;i++)r[i]=o.data[i].code,e.data.transportFee[i]=parseFloat(o.data[i].totalTransportFee).toFixed(2),e.data.tempTotalPrice=parseFloat(e.data.tempTotalPrice)+parseFloat(e.data.transportFee[i]);"0"==o.isSuccess?e.setData({transportFee:e.data.transportFee,tempTotalPrice:parseFloat(e.data.tempTotalPrice).toFixed(2),isSupport:!1,failReason:r}):e.setData({transportFee:e.data.transportFee,tempTotalPrice:parseFloat(e.data.tempTotalPrice).toFixed(2),isSupport:!0,failReason:r}),"51"!=e.data.status&&"52"!=e.data.status&&"3"!=e.data.status&&"6"!=e.data.status?(e.getCouponInfo(e.data.orderList),wx.hideLoading()):(e.setData({totalPrice:e.data.tempTotalPrice}),e.data.hasPointsGoods?e.getPointsSet():wx.hideLoading()),s=!1},fail:function(){t.hint("获取运费失败"),wx.hideLoading()}})}},toAddress:function(){wx.navigateTo({url:"../address/address"})},wxPay:function(a){var e=this;1==a.currentTarget.dataset.type?e.setData({payType:4}):e.setData({payType:2}),e.data.addressInfo.contactPerson?r&&e.data.isSupport?(r=!1,this.submitOrder()):e.data.isSupport||t.hint("订单中有商品不支持配送"):t.hint("请填写收货地址")},offlinePay:function(){var a=this;a.setData({payType:3}),a.data.addressInfo.contactPerson?r&&a.data.isSupport?(r=!1,this.submitOrder()):a.data.isSupport||t.hint("订单中有商品不支持配送"):t.hint("请填写收货地址")},submitOrder:function(){var e=this;""!=e.data.addressInfo.contactPerson||"booking"==e.data.status?"51"==e.data.status||"52"==e.data.status?wx.request({url:t.globalData.comUrl+"activityProduct_checkActivityStatus.action",data:{appId:a.appId,productId:e.data.orderList[0].pro[0].productId,activityId:e.data.activityId},success:function(a){0==a.data.code?(r=!0,t.hint("活动已经结束")):2==a.data.code?(r=!0,t.hint("产品已经退出该活动")):e.startSubmitOrder()}}):"3"==e.data.status?wx.request({url:t.globalData.comUrl+"activityProduct_checkActivityStatus.action",data:{appId:a.appId,productId:e.data.orderList[0].pro[0].productId,activityId:e.data.activityId,memberId:t.getMemberId()},success:function(a){0==a.data.code?t.hint("活动已经结束"):2==a.data.code?t.hint("产品已经退出该活动"):e.startSubmitOrder()}}):e.startSubmitOrder():wx.showModal({title:"提示",content:"请填写收货地址",showCancel:!1})},startSubmitOrder:function(){var e=this;wx.showToast({title:"正在提交...",icon:"loading",duration:1e4,mask:!0});var s={},i=[];if("booking"==e.data.status)i=wx.getStorageSync("bookingData"+t.globalData.autoId);else if("51"==e.data.status||"52"==e.data.status||"3"==e.data.status||"6"==e.data.status)i=wx.getStorageSync("groupProData"+t.globalData.autoId);else{i=wx.getStorageSync("cartData"+t.globalData.autoId);for(var n=[],d=0;d<i.length;d++)i[d].isSelected&&n.push(i[d]);i=n}for(var c=function(t){for(var a,e=[],o={},r=0;null!=(a=t[r]);r++)o[a.productId]||(e.push(a.productId),o[a.productId]=!0);return e}(i),l=[],u=0;u<c.length;u++)for(var p=[],m={},h=0;h<i.length;h++)i[h].productId==c[u]&&(p.push(i[h]),m.productId=i[h].productId,m.productName=i[h].productName,m.pro=p,l[u]=m);for(var f="",g="",I="",y="",b="",v="",P="",D="",w=0;w<l.length;w++){f+=l[w].productId+"=",g+=l[w].productName+",";for(var x=0;x<l[w].pro.length;x++)if(f+=l[w].pro[x].moduleId+",",I+=l[w].pro[x].productCode+",",v+=l[w].pro[x].count+",",b+=l[w].pro[x].price+",",y+=l[w].pro[x].modelName+",",this.data.hasPointsGoods){var L=this.canUsePointProMId.indexOf(l[w].pro[x].moduleId);D+=L>=0?this.canUsePointProPs[L]+",":","}f=f.substring(0,f.length-1)+";",v=v.substring(0,v.length-1),b=b.substring(0,b.length-1),y=y.substring(0,y.length-1),v+="=",b+="=",y+="="}for(var S=0;S<e.data.orderList.length;S++)P+=e.data.orderList[S].branchInfoId+",";this.data.hasPointsGoods&&(s.points=D.substring(0,D.length-1)),s.productIds=f.substring(0,f.length-1),s.productNames=g.substring(0,g.length-1),s.productCodes=I.substring(0,I.length-1),s.amount=v.substring(0,v.length-1),s.prices=b.substring(0,b.length-1),s.modelName=y.substring(0,y.length-1),s.branchInfoIds=P.substring(0,P.length-1),s.businessId=c,o=wx.getStorageSync("memberId"+t.globalData.autoId),s.projectId=a.appId,s.memberId=o,e.data.addressInfo?(s.personName=e.data.addressInfo.contactPerson,s.personMobilePhone=e.data.addressInfo.mobilePhone,s.personAddress=e.data.addressInfo.proName+e.data.addressInfo.cityName+e.data.addressInfo.disName+e.data.addressInfo.address):(s.personName="暂无",s.personMobilePhone="暂无",s.personAddress="暂无"),1==e.data.mtype&&2==e.data.roomType&&(s.days=e.data.totalDays),s.postCode=e.data.addressInfo.postCode,s.payType=e.data.payType,s.totalMoney=e.data.tempTotalPrice,s.transportCost=e.data.transportFee.join(","),s.memberActivityId=e.data.memberActivityId,s.remark=e.data.remark,s.invoiceTitle=e.data.bill,"6"==e.data.status&&(s.isDistribute="1"),"51"!=e.data.status&&"52"!=e.data.status||(s.groupOrderNo="51"==e.data.status?"0":e.data.orderList[0].groupOrderNo),e.setData({productNames:s.productNames,totalMoney:s.totalMoney,orderInfo:s}),console.log(s),wx.request({url:t.globalData.comUrl+"tabs_saveTSCBranchInfoOrderWithQuantity.action",data:s,success:function(a){var o=t.getJsonData(a.data);e.setData({myOrderInfo:o}),wx.showToast({title:"订单提交成功",icon:"success",duration:2e3,mask:!0,success:function(){if("booking"!=e.data.status&&"51"!=e.data.status&&"52"!=e.data.status&&"3"!=e.data.status&&"6"!=e.data.status){for(var a=wx.getStorageSync("cartData"+t.globalData.autoId),s=[],i=0;i<a.length;i++)a[i].isSelected||s.push(a[i]);wx.setStorageSync("cartData"+t.globalData.autoId,s);for(var n=wx.getStorageSync("cartDataList"+t.globalData.autoId),d=[],c=0;c<n.length;c++)if(!n[c].isSelected){for(var l=[],u=0;u<n[c].pro.length;u++)n[c].pro[u].isSelected||l.push(n[c].pro[u]);n[c].pro=l,d.push(n[c])}wx.setStorageSync("cartDataList"+t.globalData.autoId,d)}if(3==e.data.payType)r=!0,wx.redirectTo({url:"../self/myOrder/myOrder"});else{if(r=!0,e.data.totalPrice<=0)return void wx.redirectTo({url:"../self/myOrder/myOrder"});wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),"https://beta-mg.vzmapp.com/wc_mg/"==t.globalData.comUrl?e.payTest(o):4==e.data.payType?e.data.isWeb?e.onLinePay(o):e.pay(o):2==e.data.payType&&e.prePay()}}})},fail:function(){r=!0,t.hint("订单提交失败")}})},payTest:function(t){wx.request({url:"https://beta-mg.vzmapp.com/WechatAlipay/PayNotifcationTest",data:{attach:t.orderNO+"_"+a.appId,total_fee:1,transaction_id:1,trade_type:"JSAPI"},success:function(t){wx.showToast({title:"支付成功",icon:"success",duration:2e3,mask:!0}),setTimeout(function(){wx.redirectTo({url:"../self/myOrder/myOrder?index=1"})},2e3)}})},prePay:function(){var a=this;a.data.preMoney<a.data.totalMoney?wx.showToast({title:"余额不足！",icon:"none",duration:2e3,mask:!0}):(wx.showToast({title:"加载中...",icon:"loading",duration:1e4,mask:!0}),wx.request({url:t.globalData.paymentUrl+"/WechatAlipay/PrePayNotifcation",data:{memberId:t.getMemberId(),projectId:a.data.orderInfo.projectId,nonce_str:"lfksf"+Math.round(1e5*Math.random()),body:a.data.orderInfo.productName,attach:a.data.myOrderInfo.orderNO+"_"+a.data.orderInfo.projectId+"%2B",out_trade_no:a.data.myOrderInfo.orderNO+(new Date).valueOf(),total_fee:(100*a.data.totalMoney).toFixed(0),trade_type:"",device_info:"156151"},success:function(t){console.log(t.data),wx.hideToast(),"success"==t.data?wx.showToast({title:"支付成功",icon:"success",duration:2e3,mask:!0,success:function(t){setTimeout(function(){wx.redirectTo({url:"../self/myOrder/myOrder?index=1"})},2e3)}}):wx.showModal({title:"支付失败",showCancel:!1,success:function(t){t.confirm&&a.onShow()}})}}))},pay:function(a){var e=this,o=wx.getStorageSync("autoId"+t.globalData.autoId);wx.login({success:function(r){r.code?wx.request({url:t.globalData.paymentUrl+"/WechatAlipay/MiniPayService2?jsoncallback=?",data:{projectId:o.appId,nonce_str:"lfksf"+Math.round(1e5*Math.random()),body:o.projectName+"商品",attach:a.orderNO+"_"+o.appId,out_trade_no:a.orderNO+(new Date).valueOf(),total_fee:(100*e.data.totalPrice).toFixed(0),trade_type:"JSAPI",device_info:"888",code:r.code},success:function(a){if(wx.hideToast(),""!=a.data){var o=e.getJsonData(a.data);wx.requestPayment({timeStamp:o.timeStamp,nonceStr:o.nonceStr,package:"prepay_id="+o.prepay_id,signType:"MD5",paySign:o.sign,success:function(a){"booking"==e.data.status?wx.request({url:t.globalData.comUrl+"tabs_saveFlexiForm",data:e.data.bookingInfo,success:function(a){1==e.data.mtype&&2==e.data.roomType&&(wx.removeStorageSync("come\b\bDate"+t.globalData.autoId),wx.removeStorageSync("leaveDate"+t.globalData.autoId)),wx.showToast({title:"预约成功",icon:"success",duration:2e3,mask:!0}),setTimeout(function(){wx.redirectTo({url:"../self/myOrder/myOrder"})},2e3)},fail:function(){t.hint("预约失败")}}):(wx.showToast({title:"支付成功",icon:"success",duration:2e3,mask:!0}),setTimeout(function(){wx.redirectTo({url:"../self/myOrder/myOrder?index=1"})},2e3))},fail:function(t){wx.showModal({title:"支付失败",showCancel:!1,success:function(t){t.confirm&&wx.redirectTo({url:"../self/myOrder/myOrder"})}})}})}else wx.showModal({title:"支付失败",showCancel:!1,success:function(t){t.confirm&&wx.redirectTo({url:"../self/myOrder/myOrder"})}})}}):t.hint("获取用户登录态失败！"+r.errMsg)}})},getJsonData:function(t){return JSON.parse(t.substring(1,t.length-1))},bindDateChange:function(t){console.log("picker发送选择改变，携带值为",t.detail.value),this.setData({date:t.detail.value})},bindTimeChange:function(t){console.log("picker发送选择改变，携带值为",t.detail.value),this.setData({time:t.detail.value})},formSubmit:function(a){var e=this;console.log(a.detail.value);var o=/^1[3|4|5|8|7][0-9]\d{4,8}$/;if(""!=a.detail.value.name&&0!==a.detail.value.name.trim().length)if(""!=a.detail.value.phone)if(o.test(a.detail.value.phone)){e.setData({payType:4});var s="",i="";if(1==e.data.mtype&&2==e.data.roomType)""==a.detail.value.remarks?(s="姓名,电话,入住日期,离店日期",i=a.detail.value.name+","+a.detail.value.phone+","+e.data.comeDateInfo.re+","+e.data.leaveDateInfo.re):(s="姓名,电话,入住日期,离店日期,留言",i=a.detail.value.name+","+a.detail.value.phone+","+e.data.comeDateInfo.re+","+e.data.leaveDateInfo.re+","+a.detail.value.remarks);else{if(""==a.detail.value.date)return void t.hint("请选择预约日期!");if(""==a.detail.value.time)return void t.hint("请选择预约时间!");""==a.detail.value.remarks?(s="姓名,电话,预约日期,预约时间",i=a.detail.value.name+","+a.detail.value.phone+","+a.detail.value.date+","+a.detail.value.time):(s="姓名,电话,预约日期,预约时间,留言",i=a.detail.value.name+","+a.detail.value.phone+","+a.detail.value.date+","+a.detail.value.time+","+a.detail.value.remarks)}var n=e.data.orderList[0].pro[0],d={projectId:t.globalData.projectInfo.appId,customizeTabId:t.globalData.customizeTabId["Flexi-Form-Booking"],token:"html5",fieldKey:s,fieldValue:i,productName:n.productName+" "+n.modelName,branchName:e.data.orderList[0].branchName,branchId:e.data.orderList[0].branchInfoId,memberId:t.getMemberId()};this.setData({bookingInfo:d}),console.log(e.data.orderList),console.log(n),console.log(this.data.bookingInfo),r&&(r=!1,e.submitOrder())}else t.hint("请输入正确的电话号码");else t.hint("请输入电话号码!");else t.hint("预约人姓名不能为空!")},onLinePay:function(e){var o=this,r={myOrderInfo:e,projectInfo:a,productNames:o.data.productNames,totalPrice:o.data.totalPrice,paymentUrl:t.globalData.paymentUrl};window.localStorage.setItem("payInfos",JSON.stringify(r));var s=-1!=window.navigator.userAgent.toLowerCase().indexOf("micromessenger"),i=window.location.href.split("#")[0]+"paymament.html";s&&(i="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+t.globalData.wxAppId+"&redirect_uri="+encodeURIComponent(i)+"&response_type=code&scope=snsapi_userinfo&state=12345#wechat_redirect"),window.location.href=i}}); 
 			}); 	require("pages/order/order.js");
 		__wxRoute = 'pages/address/address';__wxRouteBegin = true; 	define("pages/address/address.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=getApp(),t=!1,e="";Page({data:{styleConfig:a.globalData.styleConfig,addressList:[],provincArray:[],cityArray:[],areaArray:[],provincIndex:"",cityIndex:"",areaIndex:"",provincId:"",cityId:"",areaId:"",addressInfo:{},provinceChange:!1,cityChange:!1,isHidden:!0},onLoad:function(){this.getAddressList(),this.getProvince()},getAddressList:function(){var t=this;wx.request({url:a.globalData.comUrl+"tabs_getCustomerAddressList.action",data:{current:1,memberId:a.getMemberId()},success:function(e){console.log(e.data);var i=a.getJsonData(e.data);t.setData({addressList:i.pageList}),wx.hideLoading()}})},getAddressInfo:function(){this.setData({addressInfo:wx.getStorageSync("addressInfo"+a.globalData.autoId)});var t=this.data.addressInfo.indexList[0];this.setData({provincIndex:t,provincId:this.data.provincArray[t].provinceId}),this.getCity(this.data.provincId)},provinceChange:function(a){var t=this;t.setData({provincIndex:a.detail.value,provincId:t.data.provincArray[a.detail.value].provinceId,cityIndex:"",areaIndex:"",provinceChange:!0}),t.getCity(t.data.provincId)},cityChange:function(a){var t=this;t.setData({cityIndex:a.detail.value,cityId:t.data.cityArray[a.detail.value].cityId,areaIndex:"",cityChange:!0}),t.getArea(t.data.cityId)},areaChange:function(a){var t=this;this.setData({areaIndex:a.detail.value,areaId:t.data.areaArray[a.detail.value].districtId})},getProvince:function(){var t=this;wx.request({url:a.globalData.comUrl+"tabs_getProvinceList.action",success:function(e){t.setData({provincArray:a.getJsonData(e.data)});wx.getStorageSync("addressInfo"+a.globalData.autoId)},fail:function(){a.hint("获取省份失败！")}})},getCity:function(t){var e=this;wx.request({url:a.globalData.comUrl+"tabs_getCityByProvinceId.action",data:{provinceId:t},success:function(t){if(e.setData({cityArray:a.getJsonData(t.data)}),!e.data.provinceChange){var i=e.data.addressInfo.indexList[1];e.setData({cityIndex:i,cityId:e.data.cityArray[i].cityId}),e.getArea(e.data.cityId)}},fail:function(){a.hint("获取对应市区失败！")}})},getArea:function(t){var e=this;wx.request({url:a.globalData.comUrl+"tabs_getDistrictByCityId.action",data:{cityId:t},success:function(t){if(e.setData({areaArray:a.getJsonData(t.data)}),!e.data.cityChange){var i=e.data.addressInfo.indexList[2];e.setData({areaIndex:i,areaId:e.data.areaArray[i].districtId})}},fail:function(){a.hint("获取对应区域失败！")}})},addAddress:function(){this.setData({isHidden:!1,provincIndex:"",cityIndex:"",areaIndex:""})},editTap:function(a){t=!0,e=a.currentTarget.dataset.info.id,this.setData({isHidden:!1,addressInfo:{name:a.currentTarget.dataset.info.contactPerson,phone:a.currentTarget.dataset.info.mobilePhone,address:a.currentTarget.dataset.info.address},provincIndex:"",cityIndex:"",areaIndex:""})},deleteTap:function(t){var e=this;console.log(t.currentTarget.dataset.info),wx.showModal({content:"确定要删除该地址吗",success:function(i){i.confirm&&(wx.showLoading({title:""}),wx.request({url:a.globalData.comUrl+"tabs_deleteCustomerAddress.action",data:{id:t.currentTarget.dataset.info.id},success:function(a){e.getAddressList()}}))}})},closeBtn:function(){t=!1,this.setData({isHidden:!0})},setDefault:function(t){var e=this;wx.request({url:a.globalData.comUrl+"tabs_setDefaultCustomerAddress.action",data:{id:t.currentTarget.dataset.id,memberId:a.getMemberId()},success:function(t){console.log(t.data);a.getJsonData(t.data);e.getAddressList()}})},addressSubmit:function(i){var d=this,s=/^1[3|4|5|8|7][0-9]\d{4,8}$/;if(""!=i.detail.value.name)if(""!=i.detail.value.phone)if(s.test(i.detail.value.phone))if(""!=d.data.provincIndex)if(""!=d.data.cityIndex)if(""!=d.data.areaId)if(""!=i.detail.value.address){var n={address:i.detail.value.address,area:d.data.areaId,city:d.data.cityId,province:d.data.provincId,contactPerson:i.detail.value.name,memberId:a.getMemberId(),mobilePhone:i.detail.value.phone,isdefaults:0};t&&(n.id=e),wx.request({url:a.globalData.comUrl+"tabs_addCustomerAddress.action",data:n,success:function(a){t=!1,d.getAddressList(),d.setData({isHidden:!0})}})}else a.hint("请输入详细地址");else a.hint("请输入省市区");else a.hint("请输入省市区");else a.hint("请输入省市区");else a.hint("请输入正确的手机号码");else a.hint("请输入手机号码");else a.hint("收货人不能为空！")}}); 
 			}); 	require("pages/address/address.js");
 		__wxRoute = 'pages/login/login';__wxRouteBegin = true; 	define("pages/login/login.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="",e="",o="";Page({data:{styleConfig:t.globalData.styleConfig},onLoad:function(a){o=t.globalData.projectInfo,wx.hideToast()},logintap:function(){if(""!=a)if(""!=e){var n=this;wx.request({url:t.globalData.comUrl+"tabs_memberLogin.action",data:{projectId:o.appId,userName:a,password:e},success:function(a){var e=t.getJsonData(a.data);wx.setStorageSync("scoreRule"+t.globalData.autoId,e.scoreRule),wx.setStorageSync("memberId"+t.globalData.autoId,e.id),wx.setStorageSync("merchantId"+t.globalData.autoId,e.merchantId),"0"==e.status?t.hint("账号或密码不正确"):(n.setData({memberId:e.id,userInfo:e}),wx.navigateBack({delta:1}))},fail:function(a){t.hint()}})}else t.hint("密码不能为空！");else t.hint("登录账号不能为空！")},forgetPwd:function(){wx.navigateTo({url:"forget/forget"})},register:function(){wx.navigateTo({url:"register/register"})},phoneInput:function(t){a=t.detail.value},pwdInput:function(t){e=t.detail.value}}); 
 			}); 	require("pages/login/login.js");
 		__wxRoute = 'pages/login/register/register';__wxRouteBegin = true; 	define("pages/login/register/register.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t="",e="",a="",i="",n="",s=getApp();Page({data:{styleConfig:s.globalData.styleConfig},phoneInput:function(e){t=e.detail.value},emailInput:function(t){e=t.detail.value},pwdInput:function(t){a=t.detail.value},repwdInput:function(t){i=t.detail.value},userInput:function(t){n=t.detail.value},register:function(){var o=/^1[3|4|5|8|7][0-9]\d{4,8}$/,l=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,r=/^(\w){6,15}$/,u=/^.{1,20}$/;if(""!=t)if(o.test(t))if(""!=e)if(l.test(e))if(""!=a)if(""!=i)if(r.test(a))if(a==i)if(""!=n)if(u.test(n)){var c=this;wx.request({url:s.globalData.comUrl+"tabs_memberRegistration.action",data:{appId:s.globalData.projectInfo.appId,mobilePhone:t,surname:n,email:e,password:a},success:function(t){var e=s.getJsonData(t.data);console.log(e),"0"==e.status?c.warn(e.reason):(wx.showToast({title:"注册成功",icon:"success",duration:2e3}),wx.setStorageSync("isLogin",!0),wx.setStorageSync("memberId"+s.globalData.autoId,e.memberId),setTimeout(function(){try{wx.navigateBack({delta:2})}catch(t){console.log(t),wx.switchTab({url:"/pages/index/index"})}},2e3))},fail:function(t){s.hint()}})}else this.warn("用户名不能超过20个字符");else this.warn("请输入用户名");else this.warn("两次输入密码不一致");else this.warn("密码需由6-15个字母、数字组成");else this.warn("请再次输入密码");else this.warn("请输入密码");else this.warn("邮箱格式有误");else this.warn("邮箱不能为空");else this.warn("请输入正确的手机号码");else this.warn("手机号不能为空")},warn:function(t){wx.showToast({title:t,image:"../../../img/warn.png",duration:2e3})}}); 
 			}); 	require("pages/login/register/register.js");
 		__wxRoute = 'pages/login/forget/forget';__wxRouteBegin = true; 	define("pages/login/forget/forget.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="";Page({data:{styleConfig:t.globalData.styleConfig},sure:function(){var e=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/;if(""!=a)if(e.test(a)){var s=this;wx.request({url:t.globalData.comUrl+"tabs_memRetrievePwd.action",data:{appId:t.globalData.projectInfo.appId,email:a},method:"GET",success:function(a){var e=t.getJsonData(a.data);console.log(e),"0"==e.status?s.tips(e.reason):s.success("提交成功")},fail:function(a){t.hint()}})}else this.warn("邮箱格式有误");else this.warn("邮箱不能为空")},emailInput:function(t){a=t.detail.value},tips:function(t){wx.showToast({title:t,image:"../../../img/warn.png",duration:2e3})},success:function(t){wx.showToast({title:t,icon:"success",duration:2e3})},warn:function(t){wx.showToast({title:t,image:"../../../img/warn.png",duration:2e3})}}); 
 			}); 	require("pages/login/forget/forget.js");
 		__wxRoute = 'pages/publicity/publicity';__wxRouteBegin = true; 	define("pages/publicity/publicity.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp();Page({data:{videoList:[]},onLoad:function(t){this.getVideoList(),wx.setNavigationBarTitle({title:"企业宣传"})},getVideoList:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getVideoGalleryList.action",data:{appId:t.globalData.projectInfo.appId,customizeTabId:t.globalData.customizeTabId.Video_Gallery,isNeedHttps:0},success:function(e){var i=t.getJsonData(e.data);a.setData({videoList:i})},fail:function(){}})}}); 
 			}); 	require("pages/publicity/publicity.js");
 		__wxRoute = 'pages/publicity/publicity-detail/publicity-detail';__wxRouteBegin = true; 	define("pages/publicity/publicity-detail/publicity-detail.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";Page({data:{video:"",details:"",netWorkType:!1},onLoad:function(e){var t=this;t.setData({video:e.video,details:e.briefDescription}),wx.getNetworkType({success:function(e){t.setData({netWorkType:e.networkType})}})},onShow:function(){}}); 
 			}); 	require("pages/publicity/publicity-detail/publicity-detail.js");
 		__wxRoute = 'pages/position/position';__wxRouteBegin = true; 	define("pages/position/position.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp();Page({data:{cityList:[],initialList:["A","B","C","D","E","F","G","H","J","K","L","M","N","P","Q","R","S","T","W","X","Y","Z"],hotCityList:["北京"],curCity:"",winHeight:"",toView:""},onLoad:function(){var a=this;wx.getSystemInfo({success:function(t){a.setData({winHeight:t.windowHeight})}}),this.setData({curCity:t.globalData.city.cityName}),this.getHotCity(),this.getAllcity()},getHotCity:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_gethotCityList.action",success:function(i){var e=t.getJsonData(i.data);a.setData({hotCityList:e})}})},getAllcity:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getCityByPinyin.action",success:function(i){var e=t.getJsonData(i.data)[0],s=[];for(var c in e)s.push(e[c]);a.setData({cityList:s})}})},initialtap:function(t){this.setData({toView:t.currentTarget.dataset.init})},citytap:function(a){0==a.currentTarget.dataset.info?(t.globalData.city={cityName:"全国"},this.setData({curCity:"全国"})):(t.globalData.city=a.currentTarget.dataset.info,this.setData({curCity:a.currentTarget.dataset.info.cityName})),wx.navigateBack({beta:1})}}); 
 			}); 	require("pages/position/position.js");
 		__wxRoute = 'pages/about-us/about-us';__wxRouteBegin = true; 	define("pages/about-us/about-us.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a=t.globalData.customizeTabId;Page({data:{styleConfig:t.globalData.styleConfig,longitude:"",latitude:"",markers:[{id:0,latitude:"",longitude:"",width:20,height:20}],auInfo:{},imageArr:[]},onLoad:function(){var i=this;wx.request({url:t.globalData.comUrl+"tabs_getAboutMerchant.action",data:{customizetabId:a["About-Merchant"]},success:function(a){var e=t.getJsonData(a.data);e.detailDescription=t.filterSpecialSymbol(e.detailDescription);for(var d=[e.pic1,e.pic2,e.pic3,e.pic4,e.pic5],o=[],n=0;n<d.length;n++)d[n]&&o.push(d[n]);i.setData({auInfo:e,longitude:e.gdLongitude,latitude:e.gdLatitude,imageArr:o,markers:[{id:0,latitude:e.gdLatitude,longitude:e.gdLongitude,width:20,height:30}]})},fail:function(){t.hint()}})},toPosition:function(){var t=this;wx.openLocation({latitude:Number(t.data.latitude),longitude:Number(t.data.longitude),name:t.data.auInfo.name,address:t.data.auInfo.address,scale:28})}}); 
 			}); 	require("pages/about-us/about-us.js");
 		__wxRoute = 'pages/join/join';__wxRouteBegin = true; 	define("pages/join/join.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var a=!0,t=getApp(),e="",n="";Page({data:{hiddenAgreement:!0,isRead:!1,price:0,branchInfo:{},agreementContent:""},onLoad:function(){var a=this;e=t.globalData.projectInfo,n=t.globalData.customizeTabId,a.getUserInfo(),wx.request({url:t.globalData.comUrl+"tabs_getZXAgreement.action",data:{customizeTabId:n.Member},success:function(e){var n=t.getJsonData(e.data);n.protocolContent=t.filterSpecialSymbol(n.protocolContent),a.setData({agreementContent:n.protocolContent})}})},formSubmit:function(i){if(this.data.price,a){a=!1;var o=/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/,r=/^(\w){6,15}$/;if(""==i.detail.value.branchName)return a=!0,void this.warn("请为您的店铺取一个名字!");if(""==i.detail.value.mainProject)return a=!0,void this.warn("请填入您的主营的项目!");if(""==i.detail.value.name)return a=!0,void this.warn("请填入您的姓名!");if(""==i.detail.value.phone)return a=!0,void this.warn("请输入您的联系方式!");if(""==i.detail.value.email)return a=!0,void this.warn("邮箱不能为空");if(!o.test(i.detail.value.email))return a=!0,void this.warn("邮箱格式有误");if(""==i.detail.value.pwd)return a=!0,void this.warn("请填写密码");if(!r.test(i.detail.value.pwd))return a=!0,void this.warn("密码需由6-15个字母、数字组成");if(!this.data.isRead)return a=!0,void this.warn("请先阅读入驻申请协议");wx.showToast({title:"正在提交...",icon:"loading",duration:1e4,mask:!0});var s={appId:e.appId,applyCustomizeTabId:n.LynxApplyFor_About_Merchant,customizetabId:n.LynxAbout_Merchant,memberId:t.getMemberId(),branchName:i.detail.value.branchName,mainProject:i.detail.value.mainProject,surname:i.detail.value.name,mobilePhone:i.detail.value.phone,email:i.detail.value.email,password:i.detail.value.pwd,shortDescription:i.detail.value.shortDescription},c=this;wx.request({url:t.globalData.comUrl+"member_branchApply.action",data:s,success:function(a){var e=t.getJsonData(a.data);1==e.status&&(0==e.price?wx.showToast({title:"提交成功",icon:"success",duration:2e3,success:function(){wx.navigateBack({delta:1})}}):(c.pay(e.price),c.setData({price:e.price})))},fail:function(){t.hint("提交失败"),wx.hideToast()},complete:function(){a=!0}})}},pay:function(a){var n=this;wx.login({success:function(i){i.code&&wx.request({url:t.globalData.paymentUrl+"/WechatAlipay/MiniPayService2?jsoncallback=?",data:{projectId:e.appId,nonce_str:"lfksf"+Math.round(1e5*Math.random()),memberId:t.getMemberId(),body:"入驻商家",attach:e.appId,out_trade_no:"",total_fee:(100*a).toFixed(0),trade_type:"JSAPI",device_info:"888",code:i.code},success:function(a){if(wx.hideToast(),""!=a.data){var t=n.getJsonData(a.data);wx.requestPayment({timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:"prepay_id="+t.prepay_id,signType:"MD5",paySign:t.sign,success:function(a){wx.showToast({title:"支付成功",icon:"success",duration:2e3,mask:!0}),setTimeout(function(){wx.navigateBack({delta:1})},2e3)},fail:function(a){wx.showModal({title:"支付失败",showCancel:!1})}})}else wx.showModal({title:"支付失败",showCancel:!1})}})}})},getUserInfo:function(){var a=this;wx.request({url:t.globalData.comUrl+"tabs_getMember.action",data:{memberId:t.getMemberId(),customizetabId:n.LynxApplyFor_About_Merchant,checkBranch:1},success:function(e){var n=t.getJsonData(e.data);n.activated?wx.showModal({title:"提示",content:"商家入驻认证成功",showCancel:!1,success:function(a){a.confirm&&wx.navigateBack({delta:1})}}):(1==n.isApply&&wx.showModal({title:"提示",content:"正在申请中...",showCancel:!1,success:function(a){a.confirm&&wx.navigateBack({delta:1})}}),2==n.isApply&&(a.data.branchInfo.branchName=n.branchName,a.data.branchInfo.mainProject=n.mainProject,a.data.branchInfo.shortDescription=n.shortDescription,a.data.branchInfo.surname=n.surname,a.data.branchInfo.mobilePhone=n.mobilePhone,a.data.branchInfo.email=n.email,a.data.branchInfo.password=n.password,a.setData({branchInfo:a.data.branchInfo}),wx.showModal({title:"提示",content:"您已提交过申请，暂未支付",confirmText:"继续支付",cancelText:"重新申请",success:function(t){t.confirm&&a.pay(n.price)}})))},fail:function(){t.hint()}})},showAgreement:function(){this.setData({hiddenAgreement:!this.data.hiddenAgreement})},suretap:function(){this.setData({isRead:!0,hiddenAgreement:!0})},check:function(){this.setData({isRead:!this.data.isRead})},getJsonData:function(a){return JSON.parse(a.substring(1,a.length-1))},warn:function(a){wx.showModal({title:"提示",content:a,showCancel:!1})}}); 
 			}); 	require("pages/join/join.js");
 		__wxRoute = 'pages/query/query';__wxRouteBegin = true; 	define("pages/query/query.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";getApp();Page({data:{},onLoad:function(t){},onShow:function(){},onHide:function(){},formSubmit:function(t){""!=t.detail.value.branchName?""!=t.detail.value.mainProject?""!=t.detail.value.phone?""!=t.detail.value.textCon?""!=t.detail.value.email?(wx.showToast({title:"正在提交...",icon:"loading",duration:2e3,mask:!0}),setTimeout(function(){wx.showToast({title:"提交成功",icon:"success",duration:2e3,mask:!0,success:function(){wx.navigateBack({delta:1})}})},2e3)):this.warn("邮箱不能为空"):this.warn("请输入您的问题描述!"):this.warn("请输入您的联系方式!!"):this.warn("请输入您的年龄!"):this.warn("请输入您的名字!")},warn:function(t){wx.showModal({title:"提示",content:t,showCancel:!1})}}); 
 			}); 	require("pages/query/query.js");
 		__wxRoute = 'pages/seckill/seckill';__wxRouteBegin = true; 	define("pages/seckill/seckill.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp(),a="",i=1,e=1;Page({data:{activityList:[],productList:[],activityInfo:{},navCurIdx:0,isEndLoading:!1,countDownData:{}},onLoad:function(t){var a=this;this.getActivityList(0).then(function(t){a.getProductList(t)})},getActivityList:function(i){var e=this;return wx.showLoading({title:"加载中..."}),new Promise(function(o,n){wx.request({url:t.globalData.comUrl+"activityProduct_groupsList.action",data:{appId:t.globalData.projectInfo.appId,actType:"3"},success:function(n){if(0==n.data.length||0==n.code)return wx.hideLoading(),e.setData({activityList:[],isGroupNull:!0}),!1;for(var r=0;r<n.data.length;r++){var c=n.data[r];n.data[r].begin=c.beginTime.substr(c.beginTime.length-8,5)}clearInterval(a);var s=n.data[i];wx.setStorageSync("groupRemark"+t.globalData.autoId,s.remark);var u=new Date(s.beginTime),d=new Date(s.nowTime),g=parseInt((u-d)/1e3);if(g>0)s.activityStart=!1,e.setData({activityInfo:s,countDownData:e.secondToTime(g)}),a=setInterval(function(){g--,e.setData({countDownData:e.secondToTime(g)}),s.activityTime<1&&(clearInterval(a),e.getActivityList(0).then(function(t){e.getProductList(t)}))},1e3);else{s.activityStart=!0;var p=s.activityTime;e.setData({activityInfo:s,countDownData:e.secondToTime(p)}),a=setInterval(function(){p--,e.setData({countDownData:e.secondToTime(p)}),p<1&&(clearInterval(a),e.setData({navCurIdx:0}),e.getActivityList(e.data.navCurIdx).then(function(t){e.getProductList(t)}))},1e3)}e.setData({activityList:n.data,isGroupNull:!1}),o(n.data[i].groupsId)}})})},secondToTime:function(t){var a=Math.floor(t/3600/24),i=Math.floor(t/3600%24),e=Math.floor(t/60%60),o=Math.floor(t%60);return i<10&&(i="0"+i),e<10&&(e="0"+e),o<10&&(o="0"+o),{day:a,hours:i,minute:e,second:o}},getProductList:function(a){var o=this;wx.request({url:t.globalData.comUrl+"activityProduct_findGroupsProduceList.action",data:{appId:t.globalData.projectInfo.appId,current:i,groupsId:a},success:function(t){wx.hideLoading(),e=t.data.pages;for(var a=0;a<t.data.pageList.length;a++){var i=t.data.pageList[a];t.data.pageList[a].percent=parseInt(i.saleCount/(i.saleCount+i.stock)*100)}o.setData({productList:o.data.productList.concat(t.data.pageList),isEndLoading:!0})}})},navtap:function(t){var a=this,e=t.currentTarget.dataset.index;i=1,a.setData({navCurIdx:e,isEndLoading:!1,productList:[]}),this.getActivityList(e).then(function(t){a.getProductList(t)})},toProdetail:function(t){wx.navigateTo({url:"../product/pro-detail/pro-detail?productId="+t.currentTarget.dataset.pid})},toGroupIntroduce:function(){wx.navigateTo({url:"/pages/group/group-introduce/group-introduce"})},onReachBottom:function(){i<e&&(i++,this.getProductList(this.data.activityInfo.groupsId))}}); 
 			}); 	require("pages/seckill/seckill.js");
 		__wxRoute = 'pages/order/calendar/calendar';__wxRouteBegin = true; 	define("pages/order/calendar/calendar.js", function(require, module, exports, window,document,frames,self,location,navigator,localStorage,history,Caches,screen,alert,confirm,prompt,XMLHttpRequest,WebSocket,Reporter,webkit,WeixinJSCore){ 			
"use strict";var t=getApp();Page({data:{week:["周日","周一","周二","周三","周四","周五","周六"],comeDateInfo:"",leaveDateInfo:"",isSelectEnd:!0,isSelectStart:!0,differDays:0},onShow:function(){this.dateData()},dateData:function(){for(var a=[],e=[],s=[],i=new Date,d=i.getFullYear(),h=(i.getDay(),[]),n=i.getMonth()+1,r=i.getDate(),o=0,f=[1,2,3,4,5,6,7,8,9,10,11,12],D=[],l=n;l<13;l++)D.push(l);for(var c=[d],v=0;v<150/365+2;v++)c.push(d+v+1);for(var I=function(t){return t%4==0&&t%100!=0||t%400==0},g=0;g<c.length;g++){var m=void 0;m=c[g]==d?D:f;for(var u=0;u<m.length;u++){s=[];var k=[31,28+I(c[g]),31,30,31,30,31,31,30,31,30,31],S=[];if(c[g]==d){for(var p=0;p<D.length;p++)S.push(k[m[p]-1]);k=S}else k=[31,28+I(c[g]),31,30,31,30,31,31,30,31,30,31];for(var w=0;w<k[u];w++){var y=void 0;if(!(++o<150))break;var b=w+1;if(b<10&&(b="0"+b),c[g]==d&&m[u]==n){if(w+1>=r&&(y={year:c[g],month:m[u],day:w+1,date:m[u]+"月"+b+"日",start:0,end:0,center:0,re:c[g]+"-"+m[u]+"-"+b},s.push(y),w+1==r)){var E=new Date(c[g],m[u]-1,w+1).getDay();h.push(E)}}else if(y={year:c[g],month:m[u],day:w+1,date:m[u]+"月"+b+"日",selected:0,re:c[g]+"-"+m[u]+"-"+b},s.push(y),0==w){var W=new Date(c[g],m[u]-1,w+1).getDay();h.push(W)}}a.push(s)}}for(var x=0;x<a.length;x++)0!=a[x].length&&e.push(a[x]);a[0].length>1?(a[0][0].start=1,a[0][1].end=1,this.data.comeDateInfo=a[0][0],this.data.leaveDateInfo=a[0][1],this.data.comeDateInfo.week=this.getWeek(this.data.comeDateInfo.re),this.data.leaveDateInfo.week=this.getWeek(this.data.leaveDateInfo.re),this.setData({comeDateInfo:this.data.comeDateInfo,leaveDateInfo:this.data.leaveDateInfo})):(a[0][0].start=1,a[1][0].end=1,this.data.comeDateInfo=a[0][0],this.data.leaveDateInfo=a[1][0],this.data.comeDateInfo.week=this.getWeek(this.data.comeDateInfo.re),this.data.leaveDateInfo.week=this.getWeek(this.data.leaveDateInfo.re),this.setData({comeDateInfo:this.data.comeDateInfo,leaveDateInfo:this.data.leaveDateInfo})),this.setData({date:e,weeks:h,differDays:t.DateDiff(this.data.leaveDateInfo.re,this.data.comeDateInfo.re)})},daytap:function(a){var e=a.currentTarget.dataset.midx,s=a.currentTarget.dataset.didx;if(this.data.isSelectEnd){this.clearCenterData();for(var i=0;i<this.data.date.length;i++){for(var d=this.data.date[i],h=!1,n=0;n<d.length;n++)if(d[n].start&&(this.data.date[i][n].start=0,this.data.date[e][s].start=1,this.setData({isSelectStart:!0}),this.data.comeDateInfo=this.data.date[e][s]),d[n].end){this.data.date[i][n].end=0,this.setData({isSelectEnd:!1}),h=!0;break}if(h)break}this.setData({date:this.data.date})}else if(this.data.isSelectStart&&!this.data.isSelectEnd){for(var r=0;r<this.data.date.length;r++){for(var o=this.data.date[r],f=!1,D=0;D<o.length;D++)if(o[D].start){r>e?(this.data.date[r][D].start=0,this.data.date[e][s].start=1,this.data.comeDateInfo=this.data.date[e][s]):r==e?D>s?(this.data.date[r][D].start=0,this.data.date[e][s].start=1,this.data.comeDateInfo=this.data.date[e][s]):D<s&&(this.data.date[e][s].end=1,this.data.leaveDateInfo=this.data.date[e][s],this.setData({isSelectEnd:!0})):(this.data.date[e][s].end=1,this.data.leaveDateInfo=this.data.date[e][s],this.setData({isSelectEnd:!0})),f=!0;break}if(f)break}if(this.data.isSelectEnd){for(var l=0;l<this.data.date.length;l++)for(var c=this.data.date[l],v=0;v<c.length;v++){var I=this.CompareDate(c[v].re,this.data.comeDateInfo.re),g=this.CompareDate(this.data.leaveDateInfo.re,c[v].re);I&&g&&(this.data.date[l][v].center=1)}this.data.comeDateInfo.week=this.getWeek(this.data.comeDateInfo.re),this.data.leaveDateInfo.week=this.getWeek(this.data.leaveDateInfo.re),this.setData({differDays:t.DateDiff(this.data.leaveDateInfo.re,this.data.comeDateInfo.re),comeDateInfo:this.data.comeDateInfo,leaveDateInfo:this.data.leaveDateInfo})}this.setData({date:this.data.date})}},sure:function(){this.data.isSelectStart&&this.data.isSelectEnd?(wx.setStorageSync("comeDate"+t.globalData.autoId,this.data.comeDateInfo),wx.setStorageSync("leaveDate"+t.globalData.autoId,this.data.leaveDateInfo),wx.navigateBack({beta:1})):t.hint("请选择退房日期")},clearCenterData:function(){for(var t=0;t<this.data.date.length;t++)for(var a=this.data.date[t],e=0;e<a.length;e++)this.data.date[t][e].center=0;this.setData({date:this.data.date})},CompareDate:function(t,a){t=t.replace(/-/g,"/"),a=a.replace(/-/g,"/");var e=new Date(t),s=new Date(a);return e.getTime()>s.getTime()},getWeek:function(t){var a,e=t.split("-");return a=new Date(e[0],parseInt(e[1]-1),e[2]),"星期"+"日一二三四五六".charAt(a.getDay())}}); 
 			}); 	require("pages/order/calendar/calendar.js");
 	